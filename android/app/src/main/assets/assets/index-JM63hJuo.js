(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();function oA(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Hp={exports:{}},nu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NT;function ub(){if(NT)return nu;NT=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,o,a){var u=null;if(a!==void 0&&(u=""+a),o.key!==void 0&&(u=""+o.key),"key"in o){a={};for(var d in o)d!=="key"&&(a[d]=o[d])}else a=o;return o=a.ref,{$$typeof:n,type:i,key:u,ref:o!==void 0?o:null,props:a}}return nu.Fragment=e,nu.jsx=t,nu.jsxs=t,nu}var xT;function cb(){return xT||(xT=1,Hp.exports=ub()),Hp.exports}var O=cb(),Kp={exports:{}},xe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MT;function fb(){if(MT)return xe;MT=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),S=Symbol.iterator;function I(P){return P===null||typeof P!="object"?null:(P=S&&P[S]||P["@@iterator"],typeof P=="function"?P:null)}var L={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},F=Object.assign,V={};function K(P,z,le){this.props=P,this.context=z,this.refs=V,this.updater=le||L}K.prototype.isReactComponent={},K.prototype.setState=function(P,z){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,z,"setState")},K.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function ne(){}ne.prototype=K.prototype;function j(P,z,le){this.props=P,this.context=z,this.refs=V,this.updater=le||L}var oe=j.prototype=new ne;oe.constructor=j,F(oe,K.prototype),oe.isPureReactComponent=!0;var de=Array.isArray;function ue(){}var x={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function N(P,z,le){var ce=le.ref;return{$$typeof:n,type:P,key:z,ref:ce!==void 0?ce:null,props:le}}function D(P,z){return N(P.type,z,P.props)}function k(P){return typeof P=="object"&&P!==null&&P.$$typeof===n}function q(P){var z={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(le){return z[le]})}var M=/\/+/g;function ke(P,z){return typeof P=="object"&&P!==null&&P.key!=null?q(""+P.key):z.toString(36)}function lt(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(ue,ue):(P.status="pending",P.then(function(z){P.status==="pending"&&(P.status="fulfilled",P.value=z)},function(z){P.status==="pending"&&(P.status="rejected",P.reason=z)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function Q(P,z,le,ce,Te){var Ae=typeof P;(Ae==="undefined"||Ae==="boolean")&&(P=null);var Re=!1;if(P===null)Re=!0;else switch(Ae){case"bigint":case"string":case"number":Re=!0;break;case"object":switch(P.$$typeof){case n:case e:Re=!0;break;case _:return Re=P._init,Q(Re(P._payload),z,le,ce,Te)}}if(Re)return Te=Te(P),Re=ce===""?"."+ke(P,0):ce,de(Te)?(le="",Re!=null&&(le=Re.replace(M,"$&/")+"/"),Q(Te,z,le,"",function(Ps){return Ps})):Te!=null&&(k(Te)&&(Te=D(Te,le+(Te.key==null||P&&P.key===Te.key?"":(""+Te.key).replace(M,"$&/")+"/")+Re)),z.push(Te)),1;Re=0;var Ze=ce===""?".":ce+":";if(de(P))for(var je=0;je<P.length;je++)ce=P[je],Ae=Ze+ke(ce,je),Re+=Q(ce,z,le,Ae,Te);else if(je=I(P),typeof je=="function")for(P=je.call(P),je=0;!(ce=P.next()).done;)ce=ce.value,Ae=Ze+ke(ce,je++),Re+=Q(ce,z,le,Ae,Te);else if(Ae==="object"){if(typeof P.then=="function")return Q(lt(P),z,le,ce,Te);throw z=String(P),Error("Objects are not valid as a React child (found: "+(z==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":z)+"). If you meant to render a collection of children, use an array instead.")}return Re}function ee(P,z,le){if(P==null)return P;var ce=[],Te=0;return Q(P,ce,"","",function(Ae){return z.call(le,Ae,Te++)}),ce}function Z(P){if(P._status===-1){var z=P._result;z=z(),z.then(function(le){(P._status===0||P._status===-1)&&(P._status=1,P._result=le)},function(le){(P._status===0||P._status===-1)&&(P._status=2,P._result=le)}),P._status===-1&&(P._status=0,P._result=z)}if(P._status===1)return P._result.default;throw P._result}var he=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)},pe={map:ee,forEach:function(P,z,le){ee(P,function(){z.apply(this,arguments)},le)},count:function(P){var z=0;return ee(P,function(){z++}),z},toArray:function(P){return ee(P,function(z){return z})||[]},only:function(P){if(!k(P))throw Error("React.Children.only expected to receive a single React element child.");return P}};return xe.Activity=T,xe.Children=pe,xe.Component=K,xe.Fragment=t,xe.Profiler=o,xe.PureComponent=j,xe.StrictMode=i,xe.Suspense=m,xe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=x,xe.__COMPILER_RUNTIME={__proto__:null,c:function(P){return x.H.useMemoCache(P)}},xe.cache=function(P){return function(){return P.apply(null,arguments)}},xe.cacheSignal=function(){return null},xe.cloneElement=function(P,z,le){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var ce=F({},P.props),Te=P.key;if(z!=null)for(Ae in z.key!==void 0&&(Te=""+z.key),z)!R.call(z,Ae)||Ae==="key"||Ae==="__self"||Ae==="__source"||Ae==="ref"&&z.ref===void 0||(ce[Ae]=z[Ae]);var Ae=arguments.length-2;if(Ae===1)ce.children=le;else if(1<Ae){for(var Re=Array(Ae),Ze=0;Ze<Ae;Ze++)Re[Ze]=arguments[Ze+2];ce.children=Re}return N(P.type,Te,ce)},xe.createContext=function(P){return P={$$typeof:u,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:a,_context:P},P},xe.createElement=function(P,z,le){var ce,Te={},Ae=null;if(z!=null)for(ce in z.key!==void 0&&(Ae=""+z.key),z)R.call(z,ce)&&ce!=="key"&&ce!=="__self"&&ce!=="__source"&&(Te[ce]=z[ce]);var Re=arguments.length-2;if(Re===1)Te.children=le;else if(1<Re){for(var Ze=Array(Re),je=0;je<Re;je++)Ze[je]=arguments[je+2];Te.children=Ze}if(P&&P.defaultProps)for(ce in Re=P.defaultProps,Re)Te[ce]===void 0&&(Te[ce]=Re[ce]);return N(P,Ae,Te)},xe.createRef=function(){return{current:null}},xe.forwardRef=function(P){return{$$typeof:d,render:P}},xe.isValidElement=k,xe.lazy=function(P){return{$$typeof:_,_payload:{_status:-1,_result:P},_init:Z}},xe.memo=function(P,z){return{$$typeof:h,type:P,compare:z===void 0?null:z}},xe.startTransition=function(P){var z=x.T,le={};x.T=le;try{var ce=P(),Te=x.S;Te!==null&&Te(le,ce),typeof ce=="object"&&ce!==null&&typeof ce.then=="function"&&ce.then(ue,he)}catch(Ae){he(Ae)}finally{z!==null&&le.types!==null&&(z.types=le.types),x.T=z}},xe.unstable_useCacheRefresh=function(){return x.H.useCacheRefresh()},xe.use=function(P){return x.H.use(P)},xe.useActionState=function(P,z,le){return x.H.useActionState(P,z,le)},xe.useCallback=function(P,z){return x.H.useCallback(P,z)},xe.useContext=function(P){return x.H.useContext(P)},xe.useDebugValue=function(){},xe.useDeferredValue=function(P,z){return x.H.useDeferredValue(P,z)},xe.useEffect=function(P,z){return x.H.useEffect(P,z)},xe.useEffectEvent=function(P){return x.H.useEffectEvent(P)},xe.useId=function(){return x.H.useId()},xe.useImperativeHandle=function(P,z,le){return x.H.useImperativeHandle(P,z,le)},xe.useInsertionEffect=function(P,z){return x.H.useInsertionEffect(P,z)},xe.useLayoutEffect=function(P,z){return x.H.useLayoutEffect(P,z)},xe.useMemo=function(P,z){return x.H.useMemo(P,z)},xe.useOptimistic=function(P,z){return x.H.useOptimistic(P,z)},xe.useReducer=function(P,z,le){return x.H.useReducer(P,z,le)},xe.useRef=function(P){return x.H.useRef(P)},xe.useState=function(P){return x.H.useState(P)},xe.useSyncExternalStore=function(P,z,le){return x.H.useSyncExternalStore(P,z,le)},xe.useTransition=function(){return x.H.useTransition()},xe.version="19.2.3",xe}var DT;function eg(){return DT||(DT=1,Kp.exports=fb()),Kp.exports}var He=eg();const db=oA(He);var Yp={exports:{}},iu={},Jp={exports:{}},$p={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PT;function hb(){return PT||(PT=1,(function(n){function e(Q,ee){var Z=Q.length;Q.push(ee);e:for(;0<Z;){var he=Z-1>>>1,pe=Q[he];if(0<o(pe,ee))Q[he]=ee,Q[Z]=pe,Z=he;else break e}}function t(Q){return Q.length===0?null:Q[0]}function i(Q){if(Q.length===0)return null;var ee=Q[0],Z=Q.pop();if(Z!==ee){Q[0]=Z;e:for(var he=0,pe=Q.length,P=pe>>>1;he<P;){var z=2*(he+1)-1,le=Q[z],ce=z+1,Te=Q[ce];if(0>o(le,Z))ce<pe&&0>o(Te,le)?(Q[he]=Te,Q[ce]=Z,he=ce):(Q[he]=le,Q[z]=Z,he=z);else if(ce<pe&&0>o(Te,Z))Q[he]=Te,Q[ce]=Z,he=ce;else break e}}return ee}function o(Q,ee){var Z=Q.sortIndex-ee.sortIndex;return Z!==0?Z:Q.id-ee.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var u=Date,d=u.now();n.unstable_now=function(){return u.now()-d}}var m=[],h=[],_=1,T=null,S=3,I=!1,L=!1,F=!1,V=!1,K=typeof setTimeout=="function"?setTimeout:null,ne=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;function oe(Q){for(var ee=t(h);ee!==null;){if(ee.callback===null)i(h);else if(ee.startTime<=Q)i(h),ee.sortIndex=ee.expirationTime,e(m,ee);else break;ee=t(h)}}function de(Q){if(F=!1,oe(Q),!L)if(t(m)!==null)L=!0,ue||(ue=!0,q());else{var ee=t(h);ee!==null&&lt(de,ee.startTime-Q)}}var ue=!1,x=-1,R=5,N=-1;function D(){return V?!0:!(n.unstable_now()-N<R)}function k(){if(V=!1,ue){var Q=n.unstable_now();N=Q;var ee=!0;try{e:{L=!1,F&&(F=!1,ne(x),x=-1),I=!0;var Z=S;try{t:{for(oe(Q),T=t(m);T!==null&&!(T.expirationTime>Q&&D());){var he=T.callback;if(typeof he=="function"){T.callback=null,S=T.priorityLevel;var pe=he(T.expirationTime<=Q);if(Q=n.unstable_now(),typeof pe=="function"){T.callback=pe,oe(Q),ee=!0;break t}T===t(m)&&i(m),oe(Q)}else i(m);T=t(m)}if(T!==null)ee=!0;else{var P=t(h);P!==null&&lt(de,P.startTime-Q),ee=!1}}break e}finally{T=null,S=Z,I=!1}ee=void 0}}finally{ee?q():ue=!1}}}var q;if(typeof j=="function")q=function(){j(k)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,ke=M.port2;M.port1.onmessage=k,q=function(){ke.postMessage(null)}}else q=function(){K(k,0)};function lt(Q,ee){x=K(function(){Q(n.unstable_now())},ee)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Q){Q.callback=null},n.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<Q?Math.floor(1e3/Q):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_next=function(Q){switch(S){case 1:case 2:case 3:var ee=3;break;default:ee=S}var Z=S;S=ee;try{return Q()}finally{S=Z}},n.unstable_requestPaint=function(){V=!0},n.unstable_runWithPriority=function(Q,ee){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var Z=S;S=Q;try{return ee()}finally{S=Z}},n.unstable_scheduleCallback=function(Q,ee,Z){var he=n.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?he+Z:he):Z=he,Q){case 1:var pe=-1;break;case 2:pe=250;break;case 5:pe=1073741823;break;case 4:pe=1e4;break;default:pe=5e3}return pe=Z+pe,Q={id:_++,callback:ee,priorityLevel:Q,startTime:Z,expirationTime:pe,sortIndex:-1},Z>he?(Q.sortIndex=Z,e(h,Q),t(m)===null&&Q===t(h)&&(F?(ne(x),x=-1):F=!0,lt(de,Z-he))):(Q.sortIndex=pe,e(m,Q),L||I||(L=!0,ue||(ue=!0,q()))),Q},n.unstable_shouldYield=D,n.unstable_wrapCallback=function(Q){var ee=S;return function(){var Z=S;S=ee;try{return Q.apply(this,arguments)}finally{S=Z}}}})($p)),$p}var kT;function pb(){return kT||(kT=1,Jp.exports=hb()),Jp.exports}var Qp={exports:{}},en={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VT;function mb(){if(VT)return en;VT=1;var n=eg();function e(m){var h="https://react.dev/errors/"+m;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)h+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+m+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function a(m,h,_){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:T==null?null:""+T,children:m,containerInfo:h,implementation:_}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(m,h){if(m==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return en.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,en.createPortal=function(m,h){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return a(m,h,null,_)},en.flushSync=function(m){var h=u.T,_=i.p;try{if(u.T=null,i.p=2,m)return m()}finally{u.T=h,i.p=_,i.d.f()}},en.preconnect=function(m,h){typeof m=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,i.d.C(m,h))},en.prefetchDNS=function(m){typeof m=="string"&&i.d.D(m)},en.preinit=function(m,h){if(typeof m=="string"&&h&&typeof h.as=="string"){var _=h.as,T=d(_,h.crossOrigin),S=typeof h.integrity=="string"?h.integrity:void 0,I=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;_==="style"?i.d.S(m,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:T,integrity:S,fetchPriority:I}):_==="script"&&i.d.X(m,{crossOrigin:T,integrity:S,fetchPriority:I,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},en.preinitModule=function(m,h){if(typeof m=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var _=d(h.as,h.crossOrigin);i.d.M(m,{crossOrigin:_,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&i.d.M(m)},en.preload=function(m,h){if(typeof m=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var _=h.as,T=d(_,h.crossOrigin);i.d.L(m,_,{crossOrigin:T,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},en.preloadModule=function(m,h){if(typeof m=="string")if(h){var _=d(h.as,h.crossOrigin);i.d.m(m,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:_,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else i.d.m(m)},en.requestFormReset=function(m){i.d.r(m)},en.unstable_batchedUpdates=function(m,h){return m(h)},en.useFormState=function(m,h,_){return u.H.useFormState(m,h,_)},en.useFormStatus=function(){return u.H.useHostTransitionStatus()},en.version="19.2.3",en}var UT;function gb(){if(UT)return Qp.exports;UT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Qp.exports=mb(),Qp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LT;function yb(){if(LT)return iu;LT=1;var n=pb(),e=eg(),t=gb();function i(r){var s="https://react.dev/errors/"+r;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function a(r){var s=r,l=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(l=s.return),r=s.return;while(r)}return s.tag===3?l:null}function u(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function d(r){if(r.tag===31){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function m(r){if(a(r)!==r)throw Error(i(188))}function h(r){var s=r.alternate;if(!s){if(s=a(r),s===null)throw Error(i(188));return s!==r?null:r}for(var l=r,c=s;;){var y=l.return;if(y===null)break;var v=y.alternate;if(v===null){if(c=y.return,c!==null){l=c;continue}break}if(y.child===v.child){for(v=y.child;v;){if(v===l)return m(y),r;if(v===c)return m(y),s;v=v.sibling}throw Error(i(188))}if(l.return!==c.return)l=y,c=v;else{for(var A=!1,w=y.child;w;){if(w===l){A=!0,l=y,c=v;break}if(w===c){A=!0,c=y,l=v;break}w=w.sibling}if(!A){for(w=v.child;w;){if(w===l){A=!0,l=v,c=y;break}if(w===c){A=!0,c=v,l=y;break}w=w.sibling}if(!A)throw Error(i(189))}}if(l.alternate!==c)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?r:s}function _(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r;for(r=r.child;r!==null;){if(s=_(r),s!==null)return s;r=r.sibling}return null}var T=Object.assign,S=Symbol.for("react.element"),I=Symbol.for("react.transitional.element"),L=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),V=Symbol.for("react.strict_mode"),K=Symbol.for("react.profiler"),ne=Symbol.for("react.consumer"),j=Symbol.for("react.context"),oe=Symbol.for("react.forward_ref"),de=Symbol.for("react.suspense"),ue=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),D=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function q(r){return r===null||typeof r!="object"?null:(r=k&&r[k]||r["@@iterator"],typeof r=="function"?r:null)}var M=Symbol.for("react.client.reference");function ke(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===M?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case F:return"Fragment";case K:return"Profiler";case V:return"StrictMode";case de:return"Suspense";case ue:return"SuspenseList";case N:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case L:return"Portal";case j:return r.displayName||"Context";case ne:return(r._context.displayName||"Context")+".Consumer";case oe:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case x:return s=r.displayName||null,s!==null?s:ke(r.type)||"Memo";case R:s=r._payload,r=r._init;try{return ke(r(s))}catch{}}return null}var lt=Array.isArray,Q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z={pending:!1,data:null,method:null,action:null},he=[],pe=-1;function P(r){return{current:r}}function z(r){0>pe||(r.current=he[pe],he[pe]=null,pe--)}function le(r,s){pe++,he[pe]=r.current,r.current=s}var ce=P(null),Te=P(null),Ae=P(null),Re=P(null);function Ze(r,s){switch(le(Ae,s),le(Te,r),le(ce,null),s.nodeType){case 9:case 11:r=(r=s.documentElement)&&(r=r.namespaceURI)?Zv(r):0;break;default:if(r=s.tagName,s=s.namespaceURI)s=Zv(s),r=jv(s,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}z(ce),le(ce,r)}function je(){z(ce),z(Te),z(Ae)}function Ps(r){r.memoizedState!==null&&le(Re,r);var s=ce.current,l=jv(s,r.type);s!==l&&(le(Te,r),le(ce,l))}function No(r){Te.current===r&&(z(ce),z(Te)),Re.current===r&&(z(Re),Zl._currentValue=Z)}var xo,Mo;function vi(r){if(xo===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);xo=s&&s[1]||"",Mo=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+xo+r+Mo}var Za=!1;function ks(r,s){if(!r||Za)return"";Za=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(s){var se=function(){throw Error()};if(Object.defineProperty(se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(se,[])}catch(W){var $=W}Reflect.construct(r,[],se)}else{try{se.call()}catch(W){$=W}r.call(se.prototype)}}else{try{throw Error()}catch(W){$=W}(se=r())&&typeof se.catch=="function"&&se.catch(function(){})}}catch(W){if(W&&$&&typeof W.stack=="string")return[W.stack,$.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=c.DetermineComponentFrameRoot(),A=v[0],w=v[1];if(A&&w){var U=A.split(`
`),J=w.split(`
`);for(y=c=0;c<U.length&&!U[c].includes("DetermineComponentFrameRoot");)c++;for(;y<J.length&&!J[y].includes("DetermineComponentFrameRoot");)y++;if(c===U.length||y===J.length)for(c=U.length-1,y=J.length-1;1<=c&&0<=y&&U[c]!==J[y];)y--;for(;1<=c&&0<=y;c--,y--)if(U[c]!==J[y]){if(c!==1||y!==1)do if(c--,y--,0>y||U[c]!==J[y]){var te=`
`+U[c].replace(" at new "," at ");return r.displayName&&te.includes("<anonymous>")&&(te=te.replace("<anonymous>",r.displayName)),te}while(1<=c&&0<=y);break}}}finally{Za=!1,Error.prepareStackTrace=l}return(l=r?r.displayName||r.name:"")?vi(l):""}function ja(r,s){switch(r.tag){case 26:case 27:case 5:return vi(r.type);case 16:return vi("Lazy");case 13:return r.child!==s&&s!==null?vi("Suspense Fallback"):vi("Suspense");case 19:return vi("SuspenseList");case 0:case 15:return ks(r.type,!1);case 11:return ks(r.type.render,!1);case 1:return ks(r.type,!0);case 31:return vi("Activity");default:return""}}function el(r){try{var s="",l=null;do s+=ja(r,l),l=r,r=r.return;while(r);return s}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var Ct=Object.prototype.hasOwnProperty,Lt=n.unstable_scheduleCallback,Ur=n.unstable_cancelCallback,Yd=n.unstable_shouldYield,Bu=n.unstable_requestPaint,ln=n.unstable_now,Vs=n.unstable_getCurrentPriorityLevel,tl=n.unstable_ImmediatePriority,nl=n.unstable_UserBlockingPriority,Lr=n.unstable_NormalPriority,Jd=n.unstable_LowPriority,zu=n.unstable_IdlePriority,Hu=n.log,Ku=n.unstable_setDisableYieldValue,Zn=null,Kt=null;function Vn(r){if(typeof Hu=="function"&&Ku(r),Kt&&typeof Kt.setStrictMode=="function")try{Kt.setStrictMode(Zn,r)}catch{}}var _t=Math.clz32?Math.clz32:Ju,Yu=Math.log,Do=Math.LN2;function Ju(r){return r>>>=0,r===0?32:31-(Yu(r)/Do|0)|0}var Ti=256,Us=262144,It=4194304;function Ei(r){var s=r&42;if(s!==0)return s;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Si(r,s,l){var c=r.pendingLanes;if(c===0)return 0;var y=0,v=r.suspendedLanes,A=r.pingedLanes;r=r.warmLanes;var w=c&134217727;return w!==0?(c=w&~v,c!==0?y=Ei(c):(A&=w,A!==0?y=Ei(A):l||(l=w&~r,l!==0&&(y=Ei(l))))):(w=c&~v,w!==0?y=Ei(w):A!==0?y=Ei(A):l||(l=c&~r,l!==0&&(y=Ei(l)))),y===0?0:s!==0&&s!==y&&(s&v)===0&&(v=y&-y,l=s&-s,v>=l||v===32&&(l&4194048)!==0)?s:y}function jn(r,s){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&s)===0}function $d(r,s){switch(r){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $u(){var r=It;return It<<=1,(It&62914560)===0&&(It=4194304),r}function Ai(r){for(var s=[],l=0;31>l;l++)s.push(r);return s}function Ls(r,s){r.pendingLanes|=s,s!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Qd(r,s,l,c,y,v){var A=r.pendingLanes;r.pendingLanes=l,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=l,r.entangledLanes&=l,r.errorRecoveryDisabledLanes&=l,r.shellSuspendCounter=0;var w=r.entanglements,U=r.expirationTimes,J=r.hiddenUpdates;for(l=A&~l;0<l;){var te=31-_t(l),se=1<<te;w[te]=0,U[te]=-1;var $=J[te];if($!==null)for(J[te]=null,te=0;te<$.length;te++){var W=$[te];W!==null&&(W.lane&=-536870913)}l&=~se}c!==0&&Os(r,c,0),v!==0&&y===0&&r.tag!==0&&(r.suspendedLanes|=v&~(A&~s))}function Os(r,s,l){r.pendingLanes|=s,r.suspendedLanes&=~s;var c=31-_t(s);r.entangledLanes|=s,r.entanglements[c]=r.entanglements[c]|1073741824|l&261930}function il(r,s){var l=r.entangledLanes|=s;for(r=r.entanglements;l;){var c=31-_t(l),y=1<<c;y&s|r[c]&s&&(r[c]|=s),l&=~y}}function rl(r,s){var l=s&-s;return l=(l&42)!==0?1:Fs(l),(l&(r.suspendedLanes|s))!==0?0:l}function Fs(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function er(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function Qu(){var r=ee.p;return r!==0?r:(r=window.event,r===void 0?32:ST(r.type))}function ei(r,s){var l=ee.p;try{return ee.p=r,s()}finally{ee.p=l}}var ti=Math.random().toString(36).slice(2),wt="__reactFiber$"+ti,Gt="__reactProps$"+ti,Ci="__reactContainer$"+ti,Po="__reactEvents$"+ti,Xd="__reactListeners$"+ti,Xu="__reactHandles$"+ti,Wu="__reactResources$"+ti,Ii="__reactMarker$"+ti;function ko(r){delete r[wt],delete r[Gt],delete r[Po],delete r[Xd],delete r[Xu]}function wi(r){var s=r[wt];if(s)return s;for(var l=r.parentNode;l;){if(s=l[Ci]||l[wt]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(r=oT(r);r!==null;){if(l=r[wt])return l;r=oT(r)}return s}r=l,l=r.parentNode}return null}function Un(r){if(r=r[wt]||r[Ci]){var s=r.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return r}return null}function In(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r.stateNode;throw Error(i(33))}function Ri(r){var s=r[Wu];return s||(s=r[Wu]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Rt(r){r[Ii]=!0}var sl=new Set,ol={};function bi(r,s){Ni(r,s),Ni(r+"Capture",s)}function Ni(r,s){for(ol[r]=s,r=0;r<s.length;r++)sl.add(s[r])}var al=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ll={},ul={};function Zu(r){return Ct.call(ul,r)?!0:Ct.call(ll,r)?!1:al.test(r)?ul[r]=!0:(ll[r]=!0,!1)}function Vo(r,s,l){if(Zu(s))if(l===null)r.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":r.removeAttribute(s);return;case"boolean":var c=s.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){r.removeAttribute(s);return}}r.setAttribute(s,""+l)}}function wn(r,s,l){if(l===null)r.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(s);return}r.setAttribute(s,""+l)}}function bt(r,s,l,c){if(c===null)r.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(l);return}r.setAttributeNS(s,l,""+c)}}function qt(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Or(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function cl(r,s,l){var c=Object.getOwnPropertyDescriptor(r.constructor.prototype,s);if(!r.hasOwnProperty(s)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var y=c.get,v=c.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return y.call(this)},set:function(A){l=""+A,v.call(this,A)}}),Object.defineProperty(r,s,{enumerable:c.enumerable}),{getValue:function(){return l},setValue:function(A){l=""+A},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function et(r){if(!r._valueTracker){var s=Or(r)?"checked":"value";r._valueTracker=cl(r,s,""+r[s])}}function Gs(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var l=s.getValue(),c="";return r&&(c=Or(r)?r.checked?"true":"false":r.value),r=c,r!==l?(s.setValue(r),!0):!1}function xi(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var qs=/[\n"\\]/g;function pn(r){return r.replace(qs,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Uo(r,s,l,c,y,v,A,w){r.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?r.type=A:r.removeAttribute("type"),s!=null?A==="number"?(s===0&&r.value===""||r.value!=s)&&(r.value=""+qt(s)):r.value!==""+qt(s)&&(r.value=""+qt(s)):A!=="submit"&&A!=="reset"||r.removeAttribute("value"),s!=null?fl(r,A,qt(s)):l!=null?fl(r,A,qt(l)):c!=null&&r.removeAttribute("value"),y==null&&v!=null&&(r.defaultChecked=!!v),y!=null&&(r.checked=y&&typeof y!="function"&&typeof y!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?r.name=""+qt(w):r.removeAttribute("name")}function ju(r,s,l,c,y,v,A,w){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(r.type=v),s!=null||l!=null){if(!(v!=="submit"&&v!=="reset"||s!=null)){et(r);return}l=l!=null?""+qt(l):"",s=s!=null?""+qt(s):l,w||s===r.value||(r.value=s),r.defaultValue=s}c=c??y,c=typeof c!="function"&&typeof c!="symbol"&&!!c,r.checked=w?r.checked:!!c,r.defaultChecked=!!c,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(r.name=A),et(r)}function fl(r,s,l){s==="number"&&xi(r.ownerDocument)===r||r.defaultValue===""+l||(r.defaultValue=""+l)}function Fr(r,s,l,c){if(r=r.options,s){s={};for(var y=0;y<l.length;y++)s["$"+l[y]]=!0;for(l=0;l<r.length;l++)y=s.hasOwnProperty("$"+r[l].value),r[l].selected!==y&&(r[l].selected=y),y&&c&&(r[l].defaultSelected=!0)}else{for(l=""+qt(l),s=null,y=0;y<r.length;y++){if(r[y].value===l){r[y].selected=!0,c&&(r[y].defaultSelected=!0);return}s!==null||r[y].disabled||(s=r[y])}s!==null&&(s.selected=!0)}}function ec(r,s,l){if(s!=null&&(s=""+qt(s),s!==r.value&&(r.value=s),l==null)){r.defaultValue!==s&&(r.defaultValue=s);return}r.defaultValue=l!=null?""+qt(l):""}function Gr(r,s,l,c){if(s==null){if(c!=null){if(l!=null)throw Error(i(92));if(lt(c)){if(1<c.length)throw Error(i(93));c=c[0]}l=c}l==null&&(l=""),s=l}l=qt(s),r.defaultValue=l,c=r.textContent,c===l&&c!==""&&c!==null&&(r.value=c),et(r)}function mn(r,s){if(s){var l=r.firstChild;if(l&&l===r.lastChild&&l.nodeType===3){l.nodeValue=s;return}}r.textContent=s}var tc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function dl(r,s,l){var c=s.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?c?r.setProperty(s,""):s==="float"?r.cssFloat="":r[s]="":c?r.setProperty(s,l):typeof l!="number"||l===0||tc.has(s)?s==="float"?r.cssFloat=l:r[s]=(""+l).trim():r[s]=l+"px"}function hl(r,s,l){if(s!=null&&typeof s!="object")throw Error(i(62));if(r=r.style,l!=null){for(var c in l)!l.hasOwnProperty(c)||s!=null&&s.hasOwnProperty(c)||(c.indexOf("--")===0?r.setProperty(c,""):c==="float"?r.cssFloat="":r[c]="");for(var y in s)c=s[y],s.hasOwnProperty(y)&&l[y]!==c&&dl(r,y,c)}else for(var v in s)s.hasOwnProperty(v)&&dl(r,v,s[v])}function Lo(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),qr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Oo(r){return qr.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function ni(){}var pl=null;function Ln(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Br=null,Mi=null;function Bs(r){var s=Un(r);if(s&&(r=s.stateNode)){var l=r[Gt]||null;e:switch(r=s.stateNode,s.type){case"input":if(Uo(r,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),s=l.name,l.type==="radio"&&s!=null){for(l=r;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+pn(""+s)+'"][type="radio"]'),s=0;s<l.length;s++){var c=l[s];if(c!==r&&c.form===r.form){var y=c[Gt]||null;if(!y)throw Error(i(90));Uo(c,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(s=0;s<l.length;s++)c=l[s],c.form===r.form&&Gs(c)}break e;case"textarea":ec(r,l.value,l.defaultValue);break e;case"select":s=l.value,s!=null&&Fr(r,!!l.multiple,s,!1)}}}var Fo=!1;function zr(r,s,l){if(Fo)return r(s,l);Fo=!0;try{var c=r(s);return c}finally{if(Fo=!1,(Br!==null||Mi!==null)&&(Qc(),Br&&(s=Br,r=Mi,Mi=Br=null,Bs(s),r)))for(s=0;s<r.length;s++)Bs(r[s])}}function ii(r,s){var l=r.stateNode;if(l===null)return null;var c=l[Gt]||null;if(c===null)return null;l=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(r=r.type,c=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!c;break e;default:r=!1}if(r)return null;if(l&&typeof l!="function")throw Error(i(231,s,typeof l));return l}var On=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zs=!1;if(On)try{var it={};Object.defineProperty(it,"passive",{get:function(){zs=!0}}),window.addEventListener("test",it,it),window.removeEventListener("test",it,it)}catch{zs=!1}var Di=null,ml=null,Hs=null;function gl(){if(Hs)return Hs;var r,s=ml,l=s.length,c,y="value"in Di?Di.value:Di.textContent,v=y.length;for(r=0;r<l&&s[r]===y[r];r++);var A=l-r;for(c=1;c<=A&&s[l-c]===y[v-c];c++);return Hs=y.slice(r,1<c?1-c:void 0)}function Ks(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function tr(){return!0}function ri(){return!1}function Yt(r){function s(l,c,y,v,A){this._reactName=l,this._targetInst=y,this.type=c,this.nativeEvent=v,this.target=A,this.currentTarget=null;for(var w in r)r.hasOwnProperty(w)&&(l=r[w],this[w]=l?l(v):v[w]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?tr:ri,this.isPropagationStopped=ri,this}return T(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=tr)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=tr)},persist:function(){},isPersistent:tr}),s}var nr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pi=Yt(nr),Hr=T({},nr,{view:0,detail:0}),yl=Yt(Hr),Kr,Go,ki,qo=T({},Hr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yr,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==ki&&(ki&&r.type==="mousemove"?(Kr=r.screenX-ki.screenX,Go=r.screenY-ki.screenY):Go=Kr=0,ki=r),Kr)},movementY:function(r){return"movementY"in r?r.movementY:Go}}),_l=Yt(qo),Ys=T({},qo,{dataTransfer:0}),ic=Yt(Ys),rc=T({},Hr,{relatedTarget:0}),Js=Yt(rc),vl=T({},nr,{animationName:0,elapsedTime:0,pseudoElement:0}),sc=Yt(vl),Bo=T({},nr,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),oc=Yt(Bo),ac=T({},nr,{data:0}),Vi=Yt(ac),lc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},uc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fc(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=cc[r])?!!s[r]:!1}function Yr(){return fc}var un=T({},Hr,{key:function(r){if(r.key){var s=lc[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=Ks(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?uc[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yr,charCode:function(r){return r.type==="keypress"?Ks(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Ks(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),dc=Yt(un),hc=T({},qo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ir=Yt(hc),g=T({},Hr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yr}),E=Yt(g),C=T({},nr,{propertyName:0,elapsedTime:0,pseudoElement:0}),b=Yt(C),H=T({},qo,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),X=Yt(H),fe=T({},nr,{newState:0,oldState:0}),De=Yt(fe),vt=[9,13,27,32],Qe=On&&"CompositionEvent"in window,ht=null;On&&"documentMode"in document&&(ht=document.documentMode);var Fn=On&&"TextEvent"in window&&!ht,Ui=On&&(!Qe||ht&&8<ht&&11>=ht),si=" ",oi=!1;function $s(r,s){switch(r){case"keyup":return vt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zo(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Ho=!1;function Pw(r,s){switch(r){case"compositionend":return zo(s);case"keypress":return s.which!==32?null:(oi=!0,si);case"textInput":return r=s.data,r===si&&oi?null:r;default:return null}}function kw(r,s){if(Ho)return r==="compositionend"||!Qe&&$s(r,s)?(r=gl(),Hs=ml=Di=null,Ho=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Ui&&s.locale!=="ko"?null:s.data;default:return null}}var Vw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function uy(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!Vw[r.type]:s==="textarea"}function cy(r,s,l,c){Br?Mi?Mi.push(c):Mi=[c]:Br=c,s=nf(s,"onChange"),0<s.length&&(l=new Pi("onChange","change",null,l,c),r.push({event:l,listeners:s}))}var Tl=null,El=null;function Uw(r){Yv(r,0)}function pc(r){var s=In(r);if(Gs(s))return r}function fy(r,s){if(r==="change")return s}var dy=!1;if(On){var Wd;if(On){var Zd="oninput"in document;if(!Zd){var hy=document.createElement("div");hy.setAttribute("oninput","return;"),Zd=typeof hy.oninput=="function"}Wd=Zd}else Wd=!1;dy=Wd&&(!document.documentMode||9<document.documentMode)}function py(){Tl&&(Tl.detachEvent("onpropertychange",my),El=Tl=null)}function my(r){if(r.propertyName==="value"&&pc(El)){var s=[];cy(s,El,r,Ln(r)),zr(Uw,s)}}function Lw(r,s,l){r==="focusin"?(py(),Tl=s,El=l,Tl.attachEvent("onpropertychange",my)):r==="focusout"&&py()}function Ow(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return pc(El)}function Fw(r,s){if(r==="click")return pc(s)}function Gw(r,s){if(r==="input"||r==="change")return pc(s)}function qw(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var Rn=typeof Object.is=="function"?Object.is:qw;function Sl(r,s){if(Rn(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var l=Object.keys(r),c=Object.keys(s);if(l.length!==c.length)return!1;for(c=0;c<l.length;c++){var y=l[c];if(!Ct.call(s,y)||!Rn(r[y],s[y]))return!1}return!0}function gy(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function yy(r,s){var l=gy(r);r=0;for(var c;l;){if(l.nodeType===3){if(c=r+l.textContent.length,r<=s&&c>=s)return{node:l,offset:s-r};r=c}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=gy(l)}}function _y(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?_y(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function vy(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var s=xi(r.document);s instanceof r.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)r=s.contentWindow;else break;s=xi(r.document)}return s}function jd(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}var Bw=On&&"documentMode"in document&&11>=document.documentMode,Ko=null,eh=null,Al=null,th=!1;function Ty(r,s,l){var c=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;th||Ko==null||Ko!==xi(c)||(c=Ko,"selectionStart"in c&&jd(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Al&&Sl(Al,c)||(Al=c,c=nf(eh,"onSelect"),0<c.length&&(s=new Pi("onSelect","select",null,s,l),r.push({event:s,listeners:c}),s.target=Ko)))}function Qs(r,s){var l={};return l[r.toLowerCase()]=s.toLowerCase(),l["Webkit"+r]="webkit"+s,l["Moz"+r]="moz"+s,l}var Yo={animationend:Qs("Animation","AnimationEnd"),animationiteration:Qs("Animation","AnimationIteration"),animationstart:Qs("Animation","AnimationStart"),transitionrun:Qs("Transition","TransitionRun"),transitionstart:Qs("Transition","TransitionStart"),transitioncancel:Qs("Transition","TransitionCancel"),transitionend:Qs("Transition","TransitionEnd")},nh={},Ey={};On&&(Ey=document.createElement("div").style,"AnimationEvent"in window||(delete Yo.animationend.animation,delete Yo.animationiteration.animation,delete Yo.animationstart.animation),"TransitionEvent"in window||delete Yo.transitionend.transition);function Xs(r){if(nh[r])return nh[r];if(!Yo[r])return r;var s=Yo[r],l;for(l in s)if(s.hasOwnProperty(l)&&l in Ey)return nh[r]=s[l];return r}var Sy=Xs("animationend"),Ay=Xs("animationiteration"),Cy=Xs("animationstart"),zw=Xs("transitionrun"),Hw=Xs("transitionstart"),Kw=Xs("transitioncancel"),Iy=Xs("transitionend"),wy=new Map,ih="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ih.push("scrollEnd");function li(r,s){wy.set(r,s),bi(s,[r])}var mc=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},Gn=[],Jo=0,rh=0;function gc(){for(var r=Jo,s=rh=Jo=0;s<r;){var l=Gn[s];Gn[s++]=null;var c=Gn[s];Gn[s++]=null;var y=Gn[s];Gn[s++]=null;var v=Gn[s];if(Gn[s++]=null,c!==null&&y!==null){var A=c.pending;A===null?y.next=y:(y.next=A.next,A.next=y),c.pending=y}v!==0&&Ry(l,y,v)}}function yc(r,s,l,c){Gn[Jo++]=r,Gn[Jo++]=s,Gn[Jo++]=l,Gn[Jo++]=c,rh|=c,r.lanes|=c,r=r.alternate,r!==null&&(r.lanes|=c)}function sh(r,s,l,c){return yc(r,s,l,c),_c(r)}function Ws(r,s){return yc(r,null,null,s),_c(r)}function Ry(r,s,l){r.lanes|=l;var c=r.alternate;c!==null&&(c.lanes|=l);for(var y=!1,v=r.return;v!==null;)v.childLanes|=l,c=v.alternate,c!==null&&(c.childLanes|=l),v.tag===22&&(r=v.stateNode,r===null||r._visibility&1||(y=!0)),r=v,v=v.return;return r.tag===3?(v=r.stateNode,y&&s!==null&&(y=31-_t(l),r=v.hiddenUpdates,c=r[y],c===null?r[y]=[s]:c.push(s),s.lane=l|536870912),v):null}function _c(r){if(50<Kl)throw Kl=0,pp=null,Error(i(185));for(var s=r.return;s!==null;)r=s,s=r.return;return r.tag===3?r.stateNode:null}var $o={};function Yw(r,s,l,c){this.tag=r,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bn(r,s,l,c){return new Yw(r,s,l,c)}function oh(r){return r=r.prototype,!(!r||!r.isReactComponent)}function rr(r,s){var l=r.alternate;return l===null?(l=bn(r.tag,s,r.key,r.mode),l.elementType=r.elementType,l.type=r.type,l.stateNode=r.stateNode,l.alternate=r,r.alternate=l):(l.pendingProps=s,l.type=r.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=r.flags&65011712,l.childLanes=r.childLanes,l.lanes=r.lanes,l.child=r.child,l.memoizedProps=r.memoizedProps,l.memoizedState=r.memoizedState,l.updateQueue=r.updateQueue,s=r.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=r.sibling,l.index=r.index,l.ref=r.ref,l.refCleanup=r.refCleanup,l}function by(r,s){r.flags&=65011714;var l=r.alternate;return l===null?(r.childLanes=0,r.lanes=s,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=l.childLanes,r.lanes=l.lanes,r.child=l.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=l.memoizedProps,r.memoizedState=l.memoizedState,r.updateQueue=l.updateQueue,r.type=l.type,s=l.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),r}function vc(r,s,l,c,y,v){var A=0;if(c=r,typeof r=="function")oh(r)&&(A=1);else if(typeof r=="string")A=WR(r,l,ce.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case N:return r=bn(31,l,s,y),r.elementType=N,r.lanes=v,r;case F:return Zs(l.children,y,v,s);case V:A=8,y|=24;break;case K:return r=bn(12,l,s,y|2),r.elementType=K,r.lanes=v,r;case de:return r=bn(13,l,s,y),r.elementType=de,r.lanes=v,r;case ue:return r=bn(19,l,s,y),r.elementType=ue,r.lanes=v,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case j:A=10;break e;case ne:A=9;break e;case oe:A=11;break e;case x:A=14;break e;case R:A=16,c=null;break e}A=29,l=Error(i(130,r===null?"null":typeof r,"")),c=null}return s=bn(A,l,s,y),s.elementType=r,s.type=c,s.lanes=v,s}function Zs(r,s,l,c){return r=bn(7,r,c,s),r.lanes=l,r}function ah(r,s,l){return r=bn(6,r,null,s),r.lanes=l,r}function Ny(r){var s=bn(18,null,null,0);return s.stateNode=r,s}function lh(r,s,l){return s=bn(4,r.children!==null?r.children:[],r.key,s),s.lanes=l,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}var xy=new WeakMap;function qn(r,s){if(typeof r=="object"&&r!==null){var l=xy.get(r);return l!==void 0?l:(s={value:r,source:s,stack:el(s)},xy.set(r,s),s)}return{value:r,source:s,stack:el(s)}}var Qo=[],Xo=0,Tc=null,Cl=0,Bn=[],zn=0,Jr=null,Li=1,Oi="";function sr(r,s){Qo[Xo++]=Cl,Qo[Xo++]=Tc,Tc=r,Cl=s}function My(r,s,l){Bn[zn++]=Li,Bn[zn++]=Oi,Bn[zn++]=Jr,Jr=r;var c=Li;r=Oi;var y=32-_t(c)-1;c&=~(1<<y),l+=1;var v=32-_t(s)+y;if(30<v){var A=y-y%5;v=(c&(1<<A)-1).toString(32),c>>=A,y-=A,Li=1<<32-_t(s)+y|l<<y|c,Oi=v+r}else Li=1<<v|l<<y|c,Oi=r}function uh(r){r.return!==null&&(sr(r,1),My(r,1,0))}function ch(r){for(;r===Tc;)Tc=Qo[--Xo],Qo[Xo]=null,Cl=Qo[--Xo],Qo[Xo]=null;for(;r===Jr;)Jr=Bn[--zn],Bn[zn]=null,Oi=Bn[--zn],Bn[zn]=null,Li=Bn[--zn],Bn[zn]=null}function Dy(r,s){Bn[zn++]=Li,Bn[zn++]=Oi,Bn[zn++]=Jr,Li=s.id,Oi=s.overflow,Jr=r}var Jt=null,ct=null,ze=!1,$r=null,Hn=!1,fh=Error(i(519));function Qr(r){var s=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Il(qn(s,r)),fh}function Py(r){var s=r.stateNode,l=r.type,c=r.memoizedProps;switch(s[wt]=r,s[Gt]=c,l){case"dialog":Le("cancel",s),Le("close",s);break;case"iframe":case"object":case"embed":Le("load",s);break;case"video":case"audio":for(l=0;l<Jl.length;l++)Le(Jl[l],s);break;case"source":Le("error",s);break;case"img":case"image":case"link":Le("error",s),Le("load",s);break;case"details":Le("toggle",s);break;case"input":Le("invalid",s),ju(s,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Le("invalid",s);break;case"textarea":Le("invalid",s),Gr(s,c.value,c.defaultValue,c.children)}l=c.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||s.textContent===""+l||c.suppressHydrationWarning===!0||Xv(s.textContent,l)?(c.popover!=null&&(Le("beforetoggle",s),Le("toggle",s)),c.onScroll!=null&&Le("scroll",s),c.onScrollEnd!=null&&Le("scrollend",s),c.onClick!=null&&(s.onclick=ni),s=!0):s=!1,s||Qr(r,!0)}function ky(r){for(Jt=r.return;Jt;)switch(Jt.tag){case 5:case 31:case 13:Hn=!1;return;case 27:case 3:Hn=!0;return;default:Jt=Jt.return}}function Wo(r){if(r!==Jt)return!1;if(!ze)return ky(r),ze=!0,!1;var s=r.tag,l;if((l=s!==3&&s!==27)&&((l=s===5)&&(l=r.type,l=!(l!=="form"&&l!=="button")||Np(r.type,r.memoizedProps)),l=!l),l&&ct&&Qr(r),ky(r),s===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));ct=sT(r)}else if(s===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));ct=sT(r)}else s===27?(s=ct,us(r.type)?(r=kp,kp=null,ct=r):ct=s):ct=Jt?Yn(r.stateNode.nextSibling):null;return!0}function js(){ct=Jt=null,ze=!1}function dh(){var r=$r;return r!==null&&(vn===null?vn=r:vn.push.apply(vn,r),$r=null),r}function Il(r){$r===null?$r=[r]:$r.push(r)}var hh=P(null),eo=null,or=null;function Xr(r,s,l){le(hh,s._currentValue),s._currentValue=l}function ar(r){r._currentValue=hh.current,z(hh)}function ph(r,s,l){for(;r!==null;){var c=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),r===l)break;r=r.return}}function mh(r,s,l,c){var y=r.child;for(y!==null&&(y.return=r);y!==null;){var v=y.dependencies;if(v!==null){var A=y.child;v=v.firstContext;e:for(;v!==null;){var w=v;v=y;for(var U=0;U<s.length;U++)if(w.context===s[U]){v.lanes|=l,w=v.alternate,w!==null&&(w.lanes|=l),ph(v.return,l,r),c||(A=null);break e}v=w.next}}else if(y.tag===18){if(A=y.return,A===null)throw Error(i(341));A.lanes|=l,v=A.alternate,v!==null&&(v.lanes|=l),ph(A,l,r),A=null}else A=y.child;if(A!==null)A.return=y;else for(A=y;A!==null;){if(A===r){A=null;break}if(y=A.sibling,y!==null){y.return=A.return,A=y;break}A=A.return}y=A}}function Zo(r,s,l,c){r=null;for(var y=s,v=!1;y!==null;){if(!v){if((y.flags&524288)!==0)v=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var A=y.alternate;if(A===null)throw Error(i(387));if(A=A.memoizedProps,A!==null){var w=y.type;Rn(y.pendingProps.value,A.value)||(r!==null?r.push(w):r=[w])}}else if(y===Re.current){if(A=y.alternate,A===null)throw Error(i(387));A.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(r!==null?r.push(Zl):r=[Zl])}y=y.return}r!==null&&mh(s,r,l,c),s.flags|=262144}function Ec(r){for(r=r.firstContext;r!==null;){if(!Rn(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function to(r){eo=r,or=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function $t(r){return Vy(eo,r)}function Sc(r,s){return eo===null&&to(r),Vy(r,s)}function Vy(r,s){var l=s._currentValue;if(s={context:s,memoizedValue:l,next:null},or===null){if(r===null)throw Error(i(308));or=s,r.dependencies={lanes:0,firstContext:s},r.flags|=524288}else or=or.next=s;return l}var Jw=typeof AbortController<"u"?AbortController:function(){var r=[],s=this.signal={aborted:!1,addEventListener:function(l,c){r.push(c)}};this.abort=function(){s.aborted=!0,r.forEach(function(l){return l()})}},$w=n.unstable_scheduleCallback,Qw=n.unstable_NormalPriority,Nt={$$typeof:j,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function gh(){return{controller:new Jw,data:new Map,refCount:0}}function wl(r){r.refCount--,r.refCount===0&&$w(Qw,function(){r.controller.abort()})}var Rl=null,yh=0,jo=0,ea=null;function Xw(r,s){if(Rl===null){var l=Rl=[];yh=0,jo=Tp(),ea={status:"pending",value:void 0,then:function(c){l.push(c)}}}return yh++,s.then(Uy,Uy),s}function Uy(){if(--yh===0&&Rl!==null){ea!==null&&(ea.status="fulfilled");var r=Rl;Rl=null,jo=0,ea=null;for(var s=0;s<r.length;s++)(0,r[s])()}}function Ww(r,s){var l=[],c={status:"pending",value:null,reason:null,then:function(y){l.push(y)}};return r.then(function(){c.status="fulfilled",c.value=s;for(var y=0;y<l.length;y++)(0,l[y])(s)},function(y){for(c.status="rejected",c.reason=y,y=0;y<l.length;y++)(0,l[y])(void 0)}),c}var Ly=Q.S;Q.S=function(r,s){Tv=ln(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&Xw(r,s),Ly!==null&&Ly(r,s)};var no=P(null);function _h(){var r=no.current;return r!==null?r:at.pooledCache}function Ac(r,s){s===null?le(no,no.current):le(no,s.pool)}function Oy(){var r=_h();return r===null?null:{parent:Nt._currentValue,pool:r}}var ta=Error(i(460)),vh=Error(i(474)),Cc=Error(i(542)),Ic={then:function(){}};function Fy(r){return r=r.status,r==="fulfilled"||r==="rejected"}function Gy(r,s,l){switch(l=r[l],l===void 0?r.push(s):l!==s&&(s.then(ni,ni),s=l),s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,By(r),r;default:if(typeof s.status=="string")s.then(ni,ni);else{if(r=at,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=s,r.status="pending",r.then(function(c){if(s.status==="pending"){var y=s;y.status="fulfilled",y.value=c}},function(c){if(s.status==="pending"){var y=s;y.status="rejected",y.reason=c}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,By(r),r}throw ro=s,ta}}function io(r){try{var s=r._init;return s(r._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(ro=l,ta):l}}var ro=null;function qy(){if(ro===null)throw Error(i(459));var r=ro;return ro=null,r}function By(r){if(r===ta||r===Cc)throw Error(i(483))}var na=null,bl=0;function wc(r){var s=bl;return bl+=1,na===null&&(na=[]),Gy(na,r,s)}function Nl(r,s){s=s.props.ref,r.ref=s!==void 0?s:null}function Rc(r,s){throw s.$$typeof===S?Error(i(525)):(r=Object.prototype.toString.call(s),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r)))}function zy(r){function s(B,G){if(r){var Y=B.deletions;Y===null?(B.deletions=[G],B.flags|=16):Y.push(G)}}function l(B,G){if(!r)return null;for(;G!==null;)s(B,G),G=G.sibling;return null}function c(B){for(var G=new Map;B!==null;)B.key!==null?G.set(B.key,B):G.set(B.index,B),B=B.sibling;return G}function y(B,G){return B=rr(B,G),B.index=0,B.sibling=null,B}function v(B,G,Y){return B.index=Y,r?(Y=B.alternate,Y!==null?(Y=Y.index,Y<G?(B.flags|=67108866,G):Y):(B.flags|=67108866,G)):(B.flags|=1048576,G)}function A(B){return r&&B.alternate===null&&(B.flags|=67108866),B}function w(B,G,Y,ie){return G===null||G.tag!==6?(G=ah(Y,B.mode,ie),G.return=B,G):(G=y(G,Y),G.return=B,G)}function U(B,G,Y,ie){var Ee=Y.type;return Ee===F?te(B,G,Y.props.children,ie,Y.key):G!==null&&(G.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===R&&io(Ee)===G.type)?(G=y(G,Y.props),Nl(G,Y),G.return=B,G):(G=vc(Y.type,Y.key,Y.props,null,B.mode,ie),Nl(G,Y),G.return=B,G)}function J(B,G,Y,ie){return G===null||G.tag!==4||G.stateNode.containerInfo!==Y.containerInfo||G.stateNode.implementation!==Y.implementation?(G=lh(Y,B.mode,ie),G.return=B,G):(G=y(G,Y.children||[]),G.return=B,G)}function te(B,G,Y,ie,Ee){return G===null||G.tag!==7?(G=Zs(Y,B.mode,ie,Ee),G.return=B,G):(G=y(G,Y),G.return=B,G)}function se(B,G,Y){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return G=ah(""+G,B.mode,Y),G.return=B,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case I:return Y=vc(G.type,G.key,G.props,null,B.mode,Y),Nl(Y,G),Y.return=B,Y;case L:return G=lh(G,B.mode,Y),G.return=B,G;case R:return G=io(G),se(B,G,Y)}if(lt(G)||q(G))return G=Zs(G,B.mode,Y,null),G.return=B,G;if(typeof G.then=="function")return se(B,wc(G),Y);if(G.$$typeof===j)return se(B,Sc(B,G),Y);Rc(B,G)}return null}function $(B,G,Y,ie){var Ee=G!==null?G.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Ee!==null?null:w(B,G,""+Y,ie);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case I:return Y.key===Ee?U(B,G,Y,ie):null;case L:return Y.key===Ee?J(B,G,Y,ie):null;case R:return Y=io(Y),$(B,G,Y,ie)}if(lt(Y)||q(Y))return Ee!==null?null:te(B,G,Y,ie,null);if(typeof Y.then=="function")return $(B,G,wc(Y),ie);if(Y.$$typeof===j)return $(B,G,Sc(B,Y),ie);Rc(B,Y)}return null}function W(B,G,Y,ie,Ee){if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return B=B.get(Y)||null,w(G,B,""+ie,Ee);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case I:return B=B.get(ie.key===null?Y:ie.key)||null,U(G,B,ie,Ee);case L:return B=B.get(ie.key===null?Y:ie.key)||null,J(G,B,ie,Ee);case R:return ie=io(ie),W(B,G,Y,ie,Ee)}if(lt(ie)||q(ie))return B=B.get(Y)||null,te(G,B,ie,Ee,null);if(typeof ie.then=="function")return W(B,G,Y,wc(ie),Ee);if(ie.$$typeof===j)return W(B,G,Y,Sc(G,ie),Ee);Rc(G,ie)}return null}function _e(B,G,Y,ie){for(var Ee=null,Ye=null,ve=G,Ve=G=0,Fe=null;ve!==null&&Ve<Y.length;Ve++){ve.index>Ve?(Fe=ve,ve=null):Fe=ve.sibling;var Je=$(B,ve,Y[Ve],ie);if(Je===null){ve===null&&(ve=Fe);break}r&&ve&&Je.alternate===null&&s(B,ve),G=v(Je,G,Ve),Ye===null?Ee=Je:Ye.sibling=Je,Ye=Je,ve=Fe}if(Ve===Y.length)return l(B,ve),ze&&sr(B,Ve),Ee;if(ve===null){for(;Ve<Y.length;Ve++)ve=se(B,Y[Ve],ie),ve!==null&&(G=v(ve,G,Ve),Ye===null?Ee=ve:Ye.sibling=ve,Ye=ve);return ze&&sr(B,Ve),Ee}for(ve=c(ve);Ve<Y.length;Ve++)Fe=W(ve,B,Ve,Y[Ve],ie),Fe!==null&&(r&&Fe.alternate!==null&&ve.delete(Fe.key===null?Ve:Fe.key),G=v(Fe,G,Ve),Ye===null?Ee=Fe:Ye.sibling=Fe,Ye=Fe);return r&&ve.forEach(function(ps){return s(B,ps)}),ze&&sr(B,Ve),Ee}function Ce(B,G,Y,ie){if(Y==null)throw Error(i(151));for(var Ee=null,Ye=null,ve=G,Ve=G=0,Fe=null,Je=Y.next();ve!==null&&!Je.done;Ve++,Je=Y.next()){ve.index>Ve?(Fe=ve,ve=null):Fe=ve.sibling;var ps=$(B,ve,Je.value,ie);if(ps===null){ve===null&&(ve=Fe);break}r&&ve&&ps.alternate===null&&s(B,ve),G=v(ps,G,Ve),Ye===null?Ee=ps:Ye.sibling=ps,Ye=ps,ve=Fe}if(Je.done)return l(B,ve),ze&&sr(B,Ve),Ee;if(ve===null){for(;!Je.done;Ve++,Je=Y.next())Je=se(B,Je.value,ie),Je!==null&&(G=v(Je,G,Ve),Ye===null?Ee=Je:Ye.sibling=Je,Ye=Je);return ze&&sr(B,Ve),Ee}for(ve=c(ve);!Je.done;Ve++,Je=Y.next())Je=W(ve,B,Ve,Je.value,ie),Je!==null&&(r&&Je.alternate!==null&&ve.delete(Je.key===null?Ve:Je.key),G=v(Je,G,Ve),Ye===null?Ee=Je:Ye.sibling=Je,Ye=Je);return r&&ve.forEach(function(lb){return s(B,lb)}),ze&&sr(B,Ve),Ee}function ot(B,G,Y,ie){if(typeof Y=="object"&&Y!==null&&Y.type===F&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case I:e:{for(var Ee=Y.key;G!==null;){if(G.key===Ee){if(Ee=Y.type,Ee===F){if(G.tag===7){l(B,G.sibling),ie=y(G,Y.props.children),ie.return=B,B=ie;break e}}else if(G.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===R&&io(Ee)===G.type){l(B,G.sibling),ie=y(G,Y.props),Nl(ie,Y),ie.return=B,B=ie;break e}l(B,G);break}else s(B,G);G=G.sibling}Y.type===F?(ie=Zs(Y.props.children,B.mode,ie,Y.key),ie.return=B,B=ie):(ie=vc(Y.type,Y.key,Y.props,null,B.mode,ie),Nl(ie,Y),ie.return=B,B=ie)}return A(B);case L:e:{for(Ee=Y.key;G!==null;){if(G.key===Ee)if(G.tag===4&&G.stateNode.containerInfo===Y.containerInfo&&G.stateNode.implementation===Y.implementation){l(B,G.sibling),ie=y(G,Y.children||[]),ie.return=B,B=ie;break e}else{l(B,G);break}else s(B,G);G=G.sibling}ie=lh(Y,B.mode,ie),ie.return=B,B=ie}return A(B);case R:return Y=io(Y),ot(B,G,Y,ie)}if(lt(Y))return _e(B,G,Y,ie);if(q(Y)){if(Ee=q(Y),typeof Ee!="function")throw Error(i(150));return Y=Ee.call(Y),Ce(B,G,Y,ie)}if(typeof Y.then=="function")return ot(B,G,wc(Y),ie);if(Y.$$typeof===j)return ot(B,G,Sc(B,Y),ie);Rc(B,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint"?(Y=""+Y,G!==null&&G.tag===6?(l(B,G.sibling),ie=y(G,Y),ie.return=B,B=ie):(l(B,G),ie=ah(Y,B.mode,ie),ie.return=B,B=ie),A(B)):l(B,G)}return function(B,G,Y,ie){try{bl=0;var Ee=ot(B,G,Y,ie);return na=null,Ee}catch(ve){if(ve===ta||ve===Cc)throw ve;var Ye=bn(29,ve,null,B.mode);return Ye.lanes=ie,Ye.return=B,Ye}finally{}}}var so=zy(!0),Hy=zy(!1),Wr=!1;function Th(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Eh(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Zr(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function jr(r,s,l){var c=r.updateQueue;if(c===null)return null;if(c=c.shared,(Xe&2)!==0){var y=c.pending;return y===null?s.next=s:(s.next=y.next,y.next=s),c.pending=s,s=_c(r),Ry(r,null,l),s}return yc(r,c,s,l),_c(r)}function xl(r,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194048)!==0)){var c=s.lanes;c&=r.pendingLanes,l|=c,s.lanes=l,il(r,l)}}function Sh(r,s){var l=r.updateQueue,c=r.alternate;if(c!==null&&(c=c.updateQueue,l===c)){var y=null,v=null;if(l=l.firstBaseUpdate,l!==null){do{var A={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};v===null?y=v=A:v=v.next=A,l=l.next}while(l!==null);v===null?y=v=s:v=v.next=s}else y=v=s;l={baseState:c.baseState,firstBaseUpdate:y,lastBaseUpdate:v,shared:c.shared,callbacks:c.callbacks},r.updateQueue=l;return}r=l.lastBaseUpdate,r===null?l.firstBaseUpdate=s:r.next=s,l.lastBaseUpdate=s}var Ah=!1;function Ml(){if(Ah){var r=ea;if(r!==null)throw r}}function Dl(r,s,l,c){Ah=!1;var y=r.updateQueue;Wr=!1;var v=y.firstBaseUpdate,A=y.lastBaseUpdate,w=y.shared.pending;if(w!==null){y.shared.pending=null;var U=w,J=U.next;U.next=null,A===null?v=J:A.next=J,A=U;var te=r.alternate;te!==null&&(te=te.updateQueue,w=te.lastBaseUpdate,w!==A&&(w===null?te.firstBaseUpdate=J:w.next=J,te.lastBaseUpdate=U))}if(v!==null){var se=y.baseState;A=0,te=J=U=null,w=v;do{var $=w.lane&-536870913,W=$!==w.lane;if(W?(Oe&$)===$:(c&$)===$){$!==0&&$===jo&&(Ah=!0),te!==null&&(te=te.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var _e=r,Ce=w;$=s;var ot=l;switch(Ce.tag){case 1:if(_e=Ce.payload,typeof _e=="function"){se=_e.call(ot,se,$);break e}se=_e;break e;case 3:_e.flags=_e.flags&-65537|128;case 0:if(_e=Ce.payload,$=typeof _e=="function"?_e.call(ot,se,$):_e,$==null)break e;se=T({},se,$);break e;case 2:Wr=!0}}$=w.callback,$!==null&&(r.flags|=64,W&&(r.flags|=8192),W=y.callbacks,W===null?y.callbacks=[$]:W.push($))}else W={lane:$,tag:w.tag,payload:w.payload,callback:w.callback,next:null},te===null?(J=te=W,U=se):te=te.next=W,A|=$;if(w=w.next,w===null){if(w=y.shared.pending,w===null)break;W=w,w=W.next,W.next=null,y.lastBaseUpdate=W,y.shared.pending=null}}while(!0);te===null&&(U=se),y.baseState=U,y.firstBaseUpdate=J,y.lastBaseUpdate=te,v===null&&(y.shared.lanes=0),rs|=A,r.lanes=A,r.memoizedState=se}}function Ky(r,s){if(typeof r!="function")throw Error(i(191,r));r.call(s)}function Yy(r,s){var l=r.callbacks;if(l!==null)for(r.callbacks=null,r=0;r<l.length;r++)Ky(l[r],s)}var ia=P(null),bc=P(0);function Jy(r,s){r=gr,le(bc,r),le(ia,s),gr=r|s.baseLanes}function Ch(){le(bc,gr),le(ia,ia.current)}function Ih(){gr=bc.current,z(ia),z(bc)}var Nn=P(null),Kn=null;function es(r){var s=r.alternate;le(Tt,Tt.current&1),le(Nn,r),Kn===null&&(s===null||ia.current!==null||s.memoizedState!==null)&&(Kn=r)}function wh(r){le(Tt,Tt.current),le(Nn,r),Kn===null&&(Kn=r)}function $y(r){r.tag===22?(le(Tt,Tt.current),le(Nn,r),Kn===null&&(Kn=r)):ts()}function ts(){le(Tt,Tt.current),le(Nn,Nn.current)}function xn(r){z(Nn),Kn===r&&(Kn=null),z(Tt)}var Tt=P(0);function Nc(r){for(var s=r;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||Dp(l)||Pp(l)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var lr=0,Pe=null,rt=null,xt=null,xc=!1,ra=!1,oo=!1,Mc=0,Pl=0,sa=null,Zw=0;function gt(){throw Error(i(321))}function Rh(r,s){if(s===null)return!1;for(var l=0;l<s.length&&l<r.length;l++)if(!Rn(r[l],s[l]))return!1;return!0}function bh(r,s,l,c,y,v){return lr=v,Pe=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Q.H=r===null||r.memoizedState===null?M_:zh,oo=!1,v=l(c,y),oo=!1,ra&&(v=Xy(s,l,c,y)),Qy(r),v}function Qy(r){Q.H=Ul;var s=rt!==null&&rt.next!==null;if(lr=0,xt=rt=Pe=null,xc=!1,Pl=0,sa=null,s)throw Error(i(300));r===null||Mt||(r=r.dependencies,r!==null&&Ec(r)&&(Mt=!0))}function Xy(r,s,l,c){Pe=r;var y=0;do{if(ra&&(sa=null),Pl=0,ra=!1,25<=y)throw Error(i(301));if(y+=1,xt=rt=null,r.updateQueue!=null){var v=r.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}Q.H=D_,v=s(l,c)}while(ra);return v}function jw(){var r=Q.H,s=r.useState()[0];return s=typeof s.then=="function"?kl(s):s,r=r.useState()[0],(rt!==null?rt.memoizedState:null)!==r&&(Pe.flags|=1024),s}function Nh(){var r=Mc!==0;return Mc=0,r}function xh(r,s,l){s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~l}function Mh(r){if(xc){for(r=r.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}xc=!1}lr=0,xt=rt=Pe=null,ra=!1,Pl=Mc=0,sa=null}function cn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xt===null?Pe.memoizedState=xt=r:xt=xt.next=r,xt}function Et(){if(rt===null){var r=Pe.alternate;r=r!==null?r.memoizedState:null}else r=rt.next;var s=xt===null?Pe.memoizedState:xt.next;if(s!==null)xt=s,rt=r;else{if(r===null)throw Pe.alternate===null?Error(i(467)):Error(i(310));rt=r,r={memoizedState:rt.memoizedState,baseState:rt.baseState,baseQueue:rt.baseQueue,queue:rt.queue,next:null},xt===null?Pe.memoizedState=xt=r:xt=xt.next=r}return xt}function Dc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function kl(r){var s=Pl;return Pl+=1,sa===null&&(sa=[]),r=Gy(sa,r,s),s=Pe,(xt===null?s.memoizedState:xt.next)===null&&(s=s.alternate,Q.H=s===null||s.memoizedState===null?M_:zh),r}function Pc(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return kl(r);if(r.$$typeof===j)return $t(r)}throw Error(i(438,String(r)))}function Dh(r){var s=null,l=Pe.updateQueue;if(l!==null&&(s=l.memoCache),s==null){var c=Pe.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(s={data:c.data.map(function(y){return y.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),l===null&&(l=Dc(),Pe.updateQueue=l),l.memoCache=s,l=s.data[s.index],l===void 0)for(l=s.data[s.index]=Array(r),c=0;c<r;c++)l[c]=D;return s.index++,l}function ur(r,s){return typeof s=="function"?s(r):s}function kc(r){var s=Et();return Ph(s,rt,r)}function Ph(r,s,l){var c=r.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=l;var y=r.baseQueue,v=c.pending;if(v!==null){if(y!==null){var A=y.next;y.next=v.next,v.next=A}s.baseQueue=y=v,c.pending=null}if(v=r.baseState,y===null)r.memoizedState=v;else{s=y.next;var w=A=null,U=null,J=s,te=!1;do{var se=J.lane&-536870913;if(se!==J.lane?(Oe&se)===se:(lr&se)===se){var $=J.revertLane;if($===0)U!==null&&(U=U.next={lane:0,revertLane:0,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),se===jo&&(te=!0);else if((lr&$)===$){J=J.next,$===jo&&(te=!0);continue}else se={lane:0,revertLane:J.revertLane,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},U===null?(w=U=se,A=v):U=U.next=se,Pe.lanes|=$,rs|=$;se=J.action,oo&&l(v,se),v=J.hasEagerState?J.eagerState:l(v,se)}else $={lane:se,revertLane:J.revertLane,gesture:J.gesture,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},U===null?(w=U=$,A=v):U=U.next=$,Pe.lanes|=se,rs|=se;J=J.next}while(J!==null&&J!==s);if(U===null?A=v:U.next=w,!Rn(v,r.memoizedState)&&(Mt=!0,te&&(l=ea,l!==null)))throw l;r.memoizedState=v,r.baseState=A,r.baseQueue=U,c.lastRenderedState=v}return y===null&&(c.lanes=0),[r.memoizedState,c.dispatch]}function kh(r){var s=Et(),l=s.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=r;var c=l.dispatch,y=l.pending,v=s.memoizedState;if(y!==null){l.pending=null;var A=y=y.next;do v=r(v,A.action),A=A.next;while(A!==y);Rn(v,s.memoizedState)||(Mt=!0),s.memoizedState=v,s.baseQueue===null&&(s.baseState=v),l.lastRenderedState=v}return[v,c]}function Wy(r,s,l){var c=Pe,y=Et(),v=ze;if(v){if(l===void 0)throw Error(i(407));l=l()}else l=s();var A=!Rn((rt||y).memoizedState,l);if(A&&(y.memoizedState=l,Mt=!0),y=y.queue,Lh(e_.bind(null,c,y,r),[r]),y.getSnapshot!==s||A||xt!==null&&xt.memoizedState.tag&1){if(c.flags|=2048,oa(9,{destroy:void 0},jy.bind(null,c,y,l,s),null),at===null)throw Error(i(349));v||(lr&127)!==0||Zy(c,s,l)}return l}function Zy(r,s,l){r.flags|=16384,r={getSnapshot:s,value:l},s=Pe.updateQueue,s===null?(s=Dc(),Pe.updateQueue=s,s.stores=[r]):(l=s.stores,l===null?s.stores=[r]:l.push(r))}function jy(r,s,l,c){s.value=l,s.getSnapshot=c,t_(s)&&n_(r)}function e_(r,s,l){return l(function(){t_(s)&&n_(r)})}function t_(r){var s=r.getSnapshot;r=r.value;try{var l=s();return!Rn(r,l)}catch{return!0}}function n_(r){var s=Ws(r,2);s!==null&&Tn(s,r,2)}function Vh(r){var s=cn();if(typeof r=="function"){var l=r;if(r=l(),oo){Vn(!0);try{l()}finally{Vn(!1)}}}return s.memoizedState=s.baseState=r,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ur,lastRenderedState:r},s}function i_(r,s,l,c){return r.baseState=l,Ph(r,rt,typeof c=="function"?c:ur)}function eR(r,s,l,c,y){if(Lc(r))throw Error(i(485));if(r=s.action,r!==null){var v={payload:y,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){v.listeners.push(A)}};Q.T!==null?l(!0):v.isTransition=!1,c(v),l=s.pending,l===null?(v.next=s.pending=v,r_(s,v)):(v.next=l.next,s.pending=l.next=v)}}function r_(r,s){var l=s.action,c=s.payload,y=r.state;if(s.isTransition){var v=Q.T,A={};Q.T=A;try{var w=l(y,c),U=Q.S;U!==null&&U(A,w),s_(r,s,w)}catch(J){Uh(r,s,J)}finally{v!==null&&A.types!==null&&(v.types=A.types),Q.T=v}}else try{v=l(y,c),s_(r,s,v)}catch(J){Uh(r,s,J)}}function s_(r,s,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(c){o_(r,s,c)},function(c){return Uh(r,s,c)}):o_(r,s,l)}function o_(r,s,l){s.status="fulfilled",s.value=l,a_(s),r.state=l,s=r.pending,s!==null&&(l=s.next,l===s?r.pending=null:(l=l.next,s.next=l,r_(r,l)))}function Uh(r,s,l){var c=r.pending;if(r.pending=null,c!==null){c=c.next;do s.status="rejected",s.reason=l,a_(s),s=s.next;while(s!==c)}r.action=null}function a_(r){r=r.listeners;for(var s=0;s<r.length;s++)(0,r[s])()}function l_(r,s){return s}function u_(r,s){if(ze){var l=at.formState;if(l!==null){e:{var c=Pe;if(ze){if(ct){t:{for(var y=ct,v=Hn;y.nodeType!==8;){if(!v){y=null;break t}if(y=Yn(y.nextSibling),y===null){y=null;break t}}v=y.data,y=v==="F!"||v==="F"?y:null}if(y){ct=Yn(y.nextSibling),c=y.data==="F!";break e}}Qr(c)}c=!1}c&&(s=l[0])}}return l=cn(),l.memoizedState=l.baseState=s,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l_,lastRenderedState:s},l.queue=c,l=b_.bind(null,Pe,c),c.dispatch=l,c=Vh(!1),v=Bh.bind(null,Pe,!1,c.queue),c=cn(),y={state:s,dispatch:null,action:r,pending:null},c.queue=y,l=eR.bind(null,Pe,y,v,l),y.dispatch=l,c.memoizedState=r,[s,l,!1]}function c_(r){var s=Et();return f_(s,rt,r)}function f_(r,s,l){if(s=Ph(r,s,l_)[0],r=kc(ur)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var c=kl(s)}catch(A){throw A===ta?Cc:A}else c=s;s=Et();var y=s.queue,v=y.dispatch;return l!==s.memoizedState&&(Pe.flags|=2048,oa(9,{destroy:void 0},tR.bind(null,y,l),null)),[c,v,r]}function tR(r,s){r.action=s}function d_(r){var s=Et(),l=rt;if(l!==null)return f_(s,l,r);Et(),s=s.memoizedState,l=Et();var c=l.queue.dispatch;return l.memoizedState=r,[s,c,!1]}function oa(r,s,l,c){return r={tag:r,create:l,deps:c,inst:s,next:null},s=Pe.updateQueue,s===null&&(s=Dc(),Pe.updateQueue=s),l=s.lastEffect,l===null?s.lastEffect=r.next=r:(c=l.next,l.next=r,r.next=c,s.lastEffect=r),r}function h_(){return Et().memoizedState}function Vc(r,s,l,c){var y=cn();Pe.flags|=r,y.memoizedState=oa(1|s,{destroy:void 0},l,c===void 0?null:c)}function Uc(r,s,l,c){var y=Et();c=c===void 0?null:c;var v=y.memoizedState.inst;rt!==null&&c!==null&&Rh(c,rt.memoizedState.deps)?y.memoizedState=oa(s,v,l,c):(Pe.flags|=r,y.memoizedState=oa(1|s,v,l,c))}function p_(r,s){Vc(8390656,8,r,s)}function Lh(r,s){Uc(2048,8,r,s)}function nR(r){Pe.flags|=4;var s=Pe.updateQueue;if(s===null)s=Dc(),Pe.updateQueue=s,s.events=[r];else{var l=s.events;l===null?s.events=[r]:l.push(r)}}function m_(r){var s=Et().memoizedState;return nR({ref:s,nextImpl:r}),function(){if((Xe&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}function g_(r,s){return Uc(4,2,r,s)}function y_(r,s){return Uc(4,4,r,s)}function __(r,s){if(typeof s=="function"){r=r();var l=s(r);return function(){typeof l=="function"?l():s(null)}}if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function v_(r,s,l){l=l!=null?l.concat([r]):null,Uc(4,4,__.bind(null,s,r),l)}function Oh(){}function T_(r,s){var l=Et();s=s===void 0?null:s;var c=l.memoizedState;return s!==null&&Rh(s,c[1])?c[0]:(l.memoizedState=[r,s],r)}function E_(r,s){var l=Et();s=s===void 0?null:s;var c=l.memoizedState;if(s!==null&&Rh(s,c[1]))return c[0];if(c=r(),oo){Vn(!0);try{r()}finally{Vn(!1)}}return l.memoizedState=[c,s],c}function Fh(r,s,l){return l===void 0||(lr&1073741824)!==0&&(Oe&261930)===0?r.memoizedState=s:(r.memoizedState=l,r=Sv(),Pe.lanes|=r,rs|=r,l)}function S_(r,s,l,c){return Rn(l,s)?l:ia.current!==null?(r=Fh(r,l,c),Rn(r,s)||(Mt=!0),r):(lr&42)===0||(lr&1073741824)!==0&&(Oe&261930)===0?(Mt=!0,r.memoizedState=l):(r=Sv(),Pe.lanes|=r,rs|=r,s)}function A_(r,s,l,c,y){var v=ee.p;ee.p=v!==0&&8>v?v:8;var A=Q.T,w={};Q.T=w,Bh(r,!1,s,l);try{var U=y(),J=Q.S;if(J!==null&&J(w,U),U!==null&&typeof U=="object"&&typeof U.then=="function"){var te=Ww(U,c);Vl(r,s,te,Pn(r))}else Vl(r,s,c,Pn(r))}catch(se){Vl(r,s,{then:function(){},status:"rejected",reason:se},Pn())}finally{ee.p=v,A!==null&&w.types!==null&&(A.types=w.types),Q.T=A}}function iR(){}function Gh(r,s,l,c){if(r.tag!==5)throw Error(i(476));var y=C_(r).queue;A_(r,y,s,Z,l===null?iR:function(){return I_(r),l(c)})}function C_(r){var s=r.memoizedState;if(s!==null)return s;s={memoizedState:Z,baseState:Z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ur,lastRenderedState:Z},next:null};var l={};return s.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ur,lastRenderedState:l},next:null},r.memoizedState=s,r=r.alternate,r!==null&&(r.memoizedState=s),s}function I_(r){var s=C_(r);s.next===null&&(s=r.alternate.memoizedState),Vl(r,s.next.queue,{},Pn())}function qh(){return $t(Zl)}function w_(){return Et().memoizedState}function R_(){return Et().memoizedState}function rR(r){for(var s=r.return;s!==null;){switch(s.tag){case 24:case 3:var l=Pn();r=Zr(l);var c=jr(s,r,l);c!==null&&(Tn(c,s,l),xl(c,s,l)),s={cache:gh()},r.payload=s;return}s=s.return}}function sR(r,s,l){var c=Pn();l={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Lc(r)?N_(s,l):(l=sh(r,s,l,c),l!==null&&(Tn(l,r,c),x_(l,s,c)))}function b_(r,s,l){var c=Pn();Vl(r,s,l,c)}function Vl(r,s,l,c){var y={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Lc(r))N_(s,y);else{var v=r.alternate;if(r.lanes===0&&(v===null||v.lanes===0)&&(v=s.lastRenderedReducer,v!==null))try{var A=s.lastRenderedState,w=v(A,l);if(y.hasEagerState=!0,y.eagerState=w,Rn(w,A))return yc(r,s,y,0),at===null&&gc(),!1}catch{}finally{}if(l=sh(r,s,y,c),l!==null)return Tn(l,r,c),x_(l,s,c),!0}return!1}function Bh(r,s,l,c){if(c={lane:2,revertLane:Tp(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Lc(r)){if(s)throw Error(i(479))}else s=sh(r,l,c,2),s!==null&&Tn(s,r,2)}function Lc(r){var s=r.alternate;return r===Pe||s!==null&&s===Pe}function N_(r,s){ra=xc=!0;var l=r.pending;l===null?s.next=s:(s.next=l.next,l.next=s),r.pending=s}function x_(r,s,l){if((l&4194048)!==0){var c=s.lanes;c&=r.pendingLanes,l|=c,s.lanes=l,il(r,l)}}var Ul={readContext:$t,use:Pc,useCallback:gt,useContext:gt,useEffect:gt,useImperativeHandle:gt,useLayoutEffect:gt,useInsertionEffect:gt,useMemo:gt,useReducer:gt,useRef:gt,useState:gt,useDebugValue:gt,useDeferredValue:gt,useTransition:gt,useSyncExternalStore:gt,useId:gt,useHostTransitionStatus:gt,useFormState:gt,useActionState:gt,useOptimistic:gt,useMemoCache:gt,useCacheRefresh:gt};Ul.useEffectEvent=gt;var M_={readContext:$t,use:Pc,useCallback:function(r,s){return cn().memoizedState=[r,s===void 0?null:s],r},useContext:$t,useEffect:p_,useImperativeHandle:function(r,s,l){l=l!=null?l.concat([r]):null,Vc(4194308,4,__.bind(null,s,r),l)},useLayoutEffect:function(r,s){return Vc(4194308,4,r,s)},useInsertionEffect:function(r,s){Vc(4,2,r,s)},useMemo:function(r,s){var l=cn();s=s===void 0?null:s;var c=r();if(oo){Vn(!0);try{r()}finally{Vn(!1)}}return l.memoizedState=[c,s],c},useReducer:function(r,s,l){var c=cn();if(l!==void 0){var y=l(s);if(oo){Vn(!0);try{l(s)}finally{Vn(!1)}}}else y=s;return c.memoizedState=c.baseState=y,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:y},c.queue=r,r=r.dispatch=sR.bind(null,Pe,r),[c.memoizedState,r]},useRef:function(r){var s=cn();return r={current:r},s.memoizedState=r},useState:function(r){r=Vh(r);var s=r.queue,l=b_.bind(null,Pe,s);return s.dispatch=l,[r.memoizedState,l]},useDebugValue:Oh,useDeferredValue:function(r,s){var l=cn();return Fh(l,r,s)},useTransition:function(){var r=Vh(!1);return r=A_.bind(null,Pe,r.queue,!0,!1),cn().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,s,l){var c=Pe,y=cn();if(ze){if(l===void 0)throw Error(i(407));l=l()}else{if(l=s(),at===null)throw Error(i(349));(Oe&127)!==0||Zy(c,s,l)}y.memoizedState=l;var v={value:l,getSnapshot:s};return y.queue=v,p_(e_.bind(null,c,v,r),[r]),c.flags|=2048,oa(9,{destroy:void 0},jy.bind(null,c,v,l,s),null),l},useId:function(){var r=cn(),s=at.identifierPrefix;if(ze){var l=Oi,c=Li;l=(c&~(1<<32-_t(c)-1)).toString(32)+l,s="_"+s+"R_"+l,l=Mc++,0<l&&(s+="H"+l.toString(32)),s+="_"}else l=Zw++,s="_"+s+"r_"+l.toString(32)+"_";return r.memoizedState=s},useHostTransitionStatus:qh,useFormState:u_,useActionState:u_,useOptimistic:function(r){var s=cn();s.memoizedState=s.baseState=r;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=l,s=Bh.bind(null,Pe,!0,l),l.dispatch=s,[r,s]},useMemoCache:Dh,useCacheRefresh:function(){return cn().memoizedState=rR.bind(null,Pe)},useEffectEvent:function(r){var s=cn(),l={impl:r};return s.memoizedState=l,function(){if((Xe&2)!==0)throw Error(i(440));return l.impl.apply(void 0,arguments)}}},zh={readContext:$t,use:Pc,useCallback:T_,useContext:$t,useEffect:Lh,useImperativeHandle:v_,useInsertionEffect:g_,useLayoutEffect:y_,useMemo:E_,useReducer:kc,useRef:h_,useState:function(){return kc(ur)},useDebugValue:Oh,useDeferredValue:function(r,s){var l=Et();return S_(l,rt.memoizedState,r,s)},useTransition:function(){var r=kc(ur)[0],s=Et().memoizedState;return[typeof r=="boolean"?r:kl(r),s]},useSyncExternalStore:Wy,useId:w_,useHostTransitionStatus:qh,useFormState:c_,useActionState:c_,useOptimistic:function(r,s){var l=Et();return i_(l,rt,r,s)},useMemoCache:Dh,useCacheRefresh:R_};zh.useEffectEvent=m_;var D_={readContext:$t,use:Pc,useCallback:T_,useContext:$t,useEffect:Lh,useImperativeHandle:v_,useInsertionEffect:g_,useLayoutEffect:y_,useMemo:E_,useReducer:kh,useRef:h_,useState:function(){return kh(ur)},useDebugValue:Oh,useDeferredValue:function(r,s){var l=Et();return rt===null?Fh(l,r,s):S_(l,rt.memoizedState,r,s)},useTransition:function(){var r=kh(ur)[0],s=Et().memoizedState;return[typeof r=="boolean"?r:kl(r),s]},useSyncExternalStore:Wy,useId:w_,useHostTransitionStatus:qh,useFormState:d_,useActionState:d_,useOptimistic:function(r,s){var l=Et();return rt!==null?i_(l,rt,r,s):(l.baseState=r,[r,l.queue.dispatch])},useMemoCache:Dh,useCacheRefresh:R_};D_.useEffectEvent=m_;function Hh(r,s,l,c){s=r.memoizedState,l=l(c,s),l=l==null?s:T({},s,l),r.memoizedState=l,r.lanes===0&&(r.updateQueue.baseState=l)}var Kh={enqueueSetState:function(r,s,l){r=r._reactInternals;var c=Pn(),y=Zr(c);y.payload=s,l!=null&&(y.callback=l),s=jr(r,y,c),s!==null&&(Tn(s,r,c),xl(s,r,c))},enqueueReplaceState:function(r,s,l){r=r._reactInternals;var c=Pn(),y=Zr(c);y.tag=1,y.payload=s,l!=null&&(y.callback=l),s=jr(r,y,c),s!==null&&(Tn(s,r,c),xl(s,r,c))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var l=Pn(),c=Zr(l);c.tag=2,s!=null&&(c.callback=s),s=jr(r,c,l),s!==null&&(Tn(s,r,l),xl(s,r,l))}};function P_(r,s,l,c,y,v,A){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(c,v,A):s.prototype&&s.prototype.isPureReactComponent?!Sl(l,c)||!Sl(y,v):!0}function k_(r,s,l,c){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,c),s.state!==r&&Kh.enqueueReplaceState(s,s.state,null)}function ao(r,s){var l=s;if("ref"in s){l={};for(var c in s)c!=="ref"&&(l[c]=s[c])}if(r=r.defaultProps){l===s&&(l=T({},l));for(var y in r)l[y]===void 0&&(l[y]=r[y])}return l}function V_(r){mc(r)}function U_(r){console.error(r)}function L_(r){mc(r)}function Oc(r,s){try{var l=r.onUncaughtError;l(s.value,{componentStack:s.stack})}catch(c){setTimeout(function(){throw c})}}function O_(r,s,l){try{var c=r.onCaughtError;c(l.value,{componentStack:l.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Yh(r,s,l){return l=Zr(l),l.tag=3,l.payload={element:null},l.callback=function(){Oc(r,s)},l}function F_(r){return r=Zr(r),r.tag=3,r}function G_(r,s,l,c){var y=l.type.getDerivedStateFromError;if(typeof y=="function"){var v=c.value;r.payload=function(){return y(v)},r.callback=function(){O_(s,l,c)}}var A=l.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(r.callback=function(){O_(s,l,c),typeof y!="function"&&(ss===null?ss=new Set([this]):ss.add(this));var w=c.stack;this.componentDidCatch(c.value,{componentStack:w!==null?w:""})})}function oR(r,s,l,c,y){if(l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(s=l.alternate,s!==null&&Zo(s,l,y,!0),l=Nn.current,l!==null){switch(l.tag){case 31:case 13:return Kn===null?Xc():l.alternate===null&&yt===0&&(yt=3),l.flags&=-257,l.flags|=65536,l.lanes=y,c===Ic?l.flags|=16384:(s=l.updateQueue,s===null?l.updateQueue=new Set([c]):s.add(c),yp(r,c,y)),!1;case 22:return l.flags|=65536,c===Ic?l.flags|=16384:(s=l.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([c])},l.updateQueue=s):(l=s.retryQueue,l===null?s.retryQueue=new Set([c]):l.add(c)),yp(r,c,y)),!1}throw Error(i(435,l.tag))}return yp(r,c,y),Xc(),!1}if(ze)return s=Nn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=y,c!==fh&&(r=Error(i(422),{cause:c}),Il(qn(r,l)))):(c!==fh&&(s=Error(i(423),{cause:c}),Il(qn(s,l))),r=r.current.alternate,r.flags|=65536,y&=-y,r.lanes|=y,c=qn(c,l),y=Yh(r.stateNode,c,y),Sh(r,y),yt!==4&&(yt=2)),!1;var v=Error(i(520),{cause:c});if(v=qn(v,l),Hl===null?Hl=[v]:Hl.push(v),yt!==4&&(yt=2),s===null)return!0;c=qn(c,l),l=s;do{switch(l.tag){case 3:return l.flags|=65536,r=y&-y,l.lanes|=r,r=Yh(l.stateNode,c,r),Sh(l,r),!1;case 1:if(s=l.type,v=l.stateNode,(l.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(ss===null||!ss.has(v))))return l.flags|=65536,y&=-y,l.lanes|=y,y=F_(y),G_(y,r,l,c),Sh(l,y),!1}l=l.return}while(l!==null);return!1}var Jh=Error(i(461)),Mt=!1;function Qt(r,s,l,c){s.child=r===null?Hy(s,null,l,c):so(s,r.child,l,c)}function q_(r,s,l,c,y){l=l.render;var v=s.ref;if("ref"in c){var A={};for(var w in c)w!=="ref"&&(A[w]=c[w])}else A=c;return to(s),c=bh(r,s,l,A,v,y),w=Nh(),r!==null&&!Mt?(xh(r,s,y),cr(r,s,y)):(ze&&w&&uh(s),s.flags|=1,Qt(r,s,c,y),s.child)}function B_(r,s,l,c,y){if(r===null){var v=l.type;return typeof v=="function"&&!oh(v)&&v.defaultProps===void 0&&l.compare===null?(s.tag=15,s.type=v,z_(r,s,v,c,y)):(r=vc(l.type,null,c,s,s.mode,y),r.ref=s.ref,r.return=s,s.child=r)}if(v=r.child,!tp(r,y)){var A=v.memoizedProps;if(l=l.compare,l=l!==null?l:Sl,l(A,c)&&r.ref===s.ref)return cr(r,s,y)}return s.flags|=1,r=rr(v,c),r.ref=s.ref,r.return=s,s.child=r}function z_(r,s,l,c,y){if(r!==null){var v=r.memoizedProps;if(Sl(v,c)&&r.ref===s.ref)if(Mt=!1,s.pendingProps=c=v,tp(r,y))(r.flags&131072)!==0&&(Mt=!0);else return s.lanes=r.lanes,cr(r,s,y)}return $h(r,s,l,c,y)}function H_(r,s,l,c){var y=c.children,v=r!==null?r.memoizedState:null;if(r===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((s.flags&128)!==0){if(v=v!==null?v.baseLanes|l:l,r!==null){for(c=s.child=r.child,y=0;c!==null;)y=y|c.lanes|c.childLanes,c=c.sibling;c=y&~v}else c=0,s.child=null;return K_(r,s,v,l,c)}if((l&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},r!==null&&Ac(s,v!==null?v.cachePool:null),v!==null?Jy(s,v):Ch(),$y(s);else return c=s.lanes=536870912,K_(r,s,v!==null?v.baseLanes|l:l,l,c)}else v!==null?(Ac(s,v.cachePool),Jy(s,v),ts(),s.memoizedState=null):(r!==null&&Ac(s,null),Ch(),ts());return Qt(r,s,y,l),s.child}function Ll(r,s){return r!==null&&r.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function K_(r,s,l,c,y){var v=_h();return v=v===null?null:{parent:Nt._currentValue,pool:v},s.memoizedState={baseLanes:l,cachePool:v},r!==null&&Ac(s,null),Ch(),$y(s),r!==null&&Zo(r,s,c,!0),s.childLanes=y,null}function Fc(r,s){return s=qc({mode:s.mode,children:s.children},r.mode),s.ref=r.ref,r.child=s,s.return=r,s}function Y_(r,s,l){return so(s,r.child,null,l),r=Fc(s,s.pendingProps),r.flags|=2,xn(s),s.memoizedState=null,r}function aR(r,s,l){var c=s.pendingProps,y=(s.flags&128)!==0;if(s.flags&=-129,r===null){if(ze){if(c.mode==="hidden")return r=Fc(s,c),s.lanes=536870912,Ll(null,r);if(wh(s),(r=ct)?(r=rT(r,Hn),r=r!==null&&r.data==="&"?r:null,r!==null&&(s.memoizedState={dehydrated:r,treeContext:Jr!==null?{id:Li,overflow:Oi}:null,retryLane:536870912,hydrationErrors:null},l=Ny(r),l.return=s,s.child=l,Jt=s,ct=null)):r=null,r===null)throw Qr(s);return s.lanes=536870912,null}return Fc(s,c)}var v=r.memoizedState;if(v!==null){var A=v.dehydrated;if(wh(s),y)if(s.flags&256)s.flags&=-257,s=Y_(r,s,l);else if(s.memoizedState!==null)s.child=r.child,s.flags|=128,s=null;else throw Error(i(558));else if(Mt||Zo(r,s,l,!1),y=(l&r.childLanes)!==0,Mt||y){if(c=at,c!==null&&(A=rl(c,l),A!==0&&A!==v.retryLane))throw v.retryLane=A,Ws(r,A),Tn(c,r,A),Jh;Xc(),s=Y_(r,s,l)}else r=v.treeContext,ct=Yn(A.nextSibling),Jt=s,ze=!0,$r=null,Hn=!1,r!==null&&Dy(s,r),s=Fc(s,c),s.flags|=4096;return s}return r=rr(r.child,{mode:c.mode,children:c.children}),r.ref=s.ref,s.child=r,r.return=s,r}function Gc(r,s){var l=s.ref;if(l===null)r!==null&&r.ref!==null&&(s.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(r===null||r.ref!==l)&&(s.flags|=4194816)}}function $h(r,s,l,c,y){return to(s),l=bh(r,s,l,c,void 0,y),c=Nh(),r!==null&&!Mt?(xh(r,s,y),cr(r,s,y)):(ze&&c&&uh(s),s.flags|=1,Qt(r,s,l,y),s.child)}function J_(r,s,l,c,y,v){return to(s),s.updateQueue=null,l=Xy(s,c,l,y),Qy(r),c=Nh(),r!==null&&!Mt?(xh(r,s,v),cr(r,s,v)):(ze&&c&&uh(s),s.flags|=1,Qt(r,s,l,v),s.child)}function $_(r,s,l,c,y){if(to(s),s.stateNode===null){var v=$o,A=l.contextType;typeof A=="object"&&A!==null&&(v=$t(A)),v=new l(c,v),s.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=Kh,s.stateNode=v,v._reactInternals=s,v=s.stateNode,v.props=c,v.state=s.memoizedState,v.refs={},Th(s),A=l.contextType,v.context=typeof A=="object"&&A!==null?$t(A):$o,v.state=s.memoizedState,A=l.getDerivedStateFromProps,typeof A=="function"&&(Hh(s,l,A,c),v.state=s.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(A=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),A!==v.state&&Kh.enqueueReplaceState(v,v.state,null),Dl(s,c,v,y),Ml(),v.state=s.memoizedState),typeof v.componentDidMount=="function"&&(s.flags|=4194308),c=!0}else if(r===null){v=s.stateNode;var w=s.memoizedProps,U=ao(l,w);v.props=U;var J=v.context,te=l.contextType;A=$o,typeof te=="object"&&te!==null&&(A=$t(te));var se=l.getDerivedStateFromProps;te=typeof se=="function"||typeof v.getSnapshotBeforeUpdate=="function",w=s.pendingProps!==w,te||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(w||J!==A)&&k_(s,v,c,A),Wr=!1;var $=s.memoizedState;v.state=$,Dl(s,c,v,y),Ml(),J=s.memoizedState,w||$!==J||Wr?(typeof se=="function"&&(Hh(s,l,se,c),J=s.memoizedState),(U=Wr||P_(s,l,U,c,$,J,A))?(te||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(s.flags|=4194308)):(typeof v.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=J),v.props=c,v.state=J,v.context=A,c=U):(typeof v.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{v=s.stateNode,Eh(r,s),A=s.memoizedProps,te=ao(l,A),v.props=te,se=s.pendingProps,$=v.context,J=l.contextType,U=$o,typeof J=="object"&&J!==null&&(U=$t(J)),w=l.getDerivedStateFromProps,(J=typeof w=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(A!==se||$!==U)&&k_(s,v,c,U),Wr=!1,$=s.memoizedState,v.state=$,Dl(s,c,v,y),Ml();var W=s.memoizedState;A!==se||$!==W||Wr||r!==null&&r.dependencies!==null&&Ec(r.dependencies)?(typeof w=="function"&&(Hh(s,l,w,c),W=s.memoizedState),(te=Wr||P_(s,l,te,c,$,W,U)||r!==null&&r.dependencies!==null&&Ec(r.dependencies))?(J||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(c,W,U),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(c,W,U)),typeof v.componentDidUpdate=="function"&&(s.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof v.componentDidUpdate!="function"||A===r.memoizedProps&&$===r.memoizedState||(s.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||A===r.memoizedProps&&$===r.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=W),v.props=c,v.state=W,v.context=U,c=te):(typeof v.componentDidUpdate!="function"||A===r.memoizedProps&&$===r.memoizedState||(s.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||A===r.memoizedProps&&$===r.memoizedState||(s.flags|=1024),c=!1)}return v=c,Gc(r,s),c=(s.flags&128)!==0,v||c?(v=s.stateNode,l=c&&typeof l.getDerivedStateFromError!="function"?null:v.render(),s.flags|=1,r!==null&&c?(s.child=so(s,r.child,null,y),s.child=so(s,null,l,y)):Qt(r,s,l,y),s.memoizedState=v.state,r=s.child):r=cr(r,s,y),r}function Q_(r,s,l,c){return js(),s.flags|=256,Qt(r,s,l,c),s.child}var Qh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Xh(r){return{baseLanes:r,cachePool:Oy()}}function Wh(r,s,l){return r=r!==null?r.childLanes&~l:0,s&&(r|=Dn),r}function X_(r,s,l){var c=s.pendingProps,y=!1,v=(s.flags&128)!==0,A;if((A=v)||(A=r!==null&&r.memoizedState===null?!1:(Tt.current&2)!==0),A&&(y=!0,s.flags&=-129),A=(s.flags&32)!==0,s.flags&=-33,r===null){if(ze){if(y?es(s):ts(),(r=ct)?(r=rT(r,Hn),r=r!==null&&r.data!=="&"?r:null,r!==null&&(s.memoizedState={dehydrated:r,treeContext:Jr!==null?{id:Li,overflow:Oi}:null,retryLane:536870912,hydrationErrors:null},l=Ny(r),l.return=s,s.child=l,Jt=s,ct=null)):r=null,r===null)throw Qr(s);return Pp(r)?s.lanes=32:s.lanes=536870912,null}var w=c.children;return c=c.fallback,y?(ts(),y=s.mode,w=qc({mode:"hidden",children:w},y),c=Zs(c,y,l,null),w.return=s,c.return=s,w.sibling=c,s.child=w,c=s.child,c.memoizedState=Xh(l),c.childLanes=Wh(r,A,l),s.memoizedState=Qh,Ll(null,c)):(es(s),Zh(s,w))}var U=r.memoizedState;if(U!==null&&(w=U.dehydrated,w!==null)){if(v)s.flags&256?(es(s),s.flags&=-257,s=jh(r,s,l)):s.memoizedState!==null?(ts(),s.child=r.child,s.flags|=128,s=null):(ts(),w=c.fallback,y=s.mode,c=qc({mode:"visible",children:c.children},y),w=Zs(w,y,l,null),w.flags|=2,c.return=s,w.return=s,c.sibling=w,s.child=c,so(s,r.child,null,l),c=s.child,c.memoizedState=Xh(l),c.childLanes=Wh(r,A,l),s.memoizedState=Qh,s=Ll(null,c));else if(es(s),Pp(w)){if(A=w.nextSibling&&w.nextSibling.dataset,A)var J=A.dgst;A=J,c=Error(i(419)),c.stack="",c.digest=A,Il({value:c,source:null,stack:null}),s=jh(r,s,l)}else if(Mt||Zo(r,s,l,!1),A=(l&r.childLanes)!==0,Mt||A){if(A=at,A!==null&&(c=rl(A,l),c!==0&&c!==U.retryLane))throw U.retryLane=c,Ws(r,c),Tn(A,r,c),Jh;Dp(w)||Xc(),s=jh(r,s,l)}else Dp(w)?(s.flags|=192,s.child=r.child,s=null):(r=U.treeContext,ct=Yn(w.nextSibling),Jt=s,ze=!0,$r=null,Hn=!1,r!==null&&Dy(s,r),s=Zh(s,c.children),s.flags|=4096);return s}return y?(ts(),w=c.fallback,y=s.mode,U=r.child,J=U.sibling,c=rr(U,{mode:"hidden",children:c.children}),c.subtreeFlags=U.subtreeFlags&65011712,J!==null?w=rr(J,w):(w=Zs(w,y,l,null),w.flags|=2),w.return=s,c.return=s,c.sibling=w,s.child=c,Ll(null,c),c=s.child,w=r.child.memoizedState,w===null?w=Xh(l):(y=w.cachePool,y!==null?(U=Nt._currentValue,y=y.parent!==U?{parent:U,pool:U}:y):y=Oy(),w={baseLanes:w.baseLanes|l,cachePool:y}),c.memoizedState=w,c.childLanes=Wh(r,A,l),s.memoizedState=Qh,Ll(r.child,c)):(es(s),l=r.child,r=l.sibling,l=rr(l,{mode:"visible",children:c.children}),l.return=s,l.sibling=null,r!==null&&(A=s.deletions,A===null?(s.deletions=[r],s.flags|=16):A.push(r)),s.child=l,s.memoizedState=null,l)}function Zh(r,s){return s=qc({mode:"visible",children:s},r.mode),s.return=r,r.child=s}function qc(r,s){return r=bn(22,r,null,s),r.lanes=0,r}function jh(r,s,l){return so(s,r.child,null,l),r=Zh(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function W_(r,s,l){r.lanes|=s;var c=r.alternate;c!==null&&(c.lanes|=s),ph(r.return,s,l)}function ep(r,s,l,c,y,v){var A=r.memoizedState;A===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:l,tailMode:y,treeForkCount:v}:(A.isBackwards=s,A.rendering=null,A.renderingStartTime=0,A.last=c,A.tail=l,A.tailMode=y,A.treeForkCount=v)}function Z_(r,s,l){var c=s.pendingProps,y=c.revealOrder,v=c.tail;c=c.children;var A=Tt.current,w=(A&2)!==0;if(w?(A=A&1|2,s.flags|=128):A&=1,le(Tt,A),Qt(r,s,c,l),c=ze?Cl:0,!w&&r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&W_(r,l,s);else if(r.tag===19)W_(r,l,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(y){case"forwards":for(l=s.child,y=null;l!==null;)r=l.alternate,r!==null&&Nc(r)===null&&(y=l),l=l.sibling;l=y,l===null?(y=s.child,s.child=null):(y=l.sibling,l.sibling=null),ep(s,!1,y,l,v,c);break;case"backwards":case"unstable_legacy-backwards":for(l=null,y=s.child,s.child=null;y!==null;){if(r=y.alternate,r!==null&&Nc(r)===null){s.child=y;break}r=y.sibling,y.sibling=l,l=y,y=r}ep(s,!0,l,null,v,c);break;case"together":ep(s,!1,null,null,void 0,c);break;default:s.memoizedState=null}return s.child}function cr(r,s,l){if(r!==null&&(s.dependencies=r.dependencies),rs|=s.lanes,(l&s.childLanes)===0)if(r!==null){if(Zo(r,s,l,!1),(l&s.childLanes)===0)return null}else return null;if(r!==null&&s.child!==r.child)throw Error(i(153));if(s.child!==null){for(r=s.child,l=rr(r,r.pendingProps),s.child=l,l.return=s;r.sibling!==null;)r=r.sibling,l=l.sibling=rr(r,r.pendingProps),l.return=s;l.sibling=null}return s.child}function tp(r,s){return(r.lanes&s)!==0?!0:(r=r.dependencies,!!(r!==null&&Ec(r)))}function lR(r,s,l){switch(s.tag){case 3:Ze(s,s.stateNode.containerInfo),Xr(s,Nt,r.memoizedState.cache),js();break;case 27:case 5:Ps(s);break;case 4:Ze(s,s.stateNode.containerInfo);break;case 10:Xr(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,wh(s),null;break;case 13:var c=s.memoizedState;if(c!==null)return c.dehydrated!==null?(es(s),s.flags|=128,null):(l&s.child.childLanes)!==0?X_(r,s,l):(es(s),r=cr(r,s,l),r!==null?r.sibling:null);es(s);break;case 19:var y=(r.flags&128)!==0;if(c=(l&s.childLanes)!==0,c||(Zo(r,s,l,!1),c=(l&s.childLanes)!==0),y){if(c)return Z_(r,s,l);s.flags|=128}if(y=s.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),le(Tt,Tt.current),c)break;return null;case 22:return s.lanes=0,H_(r,s,l,s.pendingProps);case 24:Xr(s,Nt,r.memoizedState.cache)}return cr(r,s,l)}function j_(r,s,l){if(r!==null)if(r.memoizedProps!==s.pendingProps)Mt=!0;else{if(!tp(r,l)&&(s.flags&128)===0)return Mt=!1,lR(r,s,l);Mt=(r.flags&131072)!==0}else Mt=!1,ze&&(s.flags&1048576)!==0&&My(s,Cl,s.index);switch(s.lanes=0,s.tag){case 16:e:{var c=s.pendingProps;if(r=io(s.elementType),s.type=r,typeof r=="function")oh(r)?(c=ao(r,c),s.tag=1,s=$_(null,s,r,c,l)):(s.tag=0,s=$h(null,s,r,c,l));else{if(r!=null){var y=r.$$typeof;if(y===oe){s.tag=11,s=q_(null,s,r,c,l);break e}else if(y===x){s.tag=14,s=B_(null,s,r,c,l);break e}}throw s=ke(r)||r,Error(i(306,s,""))}}return s;case 0:return $h(r,s,s.type,s.pendingProps,l);case 1:return c=s.type,y=ao(c,s.pendingProps),$_(r,s,c,y,l);case 3:e:{if(Ze(s,s.stateNode.containerInfo),r===null)throw Error(i(387));c=s.pendingProps;var v=s.memoizedState;y=v.element,Eh(r,s),Dl(s,c,null,l);var A=s.memoizedState;if(c=A.cache,Xr(s,Nt,c),c!==v.cache&&mh(s,[Nt],l,!0),Ml(),c=A.element,v.isDehydrated)if(v={element:c,isDehydrated:!1,cache:A.cache},s.updateQueue.baseState=v,s.memoizedState=v,s.flags&256){s=Q_(r,s,c,l);break e}else if(c!==y){y=qn(Error(i(424)),s),Il(y),s=Q_(r,s,c,l);break e}else{switch(r=s.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(ct=Yn(r.firstChild),Jt=s,ze=!0,$r=null,Hn=!0,l=Hy(s,null,c,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(js(),c===y){s=cr(r,s,l);break e}Qt(r,s,c,l)}s=s.child}return s;case 26:return Gc(r,s),r===null?(l=cT(s.type,null,s.pendingProps,null))?s.memoizedState=l:ze||(l=s.type,r=s.pendingProps,c=rf(Ae.current).createElement(l),c[wt]=s,c[Gt]=r,Xt(c,l,r),Rt(c),s.stateNode=c):s.memoizedState=cT(s.type,r.memoizedProps,s.pendingProps,r.memoizedState),null;case 27:return Ps(s),r===null&&ze&&(c=s.stateNode=aT(s.type,s.pendingProps,Ae.current),Jt=s,Hn=!0,y=ct,us(s.type)?(kp=y,ct=Yn(c.firstChild)):ct=y),Qt(r,s,s.pendingProps.children,l),Gc(r,s),r===null&&(s.flags|=4194304),s.child;case 5:return r===null&&ze&&((y=c=ct)&&(c=OR(c,s.type,s.pendingProps,Hn),c!==null?(s.stateNode=c,Jt=s,ct=Yn(c.firstChild),Hn=!1,y=!0):y=!1),y||Qr(s)),Ps(s),y=s.type,v=s.pendingProps,A=r!==null?r.memoizedProps:null,c=v.children,Np(y,v)?c=null:A!==null&&Np(y,A)&&(s.flags|=32),s.memoizedState!==null&&(y=bh(r,s,jw,null,null,l),Zl._currentValue=y),Gc(r,s),Qt(r,s,c,l),s.child;case 6:return r===null&&ze&&((r=l=ct)&&(l=FR(l,s.pendingProps,Hn),l!==null?(s.stateNode=l,Jt=s,ct=null,r=!0):r=!1),r||Qr(s)),null;case 13:return X_(r,s,l);case 4:return Ze(s,s.stateNode.containerInfo),c=s.pendingProps,r===null?s.child=so(s,null,c,l):Qt(r,s,c,l),s.child;case 11:return q_(r,s,s.type,s.pendingProps,l);case 7:return Qt(r,s,s.pendingProps,l),s.child;case 8:return Qt(r,s,s.pendingProps.children,l),s.child;case 12:return Qt(r,s,s.pendingProps.children,l),s.child;case 10:return c=s.pendingProps,Xr(s,s.type,c.value),Qt(r,s,c.children,l),s.child;case 9:return y=s.type._context,c=s.pendingProps.children,to(s),y=$t(y),c=c(y),s.flags|=1,Qt(r,s,c,l),s.child;case 14:return B_(r,s,s.type,s.pendingProps,l);case 15:return z_(r,s,s.type,s.pendingProps,l);case 19:return Z_(r,s,l);case 31:return aR(r,s,l);case 22:return H_(r,s,l,s.pendingProps);case 24:return to(s),c=$t(Nt),r===null?(y=_h(),y===null&&(y=at,v=gh(),y.pooledCache=v,v.refCount++,v!==null&&(y.pooledCacheLanes|=l),y=v),s.memoizedState={parent:c,cache:y},Th(s),Xr(s,Nt,y)):((r.lanes&l)!==0&&(Eh(r,s),Dl(s,null,null,l),Ml()),y=r.memoizedState,v=s.memoizedState,y.parent!==c?(y={parent:c,cache:c},s.memoizedState=y,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=y),Xr(s,Nt,c)):(c=v.cache,Xr(s,Nt,c),c!==y.cache&&mh(s,[Nt],l,!0))),Qt(r,s,s.pendingProps.children,l),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function fr(r){r.flags|=4}function np(r,s,l,c,y){if((s=(r.mode&32)!==0)&&(s=!1),s){if(r.flags|=16777216,(y&335544128)===y)if(r.stateNode.complete)r.flags|=8192;else if(wv())r.flags|=8192;else throw ro=Ic,vh}else r.flags&=-16777217}function ev(r,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!mT(s))if(wv())r.flags|=8192;else throw ro=Ic,vh}function Bc(r,s){s!==null&&(r.flags|=4),r.flags&16384&&(s=r.tag!==22?$u():536870912,r.lanes|=s,ca|=s)}function Ol(r,s){if(!ze)switch(r.tailMode){case"hidden":s=r.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?r.tail=null:l.sibling=null;break;case"collapsed":l=r.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:c.sibling=null}}function ft(r){var s=r.alternate!==null&&r.alternate.child===r.child,l=0,c=0;if(s)for(var y=r.child;y!==null;)l|=y.lanes|y.childLanes,c|=y.subtreeFlags&65011712,c|=y.flags&65011712,y.return=r,y=y.sibling;else for(y=r.child;y!==null;)l|=y.lanes|y.childLanes,c|=y.subtreeFlags,c|=y.flags,y.return=r,y=y.sibling;return r.subtreeFlags|=c,r.childLanes=l,s}function uR(r,s,l){var c=s.pendingProps;switch(ch(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ft(s),null;case 1:return ft(s),null;case 3:return l=s.stateNode,c=null,r!==null&&(c=r.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),ar(Nt),je(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(r===null||r.child===null)&&(Wo(s)?fr(s):r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,dh())),ft(s),null;case 26:var y=s.type,v=s.memoizedState;return r===null?(fr(s),v!==null?(ft(s),ev(s,v)):(ft(s),np(s,y,null,c,l))):v?v!==r.memoizedState?(fr(s),ft(s),ev(s,v)):(ft(s),s.flags&=-16777217):(r=r.memoizedProps,r!==c&&fr(s),ft(s),np(s,y,r,c,l)),null;case 27:if(No(s),l=Ae.current,y=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==c&&fr(s);else{if(!c){if(s.stateNode===null)throw Error(i(166));return ft(s),null}r=ce.current,Wo(s)?Py(s):(r=aT(y,c,l),s.stateNode=r,fr(s))}return ft(s),null;case 5:if(No(s),y=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==c&&fr(s);else{if(!c){if(s.stateNode===null)throw Error(i(166));return ft(s),null}if(v=ce.current,Wo(s))Py(s);else{var A=rf(Ae.current);switch(v){case 1:v=A.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:v=A.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":v=A.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":v=A.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":v=A.createElement("div"),v.innerHTML="<script><\/script>",v=v.removeChild(v.firstChild);break;case"select":v=typeof c.is=="string"?A.createElement("select",{is:c.is}):A.createElement("select"),c.multiple?v.multiple=!0:c.size&&(v.size=c.size);break;default:v=typeof c.is=="string"?A.createElement(y,{is:c.is}):A.createElement(y)}}v[wt]=s,v[Gt]=c;e:for(A=s.child;A!==null;){if(A.tag===5||A.tag===6)v.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===s)break e;for(;A.sibling===null;){if(A.return===null||A.return===s)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}s.stateNode=v;e:switch(Xt(v,y,c),y){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&fr(s)}}return ft(s),np(s,s.type,r===null?null:r.memoizedProps,s.pendingProps,l),null;case 6:if(r&&s.stateNode!=null)r.memoizedProps!==c&&fr(s);else{if(typeof c!="string"&&s.stateNode===null)throw Error(i(166));if(r=Ae.current,Wo(s)){if(r=s.stateNode,l=s.memoizedProps,c=null,y=Jt,y!==null)switch(y.tag){case 27:case 5:c=y.memoizedProps}r[wt]=s,r=!!(r.nodeValue===l||c!==null&&c.suppressHydrationWarning===!0||Xv(r.nodeValue,l)),r||Qr(s,!0)}else r=rf(r).createTextNode(c),r[wt]=s,s.stateNode=r}return ft(s),null;case 31:if(l=s.memoizedState,r===null||r.memoizedState!==null){if(c=Wo(s),l!==null){if(r===null){if(!c)throw Error(i(318));if(r=s.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(557));r[wt]=s}else js(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;ft(s),r=!1}else l=dh(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=l),r=!0;if(!r)return s.flags&256?(xn(s),s):(xn(s),null);if((s.flags&128)!==0)throw Error(i(558))}return ft(s),null;case 13:if(c=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(y=Wo(s),c!==null&&c.dehydrated!==null){if(r===null){if(!y)throw Error(i(318));if(y=s.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(i(317));y[wt]=s}else js(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;ft(s),y=!1}else y=dh(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=y),y=!0;if(!y)return s.flags&256?(xn(s),s):(xn(s),null)}return xn(s),(s.flags&128)!==0?(s.lanes=l,s):(l=c!==null,r=r!==null&&r.memoizedState!==null,l&&(c=s.child,y=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(y=c.alternate.memoizedState.cachePool.pool),v=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(v=c.memoizedState.cachePool.pool),v!==y&&(c.flags|=2048)),l!==r&&l&&(s.child.flags|=8192),Bc(s,s.updateQueue),ft(s),null);case 4:return je(),r===null&&Cp(s.stateNode.containerInfo),ft(s),null;case 10:return ar(s.type),ft(s),null;case 19:if(z(Tt),c=s.memoizedState,c===null)return ft(s),null;if(y=(s.flags&128)!==0,v=c.rendering,v===null)if(y)Ol(c,!1);else{if(yt!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(v=Nc(r),v!==null){for(s.flags|=128,Ol(c,!1),r=v.updateQueue,s.updateQueue=r,Bc(s,r),s.subtreeFlags=0,r=l,l=s.child;l!==null;)by(l,r),l=l.sibling;return le(Tt,Tt.current&1|2),ze&&sr(s,c.treeForkCount),s.child}r=r.sibling}c.tail!==null&&ln()>Jc&&(s.flags|=128,y=!0,Ol(c,!1),s.lanes=4194304)}else{if(!y)if(r=Nc(v),r!==null){if(s.flags|=128,y=!0,r=r.updateQueue,s.updateQueue=r,Bc(s,r),Ol(c,!0),c.tail===null&&c.tailMode==="hidden"&&!v.alternate&&!ze)return ft(s),null}else 2*ln()-c.renderingStartTime>Jc&&l!==536870912&&(s.flags|=128,y=!0,Ol(c,!1),s.lanes=4194304);c.isBackwards?(v.sibling=s.child,s.child=v):(r=c.last,r!==null?r.sibling=v:s.child=v,c.last=v)}return c.tail!==null?(r=c.tail,c.rendering=r,c.tail=r.sibling,c.renderingStartTime=ln(),r.sibling=null,l=Tt.current,le(Tt,y?l&1|2:l&1),ze&&sr(s,c.treeForkCount),r):(ft(s),null);case 22:case 23:return xn(s),Ih(),c=s.memoizedState!==null,r!==null?r.memoizedState!==null!==c&&(s.flags|=8192):c&&(s.flags|=8192),c?(l&536870912)!==0&&(s.flags&128)===0&&(ft(s),s.subtreeFlags&6&&(s.flags|=8192)):ft(s),l=s.updateQueue,l!==null&&Bc(s,l.retryQueue),l=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),c=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),c!==l&&(s.flags|=2048),r!==null&&z(no),null;case 24:return l=null,r!==null&&(l=r.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),ar(Nt),ft(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function cR(r,s){switch(ch(s),s.tag){case 1:return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return ar(Nt),je(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 26:case 27:case 5:return No(s),null;case 31:if(s.memoizedState!==null){if(xn(s),s.alternate===null)throw Error(i(340));js()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 13:if(xn(s),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(i(340));js()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return z(Tt),null;case 4:return je(),null;case 10:return ar(s.type),null;case 22:case 23:return xn(s),Ih(),r!==null&&z(no),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 24:return ar(Nt),null;case 25:return null;default:return null}}function tv(r,s){switch(ch(s),s.tag){case 3:ar(Nt),je();break;case 26:case 27:case 5:No(s);break;case 4:je();break;case 31:s.memoizedState!==null&&xn(s);break;case 13:xn(s);break;case 19:z(Tt);break;case 10:ar(s.type);break;case 22:case 23:xn(s),Ih(),r!==null&&z(no);break;case 24:ar(Nt)}}function Fl(r,s){try{var l=s.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var y=c.next;l=y;do{if((l.tag&r)===r){c=void 0;var v=l.create,A=l.inst;c=v(),A.destroy=c}l=l.next}while(l!==y)}}catch(w){nt(s,s.return,w)}}function ns(r,s,l){try{var c=s.updateQueue,y=c!==null?c.lastEffect:null;if(y!==null){var v=y.next;c=v;do{if((c.tag&r)===r){var A=c.inst,w=A.destroy;if(w!==void 0){A.destroy=void 0,y=s;var U=l,J=w;try{J()}catch(te){nt(y,U,te)}}}c=c.next}while(c!==v)}}catch(te){nt(s,s.return,te)}}function nv(r){var s=r.updateQueue;if(s!==null){var l=r.stateNode;try{Yy(s,l)}catch(c){nt(r,r.return,c)}}}function iv(r,s,l){l.props=ao(r.type,r.memoizedProps),l.state=r.memoizedState;try{l.componentWillUnmount()}catch(c){nt(r,s,c)}}function Gl(r,s){try{var l=r.ref;if(l!==null){switch(r.tag){case 26:case 27:case 5:var c=r.stateNode;break;case 30:c=r.stateNode;break;default:c=r.stateNode}typeof l=="function"?r.refCleanup=l(c):l.current=c}}catch(y){nt(r,s,y)}}function Fi(r,s){var l=r.ref,c=r.refCleanup;if(l!==null)if(typeof c=="function")try{c()}catch(y){nt(r,s,y)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(y){nt(r,s,y)}else l.current=null}function rv(r){var s=r.type,l=r.memoizedProps,c=r.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":l.autoFocus&&c.focus();break e;case"img":l.src?c.src=l.src:l.srcSet&&(c.srcset=l.srcSet)}}catch(y){nt(r,r.return,y)}}function ip(r,s,l){try{var c=r.stateNode;DR(c,r.type,l,s),c[Gt]=s}catch(y){nt(r,r.return,y)}}function sv(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&us(r.type)||r.tag===4}function rp(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||sv(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&us(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function sp(r,s,l){var c=r.tag;if(c===5||c===6)r=r.stateNode,s?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(r,s):(s=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,s.appendChild(r),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=ni));else if(c!==4&&(c===27&&us(r.type)&&(l=r.stateNode,s=null),r=r.child,r!==null))for(sp(r,s,l),r=r.sibling;r!==null;)sp(r,s,l),r=r.sibling}function zc(r,s,l){var c=r.tag;if(c===5||c===6)r=r.stateNode,s?l.insertBefore(r,s):l.appendChild(r);else if(c!==4&&(c===27&&us(r.type)&&(l=r.stateNode),r=r.child,r!==null))for(zc(r,s,l),r=r.sibling;r!==null;)zc(r,s,l),r=r.sibling}function ov(r){var s=r.stateNode,l=r.memoizedProps;try{for(var c=r.type,y=s.attributes;y.length;)s.removeAttributeNode(y[0]);Xt(s,c,l),s[wt]=r,s[Gt]=l}catch(v){nt(r,r.return,v)}}var dr=!1,Dt=!1,op=!1,av=typeof WeakSet=="function"?WeakSet:Set,Bt=null;function fR(r,s){if(r=r.containerInfo,Rp=ff,r=vy(r),jd(r)){if("selectionStart"in r)var l={start:r.selectionStart,end:r.selectionEnd};else e:{l=(l=r.ownerDocument)&&l.defaultView||window;var c=l.getSelection&&l.getSelection();if(c&&c.rangeCount!==0){l=c.anchorNode;var y=c.anchorOffset,v=c.focusNode;c=c.focusOffset;try{l.nodeType,v.nodeType}catch{l=null;break e}var A=0,w=-1,U=-1,J=0,te=0,se=r,$=null;t:for(;;){for(var W;se!==l||y!==0&&se.nodeType!==3||(w=A+y),se!==v||c!==0&&se.nodeType!==3||(U=A+c),se.nodeType===3&&(A+=se.nodeValue.length),(W=se.firstChild)!==null;)$=se,se=W;for(;;){if(se===r)break t;if($===l&&++J===y&&(w=A),$===v&&++te===c&&(U=A),(W=se.nextSibling)!==null)break;se=$,$=se.parentNode}se=W}l=w===-1||U===-1?null:{start:w,end:U}}else l=null}l=l||{start:0,end:0}}else l=null;for(bp={focusedElem:r,selectionRange:l},ff=!1,Bt=s;Bt!==null;)if(s=Bt,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,Bt=r;else for(;Bt!==null;){switch(s=Bt,v=s.alternate,r=s.flags,s.tag){case 0:if((r&4)!==0&&(r=s.updateQueue,r=r!==null?r.events:null,r!==null))for(l=0;l<r.length;l++)y=r[l],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&v!==null){r=void 0,l=s,y=v.memoizedProps,v=v.memoizedState,c=l.stateNode;try{var _e=ao(l.type,y);r=c.getSnapshotBeforeUpdate(_e,v),c.__reactInternalSnapshotBeforeUpdate=r}catch(Ce){nt(l,l.return,Ce)}}break;case 3:if((r&1024)!==0){if(r=s.stateNode.containerInfo,l=r.nodeType,l===9)Mp(r);else if(l===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":Mp(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=s.sibling,r!==null){r.return=s.return,Bt=r;break}Bt=s.return}}function lv(r,s,l){var c=l.flags;switch(l.tag){case 0:case 11:case 15:pr(r,l),c&4&&Fl(5,l);break;case 1:if(pr(r,l),c&4)if(r=l.stateNode,s===null)try{r.componentDidMount()}catch(A){nt(l,l.return,A)}else{var y=ao(l.type,s.memoizedProps);s=s.memoizedState;try{r.componentDidUpdate(y,s,r.__reactInternalSnapshotBeforeUpdate)}catch(A){nt(l,l.return,A)}}c&64&&nv(l),c&512&&Gl(l,l.return);break;case 3:if(pr(r,l),c&64&&(r=l.updateQueue,r!==null)){if(s=null,l.child!==null)switch(l.child.tag){case 27:case 5:s=l.child.stateNode;break;case 1:s=l.child.stateNode}try{Yy(r,s)}catch(A){nt(l,l.return,A)}}break;case 27:s===null&&c&4&&ov(l);case 26:case 5:pr(r,l),s===null&&c&4&&rv(l),c&512&&Gl(l,l.return);break;case 12:pr(r,l);break;case 31:pr(r,l),c&4&&fv(r,l);break;case 13:pr(r,l),c&4&&dv(r,l),c&64&&(r=l.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(l=TR.bind(null,l),GR(r,l))));break;case 22:if(c=l.memoizedState!==null||dr,!c){s=s!==null&&s.memoizedState!==null||Dt,y=dr;var v=Dt;dr=c,(Dt=s)&&!v?mr(r,l,(l.subtreeFlags&8772)!==0):pr(r,l),dr=y,Dt=v}break;case 30:break;default:pr(r,l)}}function uv(r){var s=r.alternate;s!==null&&(r.alternate=null,uv(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&ko(s)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var pt=null,gn=!1;function hr(r,s,l){for(l=l.child;l!==null;)cv(r,s,l),l=l.sibling}function cv(r,s,l){if(Kt&&typeof Kt.onCommitFiberUnmount=="function")try{Kt.onCommitFiberUnmount(Zn,l)}catch{}switch(l.tag){case 26:Dt||Fi(l,s),hr(r,s,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Dt||Fi(l,s);var c=pt,y=gn;us(l.type)&&(pt=l.stateNode,gn=!1),hr(r,s,l),Ql(l.stateNode),pt=c,gn=y;break;case 5:Dt||Fi(l,s);case 6:if(c=pt,y=gn,pt=null,hr(r,s,l),pt=c,gn=y,pt!==null)if(gn)try{(pt.nodeType===9?pt.body:pt.nodeName==="HTML"?pt.ownerDocument.body:pt).removeChild(l.stateNode)}catch(v){nt(l,s,v)}else try{pt.removeChild(l.stateNode)}catch(v){nt(l,s,v)}break;case 18:pt!==null&&(gn?(r=pt,nT(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,l.stateNode),_a(r)):nT(pt,l.stateNode));break;case 4:c=pt,y=gn,pt=l.stateNode.containerInfo,gn=!0,hr(r,s,l),pt=c,gn=y;break;case 0:case 11:case 14:case 15:ns(2,l,s),Dt||ns(4,l,s),hr(r,s,l);break;case 1:Dt||(Fi(l,s),c=l.stateNode,typeof c.componentWillUnmount=="function"&&iv(l,s,c)),hr(r,s,l);break;case 21:hr(r,s,l);break;case 22:Dt=(c=Dt)||l.memoizedState!==null,hr(r,s,l),Dt=c;break;default:hr(r,s,l)}}function fv(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{_a(r)}catch(l){nt(s,s.return,l)}}}function dv(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{_a(r)}catch(l){nt(s,s.return,l)}}function dR(r){switch(r.tag){case 31:case 13:case 19:var s=r.stateNode;return s===null&&(s=r.stateNode=new av),s;case 22:return r=r.stateNode,s=r._retryCache,s===null&&(s=r._retryCache=new av),s;default:throw Error(i(435,r.tag))}}function Hc(r,s){var l=dR(r);s.forEach(function(c){if(!l.has(c)){l.add(c);var y=ER.bind(null,r,c);c.then(y,y)}})}function yn(r,s){var l=s.deletions;if(l!==null)for(var c=0;c<l.length;c++){var y=l[c],v=r,A=s,w=A;e:for(;w!==null;){switch(w.tag){case 27:if(us(w.type)){pt=w.stateNode,gn=!1;break e}break;case 5:pt=w.stateNode,gn=!1;break e;case 3:case 4:pt=w.stateNode.containerInfo,gn=!0;break e}w=w.return}if(pt===null)throw Error(i(160));cv(v,A,y),pt=null,gn=!1,v=y.alternate,v!==null&&(v.return=null),y.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)hv(s,r),s=s.sibling}var ui=null;function hv(r,s){var l=r.alternate,c=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:yn(s,r),_n(r),c&4&&(ns(3,r,r.return),Fl(3,r),ns(5,r,r.return));break;case 1:yn(s,r),_n(r),c&512&&(Dt||l===null||Fi(l,l.return)),c&64&&dr&&(r=r.updateQueue,r!==null&&(c=r.callbacks,c!==null&&(l=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=l===null?c:l.concat(c))));break;case 26:var y=ui;if(yn(s,r),_n(r),c&512&&(Dt||l===null||Fi(l,l.return)),c&4){var v=l!==null?l.memoizedState:null;if(c=r.memoizedState,l===null)if(c===null)if(r.stateNode===null){e:{c=r.type,l=r.memoizedProps,y=y.ownerDocument||y;t:switch(c){case"title":v=y.getElementsByTagName("title")[0],(!v||v[Ii]||v[wt]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=y.createElement(c),y.head.insertBefore(v,y.querySelector("head > title"))),Xt(v,c,l),v[wt]=r,Rt(v),c=v;break e;case"link":var A=hT("link","href",y).get(c+(l.href||""));if(A){for(var w=0;w<A.length;w++)if(v=A[w],v.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&v.getAttribute("rel")===(l.rel==null?null:l.rel)&&v.getAttribute("title")===(l.title==null?null:l.title)&&v.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){A.splice(w,1);break t}}v=y.createElement(c),Xt(v,c,l),y.head.appendChild(v);break;case"meta":if(A=hT("meta","content",y).get(c+(l.content||""))){for(w=0;w<A.length;w++)if(v=A[w],v.getAttribute("content")===(l.content==null?null:""+l.content)&&v.getAttribute("name")===(l.name==null?null:l.name)&&v.getAttribute("property")===(l.property==null?null:l.property)&&v.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&v.getAttribute("charset")===(l.charSet==null?null:l.charSet)){A.splice(w,1);break t}}v=y.createElement(c),Xt(v,c,l),y.head.appendChild(v);break;default:throw Error(i(468,c))}v[wt]=r,Rt(v),c=v}r.stateNode=c}else pT(y,r.type,r.stateNode);else r.stateNode=dT(y,c,r.memoizedProps);else v!==c?(v===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):v.count--,c===null?pT(y,r.type,r.stateNode):dT(y,c,r.memoizedProps)):c===null&&r.stateNode!==null&&ip(r,r.memoizedProps,l.memoizedProps)}break;case 27:yn(s,r),_n(r),c&512&&(Dt||l===null||Fi(l,l.return)),l!==null&&c&4&&ip(r,r.memoizedProps,l.memoizedProps);break;case 5:if(yn(s,r),_n(r),c&512&&(Dt||l===null||Fi(l,l.return)),r.flags&32){y=r.stateNode;try{mn(y,"")}catch(_e){nt(r,r.return,_e)}}c&4&&r.stateNode!=null&&(y=r.memoizedProps,ip(r,y,l!==null?l.memoizedProps:y)),c&1024&&(op=!0);break;case 6:if(yn(s,r),_n(r),c&4){if(r.stateNode===null)throw Error(i(162));c=r.memoizedProps,l=r.stateNode;try{l.nodeValue=c}catch(_e){nt(r,r.return,_e)}}break;case 3:if(af=null,y=ui,ui=sf(s.containerInfo),yn(s,r),ui=y,_n(r),c&4&&l!==null&&l.memoizedState.isDehydrated)try{_a(s.containerInfo)}catch(_e){nt(r,r.return,_e)}op&&(op=!1,pv(r));break;case 4:c=ui,ui=sf(r.stateNode.containerInfo),yn(s,r),_n(r),ui=c;break;case 12:yn(s,r),_n(r);break;case 31:yn(s,r),_n(r),c&4&&(c=r.updateQueue,c!==null&&(r.updateQueue=null,Hc(r,c)));break;case 13:yn(s,r),_n(r),r.child.flags&8192&&r.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Yc=ln()),c&4&&(c=r.updateQueue,c!==null&&(r.updateQueue=null,Hc(r,c)));break;case 22:y=r.memoizedState!==null;var U=l!==null&&l.memoizedState!==null,J=dr,te=Dt;if(dr=J||y,Dt=te||U,yn(s,r),Dt=te,dr=J,_n(r),c&8192)e:for(s=r.stateNode,s._visibility=y?s._visibility&-2:s._visibility|1,y&&(l===null||U||dr||Dt||lo(r)),l=null,s=r;;){if(s.tag===5||s.tag===26){if(l===null){U=l=s;try{if(v=U.stateNode,y)A=v.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{w=U.stateNode;var se=U.memoizedProps.style,$=se!=null&&se.hasOwnProperty("display")?se.display:null;w.style.display=$==null||typeof $=="boolean"?"":(""+$).trim()}}catch(_e){nt(U,U.return,_e)}}}else if(s.tag===6){if(l===null){U=s;try{U.stateNode.nodeValue=y?"":U.memoizedProps}catch(_e){nt(U,U.return,_e)}}}else if(s.tag===18){if(l===null){U=s;try{var W=U.stateNode;y?iT(W,!0):iT(U.stateNode,!1)}catch(_e){nt(U,U.return,_e)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===r)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;l===s&&(l=null),s=s.return}l===s&&(l=null),s.sibling.return=s.return,s=s.sibling}c&4&&(c=r.updateQueue,c!==null&&(l=c.retryQueue,l!==null&&(c.retryQueue=null,Hc(r,l))));break;case 19:yn(s,r),_n(r),c&4&&(c=r.updateQueue,c!==null&&(r.updateQueue=null,Hc(r,c)));break;case 30:break;case 21:break;default:yn(s,r),_n(r)}}function _n(r){var s=r.flags;if(s&2){try{for(var l,c=r.return;c!==null;){if(sv(c)){l=c;break}c=c.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var y=l.stateNode,v=rp(r);zc(r,v,y);break;case 5:var A=l.stateNode;l.flags&32&&(mn(A,""),l.flags&=-33);var w=rp(r);zc(r,w,A);break;case 3:case 4:var U=l.stateNode.containerInfo,J=rp(r);sp(r,J,U);break;default:throw Error(i(161))}}catch(te){nt(r,r.return,te)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function pv(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var s=r;pv(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),r=r.sibling}}function pr(r,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)lv(r,s.alternate,s),s=s.sibling}function lo(r){for(r=r.child;r!==null;){var s=r;switch(s.tag){case 0:case 11:case 14:case 15:ns(4,s,s.return),lo(s);break;case 1:Fi(s,s.return);var l=s.stateNode;typeof l.componentWillUnmount=="function"&&iv(s,s.return,l),lo(s);break;case 27:Ql(s.stateNode);case 26:case 5:Fi(s,s.return),lo(s);break;case 22:s.memoizedState===null&&lo(s);break;case 30:lo(s);break;default:lo(s)}r=r.sibling}}function mr(r,s,l){for(l=l&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var c=s.alternate,y=r,v=s,A=v.flags;switch(v.tag){case 0:case 11:case 15:mr(y,v,l),Fl(4,v);break;case 1:if(mr(y,v,l),c=v,y=c.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(J){nt(c,c.return,J)}if(c=v,y=c.updateQueue,y!==null){var w=c.stateNode;try{var U=y.shared.hiddenCallbacks;if(U!==null)for(y.shared.hiddenCallbacks=null,y=0;y<U.length;y++)Ky(U[y],w)}catch(J){nt(c,c.return,J)}}l&&A&64&&nv(v),Gl(v,v.return);break;case 27:ov(v);case 26:case 5:mr(y,v,l),l&&c===null&&A&4&&rv(v),Gl(v,v.return);break;case 12:mr(y,v,l);break;case 31:mr(y,v,l),l&&A&4&&fv(y,v);break;case 13:mr(y,v,l),l&&A&4&&dv(y,v);break;case 22:v.memoizedState===null&&mr(y,v,l),Gl(v,v.return);break;case 30:break;default:mr(y,v,l)}s=s.sibling}}function ap(r,s){var l=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),r=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),r!==l&&(r!=null&&r.refCount++,l!=null&&wl(l))}function lp(r,s){r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&wl(r))}function ci(r,s,l,c){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)mv(r,s,l,c),s=s.sibling}function mv(r,s,l,c){var y=s.flags;switch(s.tag){case 0:case 11:case 15:ci(r,s,l,c),y&2048&&Fl(9,s);break;case 1:ci(r,s,l,c);break;case 3:ci(r,s,l,c),y&2048&&(r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&wl(r)));break;case 12:if(y&2048){ci(r,s,l,c),r=s.stateNode;try{var v=s.memoizedProps,A=v.id,w=v.onPostCommit;typeof w=="function"&&w(A,s.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(U){nt(s,s.return,U)}}else ci(r,s,l,c);break;case 31:ci(r,s,l,c);break;case 13:ci(r,s,l,c);break;case 23:break;case 22:v=s.stateNode,A=s.alternate,s.memoizedState!==null?v._visibility&2?ci(r,s,l,c):ql(r,s):v._visibility&2?ci(r,s,l,c):(v._visibility|=2,aa(r,s,l,c,(s.subtreeFlags&10256)!==0||!1)),y&2048&&ap(A,s);break;case 24:ci(r,s,l,c),y&2048&&lp(s.alternate,s);break;default:ci(r,s,l,c)}}function aa(r,s,l,c,y){for(y=y&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var v=r,A=s,w=l,U=c,J=A.flags;switch(A.tag){case 0:case 11:case 15:aa(v,A,w,U,y),Fl(8,A);break;case 23:break;case 22:var te=A.stateNode;A.memoizedState!==null?te._visibility&2?aa(v,A,w,U,y):ql(v,A):(te._visibility|=2,aa(v,A,w,U,y)),y&&J&2048&&ap(A.alternate,A);break;case 24:aa(v,A,w,U,y),y&&J&2048&&lp(A.alternate,A);break;default:aa(v,A,w,U,y)}s=s.sibling}}function ql(r,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var l=r,c=s,y=c.flags;switch(c.tag){case 22:ql(l,c),y&2048&&ap(c.alternate,c);break;case 24:ql(l,c),y&2048&&lp(c.alternate,c);break;default:ql(l,c)}s=s.sibling}}var Bl=8192;function la(r,s,l){if(r.subtreeFlags&Bl)for(r=r.child;r!==null;)gv(r,s,l),r=r.sibling}function gv(r,s,l){switch(r.tag){case 26:la(r,s,l),r.flags&Bl&&r.memoizedState!==null&&ZR(l,ui,r.memoizedState,r.memoizedProps);break;case 5:la(r,s,l);break;case 3:case 4:var c=ui;ui=sf(r.stateNode.containerInfo),la(r,s,l),ui=c;break;case 22:r.memoizedState===null&&(c=r.alternate,c!==null&&c.memoizedState!==null?(c=Bl,Bl=16777216,la(r,s,l),Bl=c):la(r,s,l));break;default:la(r,s,l)}}function yv(r){var s=r.alternate;if(s!==null&&(r=s.child,r!==null)){s.child=null;do s=r.sibling,r.sibling=null,r=s;while(r!==null)}}function zl(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var c=s[l];Bt=c,vv(c,r)}yv(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)_v(r),r=r.sibling}function _v(r){switch(r.tag){case 0:case 11:case 15:zl(r),r.flags&2048&&ns(9,r,r.return);break;case 3:zl(r);break;case 12:zl(r);break;case 22:var s=r.stateNode;r.memoizedState!==null&&s._visibility&2&&(r.return===null||r.return.tag!==13)?(s._visibility&=-3,Kc(r)):zl(r);break;default:zl(r)}}function Kc(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var c=s[l];Bt=c,vv(c,r)}yv(r)}for(r=r.child;r!==null;){switch(s=r,s.tag){case 0:case 11:case 15:ns(8,s,s.return),Kc(s);break;case 22:l=s.stateNode,l._visibility&2&&(l._visibility&=-3,Kc(s));break;default:Kc(s)}r=r.sibling}}function vv(r,s){for(;Bt!==null;){var l=Bt;switch(l.tag){case 0:case 11:case 15:ns(8,l,s);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var c=l.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:wl(l.memoizedState.cache)}if(c=l.child,c!==null)c.return=l,Bt=c;else e:for(l=r;Bt!==null;){c=Bt;var y=c.sibling,v=c.return;if(uv(c),c===l){Bt=null;break e}if(y!==null){y.return=v,Bt=y;break e}Bt=v}}}var hR={getCacheForType:function(r){var s=$t(Nt),l=s.data.get(r);return l===void 0&&(l=r(),s.data.set(r,l)),l},cacheSignal:function(){return $t(Nt).controller.signal}},pR=typeof WeakMap=="function"?WeakMap:Map,Xe=0,at=null,Ue=null,Oe=0,tt=0,Mn=null,is=!1,ua=!1,up=!1,gr=0,yt=0,rs=0,uo=0,cp=0,Dn=0,ca=0,Hl=null,vn=null,fp=!1,Yc=0,Tv=0,Jc=1/0,$c=null,ss=null,Ot=0,os=null,fa=null,yr=0,dp=0,hp=null,Ev=null,Kl=0,pp=null;function Pn(){return(Xe&2)!==0&&Oe!==0?Oe&-Oe:Q.T!==null?Tp():Qu()}function Sv(){if(Dn===0)if((Oe&536870912)===0||ze){var r=Us;Us<<=1,(Us&3932160)===0&&(Us=262144),Dn=r}else Dn=536870912;return r=Nn.current,r!==null&&(r.flags|=32),Dn}function Tn(r,s,l){(r===at&&(tt===2||tt===9)||r.cancelPendingCommit!==null)&&(da(r,0),as(r,Oe,Dn,!1)),Ls(r,l),((Xe&2)===0||r!==at)&&(r===at&&((Xe&2)===0&&(uo|=l),yt===4&&as(r,Oe,Dn,!1)),Gi(r))}function Av(r,s,l){if((Xe&6)!==0)throw Error(i(327));var c=!l&&(s&127)===0&&(s&r.expiredLanes)===0||jn(r,s),y=c?yR(r,s):gp(r,s,!0),v=c;do{if(y===0){ua&&!c&&as(r,s,0,!1);break}else{if(l=r.current.alternate,v&&!mR(l)){y=gp(r,s,!1),v=!1;continue}if(y===2){if(v=s,r.errorRecoveryDisabledLanes&v)var A=0;else A=r.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){s=A;e:{var w=r;y=Hl;var U=w.current.memoizedState.isDehydrated;if(U&&(da(w,A).flags|=256),A=gp(w,A,!1),A!==2){if(up&&!U){w.errorRecoveryDisabledLanes|=v,uo|=v,y=4;break e}v=vn,vn=y,v!==null&&(vn===null?vn=v:vn.push.apply(vn,v))}y=A}if(v=!1,y!==2)continue}}if(y===1){da(r,0),as(r,s,0,!0);break}e:{switch(c=r,v=y,v){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:as(c,s,Dn,!is);break e;case 2:vn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(y=Yc+300-ln(),10<y)){if(as(c,s,Dn,!is),Si(c,0,!0)!==0)break e;yr=s,c.timeoutHandle=eT(Cv.bind(null,c,l,vn,$c,fp,s,Dn,uo,ca,is,v,"Throttled",-0,0),y);break e}Cv(c,l,vn,$c,fp,s,Dn,uo,ca,is,v,null,-0,0)}}break}while(!0);Gi(r)}function Cv(r,s,l,c,y,v,A,w,U,J,te,se,$,W){if(r.timeoutHandle=-1,se=s.subtreeFlags,se&8192||(se&16785408)===16785408){se={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ni},gv(s,v,se);var _e=(v&62914560)===v?Yc-ln():(v&4194048)===v?Tv-ln():0;if(_e=jR(se,_e),_e!==null){yr=v,r.cancelPendingCommit=_e(Dv.bind(null,r,s,v,l,c,y,A,w,U,te,se,null,$,W)),as(r,v,A,!J);return}}Dv(r,s,v,l,c,y,A,w,U)}function mR(r){for(var s=r;;){var l=s.tag;if((l===0||l===11||l===15)&&s.flags&16384&&(l=s.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var c=0;c<l.length;c++){var y=l[c],v=y.getSnapshot;y=y.value;try{if(!Rn(v(),y))return!1}catch{return!1}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function as(r,s,l,c){s&=~cp,s&=~uo,r.suspendedLanes|=s,r.pingedLanes&=~s,c&&(r.warmLanes|=s),c=r.expirationTimes;for(var y=s;0<y;){var v=31-_t(y),A=1<<v;c[v]=-1,y&=~A}l!==0&&Os(r,l,s)}function Qc(){return(Xe&6)===0?(Yl(0),!1):!0}function mp(){if(Ue!==null){if(tt===0)var r=Ue.return;else r=Ue,or=eo=null,Mh(r),na=null,bl=0,r=Ue;for(;r!==null;)tv(r.alternate,r),r=r.return;Ue=null}}function da(r,s){var l=r.timeoutHandle;l!==-1&&(r.timeoutHandle=-1,VR(l)),l=r.cancelPendingCommit,l!==null&&(r.cancelPendingCommit=null,l()),yr=0,mp(),at=r,Ue=l=rr(r.current,null),Oe=s,tt=0,Mn=null,is=!1,ua=jn(r,s),up=!1,ca=Dn=cp=uo=rs=yt=0,vn=Hl=null,fp=!1,(s&8)!==0&&(s|=s&32);var c=r.entangledLanes;if(c!==0)for(r=r.entanglements,c&=s;0<c;){var y=31-_t(c),v=1<<y;s|=r[y],c&=~v}return gr=s,gc(),l}function Iv(r,s){Pe=null,Q.H=Ul,s===ta||s===Cc?(s=qy(),tt=3):s===vh?(s=qy(),tt=4):tt=s===Jh?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Mn=s,Ue===null&&(yt=1,Oc(r,qn(s,r.current)))}function wv(){var r=Nn.current;return r===null?!0:(Oe&4194048)===Oe?Kn===null:(Oe&62914560)===Oe||(Oe&536870912)!==0?r===Kn:!1}function Rv(){var r=Q.H;return Q.H=Ul,r===null?Ul:r}function bv(){var r=Q.A;return Q.A=hR,r}function Xc(){yt=4,is||(Oe&4194048)!==Oe&&Nn.current!==null||(ua=!0),(rs&134217727)===0&&(uo&134217727)===0||at===null||as(at,Oe,Dn,!1)}function gp(r,s,l){var c=Xe;Xe|=2;var y=Rv(),v=bv();(at!==r||Oe!==s)&&($c=null,da(r,s)),s=!1;var A=yt;e:do try{if(tt!==0&&Ue!==null){var w=Ue,U=Mn;switch(tt){case 8:mp(),A=6;break e;case 3:case 2:case 9:case 6:Nn.current===null&&(s=!0);var J=tt;if(tt=0,Mn=null,ha(r,w,U,J),l&&ua){A=0;break e}break;default:J=tt,tt=0,Mn=null,ha(r,w,U,J)}}gR(),A=yt;break}catch(te){Iv(r,te)}while(!0);return s&&r.shellSuspendCounter++,or=eo=null,Xe=c,Q.H=y,Q.A=v,Ue===null&&(at=null,Oe=0,gc()),A}function gR(){for(;Ue!==null;)Nv(Ue)}function yR(r,s){var l=Xe;Xe|=2;var c=Rv(),y=bv();at!==r||Oe!==s?($c=null,Jc=ln()+500,da(r,s)):ua=jn(r,s);e:do try{if(tt!==0&&Ue!==null){s=Ue;var v=Mn;t:switch(tt){case 1:tt=0,Mn=null,ha(r,s,v,1);break;case 2:case 9:if(Fy(v)){tt=0,Mn=null,xv(s);break}s=function(){tt!==2&&tt!==9||at!==r||(tt=7),Gi(r)},v.then(s,s);break e;case 3:tt=7;break e;case 4:tt=5;break e;case 7:Fy(v)?(tt=0,Mn=null,xv(s)):(tt=0,Mn=null,ha(r,s,v,7));break;case 5:var A=null;switch(Ue.tag){case 26:A=Ue.memoizedState;case 5:case 27:var w=Ue;if(A?mT(A):w.stateNode.complete){tt=0,Mn=null;var U=w.sibling;if(U!==null)Ue=U;else{var J=w.return;J!==null?(Ue=J,Wc(J)):Ue=null}break t}}tt=0,Mn=null,ha(r,s,v,5);break;case 6:tt=0,Mn=null,ha(r,s,v,6);break;case 8:mp(),yt=6;break e;default:throw Error(i(462))}}_R();break}catch(te){Iv(r,te)}while(!0);return or=eo=null,Q.H=c,Q.A=y,Xe=l,Ue!==null?0:(at=null,Oe=0,gc(),yt)}function _R(){for(;Ue!==null&&!Yd();)Nv(Ue)}function Nv(r){var s=j_(r.alternate,r,gr);r.memoizedProps=r.pendingProps,s===null?Wc(r):Ue=s}function xv(r){var s=r,l=s.alternate;switch(s.tag){case 15:case 0:s=J_(l,s,s.pendingProps,s.type,void 0,Oe);break;case 11:s=J_(l,s,s.pendingProps,s.type.render,s.ref,Oe);break;case 5:Mh(s);default:tv(l,s),s=Ue=by(s,gr),s=j_(l,s,gr)}r.memoizedProps=r.pendingProps,s===null?Wc(r):Ue=s}function ha(r,s,l,c){or=eo=null,Mh(s),na=null,bl=0;var y=s.return;try{if(oR(r,y,s,l,Oe)){yt=1,Oc(r,qn(l,r.current)),Ue=null;return}}catch(v){if(y!==null)throw Ue=y,v;yt=1,Oc(r,qn(l,r.current)),Ue=null;return}s.flags&32768?(ze||c===1?r=!0:ua||(Oe&536870912)!==0?r=!1:(is=r=!0,(c===2||c===9||c===3||c===6)&&(c=Nn.current,c!==null&&c.tag===13&&(c.flags|=16384))),Mv(s,r)):Wc(s)}function Wc(r){var s=r;do{if((s.flags&32768)!==0){Mv(s,is);return}r=s.return;var l=uR(s.alternate,s,gr);if(l!==null){Ue=l;return}if(s=s.sibling,s!==null){Ue=s;return}Ue=s=r}while(s!==null);yt===0&&(yt=5)}function Mv(r,s){do{var l=cR(r.alternate,r);if(l!==null){l.flags&=32767,Ue=l;return}if(l=r.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!s&&(r=r.sibling,r!==null)){Ue=r;return}Ue=r=l}while(r!==null);yt=6,Ue=null}function Dv(r,s,l,c,y,v,A,w,U){r.cancelPendingCommit=null;do Zc();while(Ot!==0);if((Xe&6)!==0)throw Error(i(327));if(s!==null){if(s===r.current)throw Error(i(177));if(v=s.lanes|s.childLanes,v|=rh,Qd(r,l,v,A,w,U),r===at&&(Ue=at=null,Oe=0),fa=s,os=r,yr=l,dp=v,hp=y,Ev=c,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,SR(Lr,function(){return Lv(),null})):(r.callbackNode=null,r.callbackPriority=0),c=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||c){c=Q.T,Q.T=null,y=ee.p,ee.p=2,A=Xe,Xe|=4;try{fR(r,s,l)}finally{Xe=A,ee.p=y,Q.T=c}}Ot=1,Pv(),kv(),Vv()}}function Pv(){if(Ot===1){Ot=0;var r=os,s=fa,l=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||l){l=Q.T,Q.T=null;var c=ee.p;ee.p=2;var y=Xe;Xe|=4;try{hv(s,r);var v=bp,A=vy(r.containerInfo),w=v.focusedElem,U=v.selectionRange;if(A!==w&&w&&w.ownerDocument&&_y(w.ownerDocument.documentElement,w)){if(U!==null&&jd(w)){var J=U.start,te=U.end;if(te===void 0&&(te=J),"selectionStart"in w)w.selectionStart=J,w.selectionEnd=Math.min(te,w.value.length);else{var se=w.ownerDocument||document,$=se&&se.defaultView||window;if($.getSelection){var W=$.getSelection(),_e=w.textContent.length,Ce=Math.min(U.start,_e),ot=U.end===void 0?Ce:Math.min(U.end,_e);!W.extend&&Ce>ot&&(A=ot,ot=Ce,Ce=A);var B=yy(w,Ce),G=yy(w,ot);if(B&&G&&(W.rangeCount!==1||W.anchorNode!==B.node||W.anchorOffset!==B.offset||W.focusNode!==G.node||W.focusOffset!==G.offset)){var Y=se.createRange();Y.setStart(B.node,B.offset),W.removeAllRanges(),Ce>ot?(W.addRange(Y),W.extend(G.node,G.offset)):(Y.setEnd(G.node,G.offset),W.addRange(Y))}}}}for(se=[],W=w;W=W.parentNode;)W.nodeType===1&&se.push({element:W,left:W.scrollLeft,top:W.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<se.length;w++){var ie=se[w];ie.element.scrollLeft=ie.left,ie.element.scrollTop=ie.top}}ff=!!Rp,bp=Rp=null}finally{Xe=y,ee.p=c,Q.T=l}}r.current=s,Ot=2}}function kv(){if(Ot===2){Ot=0;var r=os,s=fa,l=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||l){l=Q.T,Q.T=null;var c=ee.p;ee.p=2;var y=Xe;Xe|=4;try{lv(r,s.alternate,s)}finally{Xe=y,ee.p=c,Q.T=l}}Ot=3}}function Vv(){if(Ot===4||Ot===3){Ot=0,Bu();var r=os,s=fa,l=yr,c=Ev;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Ot=5:(Ot=0,fa=os=null,Uv(r,r.pendingLanes));var y=r.pendingLanes;if(y===0&&(ss=null),er(l),s=s.stateNode,Kt&&typeof Kt.onCommitFiberRoot=="function")try{Kt.onCommitFiberRoot(Zn,s,void 0,(s.current.flags&128)===128)}catch{}if(c!==null){s=Q.T,y=ee.p,ee.p=2,Q.T=null;try{for(var v=r.onRecoverableError,A=0;A<c.length;A++){var w=c[A];v(w.value,{componentStack:w.stack})}}finally{Q.T=s,ee.p=y}}(yr&3)!==0&&Zc(),Gi(r),y=r.pendingLanes,(l&261930)!==0&&(y&42)!==0?r===pp?Kl++:(Kl=0,pp=r):Kl=0,Yl(0)}}function Uv(r,s){(r.pooledCacheLanes&=s)===0&&(s=r.pooledCache,s!=null&&(r.pooledCache=null,wl(s)))}function Zc(){return Pv(),kv(),Vv(),Lv()}function Lv(){if(Ot!==5)return!1;var r=os,s=dp;dp=0;var l=er(yr),c=Q.T,y=ee.p;try{ee.p=32>l?32:l,Q.T=null,l=hp,hp=null;var v=os,A=yr;if(Ot=0,fa=os=null,yr=0,(Xe&6)!==0)throw Error(i(331));var w=Xe;if(Xe|=4,_v(v.current),mv(v,v.current,A,l),Xe=w,Yl(0,!1),Kt&&typeof Kt.onPostCommitFiberRoot=="function")try{Kt.onPostCommitFiberRoot(Zn,v)}catch{}return!0}finally{ee.p=y,Q.T=c,Uv(r,s)}}function Ov(r,s,l){s=qn(l,s),s=Yh(r.stateNode,s,2),r=jr(r,s,2),r!==null&&(Ls(r,2),Gi(r))}function nt(r,s,l){if(r.tag===3)Ov(r,r,l);else for(;s!==null;){if(s.tag===3){Ov(s,r,l);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(ss===null||!ss.has(c))){r=qn(l,r),l=F_(2),c=jr(s,l,2),c!==null&&(G_(l,c,s,r),Ls(c,2),Gi(c));break}}s=s.return}}function yp(r,s,l){var c=r.pingCache;if(c===null){c=r.pingCache=new pR;var y=new Set;c.set(s,y)}else y=c.get(s),y===void 0&&(y=new Set,c.set(s,y));y.has(l)||(up=!0,y.add(l),r=vR.bind(null,r,s,l),s.then(r,r))}function vR(r,s,l){var c=r.pingCache;c!==null&&c.delete(s),r.pingedLanes|=r.suspendedLanes&l,r.warmLanes&=~l,at===r&&(Oe&l)===l&&(yt===4||yt===3&&(Oe&62914560)===Oe&&300>ln()-Yc?(Xe&2)===0&&da(r,0):cp|=l,ca===Oe&&(ca=0)),Gi(r)}function Fv(r,s){s===0&&(s=$u()),r=Ws(r,s),r!==null&&(Ls(r,s),Gi(r))}function TR(r){var s=r.memoizedState,l=0;s!==null&&(l=s.retryLane),Fv(r,l)}function ER(r,s){var l=0;switch(r.tag){case 31:case 13:var c=r.stateNode,y=r.memoizedState;y!==null&&(l=y.retryLane);break;case 19:c=r.stateNode;break;case 22:c=r.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(s),Fv(r,l)}function SR(r,s){return Lt(r,s)}var jc=null,pa=null,_p=!1,ef=!1,vp=!1,ls=0;function Gi(r){r!==pa&&r.next===null&&(pa===null?jc=pa=r:pa=pa.next=r),ef=!0,_p||(_p=!0,CR())}function Yl(r,s){if(!vp&&ef){vp=!0;do for(var l=!1,c=jc;c!==null;){if(r!==0){var y=c.pendingLanes;if(y===0)var v=0;else{var A=c.suspendedLanes,w=c.pingedLanes;v=(1<<31-_t(42|r)+1)-1,v&=y&~(A&~w),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(l=!0,zv(c,v))}else v=Oe,v=Si(c,c===at?v:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(v&3)===0||jn(c,v)||(l=!0,zv(c,v));c=c.next}while(l);vp=!1}}function AR(){Gv()}function Gv(){ef=_p=!1;var r=0;ls!==0&&kR()&&(r=ls);for(var s=ln(),l=null,c=jc;c!==null;){var y=c.next,v=qv(c,s);v===0?(c.next=null,l===null?jc=y:l.next=y,y===null&&(pa=l)):(l=c,(r!==0||(v&3)!==0)&&(ef=!0)),c=y}Ot!==0&&Ot!==5||Yl(r),ls!==0&&(ls=0)}function qv(r,s){for(var l=r.suspendedLanes,c=r.pingedLanes,y=r.expirationTimes,v=r.pendingLanes&-62914561;0<v;){var A=31-_t(v),w=1<<A,U=y[A];U===-1?((w&l)===0||(w&c)!==0)&&(y[A]=$d(w,s)):U<=s&&(r.expiredLanes|=w),v&=~w}if(s=at,l=Oe,l=Si(r,r===s?l:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),c=r.callbackNode,l===0||r===s&&(tt===2||tt===9)||r.cancelPendingCommit!==null)return c!==null&&c!==null&&Ur(c),r.callbackNode=null,r.callbackPriority=0;if((l&3)===0||jn(r,l)){if(s=l&-l,s===r.callbackPriority)return s;switch(c!==null&&Ur(c),er(l)){case 2:case 8:l=nl;break;case 32:l=Lr;break;case 268435456:l=zu;break;default:l=Lr}return c=Bv.bind(null,r),l=Lt(l,c),r.callbackPriority=s,r.callbackNode=l,s}return c!==null&&c!==null&&Ur(c),r.callbackPriority=2,r.callbackNode=null,2}function Bv(r,s){if(Ot!==0&&Ot!==5)return r.callbackNode=null,r.callbackPriority=0,null;var l=r.callbackNode;if(Zc()&&r.callbackNode!==l)return null;var c=Oe;return c=Si(r,r===at?c:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),c===0?null:(Av(r,c,s),qv(r,ln()),r.callbackNode!=null&&r.callbackNode===l?Bv.bind(null,r):null)}function zv(r,s){if(Zc())return null;Av(r,s,!0)}function CR(){UR(function(){(Xe&6)!==0?Lt(tl,AR):Gv()})}function Tp(){if(ls===0){var r=jo;r===0&&(r=Ti,Ti<<=1,(Ti&261888)===0&&(Ti=256)),ls=r}return ls}function Hv(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:Oo(""+r)}function Kv(r,s){var l=s.ownerDocument.createElement("input");return l.name=s.name,l.value=s.value,r.id&&l.setAttribute("form",r.id),s.parentNode.insertBefore(l,s),r=new FormData(r),l.parentNode.removeChild(l),r}function IR(r,s,l,c,y){if(s==="submit"&&l&&l.stateNode===y){var v=Hv((y[Gt]||null).action),A=c.submitter;A&&(s=(s=A[Gt]||null)?Hv(s.formAction):A.getAttribute("formAction"),s!==null&&(v=s,A=null));var w=new Pi("action","action",null,c,y);r.push({event:w,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(ls!==0){var U=A?Kv(y,A):new FormData(y);Gh(l,{pending:!0,data:U,method:y.method,action:v},null,U)}}else typeof v=="function"&&(w.preventDefault(),U=A?Kv(y,A):new FormData(y),Gh(l,{pending:!0,data:U,method:y.method,action:v},v,U))},currentTarget:y}]})}}for(var Ep=0;Ep<ih.length;Ep++){var Sp=ih[Ep],wR=Sp.toLowerCase(),RR=Sp[0].toUpperCase()+Sp.slice(1);li(wR,"on"+RR)}li(Sy,"onAnimationEnd"),li(Ay,"onAnimationIteration"),li(Cy,"onAnimationStart"),li("dblclick","onDoubleClick"),li("focusin","onFocus"),li("focusout","onBlur"),li(zw,"onTransitionRun"),li(Hw,"onTransitionStart"),li(Kw,"onTransitionCancel"),li(Iy,"onTransitionEnd"),Ni("onMouseEnter",["mouseout","mouseover"]),Ni("onMouseLeave",["mouseout","mouseover"]),Ni("onPointerEnter",["pointerout","pointerover"]),Ni("onPointerLeave",["pointerout","pointerover"]),bi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),bi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),bi("onBeforeInput",["compositionend","keypress","textInput","paste"]),bi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),bi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),bi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Jl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Jl));function Yv(r,s){s=(s&4)!==0;for(var l=0;l<r.length;l++){var c=r[l],y=c.event;c=c.listeners;e:{var v=void 0;if(s)for(var A=c.length-1;0<=A;A--){var w=c[A],U=w.instance,J=w.currentTarget;if(w=w.listener,U!==v&&y.isPropagationStopped())break e;v=w,y.currentTarget=J;try{v(y)}catch(te){mc(te)}y.currentTarget=null,v=U}else for(A=0;A<c.length;A++){if(w=c[A],U=w.instance,J=w.currentTarget,w=w.listener,U!==v&&y.isPropagationStopped())break e;v=w,y.currentTarget=J;try{v(y)}catch(te){mc(te)}y.currentTarget=null,v=U}}}}function Le(r,s){var l=s[Po];l===void 0&&(l=s[Po]=new Set);var c=r+"__bubble";l.has(c)||(Jv(s,r,2,!1),l.add(c))}function Ap(r,s,l){var c=0;s&&(c|=4),Jv(l,r,c,s)}var tf="_reactListening"+Math.random().toString(36).slice(2);function Cp(r){if(!r[tf]){r[tf]=!0,sl.forEach(function(l){l!=="selectionchange"&&(bR.has(l)||Ap(l,!1,r),Ap(l,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[tf]||(s[tf]=!0,Ap("selectionchange",!1,s))}}function Jv(r,s,l,c){switch(ST(s)){case 2:var y=nb;break;case 8:y=ib;break;default:y=Fp}l=y.bind(null,s,l,r),y=void 0,!zs||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(y=!0),c?y!==void 0?r.addEventListener(s,l,{capture:!0,passive:y}):r.addEventListener(s,l,!0):y!==void 0?r.addEventListener(s,l,{passive:y}):r.addEventListener(s,l,!1)}function Ip(r,s,l,c,y){var v=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var A=c.tag;if(A===3||A===4){var w=c.stateNode.containerInfo;if(w===y)break;if(A===4)for(A=c.return;A!==null;){var U=A.tag;if((U===3||U===4)&&A.stateNode.containerInfo===y)return;A=A.return}for(;w!==null;){if(A=wi(w),A===null)return;if(U=A.tag,U===5||U===6||U===26||U===27){c=v=A;continue e}w=w.parentNode}}c=c.return}zr(function(){var J=v,te=Ln(l),se=[];e:{var $=wy.get(r);if($!==void 0){var W=Pi,_e=r;switch(r){case"keypress":if(Ks(l)===0)break e;case"keydown":case"keyup":W=dc;break;case"focusin":_e="focus",W=Js;break;case"focusout":_e="blur",W=Js;break;case"beforeblur":case"afterblur":W=Js;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":W=_l;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":W=ic;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":W=E;break;case Sy:case Ay:case Cy:W=sc;break;case Iy:W=b;break;case"scroll":case"scrollend":W=yl;break;case"wheel":W=X;break;case"copy":case"cut":case"paste":W=oc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":W=ir;break;case"toggle":case"beforetoggle":W=De}var Ce=(s&4)!==0,ot=!Ce&&(r==="scroll"||r==="scrollend"),B=Ce?$!==null?$+"Capture":null:$;Ce=[];for(var G=J,Y;G!==null;){var ie=G;if(Y=ie.stateNode,ie=ie.tag,ie!==5&&ie!==26&&ie!==27||Y===null||B===null||(ie=ii(G,B),ie!=null&&Ce.push($l(G,ie,Y))),ot)break;G=G.return}0<Ce.length&&($=new W($,_e,null,l,te),se.push({event:$,listeners:Ce}))}}if((s&7)===0){e:{if($=r==="mouseover"||r==="pointerover",W=r==="mouseout"||r==="pointerout",$&&l!==pl&&(_e=l.relatedTarget||l.fromElement)&&(wi(_e)||_e[Ci]))break e;if((W||$)&&($=te.window===te?te:($=te.ownerDocument)?$.defaultView||$.parentWindow:window,W?(_e=l.relatedTarget||l.toElement,W=J,_e=_e?wi(_e):null,_e!==null&&(ot=a(_e),Ce=_e.tag,_e!==ot||Ce!==5&&Ce!==27&&Ce!==6)&&(_e=null)):(W=null,_e=J),W!==_e)){if(Ce=_l,ie="onMouseLeave",B="onMouseEnter",G="mouse",(r==="pointerout"||r==="pointerover")&&(Ce=ir,ie="onPointerLeave",B="onPointerEnter",G="pointer"),ot=W==null?$:In(W),Y=_e==null?$:In(_e),$=new Ce(ie,G+"leave",W,l,te),$.target=ot,$.relatedTarget=Y,ie=null,wi(te)===J&&(Ce=new Ce(B,G+"enter",_e,l,te),Ce.target=Y,Ce.relatedTarget=ot,ie=Ce),ot=ie,W&&_e)t:{for(Ce=NR,B=W,G=_e,Y=0,ie=B;ie;ie=Ce(ie))Y++;ie=0;for(var Ee=G;Ee;Ee=Ce(Ee))ie++;for(;0<Y-ie;)B=Ce(B),Y--;for(;0<ie-Y;)G=Ce(G),ie--;for(;Y--;){if(B===G||G!==null&&B===G.alternate){Ce=B;break t}B=Ce(B),G=Ce(G)}Ce=null}else Ce=null;W!==null&&$v(se,$,W,Ce,!1),_e!==null&&ot!==null&&$v(se,ot,_e,Ce,!0)}}e:{if($=J?In(J):window,W=$.nodeName&&$.nodeName.toLowerCase(),W==="select"||W==="input"&&$.type==="file")var Ye=fy;else if(uy($))if(dy)Ye=Gw;else{Ye=Ow;var ve=Lw}else W=$.nodeName,!W||W.toLowerCase()!=="input"||$.type!=="checkbox"&&$.type!=="radio"?J&&Lo(J.elementType)&&(Ye=fy):Ye=Fw;if(Ye&&(Ye=Ye(r,J))){cy(se,Ye,l,te);break e}ve&&ve(r,$,J),r==="focusout"&&J&&$.type==="number"&&J.memoizedProps.value!=null&&fl($,"number",$.value)}switch(ve=J?In(J):window,r){case"focusin":(uy(ve)||ve.contentEditable==="true")&&(Ko=ve,eh=J,Al=null);break;case"focusout":Al=eh=Ko=null;break;case"mousedown":th=!0;break;case"contextmenu":case"mouseup":case"dragend":th=!1,Ty(se,l,te);break;case"selectionchange":if(Bw)break;case"keydown":case"keyup":Ty(se,l,te)}var Ve;if(Qe)e:{switch(r){case"compositionstart":var Fe="onCompositionStart";break e;case"compositionend":Fe="onCompositionEnd";break e;case"compositionupdate":Fe="onCompositionUpdate";break e}Fe=void 0}else Ho?$s(r,l)&&(Fe="onCompositionEnd"):r==="keydown"&&l.keyCode===229&&(Fe="onCompositionStart");Fe&&(Ui&&l.locale!=="ko"&&(Ho||Fe!=="onCompositionStart"?Fe==="onCompositionEnd"&&Ho&&(Ve=gl()):(Di=te,ml="value"in Di?Di.value:Di.textContent,Ho=!0)),ve=nf(J,Fe),0<ve.length&&(Fe=new Vi(Fe,r,null,l,te),se.push({event:Fe,listeners:ve}),Ve?Fe.data=Ve:(Ve=zo(l),Ve!==null&&(Fe.data=Ve)))),(Ve=Fn?Pw(r,l):kw(r,l))&&(Fe=nf(J,"onBeforeInput"),0<Fe.length&&(ve=new Vi("onBeforeInput","beforeinput",null,l,te),se.push({event:ve,listeners:Fe}),ve.data=Ve)),IR(se,r,J,l,te)}Yv(se,s)})}function $l(r,s,l){return{instance:r,listener:s,currentTarget:l}}function nf(r,s){for(var l=s+"Capture",c=[];r!==null;){var y=r,v=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||v===null||(y=ii(r,l),y!=null&&c.unshift($l(r,y,v)),y=ii(r,s),y!=null&&c.push($l(r,y,v))),r.tag===3)return c;r=r.return}return[]}function NR(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function $v(r,s,l,c,y){for(var v=s._reactName,A=[];l!==null&&l!==c;){var w=l,U=w.alternate,J=w.stateNode;if(w=w.tag,U!==null&&U===c)break;w!==5&&w!==26&&w!==27||J===null||(U=J,y?(J=ii(l,v),J!=null&&A.unshift($l(l,J,U))):y||(J=ii(l,v),J!=null&&A.push($l(l,J,U)))),l=l.return}A.length!==0&&r.push({event:s,listeners:A})}var xR=/\r\n?/g,MR=/\u0000|\uFFFD/g;function Qv(r){return(typeof r=="string"?r:""+r).replace(xR,`
`).replace(MR,"")}function Xv(r,s){return s=Qv(s),Qv(r)===s}function st(r,s,l,c,y,v){switch(l){case"children":typeof c=="string"?s==="body"||s==="textarea"&&c===""||mn(r,c):(typeof c=="number"||typeof c=="bigint")&&s!=="body"&&mn(r,""+c);break;case"className":wn(r,"class",c);break;case"tabIndex":wn(r,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":wn(r,l,c);break;case"style":hl(r,c,v);break;case"data":if(s!=="object"){wn(r,"data",c);break}case"src":case"href":if(c===""&&(s!=="a"||l!=="href")){r.removeAttribute(l);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){r.removeAttribute(l);break}c=Oo(""+c),r.setAttribute(l,c);break;case"action":case"formAction":if(typeof c=="function"){r.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(l==="formAction"?(s!=="input"&&st(r,s,"name",y.name,y,null),st(r,s,"formEncType",y.formEncType,y,null),st(r,s,"formMethod",y.formMethod,y,null),st(r,s,"formTarget",y.formTarget,y,null)):(st(r,s,"encType",y.encType,y,null),st(r,s,"method",y.method,y,null),st(r,s,"target",y.target,y,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){r.removeAttribute(l);break}c=Oo(""+c),r.setAttribute(l,c);break;case"onClick":c!=null&&(r.onclick=ni);break;case"onScroll":c!=null&&Le("scroll",r);break;case"onScrollEnd":c!=null&&Le("scrollend",r);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(y.children!=null)throw Error(i(60));r.innerHTML=l}}break;case"multiple":r.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":r.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){r.removeAttribute("xlink:href");break}l=Oo(""+c),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(l,""+c):r.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(l,""):r.removeAttribute(l);break;case"capture":case"download":c===!0?r.setAttribute(l,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(l,c):r.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?r.setAttribute(l,c):r.removeAttribute(l);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?r.removeAttribute(l):r.setAttribute(l,c);break;case"popover":Le("beforetoggle",r),Le("toggle",r),Vo(r,"popover",c);break;case"xlinkActuate":bt(r,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":bt(r,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":bt(r,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":bt(r,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":bt(r,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":bt(r,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":bt(r,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":bt(r,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":bt(r,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Vo(r,"is",c);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=nc.get(l)||l,Vo(r,l,c))}}function wp(r,s,l,c,y,v){switch(l){case"style":hl(r,c,v);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(y.children!=null)throw Error(i(60));r.innerHTML=l}}break;case"children":typeof c=="string"?mn(r,c):(typeof c=="number"||typeof c=="bigint")&&mn(r,""+c);break;case"onScroll":c!=null&&Le("scroll",r);break;case"onScrollEnd":c!=null&&Le("scrollend",r);break;case"onClick":c!=null&&(r.onclick=ni);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ol.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(y=l.endsWith("Capture"),s=l.slice(2,y?l.length-7:void 0),v=r[Gt]||null,v=v!=null?v[l]:null,typeof v=="function"&&r.removeEventListener(s,v,y),typeof c=="function")){typeof v!="function"&&v!==null&&(l in r?r[l]=null:r.hasAttribute(l)&&r.removeAttribute(l)),r.addEventListener(s,c,y);break e}l in r?r[l]=c:c===!0?r.setAttribute(l,""):Vo(r,l,c)}}}function Xt(r,s,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Le("error",r),Le("load",r);var c=!1,y=!1,v;for(v in l)if(l.hasOwnProperty(v)){var A=l[v];if(A!=null)switch(v){case"src":c=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:st(r,s,v,A,l,null)}}y&&st(r,s,"srcSet",l.srcSet,l,null),c&&st(r,s,"src",l.src,l,null);return;case"input":Le("invalid",r);var w=v=A=y=null,U=null,J=null;for(c in l)if(l.hasOwnProperty(c)){var te=l[c];if(te!=null)switch(c){case"name":y=te;break;case"type":A=te;break;case"checked":U=te;break;case"defaultChecked":J=te;break;case"value":v=te;break;case"defaultValue":w=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(i(137,s));break;default:st(r,s,c,te,l,null)}}ju(r,v,w,U,J,A,y,!1);return;case"select":Le("invalid",r),c=A=v=null;for(y in l)if(l.hasOwnProperty(y)&&(w=l[y],w!=null))switch(y){case"value":v=w;break;case"defaultValue":A=w;break;case"multiple":c=w;default:st(r,s,y,w,l,null)}s=v,l=A,r.multiple=!!c,s!=null?Fr(r,!!c,s,!1):l!=null&&Fr(r,!!c,l,!0);return;case"textarea":Le("invalid",r),v=y=c=null;for(A in l)if(l.hasOwnProperty(A)&&(w=l[A],w!=null))switch(A){case"value":c=w;break;case"defaultValue":y=w;break;case"children":v=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(i(91));break;default:st(r,s,A,w,l,null)}Gr(r,c,y,v);return;case"option":for(U in l)if(l.hasOwnProperty(U)&&(c=l[U],c!=null))switch(U){case"selected":r.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:st(r,s,U,c,l,null)}return;case"dialog":Le("beforetoggle",r),Le("toggle",r),Le("cancel",r),Le("close",r);break;case"iframe":case"object":Le("load",r);break;case"video":case"audio":for(c=0;c<Jl.length;c++)Le(Jl[c],r);break;case"image":Le("error",r),Le("load",r);break;case"details":Le("toggle",r);break;case"embed":case"source":case"link":Le("error",r),Le("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(J in l)if(l.hasOwnProperty(J)&&(c=l[J],c!=null))switch(J){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:st(r,s,J,c,l,null)}return;default:if(Lo(s)){for(te in l)l.hasOwnProperty(te)&&(c=l[te],c!==void 0&&wp(r,s,te,c,l,void 0));return}}for(w in l)l.hasOwnProperty(w)&&(c=l[w],c!=null&&st(r,s,w,c,l,null))}function DR(r,s,l,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,v=null,A=null,w=null,U=null,J=null,te=null;for(W in l){var se=l[W];if(l.hasOwnProperty(W)&&se!=null)switch(W){case"checked":break;case"value":break;case"defaultValue":U=se;default:c.hasOwnProperty(W)||st(r,s,W,null,c,se)}}for(var $ in c){var W=c[$];if(se=l[$],c.hasOwnProperty($)&&(W!=null||se!=null))switch($){case"type":v=W;break;case"name":y=W;break;case"checked":J=W;break;case"defaultChecked":te=W;break;case"value":A=W;break;case"defaultValue":w=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(i(137,s));break;default:W!==se&&st(r,s,$,W,c,se)}}Uo(r,A,w,U,J,te,v,y);return;case"select":W=A=w=$=null;for(v in l)if(U=l[v],l.hasOwnProperty(v)&&U!=null)switch(v){case"value":break;case"multiple":W=U;default:c.hasOwnProperty(v)||st(r,s,v,null,c,U)}for(y in c)if(v=c[y],U=l[y],c.hasOwnProperty(y)&&(v!=null||U!=null))switch(y){case"value":$=v;break;case"defaultValue":w=v;break;case"multiple":A=v;default:v!==U&&st(r,s,y,v,c,U)}s=w,l=A,c=W,$!=null?Fr(r,!!l,$,!1):!!c!=!!l&&(s!=null?Fr(r,!!l,s,!0):Fr(r,!!l,l?[]:"",!1));return;case"textarea":W=$=null;for(w in l)if(y=l[w],l.hasOwnProperty(w)&&y!=null&&!c.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:st(r,s,w,null,c,y)}for(A in c)if(y=c[A],v=l[A],c.hasOwnProperty(A)&&(y!=null||v!=null))switch(A){case"value":$=y;break;case"defaultValue":W=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(i(91));break;default:y!==v&&st(r,s,A,y,c,v)}ec(r,$,W);return;case"option":for(var _e in l)if($=l[_e],l.hasOwnProperty(_e)&&$!=null&&!c.hasOwnProperty(_e))switch(_e){case"selected":r.selected=!1;break;default:st(r,s,_e,null,c,$)}for(U in c)if($=c[U],W=l[U],c.hasOwnProperty(U)&&$!==W&&($!=null||W!=null))switch(U){case"selected":r.selected=$&&typeof $!="function"&&typeof $!="symbol";break;default:st(r,s,U,$,c,W)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ce in l)$=l[Ce],l.hasOwnProperty(Ce)&&$!=null&&!c.hasOwnProperty(Ce)&&st(r,s,Ce,null,c,$);for(J in c)if($=c[J],W=l[J],c.hasOwnProperty(J)&&$!==W&&($!=null||W!=null))switch(J){case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(i(137,s));break;default:st(r,s,J,$,c,W)}return;default:if(Lo(s)){for(var ot in l)$=l[ot],l.hasOwnProperty(ot)&&$!==void 0&&!c.hasOwnProperty(ot)&&wp(r,s,ot,void 0,c,$);for(te in c)$=c[te],W=l[te],!c.hasOwnProperty(te)||$===W||$===void 0&&W===void 0||wp(r,s,te,$,c,W);return}}for(var B in l)$=l[B],l.hasOwnProperty(B)&&$!=null&&!c.hasOwnProperty(B)&&st(r,s,B,null,c,$);for(se in c)$=c[se],W=l[se],!c.hasOwnProperty(se)||$===W||$==null&&W==null||st(r,s,se,$,c,W)}function Wv(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function PR(){if(typeof performance.getEntriesByType=="function"){for(var r=0,s=0,l=performance.getEntriesByType("resource"),c=0;c<l.length;c++){var y=l[c],v=y.transferSize,A=y.initiatorType,w=y.duration;if(v&&w&&Wv(A)){for(A=0,w=y.responseEnd,c+=1;c<l.length;c++){var U=l[c],J=U.startTime;if(J>w)break;var te=U.transferSize,se=U.initiatorType;te&&Wv(se)&&(U=U.responseEnd,A+=te*(U<w?1:(w-J)/(U-J)))}if(--c,s+=8*(v+A)/(y.duration/1e3),r++,10<r)break}}if(0<r)return s/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var Rp=null,bp=null;function rf(r){return r.nodeType===9?r:r.ownerDocument}function Zv(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function jv(r,s){if(r===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&s==="foreignObject"?0:r}function Np(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var xp=null;function kR(){var r=window.event;return r&&r.type==="popstate"?r===xp?!1:(xp=r,!0):(xp=null,!1)}var eT=typeof setTimeout=="function"?setTimeout:void 0,VR=typeof clearTimeout=="function"?clearTimeout:void 0,tT=typeof Promise=="function"?Promise:void 0,UR=typeof queueMicrotask=="function"?queueMicrotask:typeof tT<"u"?function(r){return tT.resolve(null).then(r).catch(LR)}:eT;function LR(r){setTimeout(function(){throw r})}function us(r){return r==="head"}function nT(r,s){var l=s,c=0;do{var y=l.nextSibling;if(r.removeChild(l),y&&y.nodeType===8)if(l=y.data,l==="/$"||l==="/&"){if(c===0){r.removeChild(y),_a(s);return}c--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")c++;else if(l==="html")Ql(r.ownerDocument.documentElement);else if(l==="head"){l=r.ownerDocument.head,Ql(l);for(var v=l.firstChild;v;){var A=v.nextSibling,w=v.nodeName;v[Ii]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&v.rel.toLowerCase()==="stylesheet"||l.removeChild(v),v=A}}else l==="body"&&Ql(r.ownerDocument.body);l=y}while(l);_a(s)}function iT(r,s){var l=r;r=0;do{var c=l.nextSibling;if(l.nodeType===1?s?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(s?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),c&&c.nodeType===8)if(l=c.data,l==="/$"){if(r===0)break;r--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||r++;l=c}while(l)}function Mp(r){var s=r.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var l=s;switch(s=s.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Mp(l),ko(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}r.removeChild(l)}}function OR(r,s,l,c){for(;r.nodeType===1;){var y=l;if(r.nodeName.toLowerCase()!==s.toLowerCase()){if(!c&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(c){if(!r[Ii])switch(s){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(v=r.getAttribute("rel"),v==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(v!==y.rel||r.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||r.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||r.getAttribute("title")!==(y.title==null?null:y.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(v=r.getAttribute("src"),(v!==(y.src==null?null:y.src)||r.getAttribute("type")!==(y.type==null?null:y.type)||r.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&v&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(s==="input"&&r.type==="hidden"){var v=y.name==null?null:""+y.name;if(y.type==="hidden"&&r.getAttribute("name")===v)return r}else return r;if(r=Yn(r.nextSibling),r===null)break}return null}function FR(r,s,l){if(s==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!l||(r=Yn(r.nextSibling),r===null))return null;return r}function rT(r,s){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!s||(r=Yn(r.nextSibling),r===null))return null;return r}function Dp(r){return r.data==="$?"||r.data==="$~"}function Pp(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function GR(r,s){var l=r.ownerDocument;if(r.data==="$~")r._reactRetry=s;else if(r.data!=="$?"||l.readyState!=="loading")s();else{var c=function(){s(),l.removeEventListener("DOMContentLoaded",c)};l.addEventListener("DOMContentLoaded",c),r._reactRetry=c}}function Yn(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return r}var kp=null;function sT(r){r=r.nextSibling;for(var s=0;r;){if(r.nodeType===8){var l=r.data;if(l==="/$"||l==="/&"){if(s===0)return Yn(r.nextSibling);s--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||s++}r=r.nextSibling}return null}function oT(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var l=r.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(s===0)return r;s--}else l!=="/$"&&l!=="/&"||s++}r=r.previousSibling}return null}function aT(r,s,l){switch(s=rf(l),r){case"html":if(r=s.documentElement,!r)throw Error(i(452));return r;case"head":if(r=s.head,!r)throw Error(i(453));return r;case"body":if(r=s.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function Ql(r){for(var s=r.attributes;s.length;)r.removeAttributeNode(s[0]);ko(r)}var Jn=new Map,lT=new Set;function sf(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var _r=ee.d;ee.d={f:qR,r:BR,D:zR,C:HR,L:KR,m:YR,X:$R,S:JR,M:QR};function qR(){var r=_r.f(),s=Qc();return r||s}function BR(r){var s=Un(r);s!==null&&s.tag===5&&s.type==="form"?I_(s):_r.r(r)}var ma=typeof document>"u"?null:document;function uT(r,s,l){var c=ma;if(c&&typeof s=="string"&&s){var y=pn(s);y='link[rel="'+r+'"][href="'+y+'"]',typeof l=="string"&&(y+='[crossorigin="'+l+'"]'),lT.has(y)||(lT.add(y),r={rel:r,crossOrigin:l,href:s},c.querySelector(y)===null&&(s=c.createElement("link"),Xt(s,"link",r),Rt(s),c.head.appendChild(s)))}}function zR(r){_r.D(r),uT("dns-prefetch",r,null)}function HR(r,s){_r.C(r,s),uT("preconnect",r,s)}function KR(r,s,l){_r.L(r,s,l);var c=ma;if(c&&r&&s){var y='link[rel="preload"][as="'+pn(s)+'"]';s==="image"&&l&&l.imageSrcSet?(y+='[imagesrcset="'+pn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(y+='[imagesizes="'+pn(l.imageSizes)+'"]')):y+='[href="'+pn(r)+'"]';var v=y;switch(s){case"style":v=ga(r);break;case"script":v=ya(r)}Jn.has(v)||(r=T({rel:"preload",href:s==="image"&&l&&l.imageSrcSet?void 0:r,as:s},l),Jn.set(v,r),c.querySelector(y)!==null||s==="style"&&c.querySelector(Xl(v))||s==="script"&&c.querySelector(Wl(v))||(s=c.createElement("link"),Xt(s,"link",r),Rt(s),c.head.appendChild(s)))}}function YR(r,s){_r.m(r,s);var l=ma;if(l&&r){var c=s&&typeof s.as=="string"?s.as:"script",y='link[rel="modulepreload"][as="'+pn(c)+'"][href="'+pn(r)+'"]',v=y;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=ya(r)}if(!Jn.has(v)&&(r=T({rel:"modulepreload",href:r},s),Jn.set(v,r),l.querySelector(y)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Wl(v)))return}c=l.createElement("link"),Xt(c,"link",r),Rt(c),l.head.appendChild(c)}}}function JR(r,s,l){_r.S(r,s,l);var c=ma;if(c&&r){var y=Ri(c).hoistableStyles,v=ga(r);s=s||"default";var A=y.get(v);if(!A){var w={loading:0,preload:null};if(A=c.querySelector(Xl(v)))w.loading=5;else{r=T({rel:"stylesheet",href:r,"data-precedence":s},l),(l=Jn.get(v))&&Vp(r,l);var U=A=c.createElement("link");Rt(U),Xt(U,"link",r),U._p=new Promise(function(J,te){U.onload=J,U.onerror=te}),U.addEventListener("load",function(){w.loading|=1}),U.addEventListener("error",function(){w.loading|=2}),w.loading|=4,of(A,s,c)}A={type:"stylesheet",instance:A,count:1,state:w},y.set(v,A)}}}function $R(r,s){_r.X(r,s);var l=ma;if(l&&r){var c=Ri(l).hoistableScripts,y=ya(r),v=c.get(y);v||(v=l.querySelector(Wl(y)),v||(r=T({src:r,async:!0},s),(s=Jn.get(y))&&Up(r,s),v=l.createElement("script"),Rt(v),Xt(v,"link",r),l.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},c.set(y,v))}}function QR(r,s){_r.M(r,s);var l=ma;if(l&&r){var c=Ri(l).hoistableScripts,y=ya(r),v=c.get(y);v||(v=l.querySelector(Wl(y)),v||(r=T({src:r,async:!0,type:"module"},s),(s=Jn.get(y))&&Up(r,s),v=l.createElement("script"),Rt(v),Xt(v,"link",r),l.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},c.set(y,v))}}function cT(r,s,l,c){var y=(y=Ae.current)?sf(y):null;if(!y)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(s=ga(l.href),l=Ri(y).hoistableStyles,c=l.get(s),c||(c={type:"style",instance:null,count:0,state:null},l.set(s,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){r=ga(l.href);var v=Ri(y).hoistableStyles,A=v.get(r);if(A||(y=y.ownerDocument||y,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(r,A),(v=y.querySelector(Xl(r)))&&!v._p&&(A.instance=v,A.state.loading=5),Jn.has(r)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Jn.set(r,l),v||XR(y,r,l,A.state))),s&&c===null)throw Error(i(528,""));return A}if(s&&c!==null)throw Error(i(529,""));return null;case"script":return s=l.async,l=l.src,typeof l=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=ya(l),l=Ri(y).hoistableScripts,c=l.get(s),c||(c={type:"script",instance:null,count:0,state:null},l.set(s,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function ga(r){return'href="'+pn(r)+'"'}function Xl(r){return'link[rel="stylesheet"]['+r+"]"}function fT(r){return T({},r,{"data-precedence":r.precedence,precedence:null})}function XR(r,s,l,c){r.querySelector('link[rel="preload"][as="style"]['+s+"]")?c.loading=1:(s=r.createElement("link"),c.preload=s,s.addEventListener("load",function(){return c.loading|=1}),s.addEventListener("error",function(){return c.loading|=2}),Xt(s,"link",l),Rt(s),r.head.appendChild(s))}function ya(r){return'[src="'+pn(r)+'"]'}function Wl(r){return"script[async]"+r}function dT(r,s,l){if(s.count++,s.instance===null)switch(s.type){case"style":var c=r.querySelector('style[data-href~="'+pn(l.href)+'"]');if(c)return s.instance=c,Rt(c),c;var y=T({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return c=(r.ownerDocument||r).createElement("style"),Rt(c),Xt(c,"style",y),of(c,l.precedence,r),s.instance=c;case"stylesheet":y=ga(l.href);var v=r.querySelector(Xl(y));if(v)return s.state.loading|=4,s.instance=v,Rt(v),v;c=fT(l),(y=Jn.get(y))&&Vp(c,y),v=(r.ownerDocument||r).createElement("link"),Rt(v);var A=v;return A._p=new Promise(function(w,U){A.onload=w,A.onerror=U}),Xt(v,"link",c),s.state.loading|=4,of(v,l.precedence,r),s.instance=v;case"script":return v=ya(l.src),(y=r.querySelector(Wl(v)))?(s.instance=y,Rt(y),y):(c=l,(y=Jn.get(v))&&(c=T({},l),Up(c,y)),r=r.ownerDocument||r,y=r.createElement("script"),Rt(y),Xt(y,"link",c),r.head.appendChild(y),s.instance=y);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(c=s.instance,s.state.loading|=4,of(c,l.precedence,r));return s.instance}function of(r,s,l){for(var c=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=c.length?c[c.length-1]:null,v=y,A=0;A<c.length;A++){var w=c[A];if(w.dataset.precedence===s)v=w;else if(v!==y)break}v?v.parentNode.insertBefore(r,v.nextSibling):(s=l.nodeType===9?l.head:l,s.insertBefore(r,s.firstChild))}function Vp(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.title==null&&(r.title=s.title)}function Up(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.integrity==null&&(r.integrity=s.integrity)}var af=null;function hT(r,s,l){if(af===null){var c=new Map,y=af=new Map;y.set(l,c)}else y=af,c=y.get(l),c||(c=new Map,y.set(l,c));if(c.has(r))return c;for(c.set(r,null),l=l.getElementsByTagName(r),y=0;y<l.length;y++){var v=l[y];if(!(v[Ii]||v[wt]||r==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var A=v.getAttribute(s)||"";A=r+A;var w=c.get(A);w?w.push(v):c.set(A,[v])}}return c}function pT(r,s,l){r=r.ownerDocument||r,r.head.insertBefore(l,s==="title"?r.querySelector("head > title"):null)}function WR(r,s,l){if(l===1||s.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return r=s.disabled,typeof s.precedence=="string"&&r==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function mT(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function ZR(r,s,l,c){if(l.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var y=ga(c.href),v=s.querySelector(Xl(y));if(v){s=v._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(r.count++,r=lf.bind(r),s.then(r,r)),l.state.loading|=4,l.instance=v,Rt(v);return}v=s.ownerDocument||s,c=fT(c),(y=Jn.get(y))&&Vp(c,y),v=v.createElement("link"),Rt(v);var A=v;A._p=new Promise(function(w,U){A.onload=w,A.onerror=U}),Xt(v,"link",c),l.instance=v}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(l,s),(s=l.state.preload)&&(l.state.loading&3)===0&&(r.count++,l=lf.bind(r),s.addEventListener("load",l),s.addEventListener("error",l))}}var Lp=0;function jR(r,s){return r.stylesheets&&r.count===0&&cf(r,r.stylesheets),0<r.count||0<r.imgCount?function(l){var c=setTimeout(function(){if(r.stylesheets&&cf(r,r.stylesheets),r.unsuspend){var v=r.unsuspend;r.unsuspend=null,v()}},6e4+s);0<r.imgBytes&&Lp===0&&(Lp=62500*PR());var y=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&cf(r,r.stylesheets),r.unsuspend)){var v=r.unsuspend;r.unsuspend=null,v()}},(r.imgBytes>Lp?50:800)+s);return r.unsuspend=l,function(){r.unsuspend=null,clearTimeout(c),clearTimeout(y)}}:null}function lf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)cf(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var uf=null;function cf(r,s){r.stylesheets=null,r.unsuspend!==null&&(r.count++,uf=new Map,s.forEach(eb,r),uf=null,lf.call(r))}function eb(r,s){if(!(s.state.loading&4)){var l=uf.get(r);if(l)var c=l.get(null);else{l=new Map,uf.set(r,l);for(var y=r.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<y.length;v++){var A=y[v];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(l.set(A.dataset.precedence,A),c=A)}c&&l.set(null,c)}y=s.instance,A=y.getAttribute("data-precedence"),v=l.get(A)||c,v===c&&l.set(null,y),l.set(A,y),this.count++,c=lf.bind(this),y.addEventListener("load",c),y.addEventListener("error",c),v?v.parentNode.insertBefore(y,v.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(y,r.firstChild)),s.state.loading|=4}}var Zl={$$typeof:j,Provider:null,Consumer:null,_currentValue:Z,_currentValue2:Z,_threadCount:0};function tb(r,s,l,c,y,v,A,w,U){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ai(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ai(0),this.hiddenUpdates=Ai(null),this.identifierPrefix=c,this.onUncaughtError=y,this.onCaughtError=v,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=U,this.incompleteTransitions=new Map}function gT(r,s,l,c,y,v,A,w,U,J,te,se){return r=new tb(r,s,l,A,U,J,te,se,w),s=1,v===!0&&(s|=24),v=bn(3,null,null,s),r.current=v,v.stateNode=r,s=gh(),s.refCount++,r.pooledCache=s,s.refCount++,v.memoizedState={element:c,isDehydrated:l,cache:s},Th(v),r}function yT(r){return r?(r=$o,r):$o}function _T(r,s,l,c,y,v){y=yT(y),c.context===null?c.context=y:c.pendingContext=y,c=Zr(s),c.payload={element:l},v=v===void 0?null:v,v!==null&&(c.callback=v),l=jr(r,c,s),l!==null&&(Tn(l,r,s),xl(l,r,s))}function vT(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var l=r.retryLane;r.retryLane=l!==0&&l<s?l:s}}function Op(r,s){vT(r,s),(r=r.alternate)&&vT(r,s)}function TT(r){if(r.tag===13||r.tag===31){var s=Ws(r,67108864);s!==null&&Tn(s,r,67108864),Op(r,67108864)}}function ET(r){if(r.tag===13||r.tag===31){var s=Pn();s=Fs(s);var l=Ws(r,s);l!==null&&Tn(l,r,s),Op(r,s)}}var ff=!0;function nb(r,s,l,c){var y=Q.T;Q.T=null;var v=ee.p;try{ee.p=2,Fp(r,s,l,c)}finally{ee.p=v,Q.T=y}}function ib(r,s,l,c){var y=Q.T;Q.T=null;var v=ee.p;try{ee.p=8,Fp(r,s,l,c)}finally{ee.p=v,Q.T=y}}function Fp(r,s,l,c){if(ff){var y=Gp(c);if(y===null)Ip(r,s,c,df,l),AT(r,c);else if(sb(y,r,s,l,c))c.stopPropagation();else if(AT(r,c),s&4&&-1<rb.indexOf(r)){for(;y!==null;){var v=Un(y);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var A=Ei(v.pendingLanes);if(A!==0){var w=v;for(w.pendingLanes|=2,w.entangledLanes|=2;A;){var U=1<<31-_t(A);w.entanglements[1]|=U,A&=~U}Gi(v),(Xe&6)===0&&(Jc=ln()+500,Yl(0))}}break;case 31:case 13:w=Ws(v,2),w!==null&&Tn(w,v,2),Qc(),Op(v,2)}if(v=Gp(c),v===null&&Ip(r,s,c,df,l),v===y)break;y=v}y!==null&&c.stopPropagation()}else Ip(r,s,c,null,l)}}function Gp(r){return r=Ln(r),qp(r)}var df=null;function qp(r){if(df=null,r=wi(r),r!==null){var s=a(r);if(s===null)r=null;else{var l=s.tag;if(l===13){if(r=u(s),r!==null)return r;r=null}else if(l===31){if(r=d(s),r!==null)return r;r=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null)}}return df=r,null}function ST(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Vs()){case tl:return 2;case nl:return 8;case Lr:case Jd:return 32;case zu:return 268435456;default:return 32}default:return 32}}var Bp=!1,cs=null,fs=null,ds=null,jl=new Map,eu=new Map,hs=[],rb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function AT(r,s){switch(r){case"focusin":case"focusout":cs=null;break;case"dragenter":case"dragleave":fs=null;break;case"mouseover":case"mouseout":ds=null;break;case"pointerover":case"pointerout":jl.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":eu.delete(s.pointerId)}}function tu(r,s,l,c,y,v){return r===null||r.nativeEvent!==v?(r={blockedOn:s,domEventName:l,eventSystemFlags:c,nativeEvent:v,targetContainers:[y]},s!==null&&(s=Un(s),s!==null&&TT(s)),r):(r.eventSystemFlags|=c,s=r.targetContainers,y!==null&&s.indexOf(y)===-1&&s.push(y),r)}function sb(r,s,l,c,y){switch(s){case"focusin":return cs=tu(cs,r,s,l,c,y),!0;case"dragenter":return fs=tu(fs,r,s,l,c,y),!0;case"mouseover":return ds=tu(ds,r,s,l,c,y),!0;case"pointerover":var v=y.pointerId;return jl.set(v,tu(jl.get(v)||null,r,s,l,c,y)),!0;case"gotpointercapture":return v=y.pointerId,eu.set(v,tu(eu.get(v)||null,r,s,l,c,y)),!0}return!1}function CT(r){var s=wi(r.target);if(s!==null){var l=a(s);if(l!==null){if(s=l.tag,s===13){if(s=u(l),s!==null){r.blockedOn=s,ei(r.priority,function(){ET(l)});return}}else if(s===31){if(s=d(l),s!==null){r.blockedOn=s,ei(r.priority,function(){ET(l)});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){r.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}r.blockedOn=null}function hf(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var l=Gp(r.nativeEvent);if(l===null){l=r.nativeEvent;var c=new l.constructor(l.type,l);pl=c,l.target.dispatchEvent(c),pl=null}else return s=Un(l),s!==null&&TT(s),r.blockedOn=l,!1;s.shift()}return!0}function IT(r,s,l){hf(r)&&l.delete(s)}function ob(){Bp=!1,cs!==null&&hf(cs)&&(cs=null),fs!==null&&hf(fs)&&(fs=null),ds!==null&&hf(ds)&&(ds=null),jl.forEach(IT),eu.forEach(IT)}function pf(r,s){r.blockedOn===s&&(r.blockedOn=null,Bp||(Bp=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,ob)))}var mf=null;function wT(r){mf!==r&&(mf=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){mf===r&&(mf=null);for(var s=0;s<r.length;s+=3){var l=r[s],c=r[s+1],y=r[s+2];if(typeof c!="function"){if(qp(c||l)===null)continue;break}var v=Un(l);v!==null&&(r.splice(s,3),s-=3,Gh(v,{pending:!0,data:y,method:l.method,action:c},c,y))}}))}function _a(r){function s(U){return pf(U,r)}cs!==null&&pf(cs,r),fs!==null&&pf(fs,r),ds!==null&&pf(ds,r),jl.forEach(s),eu.forEach(s);for(var l=0;l<hs.length;l++){var c=hs[l];c.blockedOn===r&&(c.blockedOn=null)}for(;0<hs.length&&(l=hs[0],l.blockedOn===null);)CT(l),l.blockedOn===null&&hs.shift();if(l=(r.ownerDocument||r).$$reactFormReplay,l!=null)for(c=0;c<l.length;c+=3){var y=l[c],v=l[c+1],A=y[Gt]||null;if(typeof v=="function")A||wT(l);else if(A){var w=null;if(v&&v.hasAttribute("formAction")){if(y=v,A=v[Gt]||null)w=A.formAction;else if(qp(y)!==null)continue}else w=A.action;typeof w=="function"?l[c+1]=w:(l.splice(c,3),c-=3),wT(l)}}}function RT(){function r(v){v.canIntercept&&v.info==="react-transition"&&v.intercept({handler:function(){return new Promise(function(A){return y=A})},focusReset:"manual",scroll:"manual"})}function s(){y!==null&&(y(),y=null),c||setTimeout(l,20)}function l(){if(!c&&!navigation.transition){var v=navigation.currentEntry;v&&v.url!=null&&navigation.navigate(v.url,{state:v.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,y=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(l,100),function(){c=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),y!==null&&(y(),y=null)}}}function zp(r){this._internalRoot=r}gf.prototype.render=zp.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(i(409));var l=s.current,c=Pn();_T(l,c,r,s,null,null)},gf.prototype.unmount=zp.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;_T(r.current,2,null,r,null,null),Qc(),s[Ci]=null}};function gf(r){this._internalRoot=r}gf.prototype.unstable_scheduleHydration=function(r){if(r){var s=Qu();r={blockedOn:null,target:r,priority:s};for(var l=0;l<hs.length&&s!==0&&s<hs[l].priority;l++);hs.splice(l,0,r),l===0&&CT(r)}};var bT=e.version;if(bT!=="19.2.3")throw Error(i(527,bT,"19.2.3"));ee.findDOMNode=function(r){var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=h(s),r=r!==null?_(r):null,r=r===null?null:r.stateNode,r};var ab={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yf.isDisabled&&yf.supportsFiber)try{Zn=yf.inject(ab),Kt=yf}catch{}}return iu.createRoot=function(r,s){if(!o(r))throw Error(i(299));var l=!1,c="",y=V_,v=U_,A=L_;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(y=s.onUncaughtError),s.onCaughtError!==void 0&&(v=s.onCaughtError),s.onRecoverableError!==void 0&&(A=s.onRecoverableError)),s=gT(r,1,!1,null,null,l,c,null,y,v,A,RT),r[Ci]=s.current,Cp(r),new zp(s)},iu.hydrateRoot=function(r,s,l){if(!o(r))throw Error(i(299));var c=!1,y="",v=V_,A=U_,w=L_,U=null;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onUncaughtError!==void 0&&(v=l.onUncaughtError),l.onCaughtError!==void 0&&(A=l.onCaughtError),l.onRecoverableError!==void 0&&(w=l.onRecoverableError),l.formState!==void 0&&(U=l.formState)),s=gT(r,1,!0,s,l??null,c,y,U,v,A,w,RT),s.context=yT(null),l=s.current,c=Pn(),c=Fs(c),y=Zr(c),y.callback=null,jr(l,y,c),l=c,s.current.lanes=l,Ls(s,l),Gi(s),r[Ci]=s.current,Cp(r),new gf(s)},iu.version="19.2.3",iu}var OT;function _b(){if(OT)return Yp.exports;OT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Yp.exports=yb(),Yp.exports}var vb=_b();const Tb=oA(vb),mo=[{code:"en",name:"English",flag:""},{code:"de",name:"Deutsch",flag:""},{code:"fr",name:"Franais",flag:""},{code:"es",name:"Espaol",flag:""},{code:"it",name:"Italiano",flag:""},{code:"pt",name:"Portugus",flag:""},{code:"nl",name:"Nederlands",flag:""},{code:"pl",name:"Polski",flag:""},{code:"ru",name:"",flag:""},{code:"sv",name:"Svenska",flag:""},{code:"hr",name:"Hrvatski",flag:""}],aA=[2,3,4,5,6,7],FT=[{name:"Petal Pink",value:"#fff5f7"},{name:"Sky Blue",value:"#f0f9ff"},{name:"Mint Leaf",value:"#f0fdf4"},{name:"Lavender",value:"#f5f3ff"},{name:"Sunny Day",value:"#fffbeb"},{name:"Cloud White",value:"#ffffff"},{name:"Apricot",value:"#fff7ed"}],GT={welcome:{en:"Welcome to StoryTime!",de:"Willkommen bei StoryTime!",fr:"Bienvenue chez StoryTime !",es:"Bienvenido a StoryTime!",it:"Benvenuti a StoryTime!",pt:"Bem-vindo ao StoryTime!",nl:"Welkom bij StoryTime!",pl:"Witamy w StoryTime!",ru:"   StoryTime!",sv:"Vlkommen till StoryTime!",hr:"Dobrodoli u StoryTime!"},selectLanguage:{en:"Pick your language",de:"Whle deine Sprache",fr:"Choisissez votre langue",es:"Elige tu idioma",it:"Scegli la tua lingua",pt:"Escolha o seu idioma",nl:"Kies je taal",pl:"Wybierz swj jzyk",ru:"  ",sv:"Vlj ditt sprk",hr:"Odaberite svoj jezik"},tapToStart:{en:"Tap below to start your adventure!",de:"Tippe unten, um dein Abenteuer zu beginnen!",fr:"Appuyez ci-dessous pour commencer votre aventure !",es:"Toca abajo para comenzar tu aventura!",it:"Tocca qui sotto per iniziare la tua avventura!",pt:"Toque abaixo para comear sua aventura!",nl:"Tik hieronder om je avontuur te beginnen!",pl:"Stuknij poniej, aby rozpocz przygod!",ru:" ,   !",sv:"Tryck nedan fr att brja ditt ventyr!",hr:"Dodirnite dolje da zaponete svoju avanturu!"},enterGarden:{en:"Enter Garden",de:"Garten betreten",fr:"Entrer dans le jardin",es:"Entrar al jardn",it:"Entra nel giardino",pt:"Entrar no jardim",nl:"Tuin betreden",pl:"Wejd do ogrodu",ru:"  ",sv:"G in i trdgrden",hr:"Ui u vrt"},forGardenKeepers:{en:"For Garden Keepers",de:"Fr Grtner",fr:"Pour les jardiniers",es:"Para jardineros",it:"Per i giardinieri",pt:"Para jardineiros",nl:"Voor tuiniers",pl:"Dla ogrodnikw",ru:" ",sv:"Fr trdgrdsmstare",hr:"Za vrtlare"},gardenKeeper:{en:"Garden Keeper",de:"Grtner",fr:"Jardinier",es:"Jardinero",it:"Giardiniere",pt:"Jardineiro",nl:"Tuinier",pl:"Ogrodnik",ru:"",sv:"Trdgrdsmstare",hr:"Vrtlar"},secretPassword:{en:"Enter the secret password",de:"Gib das geheime Passwort ein",fr:"Entrez le mot de passe secret",es:"Ingresa la contrasea secreta",it:"Inserisci la password segreta",pt:"Digite a senha secreta",nl:"Voer het geheime wachtwoord in",pl:"Wprowad tajne haso",ru:"  ",sv:"Ange det hemliga lsenordet",hr:"Unesite tajnu lozinku"},wrongPassword:{en:"Wrong password!",de:"Falsches Passwort!",fr:"Mot de passe incorrect !",es:"Contrasea incorrecta!",it:"Password errata!",pt:"Senha errada!",nl:"Verkeerd wachtwoord!",pl:"Ze haso!",ru:" !",sv:"Fel lsenord!",hr:"Pogrena lozinka!"},libraryTitle:{en:"My Bookshelf",de:"Mein Bcherregal",fr:"Mon tagre",es:"Mi estantera",it:"La mia libreria",pt:"Minha estante",nl:"Mijn Boekenplank",pl:"Moja pka",ru:"  ",sv:"Min bokhylla",hr:"Moja polica"},createBook:{en:"Create a Book",de:"Buch erstellen",fr:"Crer un livre",es:"Crear un libro",it:"Crea un libro",pt:"Criar um livro",nl:"Maak een boek",pl:"Stwrz ksik",ru:" ",sv:"Skapa en bok",hr:"Izradi knjigu"},back:{en:"Back",de:"Zurck",fr:"Retour",es:"Atrs",it:"Indietro",pt:"Voltar",nl:"Terug",pl:"Wstecz",ru:"",sv:"Tillbaka",hr:"Natrag"},next:{en:"Next",de:"Weiter",fr:"Suivant",es:"Siguiente",it:"Avanti",pt:"Prximo",nl:"Volgende",pl:"Dalej",ru:"",sv:"Nsta",hr:"Sljedee"},finish:{en:"Finish",de:"Fertig",fr:"Terminer",es:"Terminar",it:"Fine",pt:"Finalizar",nl:"Klaar",pl:"Zakocz",ru:"",sv:"Frdig",hr:"Zavri"},allAges:{en:"All Ages",de:"Alle Alter",fr:"Tous les ges",es:"Todas las edades",it:"Tutte le et",pt:"Todas as idades",nl:"Alle leeftijden",pl:"Wszystkie wieki",ru:" ",sv:"Alla ldrar",hr:"Sve dobne skupine"},yearsOld:{en:"years old",de:"Jahre alt",fr:"ans",es:"aos",it:"anni",pt:"anos",nl:"jaar oud",pl:"lat",ru:"",sv:"r",hr:"godina"},titlePrompt:{en:"Book Title",de:"Buchtitel",fr:"Titre du livre",es:"Ttulo del libro",it:"Titolo del libro",pt:"Ttulo do livro",nl:"Boektitel",pl:"Tytu ksiki",ru:" ",sv:"Boktitel",hr:"Naslov knjige"},addPage:{en:"Add Page",de:"Seite hinzufgen",fr:"Ajouter une page",es:"Aadir pgina",it:"Aggiungi pagina",pt:"Adicionar pgina",nl:"Pagina toevoegen",pl:"Dodaj stron",ru:" ",sv:"Lgg till sida",hr:"Dodaj stranicu"},pageText:{en:"Page story text...",de:"Geschichtstext...",fr:"Texte de l'histoire...",es:"Texto de la historia...",it:"Testo della storia...",pt:"Texto da histria...",nl:"Verhaaltekst...",pl:"Tekst strony...",ru:" ...",sv:"Berttelsetext...",hr:"Tekst prie..."},selectImage:{en:"Choose Photo",de:"Foto whlen",fr:"Choisir une photo",es:"Elegir foto",it:"Scegli foto",pt:"Escolher foto",nl:"Foto kiezen",pl:"Wybierz zdjcie",ru:" ",sv:"Vlj foto",hr:"Odaberi sliku"},publishLocal:{en:"Publish Locally",de:"Lokal verffentlichen",fr:"Publier localement",es:"Publicar localmente",it:"Pubblica in locale",pt:"Publicar localmente",nl:"Lokaal publiceren",pl:"Opublikuj lokalnie",ru:" ",sv:"Publicera lokalt",hr:"Objavi lokalno"},publishUniversal:{en:"Publish Universally",de:"Universell verffentlichen",fr:"Publier universellement",es:"Publicar universalmente",it:"Pubblica universale",pt:"Publicar universalmente",nl:"Universeel publiceren",pl:"Opublikuj uniwersalnie",ru:" ",sv:"Publicera universellt",hr:"Objavi univerzalno"},sortByRating:{en:"Sort by Rating",de:"Nach Bewertung sortieren",fr:"Trier par note",es:"Ordenar por calificacin",it:"Ordina per valutazione",pt:"Ordenar por classificao",nl:"Sorteren op beoordeling",pl:"Sortuj wedug oceny",ru:"  ",sv:"Sortera efter betyg",hr:"Sortiraj po ocjeni"},changeLanguage:{en:"Change Language",de:"Sprache ndern",fr:"Changer de langue",es:"Cambiar idioma",it:"Cambia lingua",pt:"Mudar idioma",nl:"Taal wijzigen",pl:"Zmie jzyk",ru:" ",sv:"ndra sprk",hr:"Promijeni jezik"},saveBook:{en:"Save Book",de:"Buch speichern",fr:"Enregistrer le livre",es:"Guardar libro",it:"Salva libro",pt:"Salvar livro",nl:"Boek opslaan",pl:"Zapisz ksik",ru:" ",sv:"Spara bok",hr:"Spremi knjigu"},cancel:{en:"Cancel",de:"Abbrechen",fr:"Annuler",es:"Cancelar",it:"Annulla",pt:"Cancelar",nl:"Annuleren",pl:"Anuluj",ru:"",sv:"Avbryt",hr:"Odustani"},logout:{en:"Logout",de:"Abmelden",fr:"Dconnexion",es:"Cerrar sesin",it:"Disconnetti",pt:"Sair",nl:"Uitloggen",pl:"Wyloguj",ru:"",sv:"Logga ut",hr:"Odjava"},pageOf:{en:"Page",de:"Seite",fr:"Page",es:"Pgina",it:"Pagina",pt:"Pgina",nl:"Pagina",pl:"Strona",ru:"",sv:"Sida",hr:"Stranica"},noBooksYet:{en:"No books yet",de:"Noch keine Bcher",fr:"Pas encore de livres",es:"An no hay libros",it:"Ancora nessun libro",pt:"Ainda no h livros",nl:"Nog geen boeken",pl:"Jeszcze nie ma ksiek",ru:"  ",sv:"Inga bcker nnu",hr:"Jo nema knjiga"},createFirstBook:{en:"Create your first story!",de:"Erstelle deine erste Geschichte!",fr:"Crez votre premire histoire !",es:"Crea tu primera historia!",it:"Crea la tua prima storia!",pt:"Crie sua primeira histria!",nl:"Maak je eerste verhaal!",pl:"Stwrz swoj pierwsz histori!",ru:"   !",sv:"Skapa din frsta berttelse!",hr:"Stvori svoju prvu priu!"},syncing:{en:"Syncing with the Cloud Garden...",de:"Synchronisiere mit dem Cloud-Garten...",fr:"Synchronisation avec le jardin cloud...",es:"Sincronizando con el jardn de la nube...",it:"Sincronizzazione con il giardino cloud...",pt:"Sincronizando com o jardim em nuvem...",nl:"Synchroniseren met de cloud-tuin...",pl:"Synchronizacja z chmurowym ogrodem...",ru:"   ...",sv:"Synkroniserar med molntrdgrden...",hr:"Sinkronizacija s oblakovnim vrtom..."},translating:{en:"Magical forces are translating stories...",de:"Magische Krfte bersetzen Geschichten...",fr:"Des forces magiques traduisent des histoires...",es:"Fuerzas mgicas estn traduciendo historias...",it:"Forze magiche stanno traducendo storie...",pt:"Foras mgicas esto traduzindo histrias...",nl:"Magische krachten vertalen verhalen...",pl:"Magiczne siy tumacz historie...",ru:"   ...",sv:"Magiska krafter verstter berttelser...",hr:"arobne sile prevode prie..."},saving:{en:"Saving to the Cloud Garden...",de:"Speichere im Cloud-Garten...",fr:"Enregistrement dans le jardin cloud...",es:"Guardando en el jardn de la nube...",it:"Salvataggio nel giardino cloud...",pt:"Salvando no jardim em nuvem...",nl:"Opslaan in de cloud-tuin...",pl:"Zapisywanie do chmurowego ogrodu...",ru:"   ...",sv:"Sparar till molntrdgrden...",hr:"Spremanje u oblakovni vrt..."},storageError:{en:"Storage error! Could not save your story.",de:"Speicherfehler! Geschichte konnte nicht gespeichert werden.",fr:"Erreur de stockage ! Impossible d'enregistrer votre histoire.",es:"Error de almacenamiento! No se pudo guardar tu historia.",it:"Errore di archiviazione! Impossibile salvare la storia.",pt:"Erro de armazenamento! No foi possvel salvar sua histria.",nl:"Opslagfout! Kon je verhaal niet opslaan.",pl:"Bd przechowywania! Nie mona zapisa historii.",ru:" !    .",sv:"Lagringsfel! Kunde inte spara din berttelse.",hr:"Greka pohrane! Nije mogue spremiti priu."},author:{en:"Author",de:"Autor",fr:"Auteur",es:"Autor",it:"Autore",pt:"Autor",nl:"Auteur",pl:"Autor",ru:"",sv:"Frfattare",hr:"Autor"},byAuthor:{en:"by",de:"von",fr:"par",es:"por",it:"di",pt:"por",nl:"van",pl:"przez",ru:"",sv:"av",hr:"od"},ageGroup:{en:"Age",de:"Alter",fr:"ge",es:"Edad",it:"Et",pt:"Idade",nl:"Leeftijd",pl:"Wiek",ru:"",sv:"lder",hr:"Dob"},edit:{en:"Edit",de:"Bearbeiten",fr:"Modifier",es:"Editar",it:"Modifica",pt:"Editar",nl:"Bewerken",pl:"Edytuj",ru:"",sv:"Redigera",hr:"Uredi"},delete:{en:"Delete",de:"Lschen",fr:"Supprimer",es:"Eliminar",it:"Elimina",pt:"Excluir",nl:"Verwijderen",pl:"Usu",ru:"",sv:"Ta bort",hr:"Izbrii"},approve:{en:"Approve",de:"Genehmigen",fr:"Approuver",es:"Aprobar",it:"Approva",pt:"Aprovar",nl:"Goedkeuren",pl:"Zatwierd",ru:"",sv:"Godknn",hr:"Odobri"},ratedByYou:{en:"Your rating",de:"Deine Bewertung",fr:"Votre note",es:"Tu calificacin",it:"La tua valutazione",pt:"Sua classificao",nl:"Jouw beoordeling",pl:"Twoja ocena",ru:" ",sv:"Din bedmning",hr:"Vaa ocjena"},communityRating:{en:"Community rating",de:"Gemeinschaftsbewertung",fr:"Note de la communaut",es:"Calificacin de la comunidad",it:"Valutazione della comunit",pt:"Classificao da comunidade",nl:"Community-beoordeling",pl:"Ocena spoecznoci",ru:" ",sv:"Gemenskapsbedmning",hr:"Ocjena zajednice"},enterPassword:{en:"Secret password...",de:"Geheimes Passwort...",fr:"Mot de passe secret...",es:"Contrasea secreta...",it:"Password segreta...",pt:"Senha secreta...",nl:"Geheim wachtwoord...",pl:"Tajne haso...",ru:" ...",sv:"Hemligt lsenord...",hr:"Tajna lozinka..."},enter:{en:"Enter",de:"Eingabe",fr:"Entrer",es:"Entrar",it:"Entra",pt:"Entrar",nl:"Invoeren",pl:"Wpisz",ru:"",sv:"Ange",hr:"Unesi"},newest:{en:"Newest",de:"Neueste",fr:"Plus rcents",es:"Ms recientes",it:"Pi recenti",pt:"Mais recentes",nl:"Nieuwste",pl:"Najnowsze",ru:"",sv:"Nyaste",hr:"Najnovije"},approved:{en:"Approved",de:"Genehmigt",fr:"Approuv",es:"Aprobado",it:"Approvato",pt:"Aprovado",nl:"Goedgekeurd",pl:"Zatwierdzone",ru:"",sv:"Godknd",hr:"Odobreno"},pending:{en:"Pending",de:"Ausstehend",fr:"En attente",es:"Pendiente",it:"In attesa",pt:"Pendente",nl:"In afwachting",pl:"Oczekujce",ru:" ",sv:"Vntande",hr:"Na ekanju"},worldScore:{en:"World Score",de:"Weltweit",fr:"Score mondial",es:"Puntuacin mundial",it:"Punteggio mondiale",pt:"Pontuao mundial",nl:"Wereldscore",pl:"Wynik wiatowy",ru:" ",sv:"Vrldspong",hr:"Svjetska ocjena"},myLove:{en:"My Love",de:"Meine Liebe",fr:"Mon amour",es:"Mi amor",it:"Il mio amore",pt:"Meu amor",nl:"Mijn liefde",pl:"Moja mio",ru:" ",sv:"Min krlek",hr:"Moja ljubav"},editBook:{en:"Edit Book",de:"Buch bearbeiten",fr:"Modifier le livre",es:"Editar libro",it:"Modifica libro",pt:"Editar livro",nl:"Boek bewerken",pl:"Edytuj ksik",ru:" ",sv:"Redigera bok",hr:"Uredi knjigu"},signOut:{en:"Sign Out",de:"Abmelden",fr:"Dconnexion",es:"Cerrar sesin",it:"Disconnetti",pt:"Sair",nl:"Uitloggen",pl:"Wyloguj",ru:"",sv:"Logga ut",hr:"Odjava"},noFlowers:{en:"No flowers yet...",de:"Noch keine Blumen...",fr:"Pas encore de fleurs...",es:"An no hay flores...",it:"Ancora nessun fiore...",pt:"Ainda no h flores...",nl:"Nog geen bloemen...",pl:"Jeszcze nie ma kwiatw...",ru:"  ...",sv:"Inga blommor nnu...",hr:"Jo nema cvijea..."},safeInCloud:{en:"Safe in the cloud",de:"Sicher in der Cloud",fr:"En scurit dans le cloud",es:"Seguro en la nube",it:"Al sicuro nel cloud",pt:"Seguro na nuvem",nl:"Veilig in de cloud",pl:"Bezpieczne w chmurze",ru:"  ",sv:"Skert i molnet",hr:"Sigurno u oblaku"},cloudSync:{en:"Cloud Sync Active",de:"Cloud-Sync aktiv",fr:"Synchronisation cloud active",es:"Sincronizacin en la nube activa",it:"Sincronizzazione cloud attiva",pt:"Sincronizao em nuvem ativa",nl:"Cloud-sync actief",pl:"Synchronizacja chmurowa aktywna",ru:"  ",sv:"Molnsynkronisering aktiv",hr:"Sinkronizacija u oblaku aktivna"},keeper:{en:"Keeper",de:"Hter",fr:"Gardien",es:"Guardin",it:"Custode",pt:"Guardio",nl:"Hoeder",pl:"Opiekun",ru:"",sv:"Vakt",hr:"uvar"},explorer:{en:"Explorer",de:"Entdecker",fr:"Explorateur",es:"Explorador",it:"Esploratore",pt:"Explorador",nl:"Ontdekker",pl:"Odkrywca",ru:"",sv:"Utforskare",hr:"Istraiva"},local:{en:"Local",de:"Lokal",fr:"Local",es:"Local",it:"Locale",pt:"Local",nl:"Lokaal",pl:"Lokalne",ru:"",sv:"Lokal",hr:"Lokalno"},leaveGarden:{en:"Leave garden?",de:"Garten verlassen?",fr:"Quitter le jardin ?",es:"Salir del jardn?",it:"Lasciare il giardino?",pt:"Sair do jardim?",nl:"Tuin verlaten?",pl:"Opuci ogrd?",ru:" ?",sv:"Lmna trdgrden?",hr:"Napustiti vrt?"},yesGoBack:{en:"Yes, Go Back",de:"Ja, zurck",fr:"Oui, revenir",es:"S, Volver",it:"S, Torna indietro",pt:"Sim, Voltar",nl:"Ja, Terug",pl:"Tak, Wr",ru:", ",sv:"Ja, G tillbaka",hr:"Da, Vrati se"},keepReading:{en:"Keep Reading",de:"Weiter lesen",fr:"Continuer la lecture",es:"Seguir leyendo",it:"Continua a leggere",pt:"Continuar lendo",nl:"Blijf lezen",pl:"Kontynuuj czytanie",ru:" ",sv:"Fortstt lsa",hr:"Nastavi itati"}},Eb=({onSelect:n})=>O.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-4 bg-gradient-to-br from-rose-100 via-pink-200 to-amber-100 text-pink-900 relative overflow-hidden h-full w-full select-none",children:[O.jsx("div",{className:"absolute top-1 left-2 text-2xl md:text-6xl opacity-20 pointer-events-none animate-pulse",children:""}),O.jsx("div",{className:"absolute bottom-2 right-2 text-4xl md:text-8xl opacity-20 pointer-events-none animate-bounce",children:""}),O.jsx("div",{className:"absolute top-1/2 left-4 text-3xl opacity-10 pointer-events-none",children:""}),O.jsxs("div",{className:"text-center mb-4 md:mb-8 relative z-10",children:[O.jsx("h1",{className:"text-4xl md:text-7xl font-kids text-pink-600 drop-shadow-sm leading-tight",children:"StoryTime"}),O.jsx("p",{className:"text-[10px] md:text-base font-kids text-rose-400 uppercase tracking-[0.3em]",children:"The Secret Garden"})]}),O.jsx("div",{className:"flex flex-wrap items-center justify-center gap-3 md:gap-6 max-w-6xl relative z-10 px-4",children:mo.map(e=>O.jsx("button",{type:"button",onClick:()=>n(e.code),title:e.name,className:"w-16 h-16 xs:w-20 xs:h-20 md:w-32 md:h-32 flex items-center justify-center rounded-full bg-white/80 backdrop-blur-sm shadow-md hover:shadow-xl hover:bg-rose-500 hover:text-white transition-all transform hover:scale-110 active:scale-90 group border-4 border-white cursor-pointer",children:O.jsx("span",{className:"text-3xl xs:text-4xl md:text-7xl group-hover:scale-110 transition-transform",children:e.flag})},e.code))}),O.jsx("div",{className:"mt-6 md:mt-12 text-pink-500 font-black uppercase tracking-widest text-[10px] md:text-xs animate-pulse bg-white/30 px-6 py-2 rounded-full backdrop-blur-sm",children:"Choose a flag to enter"})]}),Sb="12345678",Ab=({onLogin:n,t:e})=>{const[t,i]=He.useState(!1),[o,a]=He.useState(""),[u,d]=He.useState(""),m=()=>{n({uid:"user_"+Date.now(),role:"user",name:"Little Explorer",provider:"guest"})},h=_=>{_.preventDefault(),d(""),o===Sb?n({uid:"admin",role:"admin",name:"Garden Keeper",provider:"admin"}):d(e("wrongPassword"))};return O.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-4 bg-gradient-to-br from-rose-100 to-amber-100 relative overflow-hidden h-full w-full select-none",children:[O.jsx("div",{className:"absolute top-10 left-10 text-6xl opacity-10 pointer-events-none animate-pulse",children:""}),O.jsx("div",{className:"absolute bottom-10 right-10 text-6xl opacity-10 pointer-events-none animate-bounce",children:""}),O.jsx("div",{className:"absolute top-1/4 right-20 text-4xl opacity-10 pointer-events-none animate-pulse",style:{animationDelay:"1s"},children:""}),O.jsx("div",{className:"absolute bottom-1/4 left-20 text-4xl opacity-10 pointer-events-none animate-bounce",style:{animationDelay:"0.5s"},children:""}),t?O.jsxs("div",{className:"w-full max-w-md bg-white/70 backdrop-blur-xl p-8 rounded-[3rem] shadow-2xl border-4 border-white transform transition-all",children:[O.jsxs("h2",{className:"text-3xl font-kids text-rose-600 text-center mb-2 drop-shadow-sm",children:[e("gardenKeeper")," "]}),O.jsx("p",{className:"text-center text-rose-400 text-sm mb-6",children:e("secretPassword")}),O.jsxs("form",{onSubmit:h,className:"space-y-4",children:[O.jsx("div",{className:"space-y-2",children:O.jsx("input",{type:"password",value:o,onChange:_=>a(_.target.value),placeholder:e("enterPassword"),className:"w-full px-6 py-4 rounded-2xl border-none focus:ring-4 focus:ring-rose-200 outline-none bg-white/50 text-rose-950 font-kids text-xl shadow-inner text-center",autoFocus:!0})}),u&&O.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-2xl text-sm font-medium animate-pulse text-center",children:e("wrongPassword")}),O.jsxs("div",{className:"flex gap-3",children:[O.jsx("button",{type:"button",onClick:()=>{i(!1),a(""),d("")},className:"flex-1 py-4 bg-gray-200 text-gray-600 rounded-2xl font-black uppercase text-lg tracking-widest shadow-lg hover:bg-gray-300 transition-all",children:e("back")}),O.jsxs("button",{type:"submit",className:"flex-1 py-4 bg-amber-400 text-rose-950 rounded-2xl font-black uppercase text-lg tracking-widest shadow-xl border-b-4 border-amber-600 hover:border-b-2 hover:translate-y-0.5 transition-all",children:[e("enter")," "]})]})]})]}):O.jsxs("div",{className:"w-full max-w-lg text-center",children:[O.jsx("h1",{className:"text-6xl font-kids text-rose-600 mb-4 drop-shadow-lg animate-bounce",children:""}),O.jsx("h2",{className:"text-4xl font-kids text-rose-600 mb-2 drop-shadow-sm",children:"Welcome to StoryTime!"}),O.jsx("p",{className:"text-rose-400 text-lg mb-8",children:"Tap below to start your adventure!"}),O.jsx("button",{onClick:m,className:"group relative bg-gradient-to-r from-rose-500 to-pink-500 text-white px-16 py-8 rounded-[3rem] shadow-2xl border-b-8 border-rose-700 hover:border-b-4 hover:translate-y-1 transition-all",children:O.jsx("span",{className:"text-4xl font-black tracking-widest",children:"Enter Garden "})}),O.jsx("button",{onClick:()=>i(!0),className:"mt-8 text-rose-400 hover:text-rose-600 text-xs transition-colors opacity-60 hover:opacity-100",children:"For Garden Keepers"})]})]})},Cb=({books:n,currentLang:e,auth:t,t:i,onOpenBook:o,onEditBook:a,onCreateClick:u,onResetLang:d,onRate:m,onApprove:h,lastSync:_,onLogout:T,onChangeLanguage:S})=>{var x;const[I,L]=He.useState(null),[F,V]=He.useState("newest"),[K,ne]=He.useState(1),j=He.useMemo(()=>{let R=n.filter(N=>{if(t.role==="admin")return I===null||N.ageGroup===I;const D=N.isApproved||N.creatorName===t.name,k=I===null||N.ageGroup===I;return D&&k});return F==="rating"?R.sort((N,D)=>D.universalRating-N.universalRating):R.sort((N,D)=>D.createdAt-N.createdAt),R},[n,I,F,t]),oe=((x=mo.find(R=>R.code===e))==null?void 0:x.flag)||"",de=({rating:R,id:N,type:D,scale:k})=>O.jsxs("div",{className:"flex flex-col gap-0.5",onClick:q=>q.stopPropagation(),children:[O.jsx("div",{className:"flex gap-0.5",children:[1,2,3,4,5].map(q=>O.jsx("button",{onClick:()=>m(N,D,q),className:`transition-transform hover:scale-125 ${q<=Math.floor(R)?D==="universal"?"text-yellow-400":"text-rose-400":"text-gray-200"}`,style:{fontSize:`${1*k}rem`},children:D==="universal"?"":""},q))}),O.jsx("span",{className:"text-[6px] md:text-[8px] font-black uppercase opacity-60 tracking-tighter",style:{fontSize:`${7*k}px`},children:i(D==="universal"?"worldScore":"myLove")})]}),ue=R=>{ne(N=>Math.min(1.5,Math.max(.6,N+R)))};return O.jsxs("div",{className:"flex-1 flex flex-col h-full bg-[#fdf2f8] relative overflow-hidden",children:[O.jsxs("header",{className:"bg-gradient-to-r from-rose-500 to-pink-600 px-4 md:px-8 py-2 md:py-4 flex items-center justify-between shadow-xl sticky top-0 z-20 text-white",children:[O.jsxs("div",{className:"flex items-center gap-3 md:gap-6",children:[O.jsx("button",{onClick:d,className:"w-10 h-10 md:w-14 md:h-14 rounded-full bg-white/20 flex items-center justify-center hover:bg-amber-400 transition-all border border-white/20 shadow-inner",children:O.jsx("span",{className:"text-xl md:text-3xl group-hover:scale-125 transition-transform",children:oe})}),O.jsxs("div",{className:"flex flex-col",children:[O.jsx("h1",{className:"text-xl md:text-3xl font-kids text-white drop-shadow-md leading-none",children:"StoryTime"}),O.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[O.jsxs("span",{className:"text-[7px] md:text-[10px] font-black opacity-90 tracking-widest uppercase",children:[t.role==="admin"?i("keeper")+": ":i("explorer")+": "," ",t.name]}),O.jsxs("div",{className:"flex items-center gap-1 bg-white/10 px-2 py-0.5 rounded-full border border-white/10",children:[O.jsx("span",{className:"text-[8px] animate-pulse",children:""}),O.jsx("span",{className:"text-[6px] md:text-[8px] font-black uppercase opacity-70",children:i("cloudSync")})]})]})]})]}),O.jsxs("div",{className:"flex items-center gap-2 md:gap-4 flex-1 justify-center max-w-[40%]",children:[O.jsxs("div",{className:"flex items-center bg-black/10 rounded-full border border-white/20 p-1",children:[O.jsx("button",{onClick:()=>ue(-.1),className:"w-6 h-6 md:w-8 md:h-8 flex items-center justify-center rounded-full hover:bg-white/20 text-lg md:text-xl font-bold",children:"-"}),O.jsxs("span",{className:"px-1 text-[8px] md:text-[10px] font-black uppercase tracking-tighter w-8 md:w-10 text-center",children:[Math.round(K*100),"%"]}),O.jsx("button",{onClick:()=>ue(.1),className:"w-6 h-6 md:w-8 md:h-8 flex items-center justify-center rounded-full hover:bg-white/20 text-lg md:text-xl font-bold",children:"+"})]}),O.jsxs("div",{className:"flex gap-1 md:gap-2 bg-black/10 p-1 rounded-full overflow-x-auto no-scrollbar border border-white/20",children:[O.jsx("button",{onClick:()=>L(null),className:`px-3 md:px-6 py-1 md:py-2 rounded-full text-[8px] md:text-xs font-black uppercase tracking-widest transition-all ${I===null?"bg-amber-400 text-rose-900 shadow-md scale-105":"text-rose-50 hover:bg-white/10"}`,children:i("allAges")}),aA.map(R=>O.jsxs("button",{onClick:()=>L(R),className:`px-3 md:px-6 py-1 md:py-2 rounded-full text-[8px] md:text-xs font-black uppercase tracking-widest transition-all ${I===R?"bg-amber-400 text-rose-900 shadow-md scale-105":"text-rose-50 hover:bg-white/10"}`,children:[R,"+"]},R))]})]}),O.jsxs("div",{className:"flex items-center gap-2 md:gap-4 flex-1 justify-end max-w-[50%]",children:[O.jsx("div",{className:"flex items-center gap-2 bg-black/10 rounded-full border border-white/20 p-1",children:O.jsx("select",{value:e,onChange:R=>S(R.target.value),className:"bg-transparent text-white text-[8px] md:text-xs font-black uppercase tracking-widest rounded-full px-3 py-1.5 md:py-2 outline-none cursor-pointer hover:bg-white/10 transition-colors",children:mo.map(R=>O.jsxs("option",{value:R.code,className:"bg-rose-600 text-white",children:[R.flag," ",R.name]},R.code))})}),O.jsxs("button",{onClick:T,className:"bg-white/20 hover:bg-white/30 text-white px-3 md:px-4 py-1.5 md:py-2 rounded-full font-black uppercase text-[8px] md:text-xs tracking-widest transition-all flex items-center gap-1 border border-white/20",title:i("logout"),children:[O.jsx("span",{children:""}),O.jsx("span",{className:"hidden sm:inline",children:i("logout")})]}),O.jsxs("select",{value:F,onChange:R=>V(R.target.value),className:"hidden lg:block bg-black/20 text-white text-[8px] md:text-xs font-black uppercase tracking-widest rounded-full px-4 py-2 border border-white/20 outline-none",children:[O.jsx("option",{value:"newest",children:i("newest")}),O.jsx("option",{value:"rating",children:i("sortByRating")})]}),O.jsxs("button",{onClick:u,className:"bg-emerald-500 hover:bg-emerald-600 text-white px-4 md:px-10 py-1.5 md:py-3 rounded-full font-black uppercase tracking-widest shadow-lg transform active:translate-y-1 transition-all flex items-center gap-2 border-b-2 md:border-b-4 border-emerald-700 active:border-b-0 text-[10px] md:text-base",children:[O.jsx("span",{className:"text-lg md:text-2xl",children:""}),O.jsx("span",{className:"hidden xs:inline",children:i("createBook")})]})]})]}),O.jsx("main",{className:"flex-1 overflow-x-auto p-6 md:p-12 flex gap-6 md:gap-10 items-start relative z-10 no-scrollbar",children:j.length>0?j.map(R=>{var N;return O.jsxs("div",{onClick:()=>o(R),className:"flex-shrink-0 bg-white rounded-[30px] md:rounded-[50px] shadow-lg hover:shadow-2xl transition-all cursor-pointer transform hover:-translate-y-2 flex flex-col overflow-hidden border-white group",style:{width:`${320*K}px`,height:`${520*K}px`,borderWidth:`${12*K}px`},children:[O.jsxs("div",{className:"relative overflow-hidden bg-rose-50",style:{height:`${280*K}px`},children:[O.jsx("img",{src:R.coverImage,alt:R.title,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-110"}),t.role==="admin"&&O.jsxs("div",{className:"absolute inset-0 bg-rose-950/40 backdrop-blur-[2px] opacity-0 group-hover:opacity-100 transition-opacity flex flex-col items-center justify-center gap-4",children:[!R.isApproved&&O.jsx("button",{onClick:D=>{D.stopPropagation(),h(R.id)},className:"bg-emerald-500 text-white px-6 py-2 rounded-full font-black uppercase text-sm shadow-xl hover:scale-105 transition-transform",children:i("approve")}),O.jsx("button",{onClick:D=>{D.stopPropagation(),a(R)},className:"bg-amber-400 text-rose-950 px-6 py-2 rounded-full font-black uppercase text-sm shadow-xl hover:scale-105 transition-transform",children:i("editBook")})]}),O.jsxs("div",{className:"absolute top-2 left-2 flex flex-col gap-1",children:[R.isApproved?O.jsx("span",{className:"bg-emerald-500 text-white px-2 py-0.5 rounded-full font-black uppercase border border-white",style:{fontSize:`${9*K}px`},children:i("approved")}):O.jsx("span",{className:"bg-amber-500 text-white px-2 py-0.5 rounded-full font-black uppercase border border-white",style:{fontSize:`${9*K}px`},children:i("pending")}),O.jsx("span",{className:"bg-rose-400 text-white px-2 py-0.5 rounded-full font-black uppercase border border-white",style:{fontSize:`${9*K}px`},children:R.publishStatus==="universal"?i("publishUniversal"):i("publishLocal")})]}),O.jsxs("div",{className:"absolute top-2 right-2 bg-amber-400 text-rose-900 px-2 py-1 rounded-full font-black uppercase shadow-lg border border-white flex items-center gap-1",style:{fontSize:`${10*K}px`},children:[O.jsx("span",{children:(N=mo.find(D=>D.code===R.language))==null?void 0:N.flag}),O.jsxs("span",{children:[R.ageGroup,"+"]})]}),O.jsxs("div",{className:"absolute bottom-2 left-2 bg-white/90 backdrop-blur-md px-3 py-2 rounded-[1.5rem] shadow-xl flex flex-col gap-2",children:[O.jsx(de,{rating:R.universalRating,id:R.id,type:"universal",scale:K}),O.jsx("div",{className:"w-full h-px bg-rose-100 opacity-50"}),O.jsx(de,{rating:R.personalRating,id:R.id,type:"personal",scale:K})]})]}),O.jsxs("div",{className:"p-3 md:p-6 flex flex-col justify-between flex-1 bg-gradient-to-b from-white to-rose-50/40",children:[O.jsx("h3",{className:"font-kids text-rose-950 leading-tight line-clamp-2",style:{fontSize:`${1.25*K}rem`},children:R.title}),O.jsxs("div",{className:"flex items-center justify-between border-t border-rose-100 pt-2 md:pt-4",children:[O.jsxs("div",{children:[O.jsxs("p",{className:"font-bold uppercase tracking-wider italic text-rose-400",style:{fontSize:`${10*K}px`},children:["by ",R.author]}),O.jsxs("p",{className:"font-black uppercase text-rose-300",style:{fontSize:`${8*K}px`},children:["Creator: ",R.creatorName]})]}),O.jsx("span",{className:"opacity-40 group-hover:opacity-100",style:{fontSize:`${1.5*K}rem`},children:""})]})]})]},R.id)}):O.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-rose-200 py-20 min-w-full",children:[O.jsx("span",{className:"text-6xl md:text-9xl mb-4 md:mb-8 opacity-30 animate-pulse",children:""}),O.jsx("p",{className:"text-xl md:text-3xl font-kids text-rose-800/30 tracking-widest uppercase",children:i("noFlowers")})]})}),O.jsxs("div",{className:"fixed bottom-2 right-4 flex items-center gap-2 opacity-40 z-0 select-none",children:[O.jsx("span",{className:"text-[10px] md:text-xs font-black uppercase text-rose-900",children:i("safeInCloud")}),O.jsx("span",{className:"text-xl",children:""})]})]})},Ib=({book:n,onClose:e,t})=>{const[i,o]=He.useState(0),[a,u]=He.useState(!1),d=n.pages.length,m=n.pages[i];He.useEffect(()=>{const T=S=>{S.key==="ArrowRight"&&h(),S.key==="ArrowLeft"&&_(),S.key==="Escape"&&u(!a)};return window.addEventListener("keydown",T),()=>window.removeEventListener("keydown",T)},[i,a]);const h=()=>{i<d-1&&o(T=>T+1)},_=()=>{i>0&&o(T=>T-1)};return O.jsxs("div",{className:"fixed inset-0 bg-slate-900 z-50 flex flex-col text-white select-none overflow-hidden",children:[O.jsx("div",{className:"absolute top-4 left-4 z-[70]",children:O.jsxs("button",{onClick:()=>u(!0),className:"flex items-center gap-2 px-4 py-2 bg-white/10 hover:bg-rose-600 transition-all rounded-full font-black uppercase text-[10px] md:text-xs tracking-widest border border-white/20 hover:border-white/40 opacity-30 hover:opacity-100 backdrop-blur-sm shadow-sm",children:[O.jsx("span",{className:"text-lg",children:""})," ",t("back")]})}),a&&O.jsx("div",{className:"fixed inset-0 z-[100] bg-slate-900/95 backdrop-blur-xl flex items-center justify-center p-4",children:O.jsxs("div",{className:"bg-white rounded-[3rem] p-8 md:p-16 max-w-lg w-full text-center shadow-2xl border-[8px] md:border-[16px] border-rose-100 transform animate-in zoom-in duration-300 relative overflow-hidden",children:[O.jsx("h3",{className:"text-3xl md:text-5xl font-kids text-rose-950 mb-6 md:mb-10 leading-tight",children:t("leaveGarden")}),O.jsxs("div",{className:"flex flex-col gap-4 md:gap-6",children:[O.jsx("button",{onClick:e,className:"w-full py-4 md:py-6 bg-rose-600 text-white rounded-[2rem] md:rounded-[3rem] font-black uppercase text-lg md:text-2xl shadow-xl",children:t("yesGoBack")}),O.jsx("button",{onClick:()=>u(!1),className:"w-full py-4 md:py-6 bg-rose-50 text-rose-800 rounded-[2rem] md:rounded-[3rem] font-black uppercase text-lg md:text-2xl shadow-sm",children:t("keepReading")})]})]})}),O.jsxs("div",{className:"flex-1 relative flex items-center justify-center bg-white",style:{backgroundColor:n.backgroundColor||"#ffffff"},children:[O.jsx("div",{onClick:_,className:`absolute left-0 top-0 bottom-0 w-[15%] z-20 cursor-pointer flex items-center justify-start pl-4 md:pl-12 group ${i===0?"pointer-events-none":""}`,children:O.jsx("div",{className:`w-12 h-12 md:w-24 md:h-24 rounded-full bg-black/5 flex items-center justify-center transition-all opacity-0 group-hover:opacity-100 ${i===0?"hidden":"hover:scale-110"}`,children:O.jsx("span",{className:"text-3xl md:text-6xl rotate-180",children:""})})}),O.jsx("div",{onClick:h,className:`absolute right-0 top-0 bottom-0 w-[15%] z-20 cursor-pointer flex items-center justify-end pr-4 md:pr-12 group ${i===d-1?"pointer-events-none":""}`,children:O.jsx("div",{className:`w-12 h-12 md:w-24 md:h-24 rounded-full bg-black/5 flex items-center justify-center transition-all opacity-0 group-hover:opacity-100 ${i===d-1?"hidden":"hover:scale-110"}`,children:O.jsx("span",{className:"text-3xl md:text-6xl",children:""})})}),O.jsxs("div",{className:"flex w-full h-full flex-col md:flex-row",children:[O.jsxs("div",{className:"flex-[5] md:flex-[4] relative overflow-hidden flex items-center justify-center p-4",children:[O.jsx("img",{src:m.imageUrl,alt:`Page ${i+1}`,className:"max-w-full max-h-full object-contain pointer-events-none rounded-xl md:rounded-[2rem] shadow-sm"}),O.jsxs("div",{className:"absolute bottom-4 left-4 md:bottom-12 md:left-12 px-4 py-1.5 md:px-8 md:py-3 bg-white/40 rounded-full text-[8px] md:text-xs font-black text-rose-900 tracking-[0.2em] md:tracking-[0.5em] backdrop-blur-md uppercase border border-white/50",children:[i+1," / ",d]})]}),O.jsxs("div",{className:"flex-[3] p-6 md:p-32 flex flex-col justify-center relative overflow-hidden bg-black/5 md:bg-transparent",children:[O.jsx("div",{className:"hidden xs:block absolute top-4 right-4 text-4xl opacity-5 select-none text-rose-300",children:""}),O.jsx("p",{className:"text-xl md:text-4xl lg:text-6xl leading-tight font-medium text-slate-800 italic relative z-10 font-kids drop-shadow-sm line-clamp-8 md:line-clamp-none overflow-y-auto no-scrollbar",children:m.text||""})]})]})]}),O.jsx("div",{className:"h-1.5 md:h-4 w-full bg-slate-800 overflow-hidden relative shadow-inner",children:O.jsx("div",{className:"h-full bg-gradient-to-r from-rose-400 via-amber-400 to-rose-300 transition-all duration-1000 ease-in-out",style:{width:`${(i+1)/d*100}%`}})})]})};var wb={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Rb,bb;function Nb(){return{geminiUrl:Rb,vertexUrl:bb}}function xb(n,e,t,i){var o,a;if(!(n!=null&&n.baseUrl)){const u=Nb();return e?(o=u.vertexUrl)!==null&&o!==void 0?o:t:(a=u.geminiUrl)!==null&&a!==void 0?a:i}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Dr{}function me(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(i,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){const a=e[o];return a!=null?String(a):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function p(n,e,t){for(let a=0;a<e.length-1;a++){const u=e[a];if(u.endsWith("[]")){const d=u.slice(0,-2);if(!(d in n))if(Array.isArray(t))n[d]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(n[d])){const m=n[d];if(Array.isArray(t))for(let h=0;h<m.length;h++){const _=m[h];p(_,e.slice(a+1),t[h])}else for(const h of m)p(h,e.slice(a+1),t)}return}else if(u.endsWith("[0]")){const d=u.slice(0,-3);d in n||(n[d]=[{}]);const m=n[d];p(m[0],e.slice(a+1),t);return}(!n[u]||typeof n[u]!="object")&&(n[u]={}),n=n[u]}const i=e[e.length-1],o=n[i];if(o!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===o)return;if(typeof o=="object"&&typeof t=="object"&&o!==null&&t!==null)Object.assign(o,t);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[i]=t}function f(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let i=0;i<e.length;i++){if(typeof n!="object"||n===null)return t;const o=e[i];if(o.endsWith("[]")){const a=o.slice(0,-2);if(a in n){const u=n[a];return Array.isArray(u)?u.map(d=>f(d,e.slice(i+1),t)):t}else return t}else n=n[o]}return n}catch(i){if(i instanceof TypeError)return t;throw i}}function Mb(n,e){for(const[t,i]of Object.entries(e)){const o=t.split("."),a=i.split("."),u=new Set;let d=-1;for(let m=0;m<o.length;m++)if(o[m]==="*"){d=m;break}if(d!==-1&&a.length>d)for(let m=d;m<a.length;m++){const h=a[m];h!=="*"&&!h.endsWith("[]")&&!h.endsWith("[0]")&&u.add(h)}pm(n,o,a,0,u)}}function pm(n,e,t,i,o){if(i>=e.length||typeof n!="object"||n===null)return;const a=e[i];if(a.endsWith("[]")){const u=a.slice(0,-2),d=n;if(u in d&&Array.isArray(d[u]))for(const m of d[u])pm(m,e,t,i+1,o)}else if(a==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const u=n,d=Object.keys(u).filter(h=>!h.startsWith("_")&&!o.has(h)),m={};for(const h of d)m[h]=u[h];for(const[h,_]of Object.entries(m)){const T=[];for(const S of t.slice(i))S==="*"?T.push(h):T.push(S);p(u,T,_)}for(const h of d)delete u[h]}}else{const u=n;a in u&&pm(u[a],e,t,i+1,o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tg(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Db(n){const e={},t=f(n,["operationName"]);t!=null&&p(e,["operationName"],t);const i=f(n,["resourceName"]);return i!=null&&p(e,["_url","resourceName"],i),e}function Pb(n){const e={},t=f(n,["name"]);t!=null&&p(e,["name"],t);const i=f(n,["metadata"]);i!=null&&p(e,["metadata"],i);const o=f(n,["done"]);o!=null&&p(e,["done"],o);const a=f(n,["error"]);a!=null&&p(e,["error"],a);const u=f(n,["response","generateVideoResponse"]);return u!=null&&p(e,["response"],Vb(u)),e}function kb(n){const e={},t=f(n,["name"]);t!=null&&p(e,["name"],t);const i=f(n,["metadata"]);i!=null&&p(e,["metadata"],i);const o=f(n,["done"]);o!=null&&p(e,["done"],o);const a=f(n,["error"]);a!=null&&p(e,["error"],a);const u=f(n,["response"]);return u!=null&&p(e,["response"],Ub(u)),e}function Vb(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(u=>Lb(u))),p(e,["generatedVideos"],a)}const i=f(n,["raiMediaFilteredCount"]);i!=null&&p(e,["raiMediaFilteredCount"],i);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&p(e,["raiMediaFilteredReasons"],o),e}function Ub(n){const e={},t=f(n,["videos"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(u=>Ob(u))),p(e,["generatedVideos"],a)}const i=f(n,["raiMediaFilteredCount"]);i!=null&&p(e,["raiMediaFilteredCount"],i);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&p(e,["raiMediaFilteredReasons"],o),e}function Lb(n){const e={},t=f(n,["video"]);return t!=null&&p(e,["video"],Hb(t)),e}function Ob(n){const e={},t=f(n,["_self"]);return t!=null&&p(e,["video"],Kb(t)),e}function Fb(n){const e={},t=f(n,["operationName"]);return t!=null&&p(e,["_url","operationName"],t),e}function Gb(n){const e={},t=f(n,["operationName"]);return t!=null&&p(e,["_url","operationName"],t),e}function qb(n){const e={},t=f(n,["name"]);t!=null&&p(e,["name"],t);const i=f(n,["metadata"]);i!=null&&p(e,["metadata"],i);const o=f(n,["done"]);o!=null&&p(e,["done"],o);const a=f(n,["error"]);a!=null&&p(e,["error"],a);const u=f(n,["response"]);return u!=null&&p(e,["response"],Bb(u)),e}function Bb(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["parent"]);i!=null&&p(e,["parent"],i);const o=f(n,["documentName"]);return o!=null&&p(e,["documentName"],o),e}function lA(n){const e={},t=f(n,["name"]);t!=null&&p(e,["name"],t);const i=f(n,["metadata"]);i!=null&&p(e,["metadata"],i);const o=f(n,["done"]);o!=null&&p(e,["done"],o);const a=f(n,["error"]);a!=null&&p(e,["error"],a);const u=f(n,["response"]);return u!=null&&p(e,["response"],zb(u)),e}function zb(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["parent"]);i!=null&&p(e,["parent"],i);const o=f(n,["documentName"]);return o!=null&&p(e,["documentName"],o),e}function Hb(n){const e={},t=f(n,["uri"]);t!=null&&p(e,["uri"],t);const i=f(n,["encodedVideo"]);i!=null&&p(e,["videoBytes"],tg(i));const o=f(n,["encoding"]);return o!=null&&p(e,["mimeType"],o),e}function Kb(n){const e={},t=f(n,["gcsUri"]);t!=null&&p(e,["uri"],t);const i=f(n,["bytesBase64Encoded"]);i!=null&&p(e,["videoBytes"],tg(i));const o=f(n,["mimeType"]);return o!=null&&p(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var qT;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(qT||(qT={}));var BT;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(BT||(BT={}));var zT;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(zT||(zT={}));var ys;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(ys||(ys={}));var HT;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(HT||(HT={}));var KT;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(KT||(KT={}));var YT;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(YT||(YT={}));var JT;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(JT||(JT={}));var $T;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})($T||($T={}));var QT;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(QT||(QT={}));var XT;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(XT||(XT={}));var WT;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH",n.MINIMAL="MINIMAL"})(WT||(WT={}));var ZT;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(ZT||(ZT={}));var jT;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(jT||(jT={}));var eE;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(eE||(eE={}));var tE;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE",n.IMAGE_RECITATION="IMAGE_RECITATION",n.IMAGE_OTHER="IMAGE_OTHER"})(tE||(tE={}));var nE;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(nE||(nE={}));var iE;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(iE||(iE={}));var rE;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(rE||(rE={}));var sE;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(sE||(sE={}));var oE;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(oE||(oE={}));var zf;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(zf||(zf={}));var aE;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(aE||(aE={}));var lE;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(lE||(lE={}));var uE;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(uE||(uE={}));var mm;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(mm||(mm={}));var cE;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(cE||(cE={}));var fE;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",n.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(fE||(fE={}));var dE;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(dE||(dE={}));var hE;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(hE||(hE={}));var pE;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(pE||(pE={}));var mE;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(mE||(mE={}));var gE;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(gE||(gE={}));var yE;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(yE||(yE={}));var _E;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(_E||(_E={}));var vE;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(vE||(vE={}));var TE;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(TE||(TE={}));var EE;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(EE||(EE={}));var SE;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(SE||(SE={}));var AE;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(AE||(AE={}));var CE;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(CE||(CE={}));var IE;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(IE||(IE={}));var wE;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(wE||(wE={}));var RE;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(RE||(RE={}));var bE;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED",n.REGISTERED="REGISTERED"})(bE||(bE={}));var NE;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(NE||(NE={}));var xE;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(xE||(xE={}));var ME;(function(n){n.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",n.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",n.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(ME||(ME={}));var DE;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(DE||(DE={}));var PE;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(PE||(PE={}));var kE;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(kE||(kE={}));var VE;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(VE||(VE={}));var UE;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(UE||(UE={}));var LE;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(LE||(LE={}));var Ca;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(Ca||(Ca={}));class gm{constructor(e){const t={};for(const i of e.headers.entries())t[i[0]]=i[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class ru{get text(){var e,t,i,o,a,u,d,m;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let h="",_=!1;const T=[];for(const S of(m=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&m!==void 0?m:[]){for(const[I,L]of Object.entries(S))I!=="text"&&I!=="thought"&&I!=="thoughtSignature"&&(L!==null||L!==void 0)&&T.push(I);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;_=!0,h+=S.text}}return T.length>0&&console.warn(`there are non-text parts ${T} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),_?h:void 0}get data(){var e,t,i,o,a,u,d,m;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let h="";const _=[];for(const T of(m=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&m!==void 0?m:[]){for(const[S,I]of Object.entries(T))S!=="inlineData"&&(I!==null||I!==void 0)&&_.push(S);T.inlineData&&typeof T.inlineData.data=="string"&&(h+=atob(T.inlineData.data))}return _.length>0&&console.warn(`there are non-data parts ${_} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),h.length>0?btoa(h):void 0}get functionCalls(){var e,t,i,o,a,u,d,m;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const h=(m=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||m===void 0?void 0:m.filter(_=>_.functionCall).map(_=>_.functionCall).filter(_=>_!==void 0);if((h==null?void 0:h.length)!==0)return h}get executableCode(){var e,t,i,o,a,u,d,m,h;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const _=(m=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||m===void 0?void 0:m.filter(T=>T.executableCode).map(T=>T.executableCode).filter(T=>T!==void 0);if((_==null?void 0:_.length)!==0)return(h=_==null?void 0:_[0])===null||h===void 0?void 0:h.code}get codeExecutionResult(){var e,t,i,o,a,u,d,m,h;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const _=(m=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||m===void 0?void 0:m.filter(T=>T.codeExecutionResult).map(T=>T.codeExecutionResult).filter(T=>T!==void 0);if((_==null?void 0:_.length)!==0)return(h=_==null?void 0:_[0])===null||h===void 0?void 0:h.output}}class OE{}class FE{}class Yb{}class Jb{}class $b{}class Qb{}class GE{}class qE{}class BE{}class Xb{}class Hf{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new Hf;let o;const a=e;return t?o=kb(a):o=Pb(a),Object.assign(i,o),i}}class zE{}class HE{}class KE{}class YE{}class Wb{}class Zb{}class jb{}class ng{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new ng,a=qb(e);return Object.assign(i,a),i}}class eN{}class tN{}class nN{}class JE{}class iN{get text(){var e,t,i;let o="",a=!1;const u=[];for(const d of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[m,h]of Object.entries(d))m!=="text"&&m!=="thought"&&h!==null&&u.push(m);if(typeof d.text=="string"){if(typeof d.thought=="boolean"&&d.thought)continue;a=!0,o+=d.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?o:void 0}get data(){var e,t,i;let o="";const a=[];for(const u of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[d,m]of Object.entries(u))d!=="inlineData"&&m!==null&&a.push(d);u.inlineData&&typeof u.inlineData.data=="string"&&(o+=atob(u.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class rN{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class ig{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new ig,a=lA(e);return Object.assign(i,a),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $e(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function uA(n,e){const t=$e(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function cA(n){return Array.isArray(n)?n.map(e=>Kf(e)):[Kf(n)]}function Kf(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function fA(n){const e=Kf(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function dA(n){const e=Kf(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function $E(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function hA(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>$E(e)):[$E(n)]}function ym(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function QE(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function XE(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function on(n){if(n==null)throw new Error("ContentUnion is required");return ym(n)?n:{role:"user",parts:hA(n)}}function rg(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const i=on(t);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(n.isVertexAI()){const t=on(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>on(t)):[on(e)]}function Qn(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(QE(n)||XE(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[on(n)]}const e=[],t=[],i=ym(n[0]);for(const o of n){const a=ym(o);if(a!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(o);else{if(QE(o)||XE(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(o)}}return i||e.push({role:"user",parts:hA(t)}),e}function sN(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(i=>i!=="null");if(t.length===1)e.type=Object.values(ys).includes(t[0].toUpperCase())?t[0].toUpperCase():ys.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of t)e.anyOf.push({type:Object.values(ys).includes(i.toUpperCase())?i.toUpperCase():ys.TYPE_UNSPECIFIED})}}function Ra(n){const e={},t=["items"],i=["anyOf"],o=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=n.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,n=a[1]):a[1].type==="null"&&(e.nullable=!0,n=a[0])),n.type instanceof Array&&sN(n.type,e);for(const[u,d]of Object.entries(n))if(d!=null)if(u=="type"){if(d==="null")throw new Error("type: null can not be the only possible type for the field.");if(d instanceof Array)continue;e.type=Object.values(ys).includes(d.toUpperCase())?d.toUpperCase():ys.TYPE_UNSPECIFIED}else if(t.includes(u))e[u]=Ra(d);else if(i.includes(u)){const m=[];for(const h of d){if(h.type=="null"){e.nullable=!0;continue}m.push(Ra(h))}e[u]=m}else if(o.includes(u)){const m={};for(const[h,_]of Object.entries(d))m[h]=Ra(_);e[u]=m}else{if(u==="additionalProperties")continue;e[u]=d}return e}function sg(n){return Ra(n)}function og(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function ag(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function Ba(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Ra(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Ra(e.response));return n}function za(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function oN(n,e,t,i=1){const o=!e.startsWith(`${t}/`)&&e.split("/").length===i;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:o?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:o?`${t}/${e}`:e}function Pr(n,e){if(typeof e!="string")throw new Error("name must be a string");return oN(n,e,"cachedContents")}function pA(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function xs(n){return tg(n)}function aN(n){return n!=null&&typeof n=="object"&&"name"in n}function lN(n){return n!=null&&typeof n=="object"&&"video"in n}function uN(n){return n!=null&&typeof n=="object"&&"uri"in n}function mA(n){var e;let t;if(aN(n)&&(t=n.name),!(uN(n)&&(t=n.uri,t===void 0))&&!(lN(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const o=t.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${t}`);t=o[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function gA(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function yA(n){for(const e of["models","tunedModels","publisherModels"])if(cN(n,e))return n[e];return[]}function cN(n,e){return n!==null&&typeof n=="object"&&e in n}function fN(n,e={}){const t=n,i={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(i.responseJsonSchema=t.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function dN(n,e={}){const t=[],i=new Set;for(const o of n){const a=o.name;if(i.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);i.add(a);const u=fN(o,e);u.functionDeclarations&&t.push(...u.functionDeclarations)}return{functionDeclarations:t}}function _A(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const i=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,o=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(o>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function hN(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function vA(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const o=t.inlinedResponses;if(!Array.isArray(o)||o.length===0)return n;let a=!1;for(const u of o){if(typeof u!="object"||u===null)continue;const m=u.response;if(typeof m!="object"||m===null)continue;if(m.embedding!==void 0){a=!0;break}}return a&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function Ha(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function TA(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pN(n){const e={},t=f(n,["responsesFile"]);t!=null&&p(e,["fileName"],t);const i=f(n,["inlinedResponses","inlinedResponses"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>$N(u))),p(e,["inlinedResponses"],a)}const o=f(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["inlinedEmbedContentResponses"],a)}return e}function mN(n){const e={},t=f(n,["predictionsFormat"]);t!=null&&p(e,["format"],t);const i=f(n,["gcsDestination","outputUriPrefix"]);i!=null&&p(e,["gcsUri"],i);const o=f(n,["bigqueryDestination","outputUri"]);return o!=null&&p(e,["bigqueryUri"],o),e}function gN(n){const e={},t=f(n,["format"]);t!=null&&p(e,["predictionsFormat"],t);const i=f(n,["gcsUri"]);i!=null&&p(e,["gcsDestination","outputUriPrefix"],i);const o=f(n,["bigqueryUri"]);if(o!=null&&p(e,["bigqueryDestination","outputUri"],o),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(f(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Mf(n){const e={},t=f(n,["name"]);t!=null&&p(e,["name"],t);const i=f(n,["metadata","displayName"]);i!=null&&p(e,["displayName"],i);const o=f(n,["metadata","state"]);o!=null&&p(e,["state"],TA(o));const a=f(n,["metadata","createTime"]);a!=null&&p(e,["createTime"],a);const u=f(n,["metadata","endTime"]);u!=null&&p(e,["endTime"],u);const d=f(n,["metadata","updateTime"]);d!=null&&p(e,["updateTime"],d);const m=f(n,["metadata","model"]);m!=null&&p(e,["model"],m);const h=f(n,["metadata","output"]);return h!=null&&p(e,["dest"],pN(vA(h))),e}function _m(n){const e={},t=f(n,["name"]);t!=null&&p(e,["name"],t);const i=f(n,["displayName"]);i!=null&&p(e,["displayName"],i);const o=f(n,["state"]);o!=null&&p(e,["state"],TA(o));const a=f(n,["error"]);a!=null&&p(e,["error"],a);const u=f(n,["createTime"]);u!=null&&p(e,["createTime"],u);const d=f(n,["startTime"]);d!=null&&p(e,["startTime"],d);const m=f(n,["endTime"]);m!=null&&p(e,["endTime"],m);const h=f(n,["updateTime"]);h!=null&&p(e,["updateTime"],h);const _=f(n,["model"]);_!=null&&p(e,["model"],_);const T=f(n,["inputConfig"]);T!=null&&p(e,["src"],yN(T));const S=f(n,["outputConfig"]);S!=null&&p(e,["dest"],mN(vA(S)));const I=f(n,["completionStats"]);return I!=null&&p(e,["completionStats"],I),e}function yN(n){const e={},t=f(n,["instancesFormat"]);t!=null&&p(e,["format"],t);const i=f(n,["gcsSource","uris"]);i!=null&&p(e,["gcsUri"],i);const o=f(n,["bigquerySource","inputUri"]);return o!=null&&p(e,["bigqueryUri"],o),e}function _N(n,e){const t={};if(f(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=f(e,["fileName"]);i!=null&&p(t,["fileName"],i);const o=f(e,["inlinedRequests"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>JN(n,u))),p(t,["requests","requests"],a)}return t}function vN(n){const e={},t=f(n,["format"]);t!=null&&p(e,["instancesFormat"],t);const i=f(n,["gcsUri"]);i!=null&&p(e,["gcsSource","uris"],i);const o=f(n,["bigqueryUri"]);if(o!=null&&p(e,["bigquerySource","inputUri"],o),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function TN(n){const e={},t=f(n,["data"]);if(t!=null&&p(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function EN(n,e){const t={},i=f(e,["name"]);return i!=null&&p(t,["_url","name"],Ha(n,i)),t}function SN(n,e){const t={},i=f(e,["name"]);return i!=null&&p(t,["_url","name"],Ha(n,i)),t}function AN(n){const e={},t=f(n,["content"]);t!=null&&p(e,["content"],t);const i=f(n,["citationMetadata"]);i!=null&&p(e,["citationMetadata"],CN(i));const o=f(n,["tokenCount"]);o!=null&&p(e,["tokenCount"],o);const a=f(n,["finishReason"]);a!=null&&p(e,["finishReason"],a);const u=f(n,["avgLogprobs"]);u!=null&&p(e,["avgLogprobs"],u);const d=f(n,["groundingMetadata"]);d!=null&&p(e,["groundingMetadata"],d);const m=f(n,["index"]);m!=null&&p(e,["index"],m);const h=f(n,["logprobsResult"]);h!=null&&p(e,["logprobsResult"],h);const _=f(n,["safetyRatings"]);if(_!=null){let S=_;Array.isArray(S)&&(S=S.map(I=>I)),p(e,["safetyRatings"],S)}const T=f(n,["urlContextMetadata"]);return T!=null&&p(e,["urlContextMetadata"],T),e}function CN(n){const e={},t=f(n,["citationSources"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>o)),p(e,["citations"],i)}return e}function EA(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>tx(a))),p(e,["parts"],o)}const i=f(n,["role"]);return i!=null&&p(e,["role"],i),e}function IN(n,e){const t={},i=f(n,["displayName"]);if(e!==void 0&&i!=null&&p(e,["batch","displayName"],i),f(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function wN(n,e){const t={},i=f(n,["displayName"]);e!==void 0&&i!=null&&p(e,["displayName"],i);const o=f(n,["dest"]);return e!==void 0&&o!=null&&p(e,["outputConfig"],gN(hN(o))),t}function WE(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["_url","model"],$e(n,i));const o=f(e,["src"]);o!=null&&p(t,["batch","inputConfig"],_N(n,_A(n,o)));const a=f(e,["config"]);return a!=null&&IN(a,t),t}function RN(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["model"],$e(n,i));const o=f(e,["src"]);o!=null&&p(t,["inputConfig"],vN(_A(n,o)));const a=f(e,["config"]);return a!=null&&wN(a,t),t}function bN(n,e){const t={},i=f(n,["displayName"]);return e!==void 0&&i!=null&&p(e,["batch","displayName"],i),t}function NN(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["_url","model"],$e(n,i));const o=f(e,["src"]);o!=null&&p(t,["batch","inputConfig"],UN(n,o));const a=f(e,["config"]);return a!=null&&bN(a,t),t}function xN(n,e){const t={},i=f(e,["name"]);return i!=null&&p(t,["_url","name"],Ha(n,i)),t}function MN(n,e){const t={},i=f(e,["name"]);return i!=null&&p(t,["_url","name"],Ha(n,i)),t}function DN(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["name"]);i!=null&&p(e,["name"],i);const o=f(n,["done"]);o!=null&&p(e,["done"],o);const a=f(n,["error"]);return a!=null&&p(e,["error"],a),e}function PN(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["name"]);i!=null&&p(e,["name"],i);const o=f(n,["done"]);o!=null&&p(e,["done"],o);const a=f(n,["error"]);return a!=null&&p(e,["error"],a),e}function kN(n,e){const t={},i=f(e,["contents"]);if(i!=null){let a=rg(n,i);Array.isArray(a)&&(a=a.map(u=>u)),p(t,["requests[]","request","content"],a)}const o=f(e,["config"]);return o!=null&&(p(t,["_self"],VN(o,t)),Mb(t,{"requests[].*":"requests[].request.*"})),t}function VN(n,e){const t={},i=f(n,["taskType"]);e!==void 0&&i!=null&&p(e,["requests[]","taskType"],i);const o=f(n,["title"]);e!==void 0&&o!=null&&p(e,["requests[]","title"],o);const a=f(n,["outputDimensionality"]);if(e!==void 0&&a!=null&&p(e,["requests[]","outputDimensionality"],a),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function UN(n,e){const t={},i=f(e,["fileName"]);i!=null&&p(t,["file_name"],i);const o=f(e,["inlinedRequests"]);return o!=null&&p(t,["requests"],kN(n,o)),t}function LN(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function ON(n){const e={},t=f(n,["id"]);t!=null&&p(e,["id"],t);const i=f(n,["args"]);i!=null&&p(e,["args"],i);const o=f(n,["name"]);if(o!=null&&p(e,["name"],o),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function FN(n){const e={},t=f(n,["allowedFunctionNames"]);t!=null&&p(e,["allowedFunctionNames"],t);const i=f(n,["mode"]);if(i!=null&&p(e,["mode"],i),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function GN(n,e,t){const i={},o=f(e,["systemInstruction"]);t!==void 0&&o!=null&&p(t,["systemInstruction"],EA(on(o)));const a=f(e,["temperature"]);a!=null&&p(i,["temperature"],a);const u=f(e,["topP"]);u!=null&&p(i,["topP"],u);const d=f(e,["topK"]);d!=null&&p(i,["topK"],d);const m=f(e,["candidateCount"]);m!=null&&p(i,["candidateCount"],m);const h=f(e,["maxOutputTokens"]);h!=null&&p(i,["maxOutputTokens"],h);const _=f(e,["stopSequences"]);_!=null&&p(i,["stopSequences"],_);const T=f(e,["responseLogprobs"]);T!=null&&p(i,["responseLogprobs"],T);const S=f(e,["logprobs"]);S!=null&&p(i,["logprobs"],S);const I=f(e,["presencePenalty"]);I!=null&&p(i,["presencePenalty"],I);const L=f(e,["frequencyPenalty"]);L!=null&&p(i,["frequencyPenalty"],L);const F=f(e,["seed"]);F!=null&&p(i,["seed"],F);const V=f(e,["responseMimeType"]);V!=null&&p(i,["responseMimeType"],V);const K=f(e,["responseSchema"]);K!=null&&p(i,["responseSchema"],sg(K));const ne=f(e,["responseJsonSchema"]);if(ne!=null&&p(i,["responseJsonSchema"],ne),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const j=f(e,["safetySettings"]);if(t!==void 0&&j!=null){let M=j;Array.isArray(M)&&(M=M.map(ke=>nx(ke))),p(t,["safetySettings"],M)}const oe=f(e,["tools"]);if(t!==void 0&&oe!=null){let M=za(oe);Array.isArray(M)&&(M=M.map(ke=>rx(Ba(ke)))),p(t,["tools"],M)}const de=f(e,["toolConfig"]);if(t!==void 0&&de!=null&&p(t,["toolConfig"],ix(de)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ue=f(e,["cachedContent"]);t!==void 0&&ue!=null&&p(t,["cachedContent"],Pr(n,ue));const x=f(e,["responseModalities"]);x!=null&&p(i,["responseModalities"],x);const R=f(e,["mediaResolution"]);R!=null&&p(i,["mediaResolution"],R);const N=f(e,["speechConfig"]);if(N!=null&&p(i,["speechConfig"],og(N)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const D=f(e,["thinkingConfig"]);D!=null&&p(i,["thinkingConfig"],D);const k=f(e,["imageConfig"]);k!=null&&p(i,["imageConfig"],YN(k));const q=f(e,["enableEnhancedCivicAnswers"]);return q!=null&&p(i,["enableEnhancedCivicAnswers"],q),i}function qN(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["candidates"]);if(i!=null){let m=i;Array.isArray(m)&&(m=m.map(h=>AN(h))),p(e,["candidates"],m)}const o=f(n,["modelVersion"]);o!=null&&p(e,["modelVersion"],o);const a=f(n,["promptFeedback"]);a!=null&&p(e,["promptFeedback"],a);const u=f(n,["responseId"]);u!=null&&p(e,["responseId"],u);const d=f(n,["usageMetadata"]);return d!=null&&p(e,["usageMetadata"],d),e}function BN(n,e){const t={},i=f(e,["name"]);return i!=null&&p(t,["_url","name"],Ha(n,i)),t}function zN(n,e){const t={},i=f(e,["name"]);return i!=null&&p(t,["_url","name"],Ha(n,i)),t}function HN(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function KN(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function YN(n){const e={},t=f(n,["aspectRatio"]);t!=null&&p(e,["aspectRatio"],t);const i=f(n,["imageSize"]);if(i!=null&&p(e,["imageSize"],i),f(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(f(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function JN(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["request","model"],$e(n,i));const o=f(e,["contents"]);if(o!=null){let d=Qn(o);Array.isArray(d)&&(d=d.map(m=>EA(m))),p(t,["request","contents"],d)}const a=f(e,["metadata"]);a!=null&&p(t,["metadata"],a);const u=f(e,["config"]);return u!=null&&p(t,["request","generationConfig"],GN(n,u,f(t,["request"],{}))),t}function $N(n){const e={},t=f(n,["response"]);t!=null&&p(e,["response"],qN(t));const i=f(n,["error"]);return i!=null&&p(e,["error"],i),e}function QN(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);if(e!==void 0&&o!=null&&p(e,["_query","pageToken"],o),f(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function XN(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);e!==void 0&&o!=null&&p(e,["_query","pageToken"],o);const a=f(n,["filter"]);return e!==void 0&&a!=null&&p(e,["_query","filter"],a),t}function WN(n){const e={},t=f(n,["config"]);return t!=null&&QN(t,e),e}function ZN(n){const e={},t=f(n,["config"]);return t!=null&&XN(t,e),e}function jN(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const o=f(n,["operations"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>Mf(u))),p(e,["batchJobs"],a)}return e}function ex(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const o=f(n,["batchPredictionJobs"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>_m(u))),p(e,["batchJobs"],a)}return e}function tx(n){const e={},t=f(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const i=f(n,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const o=f(n,["executableCode"]);o!=null&&p(e,["executableCode"],o);const a=f(n,["fileData"]);a!=null&&p(e,["fileData"],LN(a));const u=f(n,["functionCall"]);u!=null&&p(e,["functionCall"],ON(u));const d=f(n,["functionResponse"]);d!=null&&p(e,["functionResponse"],d);const m=f(n,["inlineData"]);m!=null&&p(e,["inlineData"],TN(m));const h=f(n,["text"]);h!=null&&p(e,["text"],h);const _=f(n,["thought"]);_!=null&&p(e,["thought"],_);const T=f(n,["thoughtSignature"]);T!=null&&p(e,["thoughtSignature"],T);const S=f(n,["videoMetadata"]);return S!=null&&p(e,["videoMetadata"],S),e}function nx(n){const e={},t=f(n,["category"]);if(t!=null&&p(e,["category"],t),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=f(n,["threshold"]);return i!=null&&p(e,["threshold"],i),e}function ix(n){const e={},t=f(n,["retrievalConfig"]);t!=null&&p(e,["retrievalConfig"],t);const i=f(n,["functionCallingConfig"]);return i!=null&&p(e,["functionCallingConfig"],FN(i)),e}function rx(n){const e={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=f(n,["computerUse"]);t!=null&&p(e,["computerUse"],t);const i=f(n,["fileSearch"]);i!=null&&p(e,["fileSearch"],i);const o=f(n,["codeExecution"]);if(o!=null&&p(e,["codeExecution"],o),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=f(n,["functionDeclarations"]);if(a!=null){let _=a;Array.isArray(_)&&(_=_.map(T=>T)),p(e,["functionDeclarations"],_)}const u=f(n,["googleMaps"]);u!=null&&p(e,["googleMaps"],HN(u));const d=f(n,["googleSearch"]);d!=null&&p(e,["googleSearch"],KN(d));const m=f(n,["googleSearchRetrieval"]);m!=null&&p(e,["googleSearchRetrieval"],m);const h=f(n,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Rr;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(Rr||(Rr={}));class Ao{constructor(e,t,i,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,i,o)}init(e,t,i){var o,a;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!i||Object.keys(i).length===0?u={config:{}}:typeof i=="object"?u=Object.assign({},i):u=i,u.config&&(u.config.pageToken=t.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(a=(o=u.config)===null||o===void 0?void 0:o.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class sx extends Dr{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Ao(Rr.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)}}createInlinedGenerateContentRequest(e){const t=WE(this.apiClient,e),i=t._url,o=me("{model}:batchGenerateContent",i),d=t.batch.inputConfig.requests,m=d.requests,h=[];for(const _ of m){const T=Object.assign({},_);if(T.systemInstruction){const S=T.systemInstruction;delete T.systemInstruction;const I=T.request;I.systemInstruction=S,T.request=I}h.push(T)}return d.requests=h,delete t.config,delete t._url,delete t._query,{path:o,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const i=t?Object.assign({},t):{},o=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${o}`),i.dest===void 0){const a=this.getGcsUri(e),u=this.getBigqueryUri(e);if(a)a.endsWith(".jsonl")?i.dest=`${a.slice(0,-6)}/dest`:i.dest=`${a}_dest_${o}`;else if(u)i.dest=`${u}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=RN(this.apiClient,e);return d=me("batchPredictionJobs",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>_m(_))}else{const h=WE(this.apiClient,e);return d=me("{model}:batchGenerateContent",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>Mf(_))}}async createEmbeddingsInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=NN(this.apiClient,e);return a=me("{model}:asyncBatchEmbedContent",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>Mf(m))}}async get(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=zN(this.apiClient,e);return d=me("batchPredictionJobs/{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>_m(_))}else{const h=BN(this.apiClient,e);return d=me("batches/{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>Mf(_))}}async cancel(e){var t,i,o,a;let u="",d={};if(this.apiClient.isVertexAI()){const m=SN(this.apiClient,e);u=me("batchPredictionJobs/{name}:cancel",m._url),d=m._query,delete m._url,delete m._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const m=EN(this.apiClient,e);u=me("batches/{name}:cancel",m._url),d=m._query,delete m._url,delete m._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=ZN(e);return d=me("batchPredictionJobs",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=ex(_),S=new JE;return Object.assign(S,T),S})}else{const h=WN(e);return d=me("batches",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=jN(_),S=new JE;return Object.assign(S,T),S})}}async delete(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=MN(this.apiClient,e);return d=me("batchPredictionJobs/{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>PN(_))}else{const h=xN(this.apiClient,e);return d=me("batches/{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>DN(_))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ox(n){const e={},t=f(n,["data"]);if(t!=null&&p(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function ZE(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>Nx(a))),p(e,["parts"],o)}const i=f(n,["role"]);return i!=null&&p(e,["role"],i),e}function ax(n,e){const t={},i=f(n,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);const o=f(n,["expireTime"]);e!==void 0&&o!=null&&p(e,["expireTime"],o);const a=f(n,["displayName"]);e!==void 0&&a!=null&&p(e,["displayName"],a);const u=f(n,["contents"]);if(e!==void 0&&u!=null){let _=Qn(u);Array.isArray(_)&&(_=_.map(T=>ZE(T))),p(e,["contents"],_)}const d=f(n,["systemInstruction"]);e!==void 0&&d!=null&&p(e,["systemInstruction"],ZE(on(d)));const m=f(n,["tools"]);if(e!==void 0&&m!=null){let _=m;Array.isArray(_)&&(_=_.map(T=>Mx(T))),p(e,["tools"],_)}const h=f(n,["toolConfig"]);if(e!==void 0&&h!=null&&p(e,["toolConfig"],xx(h)),f(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function lx(n,e){const t={},i=f(n,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);const o=f(n,["expireTime"]);e!==void 0&&o!=null&&p(e,["expireTime"],o);const a=f(n,["displayName"]);e!==void 0&&a!=null&&p(e,["displayName"],a);const u=f(n,["contents"]);if(e!==void 0&&u!=null){let T=Qn(u);Array.isArray(T)&&(T=T.map(S=>S)),p(e,["contents"],T)}const d=f(n,["systemInstruction"]);e!==void 0&&d!=null&&p(e,["systemInstruction"],on(d));const m=f(n,["tools"]);if(e!==void 0&&m!=null){let T=m;Array.isArray(T)&&(T=T.map(S=>Dx(S))),p(e,["tools"],T)}const h=f(n,["toolConfig"]);e!==void 0&&h!=null&&p(e,["toolConfig"],h);const _=f(n,["kmsKeyName"]);return e!==void 0&&_!=null&&p(e,["encryption_spec","kmsKeyName"],_),t}function ux(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["model"],uA(n,i));const o=f(e,["config"]);return o!=null&&ax(o,t),t}function cx(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["model"],uA(n,i));const o=f(e,["config"]);return o!=null&&lx(o,t),t}function fx(n,e){const t={},i=f(e,["name"]);return i!=null&&p(t,["_url","name"],Pr(n,i)),t}function dx(n,e){const t={},i=f(e,["name"]);return i!=null&&p(t,["_url","name"],Pr(n,i)),t}function hx(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function px(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function mx(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function gx(n){const e={},t=f(n,["id"]);t!=null&&p(e,["id"],t);const i=f(n,["args"]);i!=null&&p(e,["args"],i);const o=f(n,["name"]);if(o!=null&&p(e,["name"],o),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function yx(n){const e={},t=f(n,["allowedFunctionNames"]);t!=null&&p(e,["allowedFunctionNames"],t);const i=f(n,["mode"]);if(i!=null&&p(e,["mode"],i),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function _x(n){const e={},t=f(n,["description"]);t!=null&&p(e,["description"],t);const i=f(n,["name"]);i!=null&&p(e,["name"],i);const o=f(n,["parameters"]);o!=null&&p(e,["parameters"],o);const a=f(n,["parametersJsonSchema"]);a!=null&&p(e,["parametersJsonSchema"],a);const u=f(n,["response"]);u!=null&&p(e,["response"],u);const d=f(n,["responseJsonSchema"]);if(d!=null&&p(e,["responseJsonSchema"],d),f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function vx(n,e){const t={},i=f(e,["name"]);return i!=null&&p(t,["_url","name"],Pr(n,i)),t}function Tx(n,e){const t={},i=f(e,["name"]);return i!=null&&p(t,["_url","name"],Pr(n,i)),t}function Ex(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function Sx(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function Ax(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&p(e,["_query","pageToken"],o),t}function Cx(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&p(e,["_query","pageToken"],o),t}function Ix(n){const e={},t=f(n,["config"]);return t!=null&&Ax(t,e),e}function wx(n){const e={},t=f(n,["config"]);return t!=null&&Cx(t,e),e}function Rx(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const o=f(n,["cachedContents"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["cachedContents"],a)}return e}function bx(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const o=f(n,["cachedContents"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["cachedContents"],a)}return e}function Nx(n){const e={},t=f(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const i=f(n,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const o=f(n,["executableCode"]);o!=null&&p(e,["executableCode"],o);const a=f(n,["fileData"]);a!=null&&p(e,["fileData"],mx(a));const u=f(n,["functionCall"]);u!=null&&p(e,["functionCall"],gx(u));const d=f(n,["functionResponse"]);d!=null&&p(e,["functionResponse"],d);const m=f(n,["inlineData"]);m!=null&&p(e,["inlineData"],ox(m));const h=f(n,["text"]);h!=null&&p(e,["text"],h);const _=f(n,["thought"]);_!=null&&p(e,["thought"],_);const T=f(n,["thoughtSignature"]);T!=null&&p(e,["thoughtSignature"],T);const S=f(n,["videoMetadata"]);return S!=null&&p(e,["videoMetadata"],S),e}function xx(n){const e={},t=f(n,["retrievalConfig"]);t!=null&&p(e,["retrievalConfig"],t);const i=f(n,["functionCallingConfig"]);return i!=null&&p(e,["functionCallingConfig"],yx(i)),e}function Mx(n){const e={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=f(n,["computerUse"]);t!=null&&p(e,["computerUse"],t);const i=f(n,["fileSearch"]);i!=null&&p(e,["fileSearch"],i);const o=f(n,["codeExecution"]);if(o!=null&&p(e,["codeExecution"],o),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=f(n,["functionDeclarations"]);if(a!=null){let _=a;Array.isArray(_)&&(_=_.map(T=>T)),p(e,["functionDeclarations"],_)}const u=f(n,["googleMaps"]);u!=null&&p(e,["googleMaps"],Ex(u));const d=f(n,["googleSearch"]);d!=null&&p(e,["googleSearch"],Sx(d));const m=f(n,["googleSearchRetrieval"]);m!=null&&p(e,["googleSearchRetrieval"],m);const h=f(n,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}function Dx(n){const e={},t=f(n,["retrieval"]);t!=null&&p(e,["retrieval"],t);const i=f(n,["computerUse"]);if(i!=null&&p(e,["computerUse"],i),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=f(n,["codeExecution"]);o!=null&&p(e,["codeExecution"],o);const a=f(n,["enterpriseWebSearch"]);a!=null&&p(e,["enterpriseWebSearch"],a);const u=f(n,["functionDeclarations"]);if(u!=null){let T=u;Array.isArray(T)&&(T=T.map(S=>_x(S))),p(e,["functionDeclarations"],T)}const d=f(n,["googleMaps"]);d!=null&&p(e,["googleMaps"],d);const m=f(n,["googleSearch"]);m!=null&&p(e,["googleSearch"],m);const h=f(n,["googleSearchRetrieval"]);h!=null&&p(e,["googleSearchRetrieval"],h);const _=f(n,["urlContext"]);return _!=null&&p(e,["urlContext"],_),e}function Px(n,e){const t={},i=f(n,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);const o=f(n,["expireTime"]);return e!==void 0&&o!=null&&p(e,["expireTime"],o),t}function kx(n,e){const t={},i=f(n,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);const o=f(n,["expireTime"]);return e!==void 0&&o!=null&&p(e,["expireTime"],o),t}function Vx(n,e){const t={},i=f(e,["name"]);i!=null&&p(t,["_url","name"],Pr(n,i));const o=f(e,["config"]);return o!=null&&Px(o,t),t}function Ux(n,e){const t={},i=f(e,["name"]);i!=null&&p(t,["_url","name"],Pr(n,i));const o=f(e,["config"]);return o!=null&&kx(o,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Lx extends Dr{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Ao(Rr.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(t),t)}async create(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=cx(this.apiClient,e);return d=me("cachedContents",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const h=ux(this.apiClient,e);return d=me("cachedContents",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async get(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=Tx(this.apiClient,e);return d=me("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const h=vx(this.apiClient,e);return d=me("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async delete(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=dx(this.apiClient,e);return d=me("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=px(_),S=new KE;return Object.assign(S,T),S})}else{const h=fx(this.apiClient,e);return d=me("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=hx(_),S=new KE;return Object.assign(S,T),S})}}async update(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=Ux(this.apiClient,e);return d=me("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const h=Vx(this.apiClient,e);return d=me("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async listInternal(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=wx(e);return d=me("cachedContents",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=bx(_),S=new YE;return Object.assign(S,T),S})}else{const h=Ix(e);return d=me("cachedContents",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=Rx(_),S=new YE;return Object.assign(S,T),S})}}}function Yf(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t}function jE(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function be(n){return this instanceof be?(this.v=n,this):new be(n)}function hi(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),o,a=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",u),o[Symbol.asyncIterator]=function(){return this},o;function u(I){return function(L){return Promise.resolve(L).then(I,T)}}function d(I,L){i[I]&&(o[I]=function(F){return new Promise(function(V,K){a.push([I,F,V,K])>1||m(I,F)})},L&&(o[I]=L(o[I])))}function m(I,L){try{h(i[I](L))}catch(F){S(a[0][3],F)}}function h(I){I.value instanceof be?Promise.resolve(I.value.v).then(_,T):S(a[0][2],I)}function _(I){m("next",I)}function T(I){m("throw",I)}function S(I,L){I(L),a.shift(),a.length&&m(a[0][0],a[0][1])}}function pi(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof jE=="function"?jE(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(a){t[a]=n[a]&&function(u){return new Promise(function(d,m){u=n[a](u),o(d,m,u.done,u.value)})}}function o(a,u,d,m){Promise.resolve(m).then(function(h){a({value:h,done:d})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ox(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:SA(t)}function SA(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function Fx(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function e0(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let i=0;for(;i<t;)if(n[i].role==="user")e.push(n[i]),i++;else{const o=[];let a=!0;for(;i<t&&n[i].role==="model";)o.push(n[i]),a&&!SA(n[i])&&(a=!1),i++;a?e.push(...o):e.pop()}return e}class Gx{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new qx(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class qx{constructor(e,t,i,o={},a=[]){this.apiClient=e,this.modelsModule=t,this.model=i,this.config=o,this.history=a,this.sendPromise=Promise.resolve(),Fx(a)}async sendMessage(e){var t;await this.sendPromise;const i=on(e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var a,u,d;const m=await o,h=(u=(a=m.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content,_=m.automaticFunctionCallingHistory,T=this.getHistory(!0).length;let S=[];_!=null&&(S=(d=_.slice(T))!==null&&d!==void 0?d:[]);const I=h?[h]:[];this.recordHistory(i,I,S)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(e){var t;await this.sendPromise;const i=on(e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const a=await o;return this.processStreamResponse(a,i)}getHistory(e=!1){const t=e?e0(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){return hi(this,arguments,function*(){var o,a,u,d,m,h;const _=[];try{for(var T=!0,S=pi(e),I;I=yield be(S.next()),o=I.done,!o;T=!0){d=I.value,T=!1;const L=d;if(Ox(L)){const F=(h=(m=L.candidates)===null||m===void 0?void 0:m[0])===null||h===void 0?void 0:h.content;F!==void 0&&_.push(F)}yield yield be(L)}}catch(L){a={error:L}}finally{try{!T&&!o&&(u=S.return)&&(yield be(u.call(S)))}finally{if(a)throw a.error}}this.recordHistory(t,_)})}recordHistory(e,t,i){let o=[];t.length>0&&t.every(a=>a.role!==void 0)?o=t:o.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...e0(i)):this.history.push(e),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gd extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,gd.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Bx(n){const e={},t=f(n,["file"]);return t!=null&&p(e,["file"],t),e}function zx(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function Hx(n){const e={},t=f(n,["name"]);return t!=null&&p(e,["_url","file"],mA(t)),e}function Kx(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function Yx(n){const e={},t=f(n,["name"]);return t!=null&&p(e,["_url","file"],mA(t)),e}function Jx(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&p(e,["_query","pageToken"],o),t}function $x(n){const e={},t=f(n,["config"]);return t!=null&&Jx(t,e),e}function Qx(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const o=f(n,["files"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["files"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Xx extends Dr{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Ao(Rr.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=$x(e);return a=me("files",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:m.headers},_})),o.then(m=>{const h=Qx(m),_=new eN;return Object.assign(_,h),_})}}async createInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Bx(e);return a=me("upload/v1beta/files",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>{const h=zx(m),_=new tN;return Object.assign(_,h),_})}}async get(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Yx(e);return a=me("files/{file}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>m)}}async delete(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Hx(e);return a=me("files/{file}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:m.headers},_})),o.then(m=>{const h=Kx(m),_=new nN;return Object.assign(_,h),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Df(n){const e={},t=f(n,["data"]);if(t!=null&&p(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function Wx(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>h1(a))),p(e,["parts"],o)}const i=f(n,["role"]);return i!=null&&p(e,["role"],i),e}function Zx(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function jx(n){const e={},t=f(n,["id"]);t!=null&&p(e,["id"],t);const i=f(n,["args"]);i!=null&&p(e,["args"],i);const o=f(n,["name"]);if(o!=null&&p(e,["name"],o),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function e1(n){const e={},t=f(n,["description"]);t!=null&&p(e,["description"],t);const i=f(n,["name"]);i!=null&&p(e,["name"],i);const o=f(n,["parameters"]);o!=null&&p(e,["parameters"],o);const a=f(n,["parametersJsonSchema"]);a!=null&&p(e,["parametersJsonSchema"],a);const u=f(n,["response"]);u!=null&&p(e,["response"],u);const d=f(n,["responseJsonSchema"]);if(d!=null&&p(e,["responseJsonSchema"],d),f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function t1(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&p(e,["modelConfig"],t);const i=f(n,["responseJsonSchema"]);i!=null&&p(e,["responseJsonSchema"],i);const o=f(n,["audioTimestamp"]);o!=null&&p(e,["audioTimestamp"],o);const a=f(n,["candidateCount"]);a!=null&&p(e,["candidateCount"],a);const u=f(n,["enableAffectiveDialog"]);u!=null&&p(e,["enableAffectiveDialog"],u);const d=f(n,["frequencyPenalty"]);d!=null&&p(e,["frequencyPenalty"],d);const m=f(n,["logprobs"]);m!=null&&p(e,["logprobs"],m);const h=f(n,["maxOutputTokens"]);h!=null&&p(e,["maxOutputTokens"],h);const _=f(n,["mediaResolution"]);_!=null&&p(e,["mediaResolution"],_);const T=f(n,["presencePenalty"]);T!=null&&p(e,["presencePenalty"],T);const S=f(n,["responseLogprobs"]);S!=null&&p(e,["responseLogprobs"],S);const I=f(n,["responseMimeType"]);I!=null&&p(e,["responseMimeType"],I);const L=f(n,["responseModalities"]);L!=null&&p(e,["responseModalities"],L);const F=f(n,["responseSchema"]);F!=null&&p(e,["responseSchema"],F);const V=f(n,["routingConfig"]);V!=null&&p(e,["routingConfig"],V);const K=f(n,["seed"]);K!=null&&p(e,["seed"],K);const ne=f(n,["speechConfig"]);ne!=null&&p(e,["speechConfig"],ne);const j=f(n,["stopSequences"]);j!=null&&p(e,["stopSequences"],j);const oe=f(n,["temperature"]);oe!=null&&p(e,["temperature"],oe);const de=f(n,["thinkingConfig"]);de!=null&&p(e,["thinkingConfig"],de);const ue=f(n,["topK"]);ue!=null&&p(e,["topK"],ue);const x=f(n,["topP"]);if(x!=null&&p(e,["topP"],x),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function n1(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function i1(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function r1(n,e){const t={},i=f(n,["generationConfig"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig"],i);const o=f(n,["responseModalities"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig","responseModalities"],o);const a=f(n,["temperature"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","temperature"],a);const u=f(n,["topP"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","topP"],u);const d=f(n,["topK"]);e!==void 0&&d!=null&&p(e,["setup","generationConfig","topK"],d);const m=f(n,["maxOutputTokens"]);e!==void 0&&m!=null&&p(e,["setup","generationConfig","maxOutputTokens"],m);const h=f(n,["mediaResolution"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","mediaResolution"],h);const _=f(n,["seed"]);e!==void 0&&_!=null&&p(e,["setup","generationConfig","seed"],_);const T=f(n,["speechConfig"]);e!==void 0&&T!=null&&p(e,["setup","generationConfig","speechConfig"],ag(T));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&p(e,["setup","generationConfig","thinkingConfig"],S);const I=f(n,["enableAffectiveDialog"]);e!==void 0&&I!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],I);const L=f(n,["systemInstruction"]);e!==void 0&&L!=null&&p(e,["setup","systemInstruction"],Wx(on(L)));const F=f(n,["tools"]);if(e!==void 0&&F!=null){let ue=za(F);Array.isArray(ue)&&(ue=ue.map(x=>m1(Ba(x)))),p(e,["setup","tools"],ue)}const V=f(n,["sessionResumption"]);e!==void 0&&V!=null&&p(e,["setup","sessionResumption"],p1(V));const K=f(n,["inputAudioTranscription"]);e!==void 0&&K!=null&&p(e,["setup","inputAudioTranscription"],K);const ne=f(n,["outputAudioTranscription"]);e!==void 0&&ne!=null&&p(e,["setup","outputAudioTranscription"],ne);const j=f(n,["realtimeInputConfig"]);e!==void 0&&j!=null&&p(e,["setup","realtimeInputConfig"],j);const oe=f(n,["contextWindowCompression"]);e!==void 0&&oe!=null&&p(e,["setup","contextWindowCompression"],oe);const de=f(n,["proactivity"]);if(e!==void 0&&de!=null&&p(e,["setup","proactivity"],de),f(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function s1(n,e){const t={},i=f(n,["generationConfig"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig"],t1(i));const o=f(n,["responseModalities"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig","responseModalities"],o);const a=f(n,["temperature"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","temperature"],a);const u=f(n,["topP"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","topP"],u);const d=f(n,["topK"]);e!==void 0&&d!=null&&p(e,["setup","generationConfig","topK"],d);const m=f(n,["maxOutputTokens"]);e!==void 0&&m!=null&&p(e,["setup","generationConfig","maxOutputTokens"],m);const h=f(n,["mediaResolution"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","mediaResolution"],h);const _=f(n,["seed"]);e!==void 0&&_!=null&&p(e,["setup","generationConfig","seed"],_);const T=f(n,["speechConfig"]);e!==void 0&&T!=null&&p(e,["setup","generationConfig","speechConfig"],ag(T));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&p(e,["setup","generationConfig","thinkingConfig"],S);const I=f(n,["enableAffectiveDialog"]);e!==void 0&&I!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],I);const L=f(n,["systemInstruction"]);e!==void 0&&L!=null&&p(e,["setup","systemInstruction"],on(L));const F=f(n,["tools"]);if(e!==void 0&&F!=null){let x=za(F);Array.isArray(x)&&(x=x.map(R=>g1(Ba(R)))),p(e,["setup","tools"],x)}const V=f(n,["sessionResumption"]);e!==void 0&&V!=null&&p(e,["setup","sessionResumption"],V);const K=f(n,["inputAudioTranscription"]);e!==void 0&&K!=null&&p(e,["setup","inputAudioTranscription"],K);const ne=f(n,["outputAudioTranscription"]);e!==void 0&&ne!=null&&p(e,["setup","outputAudioTranscription"],ne);const j=f(n,["realtimeInputConfig"]);e!==void 0&&j!=null&&p(e,["setup","realtimeInputConfig"],j);const oe=f(n,["contextWindowCompression"]);e!==void 0&&oe!=null&&p(e,["setup","contextWindowCompression"],oe);const de=f(n,["proactivity"]);e!==void 0&&de!=null&&p(e,["setup","proactivity"],de);const ue=f(n,["explicitVadSignal"]);return e!==void 0&&ue!=null&&p(e,["setup","explicitVadSignal"],ue),t}function o1(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["setup","model"],$e(n,i));const o=f(e,["config"]);return o!=null&&p(t,["config"],r1(o,t)),t}function a1(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["setup","model"],$e(n,i));const o=f(e,["config"]);return o!=null&&p(t,["config"],s1(o,t)),t}function l1(n){const e={},t=f(n,["musicGenerationConfig"]);return t!=null&&p(e,["musicGenerationConfig"],t),e}function u1(n){const e={},t=f(n,["weightedPrompts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>o)),p(e,["weightedPrompts"],i)}return e}function c1(n){const e={},t=f(n,["media"]);if(t!=null){let h=cA(t);Array.isArray(h)&&(h=h.map(_=>Df(_))),p(e,["mediaChunks"],h)}const i=f(n,["audio"]);i!=null&&p(e,["audio"],Df(dA(i)));const o=f(n,["audioStreamEnd"]);o!=null&&p(e,["audioStreamEnd"],o);const a=f(n,["video"]);a!=null&&p(e,["video"],Df(fA(a)));const u=f(n,["text"]);u!=null&&p(e,["text"],u);const d=f(n,["activityStart"]);d!=null&&p(e,["activityStart"],d);const m=f(n,["activityEnd"]);return m!=null&&p(e,["activityEnd"],m),e}function f1(n){const e={},t=f(n,["media"]);if(t!=null){let h=cA(t);Array.isArray(h)&&(h=h.map(_=>_)),p(e,["mediaChunks"],h)}const i=f(n,["audio"]);i!=null&&p(e,["audio"],dA(i));const o=f(n,["audioStreamEnd"]);o!=null&&p(e,["audioStreamEnd"],o);const a=f(n,["video"]);a!=null&&p(e,["video"],fA(a));const u=f(n,["text"]);u!=null&&p(e,["text"],u);const d=f(n,["activityStart"]);d!=null&&p(e,["activityStart"],d);const m=f(n,["activityEnd"]);return m!=null&&p(e,["activityEnd"],m),e}function d1(n){const e={},t=f(n,["setupComplete"]);t!=null&&p(e,["setupComplete"],t);const i=f(n,["serverContent"]);i!=null&&p(e,["serverContent"],i);const o=f(n,["toolCall"]);o!=null&&p(e,["toolCall"],o);const a=f(n,["toolCallCancellation"]);a!=null&&p(e,["toolCallCancellation"],a);const u=f(n,["usageMetadata"]);u!=null&&p(e,["usageMetadata"],y1(u));const d=f(n,["goAway"]);d!=null&&p(e,["goAway"],d);const m=f(n,["sessionResumptionUpdate"]);m!=null&&p(e,["sessionResumptionUpdate"],m);const h=f(n,["voiceActivityDetectionSignal"]);return h!=null&&p(e,["voiceActivityDetectionSignal"],h),e}function h1(n){const e={},t=f(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const i=f(n,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const o=f(n,["executableCode"]);o!=null&&p(e,["executableCode"],o);const a=f(n,["fileData"]);a!=null&&p(e,["fileData"],Zx(a));const u=f(n,["functionCall"]);u!=null&&p(e,["functionCall"],jx(u));const d=f(n,["functionResponse"]);d!=null&&p(e,["functionResponse"],d);const m=f(n,["inlineData"]);m!=null&&p(e,["inlineData"],Df(m));const h=f(n,["text"]);h!=null&&p(e,["text"],h);const _=f(n,["thought"]);_!=null&&p(e,["thought"],_);const T=f(n,["thoughtSignature"]);T!=null&&p(e,["thoughtSignature"],T);const S=f(n,["videoMetadata"]);return S!=null&&p(e,["videoMetadata"],S),e}function p1(n){const e={},t=f(n,["handle"]);if(t!=null&&p(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function m1(n){const e={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=f(n,["computerUse"]);t!=null&&p(e,["computerUse"],t);const i=f(n,["fileSearch"]);i!=null&&p(e,["fileSearch"],i);const o=f(n,["codeExecution"]);if(o!=null&&p(e,["codeExecution"],o),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=f(n,["functionDeclarations"]);if(a!=null){let _=a;Array.isArray(_)&&(_=_.map(T=>T)),p(e,["functionDeclarations"],_)}const u=f(n,["googleMaps"]);u!=null&&p(e,["googleMaps"],n1(u));const d=f(n,["googleSearch"]);d!=null&&p(e,["googleSearch"],i1(d));const m=f(n,["googleSearchRetrieval"]);m!=null&&p(e,["googleSearchRetrieval"],m);const h=f(n,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}function g1(n){const e={},t=f(n,["retrieval"]);t!=null&&p(e,["retrieval"],t);const i=f(n,["computerUse"]);if(i!=null&&p(e,["computerUse"],i),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=f(n,["codeExecution"]);o!=null&&p(e,["codeExecution"],o);const a=f(n,["enterpriseWebSearch"]);a!=null&&p(e,["enterpriseWebSearch"],a);const u=f(n,["functionDeclarations"]);if(u!=null){let T=u;Array.isArray(T)&&(T=T.map(S=>e1(S))),p(e,["functionDeclarations"],T)}const d=f(n,["googleMaps"]);d!=null&&p(e,["googleMaps"],d);const m=f(n,["googleSearch"]);m!=null&&p(e,["googleSearch"],m);const h=f(n,["googleSearchRetrieval"]);h!=null&&p(e,["googleSearchRetrieval"],h);const _=f(n,["urlContext"]);return _!=null&&p(e,["urlContext"],_),e}function y1(n){const e={},t=f(n,["promptTokenCount"]);t!=null&&p(e,["promptTokenCount"],t);const i=f(n,["cachedContentTokenCount"]);i!=null&&p(e,["cachedContentTokenCount"],i);const o=f(n,["candidatesTokenCount"]);o!=null&&p(e,["responseTokenCount"],o);const a=f(n,["toolUsePromptTokenCount"]);a!=null&&p(e,["toolUsePromptTokenCount"],a);const u=f(n,["thoughtsTokenCount"]);u!=null&&p(e,["thoughtsTokenCount"],u);const d=f(n,["totalTokenCount"]);d!=null&&p(e,["totalTokenCount"],d);const m=f(n,["promptTokensDetails"]);if(m!=null){let I=m;Array.isArray(I)&&(I=I.map(L=>L)),p(e,["promptTokensDetails"],I)}const h=f(n,["cacheTokensDetails"]);if(h!=null){let I=h;Array.isArray(I)&&(I=I.map(L=>L)),p(e,["cacheTokensDetails"],I)}const _=f(n,["candidatesTokensDetails"]);if(_!=null){let I=_;Array.isArray(I)&&(I=I.map(L=>L)),p(e,["responseTokensDetails"],I)}const T=f(n,["toolUsePromptTokensDetails"]);if(T!=null){let I=T;Array.isArray(I)&&(I=I.map(L=>L)),p(e,["toolUsePromptTokensDetails"],I)}const S=f(n,["trafficType"]);return S!=null&&p(e,["trafficType"],S),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _1(n){const e={},t=f(n,["data"]);if(t!=null&&p(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function v1(n){const e={},t=f(n,["content"]);t!=null&&p(e,["content"],t);const i=f(n,["citationMetadata"]);i!=null&&p(e,["citationMetadata"],T1(i));const o=f(n,["tokenCount"]);o!=null&&p(e,["tokenCount"],o);const a=f(n,["finishReason"]);a!=null&&p(e,["finishReason"],a);const u=f(n,["avgLogprobs"]);u!=null&&p(e,["avgLogprobs"],u);const d=f(n,["groundingMetadata"]);d!=null&&p(e,["groundingMetadata"],d);const m=f(n,["index"]);m!=null&&p(e,["index"],m);const h=f(n,["logprobsResult"]);h!=null&&p(e,["logprobsResult"],h);const _=f(n,["safetyRatings"]);if(_!=null){let S=_;Array.isArray(S)&&(S=S.map(I=>I)),p(e,["safetyRatings"],S)}const T=f(n,["urlContextMetadata"]);return T!=null&&p(e,["urlContextMetadata"],T),e}function T1(n){const e={},t=f(n,["citationSources"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>o)),p(e,["citations"],i)}return e}function E1(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["_url","model"],$e(n,i));const o=f(e,["contents"]);if(o!=null){let a=Qn(o);Array.isArray(a)&&(a=a.map(u=>u)),p(t,["contents"],a)}return t}function S1(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["tokensInfo"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),p(e,["tokensInfo"],o)}return e}function A1(n){const e={},t=f(n,["values"]);t!=null&&p(e,["values"],t);const i=f(n,["statistics"]);return i!=null&&p(e,["statistics"],C1(i)),e}function C1(n){const e={},t=f(n,["truncated"]);t!=null&&p(e,["truncated"],t);const i=f(n,["token_count"]);return i!=null&&p(e,["tokenCount"],i),e}function yd(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>PM(a))),p(e,["parts"],o)}const i=f(n,["role"]);return i!=null&&p(e,["role"],i),e}function I1(n){const e={},t=f(n,["controlType"]);t!=null&&p(e,["controlType"],t);const i=f(n,["enableControlImageComputation"]);return i!=null&&p(e,["computeControl"],i),e}function w1(n){const e={};if(f(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function R1(n,e){const t={},i=f(n,["systemInstruction"]);e!==void 0&&i!=null&&p(e,["systemInstruction"],on(i));const o=f(n,["tools"]);if(e!==void 0&&o!=null){let u=o;Array.isArray(u)&&(u=u.map(d=>wA(d))),p(e,["tools"],u)}const a=f(n,["generationConfig"]);return e!==void 0&&a!=null&&p(e,["generationConfig"],_M(a)),t}function b1(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["_url","model"],$e(n,i));const o=f(e,["contents"]);if(o!=null){let u=Qn(o);Array.isArray(u)&&(u=u.map(d=>yd(d))),p(t,["contents"],u)}const a=f(e,["config"]);return a!=null&&w1(a),t}function N1(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["_url","model"],$e(n,i));const o=f(e,["contents"]);if(o!=null){let u=Qn(o);Array.isArray(u)&&(u=u.map(d=>d)),p(t,["contents"],u)}const a=f(e,["config"]);return a!=null&&R1(a,t),t}function x1(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["totalTokens"]);i!=null&&p(e,["totalTokens"],i);const o=f(n,["cachedContentTokenCount"]);return o!=null&&p(e,["cachedContentTokenCount"],o),e}function M1(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["totalTokens"]);return i!=null&&p(e,["totalTokens"],i),e}function D1(n,e){const t={},i=f(e,["model"]);return i!=null&&p(t,["_url","name"],$e(n,i)),t}function P1(n,e){const t={},i=f(e,["model"]);return i!=null&&p(t,["_url","name"],$e(n,i)),t}function k1(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function V1(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function U1(n,e){const t={},i=f(n,["outputGcsUri"]);e!==void 0&&i!=null&&p(e,["parameters","storageUri"],i);const o=f(n,["negativePrompt"]);e!==void 0&&o!=null&&p(e,["parameters","negativePrompt"],o);const a=f(n,["numberOfImages"]);e!==void 0&&a!=null&&p(e,["parameters","sampleCount"],a);const u=f(n,["aspectRatio"]);e!==void 0&&u!=null&&p(e,["parameters","aspectRatio"],u);const d=f(n,["guidanceScale"]);e!==void 0&&d!=null&&p(e,["parameters","guidanceScale"],d);const m=f(n,["seed"]);e!==void 0&&m!=null&&p(e,["parameters","seed"],m);const h=f(n,["safetyFilterLevel"]);e!==void 0&&h!=null&&p(e,["parameters","safetySetting"],h);const _=f(n,["personGeneration"]);e!==void 0&&_!=null&&p(e,["parameters","personGeneration"],_);const T=f(n,["includeSafetyAttributes"]);e!==void 0&&T!=null&&p(e,["parameters","includeSafetyAttributes"],T);const S=f(n,["includeRaiReason"]);e!==void 0&&S!=null&&p(e,["parameters","includeRaiReason"],S);const I=f(n,["language"]);e!==void 0&&I!=null&&p(e,["parameters","language"],I);const L=f(n,["outputMimeType"]);e!==void 0&&L!=null&&p(e,["parameters","outputOptions","mimeType"],L);const F=f(n,["outputCompressionQuality"]);e!==void 0&&F!=null&&p(e,["parameters","outputOptions","compressionQuality"],F);const V=f(n,["addWatermark"]);e!==void 0&&V!=null&&p(e,["parameters","addWatermark"],V);const K=f(n,["labels"]);e!==void 0&&K!=null&&p(e,["labels"],K);const ne=f(n,["editMode"]);e!==void 0&&ne!=null&&p(e,["parameters","editMode"],ne);const j=f(n,["baseSteps"]);return e!==void 0&&j!=null&&p(e,["parameters","editConfig","baseSteps"],j),t}function L1(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["_url","model"],$e(n,i));const o=f(e,["prompt"]);o!=null&&p(t,["instances[0]","prompt"],o);const a=f(e,["referenceImages"]);if(a!=null){let d=a;Array.isArray(d)&&(d=d.map(m=>FM(m))),p(t,["instances[0]","referenceImages"],d)}const u=f(e,["config"]);return u!=null&&U1(u,t),t}function O1(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>_d(a))),p(e,["generatedImages"],o)}return e}function F1(n,e){const t={},i=f(n,["taskType"]);e!==void 0&&i!=null&&p(e,["requests[]","taskType"],i);const o=f(n,["title"]);e!==void 0&&o!=null&&p(e,["requests[]","title"],o);const a=f(n,["outputDimensionality"]);if(e!==void 0&&a!=null&&p(e,["requests[]","outputDimensionality"],a),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function G1(n,e){const t={},i=f(n,["taskType"]);e!==void 0&&i!=null&&p(e,["instances[]","task_type"],i);const o=f(n,["title"]);e!==void 0&&o!=null&&p(e,["instances[]","title"],o);const a=f(n,["outputDimensionality"]);e!==void 0&&a!=null&&p(e,["parameters","outputDimensionality"],a);const u=f(n,["mimeType"]);e!==void 0&&u!=null&&p(e,["instances[]","mimeType"],u);const d=f(n,["autoTruncate"]);return e!==void 0&&d!=null&&p(e,["parameters","autoTruncate"],d),t}function q1(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["_url","model"],$e(n,i));const o=f(e,["contents"]);if(o!=null){let d=rg(n,o);Array.isArray(d)&&(d=d.map(m=>m)),p(t,["requests[]","content"],d)}const a=f(e,["config"]);a!=null&&F1(a,t);const u=f(e,["model"]);return u!==void 0&&p(t,["requests[]","model"],$e(n,u)),t}function B1(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["_url","model"],$e(n,i));const o=f(e,["contents"]);if(o!=null){let u=rg(n,o);Array.isArray(u)&&(u=u.map(d=>d)),p(t,["instances[]","content"],u)}const a=f(e,["config"]);return a!=null&&G1(a,t),t}function z1(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["embeddings"],a)}const o=f(n,["metadata"]);return o!=null&&p(e,["metadata"],o),e}function H1(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["predictions[]","embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>A1(u))),p(e,["embeddings"],a)}const o=f(n,["metadata"]);return o!=null&&p(e,["metadata"],o),e}function K1(n){const e={},t=f(n,["endpoint"]);t!=null&&p(e,["name"],t);const i=f(n,["deployedModelId"]);return i!=null&&p(e,["deployedModelId"],i),e}function Y1(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function J1(n){const e={},t=f(n,["id"]);t!=null&&p(e,["id"],t);const i=f(n,["args"]);i!=null&&p(e,["args"],i);const o=f(n,["name"]);if(o!=null&&p(e,["name"],o),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function $1(n){const e={},t=f(n,["allowedFunctionNames"]);t!=null&&p(e,["allowedFunctionNames"],t);const i=f(n,["mode"]);if(i!=null&&p(e,["mode"],i),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Q1(n){const e={},t=f(n,["description"]);t!=null&&p(e,["description"],t);const i=f(n,["name"]);i!=null&&p(e,["name"],i);const o=f(n,["parameters"]);o!=null&&p(e,["parameters"],o);const a=f(n,["parametersJsonSchema"]);a!=null&&p(e,["parametersJsonSchema"],a);const u=f(n,["response"]);u!=null&&p(e,["response"],u);const d=f(n,["responseJsonSchema"]);if(d!=null&&p(e,["responseJsonSchema"],d),f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function X1(n,e,t){const i={},o=f(e,["systemInstruction"]);t!==void 0&&o!=null&&p(t,["systemInstruction"],yd(on(o)));const a=f(e,["temperature"]);a!=null&&p(i,["temperature"],a);const u=f(e,["topP"]);u!=null&&p(i,["topP"],u);const d=f(e,["topK"]);d!=null&&p(i,["topK"],d);const m=f(e,["candidateCount"]);m!=null&&p(i,["candidateCount"],m);const h=f(e,["maxOutputTokens"]);h!=null&&p(i,["maxOutputTokens"],h);const _=f(e,["stopSequences"]);_!=null&&p(i,["stopSequences"],_);const T=f(e,["responseLogprobs"]);T!=null&&p(i,["responseLogprobs"],T);const S=f(e,["logprobs"]);S!=null&&p(i,["logprobs"],S);const I=f(e,["presencePenalty"]);I!=null&&p(i,["presencePenalty"],I);const L=f(e,["frequencyPenalty"]);L!=null&&p(i,["frequencyPenalty"],L);const F=f(e,["seed"]);F!=null&&p(i,["seed"],F);const V=f(e,["responseMimeType"]);V!=null&&p(i,["responseMimeType"],V);const K=f(e,["responseSchema"]);K!=null&&p(i,["responseSchema"],sg(K));const ne=f(e,["responseJsonSchema"]);if(ne!=null&&p(i,["responseJsonSchema"],ne),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const j=f(e,["safetySettings"]);if(t!==void 0&&j!=null){let M=j;Array.isArray(M)&&(M=M.map(ke=>GM(ke))),p(t,["safetySettings"],M)}const oe=f(e,["tools"]);if(t!==void 0&&oe!=null){let M=za(oe);Array.isArray(M)&&(M=M.map(ke=>JM(Ba(ke)))),p(t,["tools"],M)}const de=f(e,["toolConfig"]);if(t!==void 0&&de!=null&&p(t,["toolConfig"],YM(de)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ue=f(e,["cachedContent"]);t!==void 0&&ue!=null&&p(t,["cachedContent"],Pr(n,ue));const x=f(e,["responseModalities"]);x!=null&&p(i,["responseModalities"],x);const R=f(e,["mediaResolution"]);R!=null&&p(i,["mediaResolution"],R);const N=f(e,["speechConfig"]);if(N!=null&&p(i,["speechConfig"],og(N)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const D=f(e,["thinkingConfig"]);D!=null&&p(i,["thinkingConfig"],D);const k=f(e,["imageConfig"]);k!=null&&p(i,["imageConfig"],AM(k));const q=f(e,["enableEnhancedCivicAnswers"]);return q!=null&&p(i,["enableEnhancedCivicAnswers"],q),i}function W1(n,e,t){const i={},o=f(e,["systemInstruction"]);t!==void 0&&o!=null&&p(t,["systemInstruction"],on(o));const a=f(e,["temperature"]);a!=null&&p(i,["temperature"],a);const u=f(e,["topP"]);u!=null&&p(i,["topP"],u);const d=f(e,["topK"]);d!=null&&p(i,["topK"],d);const m=f(e,["candidateCount"]);m!=null&&p(i,["candidateCount"],m);const h=f(e,["maxOutputTokens"]);h!=null&&p(i,["maxOutputTokens"],h);const _=f(e,["stopSequences"]);_!=null&&p(i,["stopSequences"],_);const T=f(e,["responseLogprobs"]);T!=null&&p(i,["responseLogprobs"],T);const S=f(e,["logprobs"]);S!=null&&p(i,["logprobs"],S);const I=f(e,["presencePenalty"]);I!=null&&p(i,["presencePenalty"],I);const L=f(e,["frequencyPenalty"]);L!=null&&p(i,["frequencyPenalty"],L);const F=f(e,["seed"]);F!=null&&p(i,["seed"],F);const V=f(e,["responseMimeType"]);V!=null&&p(i,["responseMimeType"],V);const K=f(e,["responseSchema"]);K!=null&&p(i,["responseSchema"],sg(K));const ne=f(e,["responseJsonSchema"]);ne!=null&&p(i,["responseJsonSchema"],ne);const j=f(e,["routingConfig"]);j!=null&&p(i,["routingConfig"],j);const oe=f(e,["modelSelectionConfig"]);oe!=null&&p(i,["modelConfig"],oe);const de=f(e,["safetySettings"]);if(t!==void 0&&de!=null){let Q=de;Array.isArray(Q)&&(Q=Q.map(ee=>ee)),p(t,["safetySettings"],Q)}const ue=f(e,["tools"]);if(t!==void 0&&ue!=null){let Q=za(ue);Array.isArray(Q)&&(Q=Q.map(ee=>wA(Ba(ee)))),p(t,["tools"],Q)}const x=f(e,["toolConfig"]);t!==void 0&&x!=null&&p(t,["toolConfig"],x);const R=f(e,["labels"]);t!==void 0&&R!=null&&p(t,["labels"],R);const N=f(e,["cachedContent"]);t!==void 0&&N!=null&&p(t,["cachedContent"],Pr(n,N));const D=f(e,["responseModalities"]);D!=null&&p(i,["responseModalities"],D);const k=f(e,["mediaResolution"]);k!=null&&p(i,["mediaResolution"],k);const q=f(e,["speechConfig"]);q!=null&&p(i,["speechConfig"],og(q));const M=f(e,["audioTimestamp"]);M!=null&&p(i,["audioTimestamp"],M);const ke=f(e,["thinkingConfig"]);ke!=null&&p(i,["thinkingConfig"],ke);const lt=f(e,["imageConfig"]);if(lt!=null&&p(i,["imageConfig"],CM(lt)),f(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return i}function t0(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["_url","model"],$e(n,i));const o=f(e,["contents"]);if(o!=null){let u=Qn(o);Array.isArray(u)&&(u=u.map(d=>yd(d))),p(t,["contents"],u)}const a=f(e,["config"]);return a!=null&&p(t,["generationConfig"],X1(n,a,t)),t}function n0(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["_url","model"],$e(n,i));const o=f(e,["contents"]);if(o!=null){let u=Qn(o);Array.isArray(u)&&(u=u.map(d=>d)),p(t,["contents"],u)}const a=f(e,["config"]);return a!=null&&p(t,["generationConfig"],W1(n,a,t)),t}function i0(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["candidates"]);if(i!=null){let m=i;Array.isArray(m)&&(m=m.map(h=>v1(h))),p(e,["candidates"],m)}const o=f(n,["modelVersion"]);o!=null&&p(e,["modelVersion"],o);const a=f(n,["promptFeedback"]);a!=null&&p(e,["promptFeedback"],a);const u=f(n,["responseId"]);u!=null&&p(e,["responseId"],u);const d=f(n,["usageMetadata"]);return d!=null&&p(e,["usageMetadata"],d),e}function r0(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["candidates"]);if(i!=null){let h=i;Array.isArray(h)&&(h=h.map(_=>_)),p(e,["candidates"],h)}const o=f(n,["createTime"]);o!=null&&p(e,["createTime"],o);const a=f(n,["modelVersion"]);a!=null&&p(e,["modelVersion"],a);const u=f(n,["promptFeedback"]);u!=null&&p(e,["promptFeedback"],u);const d=f(n,["responseId"]);d!=null&&p(e,["responseId"],d);const m=f(n,["usageMetadata"]);return m!=null&&p(e,["usageMetadata"],m),e}function Z1(n,e){const t={};if(f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=f(n,["numberOfImages"]);e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i);const o=f(n,["aspectRatio"]);e!==void 0&&o!=null&&p(e,["parameters","aspectRatio"],o);const a=f(n,["guidanceScale"]);if(e!==void 0&&a!=null&&p(e,["parameters","guidanceScale"],a),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=f(n,["safetyFilterLevel"]);e!==void 0&&u!=null&&p(e,["parameters","safetySetting"],u);const d=f(n,["personGeneration"]);e!==void 0&&d!=null&&p(e,["parameters","personGeneration"],d);const m=f(n,["includeSafetyAttributes"]);e!==void 0&&m!=null&&p(e,["parameters","includeSafetyAttributes"],m);const h=f(n,["includeRaiReason"]);e!==void 0&&h!=null&&p(e,["parameters","includeRaiReason"],h);const _=f(n,["language"]);e!==void 0&&_!=null&&p(e,["parameters","language"],_);const T=f(n,["outputMimeType"]);e!==void 0&&T!=null&&p(e,["parameters","outputOptions","mimeType"],T);const S=f(n,["outputCompressionQuality"]);if(e!==void 0&&S!=null&&p(e,["parameters","outputOptions","compressionQuality"],S),f(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const I=f(n,["imageSize"]);if(e!==void 0&&I!=null&&p(e,["parameters","sampleImageSize"],I),f(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function j1(n,e){const t={},i=f(n,["outputGcsUri"]);e!==void 0&&i!=null&&p(e,["parameters","storageUri"],i);const o=f(n,["negativePrompt"]);e!==void 0&&o!=null&&p(e,["parameters","negativePrompt"],o);const a=f(n,["numberOfImages"]);e!==void 0&&a!=null&&p(e,["parameters","sampleCount"],a);const u=f(n,["aspectRatio"]);e!==void 0&&u!=null&&p(e,["parameters","aspectRatio"],u);const d=f(n,["guidanceScale"]);e!==void 0&&d!=null&&p(e,["parameters","guidanceScale"],d);const m=f(n,["seed"]);e!==void 0&&m!=null&&p(e,["parameters","seed"],m);const h=f(n,["safetyFilterLevel"]);e!==void 0&&h!=null&&p(e,["parameters","safetySetting"],h);const _=f(n,["personGeneration"]);e!==void 0&&_!=null&&p(e,["parameters","personGeneration"],_);const T=f(n,["includeSafetyAttributes"]);e!==void 0&&T!=null&&p(e,["parameters","includeSafetyAttributes"],T);const S=f(n,["includeRaiReason"]);e!==void 0&&S!=null&&p(e,["parameters","includeRaiReason"],S);const I=f(n,["language"]);e!==void 0&&I!=null&&p(e,["parameters","language"],I);const L=f(n,["outputMimeType"]);e!==void 0&&L!=null&&p(e,["parameters","outputOptions","mimeType"],L);const F=f(n,["outputCompressionQuality"]);e!==void 0&&F!=null&&p(e,["parameters","outputOptions","compressionQuality"],F);const V=f(n,["addWatermark"]);e!==void 0&&V!=null&&p(e,["parameters","addWatermark"],V);const K=f(n,["labels"]);e!==void 0&&K!=null&&p(e,["labels"],K);const ne=f(n,["imageSize"]);e!==void 0&&ne!=null&&p(e,["parameters","sampleImageSize"],ne);const j=f(n,["enhancePrompt"]);return e!==void 0&&j!=null&&p(e,["parameters","enhancePrompt"],j),t}function eM(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["_url","model"],$e(n,i));const o=f(e,["prompt"]);o!=null&&p(t,["instances[0]","prompt"],o);const a=f(e,["config"]);return a!=null&&Z1(a,t),t}function tM(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["_url","model"],$e(n,i));const o=f(e,["prompt"]);o!=null&&p(t,["instances[0]","prompt"],o);const a=f(e,["config"]);return a!=null&&j1(a,t),t}function nM(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>pM(u))),p(e,["generatedImages"],a)}const o=f(n,["positivePromptSafetyAttributes"]);return o!=null&&p(e,["positivePromptSafetyAttributes"],CA(o)),e}function iM(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>_d(u))),p(e,["generatedImages"],a)}const o=f(n,["positivePromptSafetyAttributes"]);return o!=null&&p(e,["positivePromptSafetyAttributes"],IA(o)),e}function rM(n,e){const t={},i=f(n,["numberOfVideos"]);if(e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i),f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=f(n,["durationSeconds"]);if(e!==void 0&&o!=null&&p(e,["parameters","durationSeconds"],o),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=f(n,["aspectRatio"]);e!==void 0&&a!=null&&p(e,["parameters","aspectRatio"],a);const u=f(n,["resolution"]);e!==void 0&&u!=null&&p(e,["parameters","resolution"],u);const d=f(n,["personGeneration"]);if(e!==void 0&&d!=null&&p(e,["parameters","personGeneration"],d),f(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const m=f(n,["negativePrompt"]);e!==void 0&&m!=null&&p(e,["parameters","negativePrompt"],m);const h=f(n,["enhancePrompt"]);if(e!==void 0&&h!=null&&p(e,["parameters","enhancePrompt"],h),f(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const _=f(n,["lastFrame"]);e!==void 0&&_!=null&&p(e,["instances[0]","lastFrame"],vd(_));const T=f(n,["referenceImages"]);if(e!==void 0&&T!=null){let S=T;Array.isArray(S)&&(S=S.map(I=>oD(I))),p(e,["instances[0]","referenceImages"],S)}if(f(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(f(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function sM(n,e){const t={},i=f(n,["numberOfVideos"]);e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i);const o=f(n,["outputGcsUri"]);e!==void 0&&o!=null&&p(e,["parameters","storageUri"],o);const a=f(n,["fps"]);e!==void 0&&a!=null&&p(e,["parameters","fps"],a);const u=f(n,["durationSeconds"]);e!==void 0&&u!=null&&p(e,["parameters","durationSeconds"],u);const d=f(n,["seed"]);e!==void 0&&d!=null&&p(e,["parameters","seed"],d);const m=f(n,["aspectRatio"]);e!==void 0&&m!=null&&p(e,["parameters","aspectRatio"],m);const h=f(n,["resolution"]);e!==void 0&&h!=null&&p(e,["parameters","resolution"],h);const _=f(n,["personGeneration"]);e!==void 0&&_!=null&&p(e,["parameters","personGeneration"],_);const T=f(n,["pubsubTopic"]);e!==void 0&&T!=null&&p(e,["parameters","pubsubTopic"],T);const S=f(n,["negativePrompt"]);e!==void 0&&S!=null&&p(e,["parameters","negativePrompt"],S);const I=f(n,["enhancePrompt"]);e!==void 0&&I!=null&&p(e,["parameters","enhancePrompt"],I);const L=f(n,["generateAudio"]);e!==void 0&&L!=null&&p(e,["parameters","generateAudio"],L);const F=f(n,["lastFrame"]);e!==void 0&&F!=null&&p(e,["instances[0]","lastFrame"],_i(F));const V=f(n,["referenceImages"]);if(e!==void 0&&V!=null){let j=V;Array.isArray(j)&&(j=j.map(oe=>aD(oe))),p(e,["instances[0]","referenceImages"],j)}const K=f(n,["mask"]);e!==void 0&&K!=null&&p(e,["instances[0]","mask"],sD(K));const ne=f(n,["compressionQuality"]);return e!==void 0&&ne!=null&&p(e,["parameters","compressionQuality"],ne),t}function oM(n){const e={},t=f(n,["name"]);t!=null&&p(e,["name"],t);const i=f(n,["metadata"]);i!=null&&p(e,["metadata"],i);const o=f(n,["done"]);o!=null&&p(e,["done"],o);const a=f(n,["error"]);a!=null&&p(e,["error"],a);const u=f(n,["response","generateVideoResponse"]);return u!=null&&p(e,["response"],cM(u)),e}function aM(n){const e={},t=f(n,["name"]);t!=null&&p(e,["name"],t);const i=f(n,["metadata"]);i!=null&&p(e,["metadata"],i);const o=f(n,["done"]);o!=null&&p(e,["done"],o);const a=f(n,["error"]);a!=null&&p(e,["error"],a);const u=f(n,["response"]);return u!=null&&p(e,["response"],fM(u)),e}function lM(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["_url","model"],$e(n,i));const o=f(e,["prompt"]);o!=null&&p(t,["instances[0]","prompt"],o);const a=f(e,["image"]);a!=null&&p(t,["instances[0]","image"],vd(a));const u=f(e,["video"]);u!=null&&p(t,["instances[0]","video"],RA(u));const d=f(e,["source"]);d!=null&&dM(d,t);const m=f(e,["config"]);return m!=null&&rM(m,t),t}function uM(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["_url","model"],$e(n,i));const o=f(e,["prompt"]);o!=null&&p(t,["instances[0]","prompt"],o);const a=f(e,["image"]);a!=null&&p(t,["instances[0]","image"],_i(a));const u=f(e,["video"]);u!=null&&p(t,["instances[0]","video"],bA(u));const d=f(e,["source"]);d!=null&&hM(d,t);const m=f(e,["config"]);return m!=null&&sM(m,t),t}function cM(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(u=>gM(u))),p(e,["generatedVideos"],a)}const i=f(n,["raiMediaFilteredCount"]);i!=null&&p(e,["raiMediaFilteredCount"],i);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&p(e,["raiMediaFilteredReasons"],o),e}function fM(n){const e={},t=f(n,["videos"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(u=>yM(u))),p(e,["generatedVideos"],a)}const i=f(n,["raiMediaFilteredCount"]);i!=null&&p(e,["raiMediaFilteredCount"],i);const o=f(n,["raiMediaFilteredReasons"]);return o!=null&&p(e,["raiMediaFilteredReasons"],o),e}function dM(n,e){const t={},i=f(n,["prompt"]);e!==void 0&&i!=null&&p(e,["instances[0]","prompt"],i);const o=f(n,["image"]);e!==void 0&&o!=null&&p(e,["instances[0]","image"],vd(o));const a=f(n,["video"]);return e!==void 0&&a!=null&&p(e,["instances[0]","video"],RA(a)),t}function hM(n,e){const t={},i=f(n,["prompt"]);e!==void 0&&i!=null&&p(e,["instances[0]","prompt"],i);const o=f(n,["image"]);e!==void 0&&o!=null&&p(e,["instances[0]","image"],_i(o));const a=f(n,["video"]);return e!==void 0&&a!=null&&p(e,["instances[0]","video"],bA(a)),t}function pM(n){const e={},t=f(n,["_self"]);t!=null&&p(e,["image"],IM(t));const i=f(n,["raiFilteredReason"]);i!=null&&p(e,["raiFilteredReason"],i);const o=f(n,["_self"]);return o!=null&&p(e,["safetyAttributes"],CA(o)),e}function _d(n){const e={},t=f(n,["_self"]);t!=null&&p(e,["image"],AA(t));const i=f(n,["raiFilteredReason"]);i!=null&&p(e,["raiFilteredReason"],i);const o=f(n,["_self"]);o!=null&&p(e,["safetyAttributes"],IA(o));const a=f(n,["prompt"]);return a!=null&&p(e,["enhancedPrompt"],a),e}function mM(n){const e={},t=f(n,["_self"]);t!=null&&p(e,["mask"],AA(t));const i=f(n,["labels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),p(e,["labels"],o)}return e}function gM(n){const e={},t=f(n,["video"]);return t!=null&&p(e,["video"],iD(t)),e}function yM(n){const e={},t=f(n,["_self"]);return t!=null&&p(e,["video"],rD(t)),e}function _M(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&p(e,["modelConfig"],t);const i=f(n,["responseJsonSchema"]);i!=null&&p(e,["responseJsonSchema"],i);const o=f(n,["audioTimestamp"]);o!=null&&p(e,["audioTimestamp"],o);const a=f(n,["candidateCount"]);a!=null&&p(e,["candidateCount"],a);const u=f(n,["enableAffectiveDialog"]);u!=null&&p(e,["enableAffectiveDialog"],u);const d=f(n,["frequencyPenalty"]);d!=null&&p(e,["frequencyPenalty"],d);const m=f(n,["logprobs"]);m!=null&&p(e,["logprobs"],m);const h=f(n,["maxOutputTokens"]);h!=null&&p(e,["maxOutputTokens"],h);const _=f(n,["mediaResolution"]);_!=null&&p(e,["mediaResolution"],_);const T=f(n,["presencePenalty"]);T!=null&&p(e,["presencePenalty"],T);const S=f(n,["responseLogprobs"]);S!=null&&p(e,["responseLogprobs"],S);const I=f(n,["responseMimeType"]);I!=null&&p(e,["responseMimeType"],I);const L=f(n,["responseModalities"]);L!=null&&p(e,["responseModalities"],L);const F=f(n,["responseSchema"]);F!=null&&p(e,["responseSchema"],F);const V=f(n,["routingConfig"]);V!=null&&p(e,["routingConfig"],V);const K=f(n,["seed"]);K!=null&&p(e,["seed"],K);const ne=f(n,["speechConfig"]);ne!=null&&p(e,["speechConfig"],ne);const j=f(n,["stopSequences"]);j!=null&&p(e,["stopSequences"],j);const oe=f(n,["temperature"]);oe!=null&&p(e,["temperature"],oe);const de=f(n,["thinkingConfig"]);de!=null&&p(e,["thinkingConfig"],de);const ue=f(n,["topK"]);ue!=null&&p(e,["topK"],ue);const x=f(n,["topP"]);if(x!=null&&p(e,["topP"],x),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function vM(n,e){const t={},i=f(e,["model"]);return i!=null&&p(t,["_url","name"],$e(n,i)),t}function TM(n,e){const t={},i=f(e,["model"]);return i!=null&&p(t,["_url","name"],$e(n,i)),t}function EM(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function SM(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function AM(n){const e={},t=f(n,["aspectRatio"]);t!=null&&p(e,["aspectRatio"],t);const i=f(n,["imageSize"]);if(i!=null&&p(e,["imageSize"],i),f(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(f(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function CM(n){const e={},t=f(n,["aspectRatio"]);t!=null&&p(e,["aspectRatio"],t);const i=f(n,["imageSize"]);i!=null&&p(e,["imageSize"],i);const o=f(n,["personGeneration"]);o!=null&&p(e,["personGeneration"],o);const a=f(n,["outputMimeType"]);a!=null&&p(e,["imageOutputOptions","mimeType"],a);const u=f(n,["outputCompressionQuality"]);return u!=null&&p(e,["imageOutputOptions","compressionQuality"],u),e}function IM(n){const e={},t=f(n,["bytesBase64Encoded"]);t!=null&&p(e,["imageBytes"],xs(t));const i=f(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function AA(n){const e={},t=f(n,["gcsUri"]);t!=null&&p(e,["gcsUri"],t);const i=f(n,["bytesBase64Encoded"]);i!=null&&p(e,["imageBytes"],xs(i));const o=f(n,["mimeType"]);return o!=null&&p(e,["mimeType"],o),e}function vd(n){const e={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=f(n,["imageBytes"]);t!=null&&p(e,["bytesBase64Encoded"],xs(t));const i=f(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function _i(n){const e={},t=f(n,["gcsUri"]);t!=null&&p(e,["gcsUri"],t);const i=f(n,["imageBytes"]);i!=null&&p(e,["bytesBase64Encoded"],xs(i));const o=f(n,["mimeType"]);return o!=null&&p(e,["mimeType"],o),e}function wM(n,e,t){const i={},o=f(e,["pageSize"]);t!==void 0&&o!=null&&p(t,["_query","pageSize"],o);const a=f(e,["pageToken"]);t!==void 0&&a!=null&&p(t,["_query","pageToken"],a);const u=f(e,["filter"]);t!==void 0&&u!=null&&p(t,["_query","filter"],u);const d=f(e,["queryBase"]);return t!==void 0&&d!=null&&p(t,["_url","models_url"],gA(n,d)),i}function RM(n,e,t){const i={},o=f(e,["pageSize"]);t!==void 0&&o!=null&&p(t,["_query","pageSize"],o);const a=f(e,["pageToken"]);t!==void 0&&a!=null&&p(t,["_query","pageToken"],a);const u=f(e,["filter"]);t!==void 0&&u!=null&&p(t,["_query","filter"],u);const d=f(e,["queryBase"]);return t!==void 0&&d!=null&&p(t,["_url","models_url"],gA(n,d)),i}function bM(n,e){const t={},i=f(e,["config"]);return i!=null&&wM(n,i,t),t}function NM(n,e){const t={},i=f(e,["config"]);return i!=null&&RM(n,i,t),t}function xM(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const o=f(n,["_self"]);if(o!=null){let a=yA(o);Array.isArray(a)&&(a=a.map(u=>vm(u))),p(e,["models"],a)}return e}function MM(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const o=f(n,["_self"]);if(o!=null){let a=yA(o);Array.isArray(a)&&(a=a.map(u=>Tm(u))),p(e,["models"],a)}return e}function DM(n){const e={},t=f(n,["maskMode"]);t!=null&&p(e,["maskMode"],t);const i=f(n,["segmentationClasses"]);i!=null&&p(e,["maskClasses"],i);const o=f(n,["maskDilation"]);return o!=null&&p(e,["dilation"],o),e}function vm(n){const e={},t=f(n,["name"]);t!=null&&p(e,["name"],t);const i=f(n,["displayName"]);i!=null&&p(e,["displayName"],i);const o=f(n,["description"]);o!=null&&p(e,["description"],o);const a=f(n,["version"]);a!=null&&p(e,["version"],a);const u=f(n,["_self"]);u!=null&&p(e,["tunedModelInfo"],$M(u));const d=f(n,["inputTokenLimit"]);d!=null&&p(e,["inputTokenLimit"],d);const m=f(n,["outputTokenLimit"]);m!=null&&p(e,["outputTokenLimit"],m);const h=f(n,["supportedGenerationMethods"]);h!=null&&p(e,["supportedActions"],h);const _=f(n,["temperature"]);_!=null&&p(e,["temperature"],_);const T=f(n,["maxTemperature"]);T!=null&&p(e,["maxTemperature"],T);const S=f(n,["topP"]);S!=null&&p(e,["topP"],S);const I=f(n,["topK"]);I!=null&&p(e,["topK"],I);const L=f(n,["thinking"]);return L!=null&&p(e,["thinking"],L),e}function Tm(n){const e={},t=f(n,["name"]);t!=null&&p(e,["name"],t);const i=f(n,["displayName"]);i!=null&&p(e,["displayName"],i);const o=f(n,["description"]);o!=null&&p(e,["description"],o);const a=f(n,["versionId"]);a!=null&&p(e,["version"],a);const u=f(n,["deployedModels"]);if(u!=null){let T=u;Array.isArray(T)&&(T=T.map(S=>K1(S))),p(e,["endpoints"],T)}const d=f(n,["labels"]);d!=null&&p(e,["labels"],d);const m=f(n,["_self"]);m!=null&&p(e,["tunedModelInfo"],QM(m));const h=f(n,["defaultCheckpointId"]);h!=null&&p(e,["defaultCheckpointId"],h);const _=f(n,["checkpoints"]);if(_!=null){let T=_;Array.isArray(T)&&(T=T.map(S=>S)),p(e,["checkpoints"],T)}return e}function PM(n){const e={},t=f(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const i=f(n,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const o=f(n,["executableCode"]);o!=null&&p(e,["executableCode"],o);const a=f(n,["fileData"]);a!=null&&p(e,["fileData"],Y1(a));const u=f(n,["functionCall"]);u!=null&&p(e,["functionCall"],J1(u));const d=f(n,["functionResponse"]);d!=null&&p(e,["functionResponse"],d);const m=f(n,["inlineData"]);m!=null&&p(e,["inlineData"],_1(m));const h=f(n,["text"]);h!=null&&p(e,["text"],h);const _=f(n,["thought"]);_!=null&&p(e,["thought"],_);const T=f(n,["thoughtSignature"]);T!=null&&p(e,["thoughtSignature"],T);const S=f(n,["videoMetadata"]);return S!=null&&p(e,["videoMetadata"],S),e}function kM(n){const e={},t=f(n,["productImage"]);return t!=null&&p(e,["image"],_i(t)),e}function VM(n,e){const t={},i=f(n,["numberOfImages"]);e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i);const o=f(n,["baseSteps"]);e!==void 0&&o!=null&&p(e,["parameters","baseSteps"],o);const a=f(n,["outputGcsUri"]);e!==void 0&&a!=null&&p(e,["parameters","storageUri"],a);const u=f(n,["seed"]);e!==void 0&&u!=null&&p(e,["parameters","seed"],u);const d=f(n,["safetyFilterLevel"]);e!==void 0&&d!=null&&p(e,["parameters","safetySetting"],d);const m=f(n,["personGeneration"]);e!==void 0&&m!=null&&p(e,["parameters","personGeneration"],m);const h=f(n,["addWatermark"]);e!==void 0&&h!=null&&p(e,["parameters","addWatermark"],h);const _=f(n,["outputMimeType"]);e!==void 0&&_!=null&&p(e,["parameters","outputOptions","mimeType"],_);const T=f(n,["outputCompressionQuality"]);e!==void 0&&T!=null&&p(e,["parameters","outputOptions","compressionQuality"],T);const S=f(n,["enhancePrompt"]);e!==void 0&&S!=null&&p(e,["parameters","enhancePrompt"],S);const I=f(n,["labels"]);return e!==void 0&&I!=null&&p(e,["labels"],I),t}function UM(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["_url","model"],$e(n,i));const o=f(e,["source"]);o!=null&&OM(o,t);const a=f(e,["config"]);return a!=null&&VM(a,t),t}function LM(n){const e={},t=f(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>_d(o))),p(e,["generatedImages"],i)}return e}function OM(n,e){const t={},i=f(n,["prompt"]);e!==void 0&&i!=null&&p(e,["instances[0]","prompt"],i);const o=f(n,["personImage"]);e!==void 0&&o!=null&&p(e,["instances[0]","personImage","image"],_i(o));const a=f(n,["productImages"]);if(e!==void 0&&a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>kM(d))),p(e,["instances[0]","productImages"],u)}return t}function FM(n){const e={},t=f(n,["referenceImage"]);t!=null&&p(e,["referenceImage"],_i(t));const i=f(n,["referenceId"]);i!=null&&p(e,["referenceId"],i);const o=f(n,["referenceType"]);o!=null&&p(e,["referenceType"],o);const a=f(n,["maskImageConfig"]);a!=null&&p(e,["maskImageConfig"],DM(a));const u=f(n,["controlImageConfig"]);u!=null&&p(e,["controlImageConfig"],I1(u));const d=f(n,["styleImageConfig"]);d!=null&&p(e,["styleImageConfig"],d);const m=f(n,["subjectImageConfig"]);return m!=null&&p(e,["subjectImageConfig"],m),e}function CA(n){const e={},t=f(n,["safetyAttributes","categories"]);t!=null&&p(e,["categories"],t);const i=f(n,["safetyAttributes","scores"]);i!=null&&p(e,["scores"],i);const o=f(n,["contentType"]);return o!=null&&p(e,["contentType"],o),e}function IA(n){const e={},t=f(n,["safetyAttributes","categories"]);t!=null&&p(e,["categories"],t);const i=f(n,["safetyAttributes","scores"]);i!=null&&p(e,["scores"],i);const o=f(n,["contentType"]);return o!=null&&p(e,["contentType"],o),e}function GM(n){const e={},t=f(n,["category"]);if(t!=null&&p(e,["category"],t),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=f(n,["threshold"]);return i!=null&&p(e,["threshold"],i),e}function qM(n){const e={},t=f(n,["image"]);return t!=null&&p(e,["image"],_i(t)),e}function BM(n,e){const t={},i=f(n,["mode"]);e!==void 0&&i!=null&&p(e,["parameters","mode"],i);const o=f(n,["maxPredictions"]);e!==void 0&&o!=null&&p(e,["parameters","maxPredictions"],o);const a=f(n,["confidenceThreshold"]);e!==void 0&&a!=null&&p(e,["parameters","confidenceThreshold"],a);const u=f(n,["maskDilation"]);e!==void 0&&u!=null&&p(e,["parameters","maskDilation"],u);const d=f(n,["binaryColorThreshold"]);e!==void 0&&d!=null&&p(e,["parameters","binaryColorThreshold"],d);const m=f(n,["labels"]);return e!==void 0&&m!=null&&p(e,["labels"],m),t}function zM(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["_url","model"],$e(n,i));const o=f(e,["source"]);o!=null&&KM(o,t);const a=f(e,["config"]);return a!=null&&BM(a,t),t}function HM(n){const e={},t=f(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>mM(o))),p(e,["generatedMasks"],i)}return e}function KM(n,e){const t={},i=f(n,["prompt"]);e!==void 0&&i!=null&&p(e,["instances[0]","prompt"],i);const o=f(n,["image"]);e!==void 0&&o!=null&&p(e,["instances[0]","image"],_i(o));const a=f(n,["scribbleImage"]);return e!==void 0&&a!=null&&p(e,["instances[0]","scribble"],qM(a)),t}function YM(n){const e={},t=f(n,["retrievalConfig"]);t!=null&&p(e,["retrievalConfig"],t);const i=f(n,["functionCallingConfig"]);return i!=null&&p(e,["functionCallingConfig"],$1(i)),e}function JM(n){const e={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=f(n,["computerUse"]);t!=null&&p(e,["computerUse"],t);const i=f(n,["fileSearch"]);i!=null&&p(e,["fileSearch"],i);const o=f(n,["codeExecution"]);if(o!=null&&p(e,["codeExecution"],o),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=f(n,["functionDeclarations"]);if(a!=null){let _=a;Array.isArray(_)&&(_=_.map(T=>T)),p(e,["functionDeclarations"],_)}const u=f(n,["googleMaps"]);u!=null&&p(e,["googleMaps"],EM(u));const d=f(n,["googleSearch"]);d!=null&&p(e,["googleSearch"],SM(d));const m=f(n,["googleSearchRetrieval"]);m!=null&&p(e,["googleSearchRetrieval"],m);const h=f(n,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}function wA(n){const e={},t=f(n,["retrieval"]);t!=null&&p(e,["retrieval"],t);const i=f(n,["computerUse"]);if(i!=null&&p(e,["computerUse"],i),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=f(n,["codeExecution"]);o!=null&&p(e,["codeExecution"],o);const a=f(n,["enterpriseWebSearch"]);a!=null&&p(e,["enterpriseWebSearch"],a);const u=f(n,["functionDeclarations"]);if(u!=null){let T=u;Array.isArray(T)&&(T=T.map(S=>Q1(S))),p(e,["functionDeclarations"],T)}const d=f(n,["googleMaps"]);d!=null&&p(e,["googleMaps"],d);const m=f(n,["googleSearch"]);m!=null&&p(e,["googleSearch"],m);const h=f(n,["googleSearchRetrieval"]);h!=null&&p(e,["googleSearchRetrieval"],h);const _=f(n,["urlContext"]);return _!=null&&p(e,["urlContext"],_),e}function $M(n){const e={},t=f(n,["baseModel"]);t!=null&&p(e,["baseModel"],t);const i=f(n,["createTime"]);i!=null&&p(e,["createTime"],i);const o=f(n,["updateTime"]);return o!=null&&p(e,["updateTime"],o),e}function QM(n){const e={},t=f(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&p(e,["baseModel"],t);const i=f(n,["createTime"]);i!=null&&p(e,["createTime"],i);const o=f(n,["updateTime"]);return o!=null&&p(e,["updateTime"],o),e}function XM(n,e){const t={},i=f(n,["displayName"]);e!==void 0&&i!=null&&p(e,["displayName"],i);const o=f(n,["description"]);e!==void 0&&o!=null&&p(e,["description"],o);const a=f(n,["defaultCheckpointId"]);return e!==void 0&&a!=null&&p(e,["defaultCheckpointId"],a),t}function WM(n,e){const t={},i=f(n,["displayName"]);e!==void 0&&i!=null&&p(e,["displayName"],i);const o=f(n,["description"]);e!==void 0&&o!=null&&p(e,["description"],o);const a=f(n,["defaultCheckpointId"]);return e!==void 0&&a!=null&&p(e,["defaultCheckpointId"],a),t}function ZM(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["_url","name"],$e(n,i));const o=f(e,["config"]);return o!=null&&XM(o,t),t}function jM(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["_url","model"],$e(n,i));const o=f(e,["config"]);return o!=null&&WM(o,t),t}function eD(n,e){const t={},i=f(n,["outputGcsUri"]);e!==void 0&&i!=null&&p(e,["parameters","storageUri"],i);const o=f(n,["safetyFilterLevel"]);e!==void 0&&o!=null&&p(e,["parameters","safetySetting"],o);const a=f(n,["personGeneration"]);e!==void 0&&a!=null&&p(e,["parameters","personGeneration"],a);const u=f(n,["includeRaiReason"]);e!==void 0&&u!=null&&p(e,["parameters","includeRaiReason"],u);const d=f(n,["outputMimeType"]);e!==void 0&&d!=null&&p(e,["parameters","outputOptions","mimeType"],d);const m=f(n,["outputCompressionQuality"]);e!==void 0&&m!=null&&p(e,["parameters","outputOptions","compressionQuality"],m);const h=f(n,["enhanceInputImage"]);e!==void 0&&h!=null&&p(e,["parameters","upscaleConfig","enhanceInputImage"],h);const _=f(n,["imagePreservationFactor"]);e!==void 0&&_!=null&&p(e,["parameters","upscaleConfig","imagePreservationFactor"],_);const T=f(n,["labels"]);e!==void 0&&T!=null&&p(e,["labels"],T);const S=f(n,["numberOfImages"]);e!==void 0&&S!=null&&p(e,["parameters","sampleCount"],S);const I=f(n,["mode"]);return e!==void 0&&I!=null&&p(e,["parameters","mode"],I),t}function tD(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["_url","model"],$e(n,i));const o=f(e,["image"]);o!=null&&p(t,["instances[0]","image"],_i(o));const a=f(e,["upscaleFactor"]);a!=null&&p(t,["parameters","upscaleConfig","upscaleFactor"],a);const u=f(e,["config"]);return u!=null&&eD(u,t),t}function nD(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>_d(a))),p(e,["generatedImages"],o)}return e}function iD(n){const e={},t=f(n,["uri"]);t!=null&&p(e,["uri"],t);const i=f(n,["encodedVideo"]);i!=null&&p(e,["videoBytes"],xs(i));const o=f(n,["encoding"]);return o!=null&&p(e,["mimeType"],o),e}function rD(n){const e={},t=f(n,["gcsUri"]);t!=null&&p(e,["uri"],t);const i=f(n,["bytesBase64Encoded"]);i!=null&&p(e,["videoBytes"],xs(i));const o=f(n,["mimeType"]);return o!=null&&p(e,["mimeType"],o),e}function sD(n){const e={},t=f(n,["image"]);t!=null&&p(e,["_self"],_i(t));const i=f(n,["maskMode"]);return i!=null&&p(e,["maskMode"],i),e}function oD(n){const e={},t=f(n,["image"]);t!=null&&p(e,["image"],vd(t));const i=f(n,["referenceType"]);return i!=null&&p(e,["referenceType"],i),e}function aD(n){const e={},t=f(n,["image"]);t!=null&&p(e,["image"],_i(t));const i=f(n,["referenceType"]);return i!=null&&p(e,["referenceType"],i),e}function RA(n){const e={},t=f(n,["uri"]);t!=null&&p(e,["uri"],t);const i=f(n,["videoBytes"]);i!=null&&p(e,["encodedVideo"],xs(i));const o=f(n,["mimeType"]);return o!=null&&p(e,["encoding"],o),e}function bA(n){const e={},t=f(n,["uri"]);t!=null&&p(e,["gcsUri"],t);const i=f(n,["videoBytes"]);i!=null&&p(e,["bytesBase64Encoded"],xs(i));const o=f(n,["mimeType"]);return o!=null&&p(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function lD(n,e){const t={},i=f(n,["displayName"]);return e!==void 0&&i!=null&&p(e,["displayName"],i),t}function uD(n){const e={},t=f(n,["config"]);return t!=null&&lD(t,e),e}function cD(n,e){const t={},i=f(n,["force"]);return e!==void 0&&i!=null&&p(e,["_query","force"],i),t}function fD(n){const e={},t=f(n,["name"]);t!=null&&p(e,["_url","name"],t);const i=f(n,["config"]);return i!=null&&cD(i,e),e}function dD(n){const e={},t=f(n,["name"]);return t!=null&&p(e,["_url","name"],t),e}function hD(n,e){const t={},i=f(n,["customMetadata"]);if(e!==void 0&&i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["customMetadata"],a)}const o=f(n,["chunkingConfig"]);return e!==void 0&&o!=null&&p(e,["chunkingConfig"],o),t}function pD(n){const e={},t=f(n,["name"]);t!=null&&p(e,["name"],t);const i=f(n,["metadata"]);i!=null&&p(e,["metadata"],i);const o=f(n,["done"]);o!=null&&p(e,["done"],o);const a=f(n,["error"]);a!=null&&p(e,["error"],a);const u=f(n,["response"]);return u!=null&&p(e,["response"],gD(u)),e}function mD(n){const e={},t=f(n,["fileSearchStoreName"]);t!=null&&p(e,["_url","file_search_store_name"],t);const i=f(n,["fileName"]);i!=null&&p(e,["fileName"],i);const o=f(n,["config"]);return o!=null&&hD(o,e),e}function gD(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["parent"]);i!=null&&p(e,["parent"],i);const o=f(n,["documentName"]);return o!=null&&p(e,["documentName"],o),e}function yD(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&p(e,["_query","pageToken"],o),t}function _D(n){const e={},t=f(n,["config"]);return t!=null&&yD(t,e),e}function vD(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const o=f(n,["fileSearchStores"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["fileSearchStores"],a)}return e}function NA(n,e){const t={},i=f(n,["mimeType"]);e!==void 0&&i!=null&&p(e,["mimeType"],i);const o=f(n,["displayName"]);e!==void 0&&o!=null&&p(e,["displayName"],o);const a=f(n,["customMetadata"]);if(e!==void 0&&a!=null){let d=a;Array.isArray(d)&&(d=d.map(m=>m)),p(e,["customMetadata"],d)}const u=f(n,["chunkingConfig"]);return e!==void 0&&u!=null&&p(e,["chunkingConfig"],u),t}function TD(n){const e={},t=f(n,["fileSearchStoreName"]);t!=null&&p(e,["_url","file_search_store_name"],t);const i=f(n,["config"]);return i!=null&&NA(i,e),e}function ED(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const SD="Content-Type",AD="X-Server-Timeout",CD="User-Agent",Em="x-goog-api-client",ID="1.35.0",wD=`google-genai-sdk/${ID}`,RD="v1beta1",bD="v1beta";class ND{constructor(e){var t,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:RD,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:bD,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,i){const o=[this.getRequestUrlInternal(t)];return i&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,i);if(e.queryParams)for(const[u,d]of Object.entries(e.queryParams))o.searchParams.append(u,String(d));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,t,o.toString(),e.abortSignal),this.unaryApiCall(o,a,e.httpMethod)}patchHttpOptions(e,t){const i=JSON.parse(JSON.stringify(e));for(const[o,a]of Object.entries(t))typeof a=="object"?i[o]=Object.assign(Object.assign({},i[o]),a):a!==void 0&&(i[o]=a);return i}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,t,i);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,t,o.toString(),e.abortSignal),this.streamApiCall(o,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,i,o){if(t&&t.timeout||o){const a=new AbortController,u=a.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const d=setTimeout(()=>a.abort(),t.timeout);d&&typeof d.unref=="function"&&d.unref()}o&&o.addEventListener("abort",()=>{a.abort()}),e.signal=u}return t&&t.extraBody!==null&&xD(e,t.extraBody),e.headers=await this.getHeadersInternal(t,i),e}async unaryApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async o=>(await s0(o),new gm(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async o=>(await s0(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){return hi(this,arguments,function*(){var i;const o=(i=e==null?void 0:e.body)===null||i===void 0?void 0:i.getReader(),a=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let u="";const d="data:",m=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:h,value:_}=yield be(o.read());if(h){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const T=a.decode(_,{stream:!0});try{const L=JSON.parse(T);if("error"in L){const F=JSON.parse(JSON.stringify(L.error)),V=F.status,K=F.code,ne=`got status: ${V}. ${JSON.stringify(L)}`;if(K>=400&&K<600)throw new gd({message:ne,status:K})}}catch(L){if(L.name==="ApiError")throw L}u+=T;let S=-1,I=0;for(;;){S=-1,I=0;for(const V of m){const K=u.indexOf(V);K!==-1&&(S===-1||K<S)&&(S=K,I=V.length)}if(S===-1)break;const L=u.substring(0,S);u=u.substring(S+I);const F=L.trim();if(F.startsWith(d)){const V=F.substring(d.length).trim();try{const K=new Response(V,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield be(new gm(K))}catch(K){throw new Error(`exception parsing stream chunk ${V}. ${K}`)}}}}}finally{o.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},t=wD+" "+this.clientOptions.userAgentExtra;return e[CD]=t,e[Em]=t,e[SD]="application/json",e}async getHeadersInternal(e,t){const i=new Headers;if(e&&e.headers){for(const[o,a]of Object.entries(e.headers))i.append(o,a);e.timeout&&e.timeout>0&&i.append(AD,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,t),i}getFileName(e){var t;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(t=i.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),i}async uploadFile(e,t){var i;const o={};t!=null&&(o.mimeType=t.mimeType,o.name=t.name,o.displayName=t.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const a=this.clientOptions.uploader,u=await a.stat(e);o.sizeBytes=String(u.size);const d=(i=t==null?void 0:t.mimeType)!==null&&i!==void 0?i:u.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=d;const m={file:o},h=this.getFileName(e),_=me("upload/v1beta/files",m._url),T=await this.fetchUploadUrl(_,o.sizeBytes,o.mimeType,h,m,t==null?void 0:t.httpOptions);return a.upload(e,T,this)}async uploadFileToFileSearchStore(e,t,i){var o;const a=this.clientOptions.uploader,u=await a.stat(t),d=String(u.size),m=(o=i==null?void 0:i.mimeType)!==null&&o!==void 0?o:u.type;if(m===void 0||m==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const h=`upload/v1beta/${e}:uploadToFileSearchStore`,_=this.getFileName(t),T={};i!=null&&NA(i,T);const S=await this.fetchUploadUrl(h,d,m,_,T,i==null?void 0:i.httpOptions);return a.uploadToFileSearchStore(t,S,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,i,o,a,u){var d;let m={};u?m=u:m={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${i}`},o?{"X-Goog-Upload-File-Name":o}:{})};const h=await this.request({path:e,body:JSON.stringify(a),httpMethod:"POST",httpOptions:m});if(!h||!(h!=null&&h.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const _=(d=h==null?void 0:h.headers)===null||d===void 0?void 0:d["x-goog-upload-url"];if(_===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return _}}async function s0(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let i;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await n.json():i={error:{message:await n.text(),code:n.status,status:n.statusText}};const o=JSON.stringify(i);throw t>=400&&t<600?new gd({message:o,status:t}):new Error(o)}}function xD(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const a=JSON.parse(n.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))t=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(a,u){const d=Object.assign({},a);for(const m in u)if(Object.prototype.hasOwnProperty.call(u,m)){const h=u[m],_=d[m];h&&typeof h=="object"&&!Array.isArray(h)&&_&&typeof _=="object"&&!Array.isArray(_)?d[m]=i(_,h):(_&&h&&typeof _!=typeof h&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${m}". Original type: ${typeof _}, New type: ${typeof h}. Overwriting.`),d[m]=h)}return d}const o=i(t,e);n.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const MD="mcp_used/unknown";let DD=!1;function xA(n){for(const e of n)if(PD(e)||typeof e=="object"&&"inputSchema"in e)return!0;return DD}function MA(n){var e;const t=(e=n[Em])!==null&&e!==void 0?e:"";n[Em]=(t+` ${MD}`).trimStart()}function PD(n){return n!==null&&typeof n=="object"&&n instanceof lg}function kD(n){return hi(this,arguments,function*(t,i=100){let o,a=0;for(;a<i;){const u=yield be(t.listTools({cursor:o}));for(const d of u.tools)yield yield be(d),a++;if(!u.nextCursor)break;o=u.nextCursor}})}class lg{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new lg(e,t)}async initialize(){var e,t,i,o;if(this.mcpTools.length>0)return;const a={},u=[];for(const _ of this.mcpClients)try{for(var d=!0,m=(t=void 0,pi(kD(_))),h;h=await m.next(),e=h.done,!e;d=!0){o=h.value,d=!1;const T=o;u.push(T);const S=T.name;if(a[S])throw new Error(`Duplicate function name ${S} found in MCP tools. Please ensure function names are unique.`);a[S]=_}}catch(T){t={error:T}}finally{try{!d&&!e&&(i=m.return)&&await i.call(m)}finally{if(t)throw t.error}}this.mcpTools=u,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),dN(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[i.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const u=await o.callTool({name:i.name,arguments:i.args},void 0,a);t.push({functionResponse:{name:i.name,response:u.isError?{error:u}:u}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function VD(n,e,t){const i=new rN;let o;t.data instanceof Blob?o=JSON.parse(await t.data.text()):o=JSON.parse(t.data),Object.assign(i,o),e(i)}class UD{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i}async connect(e){var t,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),u=FD(this.apiClient.getDefaultHeaders()),d=this.apiClient.getApiKey(),m=`${o}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${d}`;let h=()=>{};const _=new Promise(j=>{h=j}),T=e.callbacks,S=function(){h({})},I=this.apiClient,L={onopen:S,onmessage:j=>{VD(I,T.onmessage,j)},onerror:(t=T==null?void 0:T.onerror)!==null&&t!==void 0?t:function(j){},onclose:(i=T==null?void 0:T.onclose)!==null&&i!==void 0?i:function(j){}},F=this.webSocketFactory.create(m,OD(u),L);F.connect(),await _;const ne={setup:{model:$e(this.apiClient,e.model)}};return F.send(JSON.stringify(ne)),new LD(F,this.apiClient)}}class LD{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=u1(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=l1(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(Ca.PLAY)}pause(){this.sendPlaybackControl(Ca.PAUSE)}stop(){this.sendPlaybackControl(Ca.STOP)}resetContext(){this.sendPlaybackControl(Ca.RESET_CONTEXT)}close(){this.conn.close()}}function OD(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function FD(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const GD="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function qD(n,e,t){const i=new iN;let o;t.data instanceof Blob?o=await t.data.text():t.data instanceof ArrayBuffer?o=new TextDecoder().decode(t.data):o=t.data;const a=JSON.parse(o);if(n.isVertexAI()){const u=d1(a);Object.assign(i,u)}else Object.assign(i,a);e(i)}class BD{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i,this.music=new UD(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,i,o,a,u,d;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const m=this.apiClient.getWebsocketBaseUrl(),h=this.apiClient.getApiVersion();let _;const T=this.apiClient.getHeaders();e.config&&e.config.tools&&xA(e.config.tools)&&MA(T);const S=YD(T);if(this.apiClient.isVertexAI())_=`${m}/ws/google.cloud.aiplatform.${h}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(S,_);else{const N=this.apiClient.getApiKey();let D="BidiGenerateContent",k="key";N!=null&&N.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),h!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),D="BidiGenerateContentConstrained",k="access_token"),_=`${m}/ws/google.ai.generativelanguage.${h}.GenerativeService.${D}?${k}=${N}`}let I=()=>{};const L=new Promise(N=>{I=N}),F=e.callbacks,V=function(){var N;(N=F==null?void 0:F.onopen)===null||N===void 0||N.call(F),I({})},K=this.apiClient,ne={onopen:V,onmessage:N=>{qD(K,F.onmessage,N)},onerror:(t=F==null?void 0:F.onerror)!==null&&t!==void 0?t:function(N){},onclose:(i=F==null?void 0:F.onclose)!==null&&i!==void 0?i:function(N){}},j=this.webSocketFactory.create(_,KD(S),ne);j.connect(),await L;let oe=$e(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&oe.startsWith("publishers/")){const N=this.apiClient.getProject(),D=this.apiClient.getLocation();oe=`projects/${N}/locations/${D}/`+oe}let de={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[zf.AUDIO]}:e.config.responseModalities=[zf.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const ue=(d=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[],x=[];for(const N of ue)if(this.isCallableTool(N)){const D=N;x.push(await D.tool())}else x.push(N);x.length>0&&(e.config.tools=x);const R={model:oe,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?de=a1(this.apiClient,R):de=o1(this.apiClient,R),delete de.config,j.send(JSON.stringify(de)),new HD(j,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const zD={turnComplete:!0};class HD{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let i=[];try{i=Qn(t.turns),e.isVertexAI()||(i=i.map(o=>yd(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:i,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let i=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?i=t.functionResponses:i=[t.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const a of i){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(GD)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},zD),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:f1(e)}:t={realtimeInput:c1(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function KD(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function YD(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const o0=10;function a0(n){var e,t,i;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let o=!1;for(const u of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(ba(u)){o=!0;break}if(!o)return!0;const a=(i=n==null?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function ba(n){return"callTool"in n&&typeof n.callTool=="function"}function JD(n){var e,t,i;return(i=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(o=>ba(o)))!==null&&i!==void 0?i:!1}function l0(n){var e;const t=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((i,o)=>{if(ba(i))return;const a=i;a.functionDeclarations&&a.functionDeclarations.length>0&&t.push(o)}),t}function u0(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $D extends Dr{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var i,o,a,u,d;const m=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!JD(t)||a0(t.config))return await this.generateContentInternal(m);const h=l0(t);if(h.length>0){const F=h.map(V=>`tools[${V}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${F}.`)}let _,T;const S=Qn(m.contents),I=(a=(o=(i=m.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&a!==void 0?a:o0;let L=0;for(;L<I&&(_=await this.generateContentInternal(m),!(!_.functionCalls||_.functionCalls.length===0));){const F=_.candidates[0].content,V=[];for(const K of(d=(u=t.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[])if(ba(K)){const j=await K.callTool(_.functionCalls);V.push(...j)}L++,T={role:"user",parts:V},m.contents=Qn(m.contents),m.contents.push(F),m.contents.push(T),u0(m.config)&&(S.push(F),S.push(T))}return u0(m.config)&&(_.automaticFunctionCallingHistory=S),_},this.generateContentStream=async t=>{var i,o,a,u,d;if(this.maybeMoveToResponseJsonSchem(t),a0(t.config)){const T=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(T)}const m=l0(t);if(m.length>0){const T=m.map(S=>`tools[${S}]`).join(", ");throw new Error(`Incompatible tools found at ${T}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const h=(a=(o=(i=t==null?void 0:t.config)===null||i===void 0?void 0:i.toolConfig)===null||o===void 0?void 0:o.functionCallingConfig)===null||a===void 0?void 0:a.streamFunctionCallArguments,_=(d=(u=t==null?void 0:t.config)===null||u===void 0?void 0:u.automaticFunctionCalling)===null||d===void 0?void 0:d.disable;if(h&&!_)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(i=>{var o;let a;const u=[];if(i!=null&&i.generatedImages)for(const m of i.generatedImages)m&&(m!=null&&m.safetyAttributes)&&((o=m==null?void 0:m.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?a=m==null?void 0:m.safetyAttributes:u.push(m);let d;return a?d={generatedImages:u,positivePromptSafetyAttributes:a,sdkHttpResponse:i.sdkHttpResponse}:d={generatedImages:u,sdkHttpResponse:i.sdkHttpResponse},d}),this.list=async t=>{var i;const u={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((i=u.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new Ao(Rr.PAGED_ITEM_MODELS,d=>this.listInternal(d),await this.listInternal(u),u)},this.editImage=async t=>{const i={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(i.referenceImages=t.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async t=>{let i={numberOfImages:1,mode:"upscale"};t.config&&(i=Object.assign(Object.assign({},i),t.config));const o={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:i};return await this.upscaleImageInternal(o)},this.generateVideos=async t=>{var i,o,a,u,d,m;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=t.video)===null||i===void 0)&&i.uri&&(!((o=t.video)===null||o===void 0)&&o.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((u=(a=t.source)===null||a===void 0?void 0:a.video)===null||u===void 0)&&u.uri&&(!((m=(d=t.source)===null||d===void 0?void 0:d.video)===null||m===void 0)&&m.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,i,o;const a=(t=e.config)===null||t===void 0?void 0:t.tools;if(!a)return e;const u=await Promise.all(a.map(async m=>ba(m)?await m.tool():m)),d={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(d.config.tools=u,e.config&&e.config.tools&&xA(e.config.tools)){const m=(o=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&o!==void 0?o:{};let h=Object.assign({},m);Object.keys(h).length===0&&(h=this.apiClient.getDefaultHeaders()),MA(h),d.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:h})}return d}async initAfcToolsMap(e){var t,i,o;const a=new Map;for(const u of(i=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&i!==void 0?i:[])if(ba(u)){const d=u,m=await d.tool();for(const h of(o=m.functionDeclarations)!==null&&o!==void 0?o:[]){if(!h.name)throw new Error("Function declaration name is required.");if(a.has(h.name))throw new Error(`Duplicate tool declaration name: ${h.name}`);a.set(h.name,d)}}return a}async processAfcStream(e){var t,i,o;const a=(o=(i=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:o0;let u=!1,d=0;const m=await this.initAfcToolsMap(e);return(function(h,_,T){return hi(this,arguments,function*(){for(var S,I,L,F,V,K;d<a;){u&&(d++,u=!1);const de=yield be(h.processParamsMaybeAddMcpUsage(T)),ue=yield be(h.generateContentStreamInternal(de)),x=[],R=[];try{for(var ne=!0,j=(I=void 0,pi(ue)),oe;oe=yield be(j.next()),S=oe.done,!S;ne=!0){F=oe.value,ne=!1;const N=F;if(yield yield be(N),N.candidates&&(!((V=N.candidates[0])===null||V===void 0)&&V.content)){R.push(N.candidates[0].content);for(const D of(K=N.candidates[0].content.parts)!==null&&K!==void 0?K:[])if(d<a&&D.functionCall){if(!D.functionCall.name)throw new Error("Function call name was not returned by the model.");if(_.has(D.functionCall.name)){const k=yield be(_.get(D.functionCall.name).callTool([D.functionCall]));x.push(...k)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${_.keys()}, mising tool: ${D.functionCall.name}`)}}}}catch(N){I={error:N}}finally{try{!ne&&!S&&(L=j.return)&&(yield be(L.call(j)))}finally{if(I)throw I.error}}if(x.length>0){u=!0;const N=new ru;N.candidates=[{content:{role:"user",parts:x}}],yield yield be(N);const D=[];D.push(...R),D.push({role:"user",parts:x});const k=Qn(T.contents).concat(D);T.contents=k}else break}})})(this,m,e)}async generateContentInternal(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=n0(this.apiClient,e);return d=me("{model}:generateContent",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=r0(_),S=new ru;return Object.assign(S,T),S})}else{const h=t0(this.apiClient,e);return d=me("{model}:generateContent",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=i0(_),S=new ru;return Object.assign(S,T),S})}}async generateContentStreamInternal(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=n0(this.apiClient,e);return d=me("{model}:streamGenerateContent?alt=sse",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.requestStream({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),u.then(function(T){return hi(this,arguments,function*(){var S,I,L,F;try{for(var V=!0,K=pi(T),ne;ne=yield be(K.next()),S=ne.done,!S;V=!0){F=ne.value,V=!1;const j=F,oe=r0(yield be(j.json()));oe.sdkHttpResponse={headers:j.headers};const de=new ru;Object.assign(de,oe),yield yield be(de)}}catch(j){I={error:j}}finally{try{!V&&!S&&(L=K.return)&&(yield be(L.call(K)))}finally{if(I)throw I.error}}})})}else{const h=t0(this.apiClient,e);return d=me("{model}:streamGenerateContent?alt=sse",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.requestStream({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),u.then(function(T){return hi(this,arguments,function*(){var S,I,L,F;try{for(var V=!0,K=pi(T),ne;ne=yield be(K.next()),S=ne.done,!S;V=!0){F=ne.value,V=!1;const j=F,oe=i0(yield be(j.json()));oe.sdkHttpResponse={headers:j.headers};const de=new ru;Object.assign(de,oe),yield yield be(de)}}catch(j){I={error:j}}finally{try{!V&&!S&&(L=K.return)&&(yield be(L.call(K)))}finally{if(I)throw I.error}}})})}}async embedContent(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=B1(this.apiClient,e);return d=me("{model}:predict",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=H1(_),S=new OE;return Object.assign(S,T),S})}else{const h=q1(this.apiClient,e);return d=me("{model}:batchEmbedContents",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=z1(_),S=new OE;return Object.assign(S,T),S})}}async generateImagesInternal(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=tM(this.apiClient,e);return d=me("{model}:predict",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=iM(_),S=new FE;return Object.assign(S,T),S})}else{const h=eM(this.apiClient,e);return d=me("{model}:predict",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=nM(_),S=new FE;return Object.assign(S,T),S})}}async editImageInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=L1(this.apiClient,e);return a=me("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:m.headers},_})),o.then(m=>{const h=O1(m),_=new Yb;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=tD(this.apiClient,e);return a=me("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:m.headers},_})),o.then(m=>{const h=nD(m),_=new Jb;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=UM(this.apiClient,e);return a=me("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>{const h=LM(m),_=new $b;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=zM(this.apiClient,e);return a=me("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>{const h=HM(m),_=new Qb;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=TM(this.apiClient,e);return d=me("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>Tm(_))}else{const h=vM(this.apiClient,e);return d=me("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>vm(_))}}async listInternal(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=NM(this.apiClient,e);return d=me("{models_url}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=MM(_),S=new GE;return Object.assign(S,T),S})}else{const h=bM(this.apiClient,e);return d=me("{models_url}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=xM(_),S=new GE;return Object.assign(S,T),S})}}async update(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=jM(this.apiClient,e);return d=me("{model}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>Tm(_))}else{const h=ZM(this.apiClient,e);return d=me("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>vm(_))}}async delete(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=P1(this.apiClient,e);return d=me("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=V1(_),S=new qE;return Object.assign(S,T),S})}else{const h=D1(this.apiClient,e);return d=me("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=k1(_),S=new qE;return Object.assign(S,T),S})}}async countTokens(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=N1(this.apiClient,e);return d=me("{model}:countTokens",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=M1(_),S=new BE;return Object.assign(S,T),S})}else{const h=b1(this.apiClient,e);return d=me("{model}:countTokens",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=x1(_),S=new BE;return Object.assign(S,T),S})}}async computeTokens(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=E1(this.apiClient,e);return a=me("{model}:computeTokens",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:m.headers},_})),o.then(m=>{const h=S1(m),_=new Xb;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=uM(this.apiClient,e);return d=me("{model}:predictLongRunning",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>{const T=aM(_),S=new Hf;return Object.assign(S,T),S})}else{const h=lM(this.apiClient,e);return d=me("{model}:predictLongRunning",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>{const T=oM(_),S=new Hf;return Object.assign(S,T),S})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class QD extends Dr{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:a}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async get(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:a}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=Gb(e);return d=me("{operationName}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u}else{const h=Fb(e);return d=me("{operationName}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u}}async fetchPredictVideosOperationInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=Db(e);return a=me("{resourceName}:fetchPredictOperation",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function XD(n){const e={},t=f(n,["data"]);if(t!=null&&p(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function WD(n){const e={},t=f(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>oP(a))),p(e,["parts"],o)}const i=f(n,["role"]);return i!=null&&p(e,["role"],i),e}function ZD(n,e,t){const i={},o=f(e,["expireTime"]);t!==void 0&&o!=null&&p(t,["expireTime"],o);const a=f(e,["newSessionExpireTime"]);t!==void 0&&a!=null&&p(t,["newSessionExpireTime"],a);const u=f(e,["uses"]);t!==void 0&&u!=null&&p(t,["uses"],u);const d=f(e,["liveConnectConstraints"]);t!==void 0&&d!=null&&p(t,["bidiGenerateContentSetup"],sP(n,d));const m=f(e,["lockAdditionalFields"]);return t!==void 0&&m!=null&&p(t,["fieldMask"],m),i}function jD(n,e){const t={},i=f(e,["config"]);return i!=null&&p(t,["config"],ZD(n,i,t)),t}function eP(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const i=f(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function tP(n){const e={},t=f(n,["id"]);t!=null&&p(e,["id"],t);const i=f(n,["args"]);i!=null&&p(e,["args"],i);const o=f(n,["name"]);if(o!=null&&p(e,["name"],o),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function nP(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function iP(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function rP(n,e){const t={},i=f(n,["generationConfig"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig"],i);const o=f(n,["responseModalities"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig","responseModalities"],o);const a=f(n,["temperature"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","temperature"],a);const u=f(n,["topP"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","topP"],u);const d=f(n,["topK"]);e!==void 0&&d!=null&&p(e,["setup","generationConfig","topK"],d);const m=f(n,["maxOutputTokens"]);e!==void 0&&m!=null&&p(e,["setup","generationConfig","maxOutputTokens"],m);const h=f(n,["mediaResolution"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","mediaResolution"],h);const _=f(n,["seed"]);e!==void 0&&_!=null&&p(e,["setup","generationConfig","seed"],_);const T=f(n,["speechConfig"]);e!==void 0&&T!=null&&p(e,["setup","generationConfig","speechConfig"],ag(T));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&p(e,["setup","generationConfig","thinkingConfig"],S);const I=f(n,["enableAffectiveDialog"]);e!==void 0&&I!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],I);const L=f(n,["systemInstruction"]);e!==void 0&&L!=null&&p(e,["setup","systemInstruction"],WD(on(L)));const F=f(n,["tools"]);if(e!==void 0&&F!=null){let ue=za(F);Array.isArray(ue)&&(ue=ue.map(x=>lP(Ba(x)))),p(e,["setup","tools"],ue)}const V=f(n,["sessionResumption"]);e!==void 0&&V!=null&&p(e,["setup","sessionResumption"],aP(V));const K=f(n,["inputAudioTranscription"]);e!==void 0&&K!=null&&p(e,["setup","inputAudioTranscription"],K);const ne=f(n,["outputAudioTranscription"]);e!==void 0&&ne!=null&&p(e,["setup","outputAudioTranscription"],ne);const j=f(n,["realtimeInputConfig"]);e!==void 0&&j!=null&&p(e,["setup","realtimeInputConfig"],j);const oe=f(n,["contextWindowCompression"]);e!==void 0&&oe!=null&&p(e,["setup","contextWindowCompression"],oe);const de=f(n,["proactivity"]);if(e!==void 0&&de!=null&&p(e,["setup","proactivity"],de),f(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function sP(n,e){const t={},i=f(e,["model"]);i!=null&&p(t,["setup","model"],$e(n,i));const o=f(e,["config"]);return o!=null&&p(t,["config"],rP(o,t)),t}function oP(n){const e={},t=f(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const i=f(n,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const o=f(n,["executableCode"]);o!=null&&p(e,["executableCode"],o);const a=f(n,["fileData"]);a!=null&&p(e,["fileData"],eP(a));const u=f(n,["functionCall"]);u!=null&&p(e,["functionCall"],tP(u));const d=f(n,["functionResponse"]);d!=null&&p(e,["functionResponse"],d);const m=f(n,["inlineData"]);m!=null&&p(e,["inlineData"],XD(m));const h=f(n,["text"]);h!=null&&p(e,["text"],h);const _=f(n,["thought"]);_!=null&&p(e,["thought"],_);const T=f(n,["thoughtSignature"]);T!=null&&p(e,["thoughtSignature"],T);const S=f(n,["videoMetadata"]);return S!=null&&p(e,["videoMetadata"],S),e}function aP(n){const e={},t=f(n,["handle"]);if(t!=null&&p(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function lP(n){const e={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=f(n,["computerUse"]);t!=null&&p(e,["computerUse"],t);const i=f(n,["fileSearch"]);i!=null&&p(e,["fileSearch"],i);const o=f(n,["codeExecution"]);if(o!=null&&p(e,["codeExecution"],o),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=f(n,["functionDeclarations"]);if(a!=null){let _=a;Array.isArray(_)&&(_=_.map(T=>T)),p(e,["functionDeclarations"],_)}const u=f(n,["googleMaps"]);u!=null&&p(e,["googleMaps"],nP(u));const d=f(n,["googleSearch"]);d!=null&&p(e,["googleSearch"],iP(d));const m=f(n,["googleSearchRetrieval"]);m!=null&&p(e,["googleSearchRetrieval"],m);const h=f(n,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function uP(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const i=n[t];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const o=Object.keys(i).map(a=>`${t}.${a}`);e.push(...o)}else e.push(t)}return e.join(",")}function cP(n,e){let t=null;const i=n.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const a=i.setup;typeof a=="object"&&a!==null?(n.bidiGenerateContentSetup=a,t=a):delete n.bidiGenerateContentSetup}else i!==void 0&&delete n.bidiGenerateContentSetup;const o=n.fieldMask;if(t){const a=uP(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?n.fieldMask=a:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let d=[];o.length>0&&(d=o.map(h=>u.includes(h)?`generationConfig.${h}`:h));const m=[];a&&m.push(a),d.length>0&&m.push(...d),m.length>0?n.fieldMask=m.join(","):delete n.fieldMask}else delete n.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?n.fieldMask=o.join(","):delete n.fieldMask;return n}class fP extends Dr{constructor(e){super(),this.apiClient=e}async create(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const d=jD(this.apiClient,e);a=me("auth_tokens",d._url),u=d._query,delete d.config,delete d._url,delete d._query;const m=cP(d,e.config);return o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>h)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dP(n,e){const t={},i=f(n,["force"]);return e!==void 0&&i!=null&&p(e,["_query","force"],i),t}function hP(n){const e={},t=f(n,["name"]);t!=null&&p(e,["_url","name"],t);const i=f(n,["config"]);return i!=null&&dP(i,e),e}function pP(n){const e={},t=f(n,["name"]);return t!=null&&p(e,["_url","name"],t),e}function mP(n,e){const t={},i=f(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const o=f(n,["pageToken"]);return e!==void 0&&o!=null&&p(e,["_query","pageToken"],o),t}function gP(n){const e={},t=f(n,["parent"]);t!=null&&p(e,["_url","parent"],t);const i=f(n,["config"]);return i!=null&&mP(i,e),e}function yP(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=f(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const o=f(n,["documents"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["documents"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _P extends Dr{constructor(e){super(),this.apiClient=e,this.list=async t=>new Ao(Rr.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:t.parent,config:i.config}),await this.listInternal(t),t)}async get(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=pP(e);return a=me("{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>m)}}async delete(e){var t,i;let o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=hP(e);o=me("{name}",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=gP(e);return a=me("{parent}/documents",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>{const h=yP(m),_=new Wb;return Object.assign(_,h),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vP extends Dr{constructor(e,t=new _P(e)){super(),this.apiClient=e,this.documents=t,this.list=async(i={})=>new Ao(Rr.PAGED_ITEM_FILE_SEARCH_STORES,o=>this.listInternal(o),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=uD(e);return a=me("fileSearchStores",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>m)}}async get(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=dD(e);return a=me("{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>m)}}async delete(e){var t,i;let o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=fD(e);o=me("{name}",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=_D(e);return a=me("fileSearchStores",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>{const h=vD(m),_=new Zb;return Object.assign(_,h),_})}}async uploadToFileSearchStoreInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=TD(e);return a=me("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>{const h=ED(m),_=new jb;return Object.assign(_,h),_})}}async importFile(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=mD(e);return a=me("{file_search_store_name}:importFile",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>{const h=pD(m),_=new ng;return Object.assign(_,h),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let DA=function(){const{crypto:n}=globalThis;if(n!=null&&n.randomUUID)return DA=n.randomUUID.bind(n),n.randomUUID();const e=new Uint8Array(1),t=n?()=>n.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^t()&15>>+i/4).toString(16))};const TP=()=>DA();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Sm(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const Am=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const e=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(e.stack=n.stack),n.cause&&!e.cause&&(e.cause=n.cause),n.name&&(e.name=n.name),e}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Xn extends Error{}class hn extends Xn{constructor(e,t,i,o){super(`${hn.makeMessage(e,t,i)}`),this.status=e,this.headers=o,this.error=t}static makeMessage(e,t,i){const o=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):i;return e&&o?`${e} ${o}`:e?`${e} status code (no body)`:o||"(no status code or body)"}static generate(e,t,i,o){if(!e||!o)return new Td({message:i,cause:Am(t)});const a=t;return e===400?new kA(e,a,i,o):e===401?new VA(e,a,i,o):e===403?new UA(e,a,i,o):e===404?new LA(e,a,i,o):e===409?new OA(e,a,i,o):e===422?new FA(e,a,i,o):e===429?new GA(e,a,i,o):e>=500?new qA(e,a,i,o):new hn(e,a,i,o)}}class Cm extends hn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Td extends hn{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class PA extends Td{constructor({message:e}={}){super({message:e??"Request timed out."})}}class kA extends hn{}class VA extends hn{}class UA extends hn{}class LA extends hn{}class OA extends hn{}class FA extends hn{}class GA extends hn{}class qA extends hn{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const EP=/^[a-z][a-z0-9+.-]*:/i,SP=n=>EP.test(n);let Im=n=>(Im=Array.isArray,Im(n));const AP=Im;let CP=AP;const c0=CP;function IP(n){if(!n)return!0;for(const e in n)return!1;return!0}function wP(n,e){return Object.prototype.hasOwnProperty.call(n,e)}const RP=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Xn(`${n} must be an integer`);if(e<0)throw new Xn(`${n} must be a positive integer`);return e},bP=n=>{try{return JSON.parse(n)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const NP=n=>new Promise(e=>setTimeout(e,n));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const va="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xP(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const MP=()=>{var n,e,t,i,o;const a=xP();if(a==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":va,"X-Stainless-OS":d0(Deno.build.os),"X-Stainless-Arch":f0(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(n=Deno.version)===null||n===void 0?void 0:n.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":va,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(a==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":va,"X-Stainless-OS":d0((t=globalThis.process.platform)!==null&&t!==void 0?t:"unknown"),"X-Stainless-Arch":f0((i=globalThis.process.arch)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(o=globalThis.process.version)!==null&&o!==void 0?o:"unknown"};const u=DP();return u?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":va,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${u.browser}`,"X-Stainless-Runtime-Version":u.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":va,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function DP(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of n){const i=t.exec(navigator.userAgent);if(i){const o=i[1]||0,a=i[2]||0,u=i[3]||0;return{browser:e,version:`${o}.${a}.${u}`}}}return null}const f0=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",d0=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let _f;const PP=()=>_f??(_f=MP());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kP(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function BA(...n){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...n)}function VP(n){let e=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return BA({start(){},async pull(t){const{done:i,value:o}=await e.next();i?t.close():t.enqueue(o)},async cancel(){var t;await((t=e.return)===null||t===void 0?void 0:t.call(e))}})}function zA(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function UP(n){var e,t;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((t=(e=n[Symbol.asyncIterator]()).return)===null||t===void 0?void 0:t.call(e));return}const i=n.getReader(),o=i.cancel();i.releaseLock(),await o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const LP=({headers:n,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const HA=()=>{var n;if(typeof File>"u"){const{process:e}=globalThis,t=typeof((n=e==null?void 0:e.versions)===null||n===void 0?void 0:n.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Xp(n,e,t){return HA(),new File(n,e??"unknown_file",t)}function OP(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const FP=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const KA=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",GP=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&KA(n),qP=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function BP(n,e,t){if(HA(),n=await n,GP(n))return n instanceof File?n:Xp([await n.arrayBuffer()],n.name);if(qP(n)){const o=await n.blob();return e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()),Xp(await wm(o),e,t)}const i=await wm(n);if(e||(e=OP(n)),!(t!=null&&t.type)){const o=i.find(a=>typeof a=="object"&&"type"in a&&a.type);typeof o=="string"&&(t=Object.assign(Object.assign({},t),{type:o}))}return Xp(i,e,t)}async function wm(n){var e,t,i,o,a;let u=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)u.push(n);else if(KA(n))u.push(n instanceof Blob?n:await n.arrayBuffer());else if(FP(n))try{for(var d=!0,m=pi(n),h;h=await m.next(),e=h.done,!e;d=!0){o=h.value,d=!1;const _=o;u.push(...await wm(_))}}catch(_){t={error:_}}finally{try{!d&&!e&&(i=m.return)&&await i.call(m)}finally{if(t)throw t.error}}else{const _=(a=n==null?void 0:n.constructor)===null||a===void 0?void 0:a.name;throw new Error(`Unexpected data type: ${typeof n}${_?`; constructor: ${_}`:""}${zP(n)}`)}return u}function zP(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class YA{constructor(e){this._client=e}}YA._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function JA(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const h0=Object.freeze(Object.create(null)),HP=(n=JA)=>(function(t,...i){if(t.length===1)return t[0];let o=!1;const a=[],u=t.reduce((_,T,S)=>{var I,L,F;/[?#]/.test(T)&&(o=!0);const V=i[S];let K=(o?encodeURIComponent:n)(""+V);return S!==i.length&&(V==null||typeof V=="object"&&V.toString===((F=Object.getPrototypeOf((L=Object.getPrototypeOf((I=V.hasOwnProperty)!==null&&I!==void 0?I:h0))!==null&&L!==void 0?L:h0))===null||F===void 0?void 0:F.toString))&&(K=V+"",a.push({start:_.length+T.length,length:K.length,error:`Value of type ${Object.prototype.toString.call(V).slice(8,-1)} is not a valid path parameter`})),_+T+(S===i.length?"":K)},""),d=u.split(/[?#]/,1)[0],m=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let h;for(;(h=m.exec(d))!==null;)a.push({start:h.index,length:h[0].length,error:`Value "${h[0]}" can't be safely passed as a path parameter`});if(a.sort((_,T)=>_.start-T.start),a.length>0){let _=0;const T=a.reduce((S,I)=>{const L=" ".repeat(I.start-_),F="^".repeat(I.length);return _=I.start+I.length,S+L+F},"");throw new Xn(`Path parameters result in path with invalid segments:
${a.map(S=>S.error).join(`
`)}
${u}
${T}`)}return u}),vf=HP(JA);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $A extends YA{create(e,t){var i;const{api_version:o=this._client.apiVersion}=e,a=Yf(e,["api_version"]);if("model"in a&&"agent_config"in a)throw new Xn("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in a&&"generation_config"in a)throw new Xn("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(vf`/${o}/interactions`,Object.assign(Object.assign({body:a},t),{stream:(i=e.stream)!==null&&i!==void 0?i:!1}))}delete(e,t={},i){const{api_version:o=this._client.apiVersion}=t??{};return this._client.delete(vf`/${o}/interactions/${e}`,i)}cancel(e,t={},i){const{api_version:o=this._client.apiVersion}=t??{};return this._client.post(vf`/${o}/interactions/${e}/cancel`,i)}get(e,t={},i){var o;const a=t??{},{api_version:u=this._client.apiVersion}=a,d=Yf(a,["api_version"]);return this._client.get(vf`/${u}/interactions/${e}`,Object.assign(Object.assign({query:d},i),{stream:(o=t==null?void 0:t.stream)!==null&&o!==void 0?o:!1}))}}$A._key=Object.freeze(["interactions"]);class QA extends $A{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function KP(n){let e=0;for(const o of n)e+=o.length;const t=new Uint8Array(e);let i=0;for(const o of n)t.set(o,i),i+=o.length;return t}let Tf;function ug(n){let e;return(Tf??(e=new globalThis.TextEncoder,Tf=e.encode.bind(e)))(n)}let Ef;function p0(n){let e;return(Ef??(e=new globalThis.TextDecoder,Ef=e.decode.bind(e)))(n)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ed{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?ug(e):e;this.buffer=KP([this.buffer,t]);const i=[];let o;for(;(o=YP(this.buffer,this.carriageReturnIndex))!=null;){if(o.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=o.index;continue}if(this.carriageReturnIndex!=null&&(o.index!==this.carriageReturnIndex+1||o.carriage)){i.push(p0(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const a=this.carriageReturnIndex!==null?o.preceding-1:o.preceding,u=p0(this.buffer.subarray(0,a));i.push(u),this.buffer=this.buffer.subarray(o.index),this.carriageReturnIndex=null}return i}flush(){return this.buffer.length?this.decode(`
`):[]}}Ed.NEWLINE_CHARS=new Set([`
`,"\r"]);Ed.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function YP(n,e){for(let o=e??0;o<n.length;o++){if(n[o]===10)return{preceding:o,index:o+1,carriage:!1};if(n[o]===13)return{preceding:o,index:o+1,carriage:!0}}return null}function JP(n){for(let i=0;i<n.length-1;i++){if(n[i]===10&&n[i+1]===10||n[i]===13&&n[i+1]===13)return i+2;if(n[i]===13&&n[i+1]===10&&i+3<n.length&&n[i+2]===13&&n[i+3]===10)return i+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Jf={off:0,error:200,warn:300,info:400,debug:500},m0=(n,e,t)=>{if(n){if(wP(Jf,n))return n;dn(t).warn(`${e} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(Jf))}`)}};function au(){}function Sf(n,e,t){return!e||Jf[n]>Jf[t]?au:e[n].bind(e)}const $P={error:au,warn:au,info:au,debug:au};let g0=new WeakMap;function dn(n){var e;const t=n.logger,i=(e=n.logLevel)!==null&&e!==void 0?e:"off";if(!t)return $P;const o=g0.get(t);if(o&&o[0]===i)return o[1];const a={error:Sf("error",t,i),warn:Sf("warn",t,i),info:Sf("info",t,i),debug:Sf("debug",t,i)};return g0.set(t,[i,a]),a}const co=n=>(n.options&&(n.options=Object.assign({},n.options),delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([e,t])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":t]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ia{constructor(e,t,i){this.iterator=e,this.controller=t,this.client=i}static fromSSEResponse(e,t,i){let o=!1;const a=i?dn(i):console;function u(){return hi(this,arguments,function*(){var m,h,_,T;if(o)throw new Xn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let S=!1;try{try{for(var I=!0,L=pi(QP(e,t)),F;F=yield be(L.next()),m=F.done,!m;I=!0){T=F.value,I=!1;const V=T;if(!S)if(V.data.startsWith("[DONE]")){S=!0;continue}else try{yield yield be(JSON.parse(V.data))}catch(K){throw a.error("Could not parse message into JSON:",V.data),a.error("From chunk:",V.raw),K}}}catch(V){h={error:V}}finally{try{!I&&!m&&(_=L.return)&&(yield be(_.call(L)))}finally{if(h)throw h.error}}S=!0}catch(V){if(Sm(V))return yield be(void 0);throw V}finally{S||t.abort()}})}return new Ia(u,t,i)}static fromReadableStream(e,t,i){let o=!1;function a(){return hi(this,arguments,function*(){var m,h,_,T;const S=new Ed,I=zA(e);try{for(var L=!0,F=pi(I),V;V=yield be(F.next()),m=V.done,!m;L=!0){T=V.value,L=!1;const K=T;for(const ne of S.decode(K))yield yield be(ne)}}catch(K){h={error:K}}finally{try{!L&&!m&&(_=F.return)&&(yield be(_.call(F)))}finally{if(h)throw h.error}}for(const K of S.flush())yield yield be(K)})}function u(){return hi(this,arguments,function*(){var m,h,_,T;if(o)throw new Xn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let S=!1;try{try{for(var I=!0,L=pi(a()),F;F=yield be(L.next()),m=F.done,!m;I=!0){T=F.value,I=!1;const V=T;S||V&&(yield yield be(JSON.parse(V)))}}catch(V){h={error:V}}finally{try{!I&&!m&&(_=L.return)&&(yield be(_.call(L)))}finally{if(h)throw h.error}}S=!0}catch(V){if(Sm(V))return yield be(void 0);throw V}finally{S||t.abort()}})}return new Ia(u,t,i)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],i=this.iterator(),o=a=>({next:()=>{if(a.length===0){const u=i.next();e.push(u),t.push(u)}return a.shift()}});return[new Ia(()=>o(e),this.controller,this.client),new Ia(()=>o(t),this.controller,this.client)]}toReadableStream(){const e=this;let t;return BA({async start(){t=e[Symbol.asyncIterator]()},async pull(i){try{const{value:o,done:a}=await t.next();if(a)return i.close();const u=ug(JSON.stringify(o)+`
`);i.enqueue(u)}catch(o){i.error(o)}},async cancel(){var i;await((i=t.return)===null||i===void 0?void 0:i.call(t))}})}}function QP(n,e){return hi(this,arguments,function*(){var i,o,a,u;if(!n.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Xn("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Xn("Attempted to iterate over a response with no body");const d=new WP,m=new Ed,h=zA(n.body);try{for(var _=!0,T=pi(XP(h)),S;S=yield be(T.next()),i=S.done,!i;_=!0){u=S.value,_=!1;const I=u;for(const L of m.decode(I)){const F=d.decode(L);F&&(yield yield be(F))}}}catch(I){o={error:I}}finally{try{!_&&!i&&(a=T.return)&&(yield be(a.call(T)))}finally{if(o)throw o.error}}for(const I of m.flush()){const L=d.decode(I);L&&(yield yield be(L))}})}function XP(n){return hi(this,arguments,function*(){var t,i,o,a;let u=new Uint8Array;try{for(var d=!0,m=pi(n),h;h=yield be(m.next()),t=h.done,!t;d=!0){a=h.value,d=!1;const _=a;if(_==null)continue;const T=_ instanceof ArrayBuffer?new Uint8Array(_):typeof _=="string"?ug(_):_;let S=new Uint8Array(u.length+T.length);S.set(u),S.set(T,u.length),u=S;let I;for(;(I=JP(u))!==-1;)yield yield be(u.slice(0,I)),u=u.slice(I)}}catch(_){i={error:_}}finally{try{!d&&!t&&(o=m.return)&&(yield be(o.call(m)))}finally{if(i)throw i.error}}u.length>0&&(yield yield be(u))})}class WP{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,i,o]=ZP(e,":");return o.startsWith(" ")&&(o=o.substring(1)),t==="event"?this.event=o:t==="data"&&this.data.push(o),null}}function ZP(n,e){const t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function jP(n,e){const{response:t,requestLogID:i,retryOfRequestLogID:o,startTime:a}=e,u=await(async()=>{var d;if(e.options.stream)return dn(n).debug("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller,n):Ia.fromSSEResponse(t,e.controller,n);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const m=t.headers.get("content-type"),h=(d=m==null?void 0:m.split(";")[0])===null||d===void 0?void 0:d.trim();return(h==null?void 0:h.includes("application/json"))||(h==null?void 0:h.endsWith("+json"))?await t.json():await t.text()})();return dn(n).debug(`[${i}] response parsed`,co({retryOfRequestLogID:o,url:t.url,status:t.status,body:u,durationMs:Date.now()-a})),u}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cg extends Promise{constructor(e,t,i=jP){super(o=>{o(null)}),this.responsePromise=t,this.parseResponse=i,this.client=e}_thenUnwrap(e){return new cg(this.client,this.responsePromise,async(t,i)=>e(await this.parseResponse(t,i),i))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const XA=Symbol("brand.privateNullableHeaders");function*ek(n){if(!n)return;if(XA in n){const{values:i,nulls:o}=n;yield*i.entries();for(const a of o)yield[a,null];return}let e=!1,t;n instanceof Headers?t=n.entries():c0(n)?t=n:(e=!0,t=Object.entries(n??{}));for(let i of t){const o=i[0];if(typeof o!="string")throw new TypeError("expected header name to be a string");const a=c0(i[1])?i[1]:[i[1]];let u=!1;for(const d of a)d!==void 0&&(e&&!u&&(u=!0,yield[o,null]),yield[o,d])}}const su=n=>{const e=new Headers,t=new Set;for(const i of n){const o=new Set;for(const[a,u]of ek(i)){const d=a.toLowerCase();o.has(d)||(e.delete(a),o.add(d)),u===null?(e.delete(a),t.add(d)):(e.append(a,u),t.delete(d))}}return{[XA]:!0,values:e,nulls:t}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Wp=n=>{var e,t,i,o,a,u;if(typeof globalThis.process<"u")return(i=(t=(e=wb)===null||e===void 0?void 0:e[n])===null||t===void 0?void 0:t.trim())!==null&&i!==void 0?i:void 0;if(typeof globalThis.Deno<"u")return(u=(a=(o=globalThis.Deno.env)===null||o===void 0?void 0:o.get)===null||a===void 0?void 0:a.call(o,n))===null||u===void 0?void 0:u.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var WA;class Sd{constructor(e){var t,i,o,a,u,d,m,{baseURL:h=Wp("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:_=(t=Wp("GEMINI_API_KEY"))!==null&&t!==void 0?t:null,apiVersion:T="v1beta"}=e,S=Yf(e,["baseURL","apiKey","apiVersion"]);const I=Object.assign(Object.assign({apiKey:_,apiVersion:T},S),{baseURL:h||"https://generativelanguage.googleapis.com"});this.baseURL=I.baseURL,this.timeout=(i=I.timeout)!==null&&i!==void 0?i:Sd.DEFAULT_TIMEOUT,this.logger=(o=I.logger)!==null&&o!==void 0?o:console;const L="warn";this.logLevel=L,this.logLevel=(u=(a=m0(I.logLevel,"ClientOptions.logLevel",this))!==null&&a!==void 0?a:m0(Wp("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&u!==void 0?u:L,this.fetchOptions=I.fetchOptions,this.maxRetries=(d=I.maxRetries)!==null&&d!==void 0?d:2,this.fetch=(m=I.fetch)!==null&&m!==void 0?m:kP(),this.encoder=LP,this._options=I,this.apiKey=_,this.apiVersion=T,this.clientAdapter=I.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!t.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const t=su([e.headers]);if(!(t.values.has("authorization")||t.values.has("x-goog-api-key"))){if(this.apiKey)return su([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return su([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([t,i])=>typeof i<"u").map(([t,i])=>{if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(i)}`;if(i===null)return`${encodeURIComponent(t)}=`;throw new Xn(`Cannot stringify type ${typeof i}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${va}`}defaultIdempotencyKey(){return`stainless-node-retry-${TP()}`}makeStatusError(e,t,i,o){return hn.generate(e,t,i,o)}buildURL(e,t,i){const o=!this.baseURLOverridden()&&i||this.baseURL,a=SP(e)?new URL(e):new URL(o+(o.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),u=this.defaultQuery();return IP(u)||(t=Object.assign(Object.assign({},u),t)),typeof t=="object"&&t&&!Array.isArray(t)&&(a.search=this.stringifyQuery(t)),a.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const t=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${t}`}}async prepareRequest(e,{url:t,options:i}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,i){return this.request(Promise.resolve(i).then(o=>Object.assign({method:e,path:t},o)))}request(e,t=null){return new cg(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,i){var o,a,u;const d=await e,m=(o=d.maxRetries)!==null&&o!==void 0?o:this.maxRetries;t==null&&(t=m),await this.prepareOptions(d);const{req:h,url:_,timeout:T}=await this.buildRequest(d,{retryCount:m-t});await this.prepareRequest(h,{url:_,options:d});const S="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),I=i===void 0?"":`, retryOf: ${i}`,L=Date.now();if(dn(this).debug(`[${S}] sending request`,co({retryOfRequestLogID:i,method:d.method,url:_,options:d,headers:h.headers})),!((a=d.signal)===null||a===void 0)&&a.aborted)throw new Cm;const F=new AbortController,V=await this.fetchWithTimeout(_,h,T,F).catch(Am),K=Date.now();if(V instanceof globalThis.Error){const j=`retrying, ${t} attempts remaining`;if(!((u=d.signal)===null||u===void 0)&&u.aborted)throw new Cm;const oe=Sm(V)||/timed? ?out/i.test(String(V)+("cause"in V?String(V.cause):""));if(t)return dn(this).info(`[${S}] connection ${oe?"timed out":"failed"} - ${j}`),dn(this).debug(`[${S}] connection ${oe?"timed out":"failed"} (${j})`,co({retryOfRequestLogID:i,url:_,durationMs:K-L,message:V.message})),this.retryRequest(d,t,i??S);throw dn(this).info(`[${S}] connection ${oe?"timed out":"failed"} - error; no more retries left`),dn(this).debug(`[${S}] connection ${oe?"timed out":"failed"} (error; no more retries left)`,co({retryOfRequestLogID:i,url:_,durationMs:K-L,message:V.message})),oe?new PA:new Td({cause:V})}const ne=`[${S}${I}] ${h.method} ${_} ${V.ok?"succeeded":"failed"} with status ${V.status} in ${K-L}ms`;if(!V.ok){const j=await this.shouldRetry(V);if(t&&j){const N=`retrying, ${t} attempts remaining`;return await UP(V.body),dn(this).info(`${ne} - ${N}`),dn(this).debug(`[${S}] response error (${N})`,co({retryOfRequestLogID:i,url:V.url,status:V.status,headers:V.headers,durationMs:K-L})),this.retryRequest(d,t,i??S,V.headers)}const oe=j?"error; no more retries left":"error; not retryable";dn(this).info(`${ne} - ${oe}`);const de=await V.text().catch(N=>Am(N).message),ue=bP(de),x=ue?void 0:de;throw dn(this).debug(`[${S}] response error (${oe})`,co({retryOfRequestLogID:i,url:V.url,status:V.status,headers:V.headers,message:x,durationMs:Date.now()-L})),this.makeStatusError(V.status,ue,x,V.headers)}return dn(this).info(ne),dn(this).debug(`[${S}] response start`,co({retryOfRequestLogID:i,url:V.url,status:V.status,headers:V.headers,durationMs:K-L})),{response:V,options:d,controller:F,requestLogID:S,retryOfRequestLogID:i,startTime:L}}async fetchWithTimeout(e,t,i,o){const a=t||{},{signal:u,method:d}=a,m=Yf(a,["signal","method"]);u&&u.addEventListener("abort",()=>o.abort());const h=setTimeout(()=>o.abort(),i),_=globalThis.ReadableStream&&m.body instanceof globalThis.ReadableStream||typeof m.body=="object"&&m.body!==null&&Symbol.asyncIterator in m.body,T=Object.assign(Object.assign(Object.assign({signal:o.signal},_?{duplex:"half"}:{}),{method:"GET"}),m);d&&(T.method=d.toUpperCase());try{return await this.fetch.call(void 0,e,T)}finally{clearTimeout(h)}}async shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,i,o){var a;let u;const d=o==null?void 0:o.get("retry-after-ms");if(d){const h=parseFloat(d);Number.isNaN(h)||(u=h)}const m=o==null?void 0:o.get("retry-after");if(m&&!u){const h=parseFloat(m);Number.isNaN(h)?u=Date.parse(m)-Date.now():u=h*1e3}if(!(u&&0<=u&&u<60*1e3)){const h=(a=e.maxRetries)!==null&&a!==void 0?a:this.maxRetries;u=this.calculateDefaultRetryTimeoutMillis(t,h)}return await NP(u),this.makeRequest(e,t-1,i)}calculateDefaultRetryTimeoutMillis(e,t){const a=t-e,u=Math.min(.5*Math.pow(2,a),8),d=1-Math.random()*.25;return u*d*1e3}async buildRequest(e,{retryCount:t=0}={}){var i,o,a;const u=Object.assign({},e),{method:d,path:m,query:h,defaultBaseURL:_}=u,T=this.buildURL(m,h,_);"timeout"in u&&RP("timeout",u.timeout),u.timeout=(i=u.timeout)!==null&&i!==void 0?i:this.timeout;const{bodyHeaders:S,body:I}=this.buildBody({options:u}),L=await this.buildHeaders({options:e,method:d,bodyHeaders:S,retryCount:t});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:d,headers:L},u.signal&&{signal:u.signal}),globalThis.ReadableStream&&I instanceof globalThis.ReadableStream&&{duplex:"half"}),I&&{body:I}),(o=this.fetchOptions)!==null&&o!==void 0?o:{}),(a=u.fetchOptions)!==null&&a!==void 0?a:{}),url:T,timeout:u.timeout}}async buildHeaders({options:e,method:t,bodyHeaders:i,retryCount:o}){let a={};this.idempotencyHeader&&t!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const u=await this.authHeaders(e);let d=su([a,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(o)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),PP()),this._options.defaultHeaders,i,e.headers,u]);return this.validateHeaders(d),d.values}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};const i=su([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&i.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:VP(e)}:this.encoder({body:e,headers:i})}}Sd.DEFAULT_TIMEOUT=6e4;class Ht extends Sd{constructor(){super(...arguments),this.interactions=new QA(this)}}WA=Ht;Ht.GeminiNextGenAPIClient=WA;Ht.GeminiNextGenAPIClientError=Xn;Ht.APIError=hn;Ht.APIConnectionError=Td;Ht.APIConnectionTimeoutError=PA;Ht.APIUserAbortError=Cm;Ht.NotFoundError=LA;Ht.ConflictError=OA;Ht.RateLimitError=GA;Ht.BadRequestError=kA;Ht.AuthenticationError=VA;Ht.InternalServerError=qA;Ht.PermissionDeniedError=UA;Ht.UnprocessableEntityError=FA;Ht.toFile=BP;Ht.Interactions=QA;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tk(n,e){const t={},i=f(n,["name"]);return i!=null&&p(t,["_url","name"],i),t}function nk(n,e){const t={},i=f(n,["name"]);return i!=null&&p(t,["_url","name"],i),t}function ik(n,e){const t={},i=f(n,["sdkHttpResponse"]);return i!=null&&p(t,["sdkHttpResponse"],i),t}function rk(n,e){const t={},i=f(n,["sdkHttpResponse"]);return i!=null&&p(t,["sdkHttpResponse"],i),t}function sk(n,e,t){const i={};if(f(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=f(n,["tunedModelDisplayName"]);if(e!==void 0&&o!=null&&p(e,["displayName"],o),f(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=f(n,["epochCount"]);e!==void 0&&a!=null&&p(e,["tuningTask","hyperparameters","epochCount"],a);const u=f(n,["learningRateMultiplier"]);if(u!=null&&p(i,["tuningTask","hyperparameters","learningRateMultiplier"],u),f(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(f(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const d=f(n,["batchSize"]);e!==void 0&&d!=null&&p(e,["tuningTask","hyperparameters","batchSize"],d);const m=f(n,["learningRate"]);if(e!==void 0&&m!=null&&p(e,["tuningTask","hyperparameters","learningRate"],m),f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(f(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function ok(n,e,t){const i={};let o=f(t,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const I=f(n,["validationDataset"]);e!==void 0&&I!=null&&p(e,["supervisedTuningSpec"],y0(I))}else if(o==="PREFERENCE_TUNING"){const I=f(n,["validationDataset"]);e!==void 0&&I!=null&&p(e,["preferenceOptimizationSpec"],y0(I))}const a=f(n,["tunedModelDisplayName"]);e!==void 0&&a!=null&&p(e,["tunedModelDisplayName"],a);const u=f(n,["description"]);e!==void 0&&u!=null&&p(e,["description"],u);let d=f(t,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const I=f(n,["epochCount"]);e!==void 0&&I!=null&&p(e,["supervisedTuningSpec","hyperParameters","epochCount"],I)}else if(d==="PREFERENCE_TUNING"){const I=f(n,["epochCount"]);e!==void 0&&I!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],I)}let m=f(t,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const I=f(n,["learningRateMultiplier"]);e!==void 0&&I!=null&&p(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],I)}else if(m==="PREFERENCE_TUNING"){const I=f(n,["learningRateMultiplier"]);e!==void 0&&I!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],I)}let h=f(t,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const I=f(n,["exportLastCheckpointOnly"]);e!==void 0&&I!=null&&p(e,["supervisedTuningSpec","exportLastCheckpointOnly"],I)}else if(h==="PREFERENCE_TUNING"){const I=f(n,["exportLastCheckpointOnly"]);e!==void 0&&I!=null&&p(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],I)}let _=f(t,["config","method"]);if(_===void 0&&(_="SUPERVISED_FINE_TUNING"),_==="SUPERVISED_FINE_TUNING"){const I=f(n,["adapterSize"]);e!==void 0&&I!=null&&p(e,["supervisedTuningSpec","hyperParameters","adapterSize"],I)}else if(_==="PREFERENCE_TUNING"){const I=f(n,["adapterSize"]);e!==void 0&&I!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],I)}if(f(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(f(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const T=f(n,["labels"]);e!==void 0&&T!=null&&p(e,["labels"],T);const S=f(n,["beta"]);return e!==void 0&&S!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","beta"],S),i}function ak(n,e){const t={},i=f(n,["baseModel"]);i!=null&&p(t,["baseModel"],i);const o=f(n,["preTunedModel"]);o!=null&&p(t,["preTunedModel"],o);const a=f(n,["trainingDataset"]);a!=null&&_k(a);const u=f(n,["config"]);return u!=null&&sk(u,t),t}function lk(n,e){const t={},i=f(n,["baseModel"]);i!=null&&p(t,["baseModel"],i);const o=f(n,["preTunedModel"]);o!=null&&p(t,["preTunedModel"],o);const a=f(n,["trainingDataset"]);a!=null&&vk(a,t,e);const u=f(n,["config"]);return u!=null&&ok(u,t,e),t}function uk(n,e){const t={},i=f(n,["name"]);return i!=null&&p(t,["_url","name"],i),t}function ck(n,e){const t={},i=f(n,["name"]);return i!=null&&p(t,["_url","name"],i),t}function fk(n,e,t){const i={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&p(e,["_query","pageSize"],o);const a=f(n,["pageToken"]);e!==void 0&&a!=null&&p(e,["_query","pageToken"],a);const u=f(n,["filter"]);return e!==void 0&&u!=null&&p(e,["_query","filter"],u),i}function dk(n,e,t){const i={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&p(e,["_query","pageSize"],o);const a=f(n,["pageToken"]);e!==void 0&&a!=null&&p(e,["_query","pageToken"],a);const u=f(n,["filter"]);return e!==void 0&&u!=null&&p(e,["_query","filter"],u),i}function hk(n,e){const t={},i=f(n,["config"]);return i!=null&&fk(i,t),t}function pk(n,e){const t={},i=f(n,["config"]);return i!=null&&dk(i,t),t}function mk(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const o=f(n,["nextPageToken"]);o!=null&&p(t,["nextPageToken"],o);const a=f(n,["tunedModels"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>ZA(d))),p(t,["tuningJobs"],u)}return t}function gk(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const o=f(n,["nextPageToken"]);o!=null&&p(t,["nextPageToken"],o);const a=f(n,["tuningJobs"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>Rm(d))),p(t,["tuningJobs"],u)}return t}function yk(n,e){const t={},i=f(n,["name"]);i!=null&&p(t,["model"],i);const o=f(n,["name"]);return o!=null&&p(t,["endpoint"],o),t}function _k(n,e){const t={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=f(n,["examples"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),p(t,["examples","examples"],o)}return t}function vk(n,e,t){const i={};let o=f(t,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const u=f(n,["gcsUri"]);e!==void 0&&u!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(o==="PREFERENCE_TUNING"){const u=f(n,["gcsUri"]);e!==void 0&&u!=null&&p(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}let a=f(t,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const u=f(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(a==="PREFERENCE_TUNING"){const u=f(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&p(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}if(f(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function ZA(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const o=f(n,["name"]);o!=null&&p(t,["name"],o);const a=f(n,["state"]);a!=null&&p(t,["state"],pA(a));const u=f(n,["createTime"]);u!=null&&p(t,["createTime"],u);const d=f(n,["tuningTask","startTime"]);d!=null&&p(t,["startTime"],d);const m=f(n,["tuningTask","completeTime"]);m!=null&&p(t,["endTime"],m);const h=f(n,["updateTime"]);h!=null&&p(t,["updateTime"],h);const _=f(n,["description"]);_!=null&&p(t,["description"],_);const T=f(n,["baseModel"]);T!=null&&p(t,["baseModel"],T);const S=f(n,["_self"]);return S!=null&&p(t,["tunedModel"],yk(S)),t}function Rm(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const o=f(n,["name"]);o!=null&&p(t,["name"],o);const a=f(n,["state"]);a!=null&&p(t,["state"],pA(a));const u=f(n,["createTime"]);u!=null&&p(t,["createTime"],u);const d=f(n,["startTime"]);d!=null&&p(t,["startTime"],d);const m=f(n,["endTime"]);m!=null&&p(t,["endTime"],m);const h=f(n,["updateTime"]);h!=null&&p(t,["updateTime"],h);const _=f(n,["error"]);_!=null&&p(t,["error"],_);const T=f(n,["description"]);T!=null&&p(t,["description"],T);const S=f(n,["baseModel"]);S!=null&&p(t,["baseModel"],S);const I=f(n,["tunedModel"]);I!=null&&p(t,["tunedModel"],I);const L=f(n,["preTunedModel"]);L!=null&&p(t,["preTunedModel"],L);const F=f(n,["supervisedTuningSpec"]);F!=null&&p(t,["supervisedTuningSpec"],F);const V=f(n,["preferenceOptimizationSpec"]);V!=null&&p(t,["preferenceOptimizationSpec"],V);const K=f(n,["tuningDataStats"]);K!=null&&p(t,["tuningDataStats"],K);const ne=f(n,["encryptionSpec"]);ne!=null&&p(t,["encryptionSpec"],ne);const j=f(n,["partnerModelTuningSpec"]);j!=null&&p(t,["partnerModelTuningSpec"],j);const oe=f(n,["customBaseModel"]);oe!=null&&p(t,["customBaseModel"],oe);const de=f(n,["experiment"]);de!=null&&p(t,["experiment"],de);const ue=f(n,["labels"]);ue!=null&&p(t,["labels"],ue);const x=f(n,["outputUri"]);x!=null&&p(t,["outputUri"],x);const R=f(n,["pipelineJob"]);R!=null&&p(t,["pipelineJob"],R);const N=f(n,["serviceAccount"]);N!=null&&p(t,["serviceAccount"],N);const D=f(n,["tunedModelDisplayName"]);D!=null&&p(t,["tunedModelDisplayName"],D);const k=f(n,["veoTuningSpec"]);return k!=null&&p(t,["veoTuningSpec"],k),t}function Tk(n,e){const t={},i=f(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const o=f(n,["name"]);o!=null&&p(t,["name"],o);const a=f(n,["metadata"]);a!=null&&p(t,["metadata"],a);const u=f(n,["done"]);u!=null&&p(t,["done"],u);const d=f(n,["error"]);return d!=null&&p(t,["error"],d),t}function y0(n,e){const t={},i=f(n,["gcsUri"]);i!=null&&p(t,["validationDatasetUri"],i);const o=f(n,["vertexDatasetResource"]);return o!=null&&p(t,["validationDatasetUri"],o),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ek extends Dr{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Ao(Rr.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.get=async t=>await this.getInternal(t),this.tune=async t=>{var i;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const o={tunedModelName:t.baseModel};!((i=t.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(o.checkpointId=t.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},t),{preTunedModel:o});return a.baseModel=void 0,await this.tuneInternal(a)}else{const o=Object.assign({},t);return await this.tuneInternal(o)}else{const o=Object.assign({},t),a=await this.tuneMldevInternal(o);let u="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?u=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(u=a.name.split("/operations/")[0]),{name:u,state:mm.JOB_STATE_QUEUED}}}}async getInternal(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=ck(e);return d=me("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>Rm(_))}else{const h=uk(e);return d=me("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>ZA(_))}}async listInternal(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=pk(e);return d=me("tuningJobs",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=gk(_),S=new zE;return Object.assign(S,T),S})}else{const h=hk(e);return d=me("tunedModels",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=mk(_),S=new zE;return Object.assign(S,T),S})}}async cancel(e){var t,i,o,a;let u,d="",m={};if(this.apiClient.isVertexAI()){const h=nk(e);return d=me("{name}:cancel",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=rk(_),S=new HE;return Object.assign(S,T),S})}else{const h=tk(e);return d=me("{name}:cancel",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:_.headers},S})),u.then(_=>{const T=ik(_),S=new HE;return Object.assign(S,T),S})}}async tuneInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const d=lk(e,e);return a=me("tuningJobs",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:m.headers},_})),o.then(m=>Rm(m))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=ak(e);return a=me("tunedModels",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:m.headers},_})),o.then(m=>Tk(m))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Sk{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const Ak=1024*1024*8,Ck=3,Ik=1e3,wk=2,$f="x-goog-upload-status";async function Rk(n,e,t){var i;const o=await jA(n,e,t),a=await(o==null?void 0:o.json());if(((i=o==null?void 0:o.headers)===null||i===void 0?void 0:i[$f])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return a.file}async function bk(n,e,t){var i;const o=await jA(n,e,t),a=await(o==null?void 0:o.json());if(((i=o==null?void 0:o.headers)===null||i===void 0?void 0:i[$f])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const u=lA(a),d=new ig;return Object.assign(d,u),d}async function jA(n,e,t){var i,o;let a=0,u=0,d=new gm(new Response),m="upload";for(a=n.size;u<a;){const h=Math.min(Ak,a-u),_=n.slice(u,u+h);u+h>=a&&(m+=", finalize");let T=0,S=Ik;for(;T<Ck&&(d=await t.request({path:"",body:_,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":String(u),"Content-Length":String(h)}}}),!(!((i=d==null?void 0:d.headers)===null||i===void 0)&&i[$f]));)T++,await xk(S),S=S*wk;if(u+=h,((o=d==null?void 0:d.headers)===null||o===void 0?void 0:o[$f])!=="active")break;if(a<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return d}async function Nk(n){return{size:n.size,type:n.type}}function xk(n){return new Promise(e=>setTimeout(e,n))}class Mk{async upload(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Rk(e,t,i)}async uploadToFileSearchStore(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await bk(e,t,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Nk(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Dk{create(e,t,i){return new Pk(e,t,i)}}class Pk{constructor(e,t,i){this.url=e,this.headers=t,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const _0="x-goog-api-key";class kk{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(_0)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(_0,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Vk="gl-node/";class eC{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const t=new Ht({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=t.interactions,this._interactions}constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const i=xb(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const o=new kk(this.apiKey);this.apiClient=new ND({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:Vk+"web",uploader:new Mk,downloader:new Sk}),this.models=new $D(this.apiClient),this.live=new BD(this.apiClient,o,new Dk),this.batches=new sx(this.apiClient),this.chats=new Gx(this.models,this.apiClient),this.caches=new Lx(this.apiClient),this.files=new Xx(this.apiClient),this.operations=new QD(this.apiClient),this.authTokens=new fP(this.apiClient),this.tunings=new Ek(this.apiClient),this.fileSearchStores=new vP(this.apiClient)}}const Uk=({onSave:n,onCancel:e,uiLang:t,t:i,auth:o,initialBook:a})=>{const[u,d]=He.useState((a==null?void 0:a.title)||""),[m,h]=He.useState((a==null?void 0:a.author)||""),[_,T]=He.useState((a==null?void 0:a.language)||t),[S,I]=He.useState((a==null?void 0:a.publishStatus)||"local"),[L,F]=He.useState((a==null?void 0:a.ageGroup)||3),[V,K]=He.useState((a==null?void 0:a.backgroundColor)||FT[0].value),[ne,j]=He.useState((a==null?void 0:a.pages)||[{id:"1",imageUrl:"https://picsum.photos/seed/cover/800/450",text:""}]),[oe,de]=He.useState(0),[ue,x]=He.useState(!1),[R,N]=He.useState(!1),D=He.useRef(null),k=o.role==="admin",q=async(Z,he)=>new Promise(pe=>{const P=new Image;P.onload=()=>{const z=document.createElement("canvas");let le=P.width,ce=P.height;if(Z.length*.75<=he){pe(Z);return}const Ae=z.getContext("2d");if(!Ae){pe(Z);return}z.width=le,z.height=ce,Ae.drawImage(P,0,0,le,ce);let Re=.85,Ze=z.toDataURL("image/jpeg",Re);for(;Ze.length*.75>he&&Re>.1;)Re-=.1,Ze=z.toDataURL("image/jpeg",Re);for(;Ze.length*.75>he&&(le>200||ce>200);)le*=.9,ce*=.9,z.width=le,z.height=ce,Ae.drawImage(P,0,0,le,ce),Ze=z.toDataURL("image/jpeg",.6);pe(Ze)},P.onerror=()=>pe(Z),P.src=Z}),M=()=>{if(ne.length>=100)return;const Z={id:Date.now().toString(),imageUrl:"https://picsum.photos/seed/"+Math.random()+"/800/450",text:""};j([...ne,Z]),de(ne.length)},ke=(Z,he)=>{const pe=[...ne];pe[Z]={...pe[Z],...he},j(pe)},lt=Z=>{var pe;const he=(pe=Z.target.files)==null?void 0:pe[0];if(he){if(!k&&he.size>2097152){alert("Little Explorer, this photo is too heavy for our garden! Please pick a smaller one (under 2MB).");return}const z=new FileReader;z.onloadend=()=>{ke(oe,{imageUrl:z.result})},z.readAsDataURL(he)}},Q=async()=>{var he,pe,P;if(!k||ue)return;const Z=ne[oe].text.trim();if(!Z){alert("Garden Keeper, please write the story text for this page first so the magic knows what to draw!");return}x(!0);try{const z=new eC({apiKey:"your_gemini_api_key_here"}),le=`A whimsical, high-quality children's book illustration for the following scene: "${Z}". Style: Vibrant colors, friendly characters, soft textures, professional digital painting, no text inside the image.`,ce=await z.models.generateContent({model:"gemini-2.5-flash-image",contents:{parts:[{text:le}]},config:{imageConfig:{aspectRatio:"16:9"}}});if(!((P=(pe=(he=ce.candidates)==null?void 0:he[0])==null?void 0:pe.content)!=null&&P.parts))throw new Error("No image generated.");for(const Te of ce.candidates[0].content.parts)if(Te.inlineData){const Ae=Te.inlineData.data,Ze=`data:${Te.inlineData.mimeType||"image/png"};base64,${Ae}`,je=await q(Ze,2*1024*1024);ke(oe,{imageUrl:je});break}}catch(z){console.error("AI Generation Error:",z),alert("Magic wand failure! Try again.")}finally{x(!1)}},ee=()=>{if(ue||R)return;if(!u.trim()){alert("Please enter a title!");return}N(!0);const Z={id:(a==null?void 0:a.id)||"book-"+Date.now(),title:u.trim(),author:m.trim()||"Garden Scribe",creatorName:(a==null?void 0:a.creatorName)||"",isApproved:k?!0:(a==null?void 0:a.isApproved)||!1,coverImage:ne[0].imageUrl,language:_,ageGroup:L,backgroundColor:V,pages:ne.map(he=>({...he,text:he.text.trim()})),createdAt:(a==null?void 0:a.createdAt)||Date.now(),universalRating:(a==null?void 0:a.universalRating)||0,personalRating:(a==null?void 0:a.personalRating)||0,publishStatus:S};n(Z)};return O.jsxs("div",{className:"fixed inset-0 bg-[#fff5f7] z-50 flex flex-col overflow-hidden",children:[O.jsxs("header",{className:"bg-rose-600 p-2 md:p-3 flex items-center justify-between shadow-lg text-white z-20",children:[O.jsxs("div",{className:"flex items-center gap-2 md:gap-4",children:[O.jsx("button",{onClick:e,className:"text-rose-100 font-black uppercase px-4 md:px-6 py-1 md:py-2 rounded-full bg-white/10 hover:bg-rose-800 transition-all border border-white/20 text-[8px] md:text-sm",children:i("back")}),O.jsx("div",{className:"hidden sm:block",children:O.jsx("h2",{className:"text-sm md:text-xl font-kids text-rose-50",children:"Garden Atelier"})})]}),O.jsxs("div",{className:"flex flex-col items-center gap-1",children:[O.jsx("div",{className:"flex items-center gap-2 bg-white/10 p-1 rounded-full border border-white/20 px-3 overflow-x-auto no-scrollbar max-w-[50vw]",children:mo.map(Z=>O.jsx("button",{type:"button",onClick:()=>T(Z.code),className:`w-8 h-8 md:w-10 md:h-10 flex items-center justify-center rounded-full transition-all flex-shrink-0 ${_===Z.code?"bg-amber-400 scale-110 shadow-md ring-2 ring-white":"opacity-50 grayscale hover:opacity-100 hover:grayscale-0"}`,children:O.jsx("span",{className:"text-xl md:text-2xl",children:Z.flag})},Z.code))}),O.jsx("span",{className:"text-[7px] md:text-[9px] font-black uppercase opacity-60 tracking-widest",children:"Story Language"})]}),O.jsx("button",{onClick:ee,disabled:ue||R,className:`px-4 md:px-10 py-1 md:py-2 rounded-full font-black uppercase text-[10px] md:text-base shadow-xl transition-all flex items-center gap-2 border-b-2 md:border-b-4 ${ue||R?"bg-gray-400 border-gray-600 cursor-not-allowed":"bg-amber-400 text-rose-950 hover:bg-amber-300 active:scale-95 border-amber-600 active:border-b-0"}`,children:ue?"WAND MAGIC...":R?"PLANTING...":i("finish")})]}),O.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[O.jsx("aside",{className:"w-20 md:w-56 bg-rose-50 border-r border-rose-100 flex flex-col overflow-y-auto no-scrollbar shadow-inner p-2 md:p-4",children:O.jsxs("div",{className:"grid gap-2 md:gap-6",children:[O.jsxs("div",{className:"text-[8px] md:text-[10px] font-black text-rose-300 uppercase tracking-widest text-center",children:[ne.length," / 100"]}),ne.map((Z,he)=>O.jsxs("div",{onClick:()=>de(he),className:`relative group cursor-pointer rounded-xl md:rounded-[2rem] overflow-hidden border-2 md:border-4 transition-all transform ${oe===he?"border-amber-400 scale-105 shadow-md z-10":"border-white hover:border-rose-200"}`,children:[O.jsx("img",{src:Z.imageUrl,alt:`P${he+1}`,className:"w-full h-12 md:h-24 object-cover"}),O.jsx("div",{className:"absolute inset-0 bg-rose-900/10 flex items-center justify-center text-white font-black text-[10px] md:text-xl",children:he+1})]},Z.id)),ne.length<100&&O.jsx("button",{onClick:M,className:"h-12 md:h-24 border-2 border-dashed border-rose-200 rounded-xl md:rounded-[2rem] text-rose-300 flex items-center justify-center bg-white/50 hover:bg-white",children:O.jsx("span",{className:"text-xl md:text-3xl",children:""})})]})}),O.jsx("main",{className:"flex-1 p-2 md:p-6 overflow-y-auto bg-gradient-to-br from-white to-pink-50 flex flex-col items-center",children:O.jsxs("div",{className:"w-full max-w-5xl space-y-3 md:space-y-6",children:[O.jsxs("div",{className:"bg-white p-3 md:p-6 rounded-2xl md:rounded-3xl shadow-sm border border-rose-100 grid grid-cols-2 gap-3",children:[O.jsxs("div",{className:"space-y-1",children:[O.jsx("label",{className:"text-[7px] md:text-[10px] font-black text-rose-300 uppercase px-1",children:i("titlePrompt")}),O.jsx("input",{type:"text",value:u,onChange:Z=>d(Z.target.value),placeholder:"Title...",className:"w-full text-xs md:text-2xl font-kids border-none focus:ring-0 outline-none p-2 md:p-3 bg-rose-50/50 rounded-lg text-rose-950"})]}),O.jsxs("div",{className:"space-y-1",children:[O.jsx("label",{className:"text-[7px] md:text-[10px] font-black text-rose-300 uppercase px-1",children:"Storyteller"}),O.jsx("input",{type:"text",value:m,onChange:Z=>h(Z.target.value),placeholder:"Author...",className:"w-full text-xs md:text-xl font-kids border-none focus:ring-0 outline-none p-2 md:p-3 bg-rose-50/50 rounded-lg text-rose-950"})]}),O.jsxs("div",{className:"space-y-1",children:[O.jsx("label",{className:"text-[7px] md:text-[10px] font-black text-rose-300 uppercase px-1",children:"Publish Destination"}),O.jsxs("div",{className:"flex gap-2",children:[O.jsx("button",{onClick:()=>I("local"),className:`flex-1 py-1 md:py-2 rounded-full text-[8px] md:text-xs font-black uppercase transition-all ${S==="local"?"bg-rose-500 text-white shadow-sm":"bg-rose-50 text-rose-300"}`,children:i("publishLocal")}),O.jsx("button",{onClick:()=>I("universal"),className:`flex-1 py-1 md:py-2 rounded-full text-[8px] md:text-xs font-black uppercase transition-all ${S==="universal"?"bg-emerald-500 text-white shadow-sm":"bg-rose-50 text-rose-300"}`,children:i("publishUniversal")})]})]}),O.jsxs("div",{className:"space-y-1",children:[O.jsx("label",{className:"text-[7px] md:text-[10px] font-black text-rose-300 uppercase px-1",children:"Age Group"}),O.jsx("div",{className:"flex gap-1 md:gap-3 p-1 overflow-x-auto no-scrollbar",children:aA.map(Z=>O.jsxs("button",{onClick:()=>F(Z),className:`px-3 md:px-8 py-1 md:py-2 rounded-full text-[8px] md:text-xs font-black uppercase transition-all ${L===Z?"bg-rose-500 text-white shadow-sm scale-105":"bg-rose-50 text-rose-300"}`,children:[Z,"+"]},Z))})]}),O.jsxs("div",{className:"col-span-2 space-y-1 pt-2",children:[O.jsx("label",{className:"text-[7px] md:text-[10px] font-black text-rose-300 uppercase px-1",children:"Background Color"}),O.jsx("div",{className:"flex gap-3 p-1 overflow-x-auto no-scrollbar",children:FT.map(Z=>O.jsx("button",{onClick:()=>K(Z.value),className:`w-10 h-10 md:w-12 md:h-12 rounded-full border-4 transition-all transform hover:scale-110 shadow-sm ${V===Z.value?"border-amber-400 scale-125 shadow-md":"border-white"}`,style:{backgroundColor:Z.value},title:Z.name},Z.value))})]})]}),O.jsxs("div",{className:"bg-white rounded-[2rem] md:rounded-[3rem] shadow-lg overflow-hidden flex flex-col lg:flex-row h-auto min-h-[300px] border-4 md:border-8 border-white relative group",style:{backgroundColor:V},children:[O.jsxs("div",{className:"flex-[3] relative bg-white/30 backdrop-blur-sm overflow-hidden min-h-[200px] flex items-center justify-center",children:[ue?O.jsxs("div",{className:"flex flex-col items-center gap-4 animate-pulse p-8 text-center",children:[O.jsx("span",{className:"text-5xl md:text-7xl",children:""}),O.jsx("span",{className:"text-[10px] md:text-base font-black text-rose-600 uppercase tracking-widest",children:"Wand is spinning..."})]}):O.jsxs(O.Fragment,{children:[O.jsx("img",{src:ne[oe].imageUrl,alt:"Current Page",className:"w-full h-full object-contain"}),O.jsxs("div",{className:"absolute inset-0 opacity-0 hover:opacity-100 transition-all bg-rose-900/40 flex flex-col items-center justify-center gap-4 p-4 text-center backdrop-blur-[2px]",children:[O.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-3",children:[O.jsx("button",{onClick:()=>{var Z;return(Z=D.current)==null?void 0:Z.click()},className:"bg-white text-rose-950 px-8 py-3 rounded-full font-black uppercase text-[10px] md:text-xs shadow-lg hover:bg-amber-100 transition-colors",children:i("selectImage")}),k&&O.jsx("button",{onClick:Q,className:"bg-amber-400 text-rose-950 px-8 py-3 rounded-full font-black uppercase text-[10px] md:text-xs shadow-lg flex items-center gap-2 hover:bg-amber-300 transition-colors",children:" Magic Wand"})]}),O.jsxs("div",{className:"bg-black/60 backdrop-blur-sm rounded-2xl p-4 max-w-[85%] border border-white/30",children:[O.jsx("p",{className:"text-white font-black text-[10px] uppercase tracking-tighter mb-1",children:"Garden Tip"}),O.jsxs("p",{className:"text-white/90 text-[9px] md:text-[11px] font-bold leading-tight",children:["16:9 ratio is perfect for Smartphones!",O.jsx("br",{}),"4:3 is lovely for Tablets and iPads!"]}),!k&&O.jsx("span",{className:"mt-2 inline-block text-amber-300 font-black text-[9px] uppercase tracking-tighter bg-black/40 px-3 py-1 rounded-full border border-white/10",children:"Max 2MB per photo"})]})]})]}),O.jsx("input",{type:"file",ref:D,onChange:lt,accept:"image/*",className:"hidden"})]}),O.jsxs("div",{className:"flex-[2] p-4 md:p-8 flex flex-col justify-between",style:{backgroundColor:`${V}dd`},children:[O.jsxs("div",{children:[O.jsxs("span",{className:"text-[10px] md:text-[12px] font-black text-rose-400 tracking-widest uppercase mb-1 block",children:["Petal ",oe+1]}),O.jsx("textarea",{value:ne[oe].text,onChange:Z=>ke(oe,{text:Z.target.value}),placeholder:i("pageText"),className:"w-full text-sm md:text-xl font-medium text-rose-950 outline-none resize-none border-none placeholder:text-rose-200 italic leading-relaxed min-h-[100px] md:min-h-[200px] font-kids bg-transparent"})]}),O.jsxs("div",{className:"flex gap-2 mt-4",children:[O.jsx("button",{onClick:()=>de(Math.max(0,oe-1)),disabled:oe===0,className:"flex-1 py-3 rounded-full font-black uppercase text-[10px] md:text-xs bg-white/50 text-rose-400 disabled:opacity-30",children:i("back")}),oe<ne.length-1?O.jsx("button",{onClick:()=>de(oe+1),className:"flex-1 bg-rose-500 text-white py-3 rounded-full font-black uppercase text-[10px] md:text-xs shadow-sm",children:i("next")}):O.jsx("button",{onClick:M,className:"flex-1 bg-amber-400 text-rose-950 py-3 rounded-full font-black uppercase text-[10px] md:text-xs shadow-md",children:"+ Page"})]})]})]})]})})]})]})},Lk=()=>{};var v0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tC=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let o=n.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},Ok=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const o=n[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const a=n[t++];e[i++]=String.fromCharCode((o&31)<<6|a&63)}else if(o>239&&o<365){const a=n[t++],u=n[t++],d=n[t++],m=((o&7)<<18|(a&63)<<12|(u&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(m>>10)),e[i++]=String.fromCharCode(56320+(m&1023))}else{const a=n[t++],u=n[t++];e[i++]=String.fromCharCode((o&15)<<12|(a&63)<<6|u&63)}}return e.join("")},nC={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<n.length;o+=3){const a=n[o],u=o+1<n.length,d=u?n[o+1]:0,m=o+2<n.length,h=m?n[o+2]:0,_=a>>2,T=(a&3)<<4|d>>4;let S=(d&15)<<2|h>>6,I=h&63;m||(I=64,u||(S=64)),i.push(t[_],t[T],t[S],t[I])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(tC(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Ok(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<n.length;){const a=t[n.charAt(o++)],d=o<n.length?t[n.charAt(o)]:0;++o;const h=o<n.length?t[n.charAt(o)]:64;++o;const T=o<n.length?t[n.charAt(o)]:64;if(++o,a==null||d==null||h==null||T==null)throw new Fk;const S=a<<2|d>>4;if(i.push(S),h!==64){const I=d<<4&240|h>>2;if(i.push(I),T!==64){const L=h<<6&192|T;i.push(L)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Fk extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Gk=function(n){const e=tC(n);return nC.encodeByteArray(e,!0)},Qf=function(n){return Gk(n).replace(/\./g,"")},iC=function(n){try{return nC.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qk(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bk=()=>qk().__FIREBASE_DEFAULTS__,zk=()=>{if(typeof process>"u"||typeof v0>"u")return;const n=v0.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Hk=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&iC(n[1]);return e&&JSON.parse(e)},Ad=()=>{try{return Lk()||Bk()||zk()||Hk()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},rC=n=>{var e,t;return(t=(e=Ad())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},sC=n=>{const e=rC(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},oC=()=>{var n;return(n=Ad())==null?void 0:n.config},aC=n=>{var e;return(e=Ad())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kk{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Co(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function fg(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lC(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Qf(JSON.stringify(t)),Qf(JSON.stringify(u)),""].join(".")}const pu={};function Yk(){const n={prod:[],emulator:[]};for(const e of Object.keys(pu))pu[e]?n.emulator.push(e):n.prod.push(e);return n}function Jk(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let T0=!1;function dg(n,e){if(typeof window>"u"||typeof document>"u"||!Co(window.location.host)||pu[n]===e||pu[n]||T0)return;pu[n]=e;function t(S){return`__firebase__banner__${S}`}const i="__firebase__banner",a=Yk().prod.length>0;function u(){const S=document.getElementById(i);S&&S.remove()}function d(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function m(S,I){S.setAttribute("width","24"),S.setAttribute("id",I),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function h(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{T0=!0,u()},S}function _(S,I){S.setAttribute("id",I),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function T(){const S=Jk(i),I=t("text"),L=document.getElementById(I)||document.createElement("span"),F=t("learnmore"),V=document.getElementById(F)||document.createElement("a"),K=t("preprendIcon"),ne=document.getElementById(K)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const j=S.element;d(j),_(V,F);const oe=h();m(ne,K),j.append(ne,L,V,oe),document.body.appendChild(j)}a?(L.innerText="Preview backend disconnected.",ne.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ne.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,L.innerText="Preview backend running in this workspace."),L.setAttribute("id",I)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function an(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function $k(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(an())}function Qk(){var e;const n=(e=Ad())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Xk(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Wk(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Zk(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function jk(){const n=an();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function eV(){return!Qk()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function tV(){try{return typeof indexedDB=="object"}catch{return!1}}function nV(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var a;e(((a=o.error)==null?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iV="FirebaseError";class Wi extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=iV,Object.setPrototypeOf(this,Wi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,xu.prototype.create)}}class xu{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,a=this.errors[e],u=a?rV(a,i):"Error",d=`${this.serviceName}: ${u} (${o}).`;return new Wi(o,d,i)}}function rV(n,e){return n.replace(sV,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const sV=/\{\$([^}]+)}/g;function oV(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function yo(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const a=n[o],u=e[o];if(E0(a)&&E0(u)){if(!yo(a,u))return!1}else if(a!==u)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function E0(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mu(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function lu(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,a]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(a)}}),e}function uu(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function aV(n,e){const t=new lV(n,e);return t.subscribe.bind(t)}class lV{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");uV(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=Zp),o.error===void 0&&(o.error=Zp),o.complete===void 0&&(o.complete=Zp);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function uV(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Zp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ut(n){return n&&n._delegate?n._delegate:n}class As{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cV{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new Kk;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(dV(e))try{this.getOrInitializeService({instanceIdentifier:fo})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:o});i.resolve(a)}catch{}}}}clearInstance(e=fo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=fo){return this.instances.has(e)}getOptions(e=fo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[a,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);i===d&&u.resolve(o)}return o}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(i)??new Set;o.add(e),this.onInitCallbacks.set(i,o);const a=this.instances.get(i);return a&&e(a,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:fV(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=fo){return this.component?this.component.multipleInstances?e:fo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function fV(n){return n===fo?void 0:n}function dV(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hV{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new cV(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ge;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ge||(Ge={}));const pV={debug:Ge.DEBUG,verbose:Ge.VERBOSE,info:Ge.INFO,warn:Ge.WARN,error:Ge.ERROR,silent:Ge.SILENT},mV=Ge.INFO,gV={[Ge.DEBUG]:"log",[Ge.VERBOSE]:"log",[Ge.INFO]:"info",[Ge.WARN]:"warn",[Ge.ERROR]:"error"},yV=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),o=gV[e];if(o)console[o](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class hg{constructor(e){this.name=e,this._logLevel=mV,this._logHandler=yV,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ge))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?pV[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ge.DEBUG,...e),this._logHandler(this,Ge.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ge.VERBOSE,...e),this._logHandler(this,Ge.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ge.INFO,...e),this._logHandler(this,Ge.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ge.WARN,...e),this._logHandler(this,Ge.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ge.ERROR,...e),this._logHandler(this,Ge.ERROR,...e)}}const _V=(n,e)=>e.some(t=>n instanceof t);let S0,A0;function vV(){return S0||(S0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function TV(){return A0||(A0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const uC=new WeakMap,bm=new WeakMap,cC=new WeakMap,jp=new WeakMap,pg=new WeakMap;function EV(n){const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("success",a),n.removeEventListener("error",u)},a=()=>{t(vs(n.result)),o()},u=()=>{i(n.error),o()};n.addEventListener("success",a),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&uC.set(t,n)}).catch(()=>{}),pg.set(e,n),e}function SV(n){if(bm.has(n))return;const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",u),n.removeEventListener("abort",u)},a=()=>{t(),o()},u=()=>{i(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",a),n.addEventListener("error",u),n.addEventListener("abort",u)});bm.set(n,e)}let Nm={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return bm.get(n);if(e==="objectStoreNames")return n.objectStoreNames||cC.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return vs(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function AV(n){Nm=n(Nm)}function CV(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(em(this),e,...t);return cC.set(i,e.sort?e.sort():[e]),vs(i)}:TV().includes(n)?function(...e){return n.apply(em(this),e),vs(uC.get(this))}:function(...e){return vs(n.apply(em(this),e))}}function IV(n){return typeof n=="function"?CV(n):(n instanceof IDBTransaction&&SV(n),_V(n,vV())?new Proxy(n,Nm):n)}function vs(n){if(n instanceof IDBRequest)return EV(n);if(jp.has(n))return jp.get(n);const e=IV(n);return e!==n&&(jp.set(n,e),pg.set(e,n)),e}const em=n=>pg.get(n);function wV(n,e,{blocked:t,upgrade:i,blocking:o,terminated:a}={}){const u=indexedDB.open(n,e),d=vs(u);return i&&u.addEventListener("upgradeneeded",m=>{i(vs(u.result),m.oldVersion,m.newVersion,vs(u.transaction),m)}),t&&u.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),d.then(m=>{a&&m.addEventListener("close",()=>a()),o&&m.addEventListener("versionchange",h=>o(h.oldVersion,h.newVersion,h))}).catch(()=>{}),d}const RV=["get","getKey","getAll","getAllKeys","count"],bV=["put","add","delete","clear"],tm=new Map;function C0(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(tm.get(e))return tm.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=bV.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||RV.includes(t)))return;const a=async function(u,...d){const m=this.transaction(u,o?"readwrite":"readonly");let h=m.store;return i&&(h=h.index(d.shift())),(await Promise.all([h[t](...d),o&&m.done]))[0]};return tm.set(e,a),a}AV(n=>({...n,get:(e,t,i)=>C0(e,t)||n.get(e,t,i),has:(e,t)=>!!C0(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NV{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(xV(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function xV(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const xm="@firebase/app",I0="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const br=new hg("@firebase/app"),MV="@firebase/app-compat",DV="@firebase/analytics-compat",PV="@firebase/analytics",kV="@firebase/app-check-compat",VV="@firebase/app-check",UV="@firebase/auth",LV="@firebase/auth-compat",OV="@firebase/database",FV="@firebase/data-connect",GV="@firebase/database-compat",qV="@firebase/functions",BV="@firebase/functions-compat",zV="@firebase/installations",HV="@firebase/installations-compat",KV="@firebase/messaging",YV="@firebase/messaging-compat",JV="@firebase/performance",$V="@firebase/performance-compat",QV="@firebase/remote-config",XV="@firebase/remote-config-compat",WV="@firebase/storage",ZV="@firebase/storage-compat",jV="@firebase/firestore",eU="@firebase/ai",tU="@firebase/firestore-compat",nU="firebase",iU="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mm="[DEFAULT]",rU={[xm]:"fire-core",[MV]:"fire-core-compat",[PV]:"fire-analytics",[DV]:"fire-analytics-compat",[VV]:"fire-app-check",[kV]:"fire-app-check-compat",[UV]:"fire-auth",[LV]:"fire-auth-compat",[OV]:"fire-rtdb",[FV]:"fire-data-connect",[GV]:"fire-rtdb-compat",[qV]:"fire-fn",[BV]:"fire-fn-compat",[zV]:"fire-iid",[HV]:"fire-iid-compat",[KV]:"fire-fcm",[YV]:"fire-fcm-compat",[JV]:"fire-perf",[$V]:"fire-perf-compat",[QV]:"fire-rc",[XV]:"fire-rc-compat",[WV]:"fire-gcs",[ZV]:"fire-gcs-compat",[jV]:"fire-fst",[tU]:"fire-fst-compat",[eU]:"fire-vertex","fire-js":"fire-js",[nU]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xf=new Map,sU=new Map,Dm=new Map;function w0(n,e){try{n.container.addComponent(e)}catch(t){br.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function _o(n){const e=n.name;if(Dm.has(e))return br.debug(`There were multiple attempts to register component ${e}.`),!1;Dm.set(e,n);for(const t of Xf.values())w0(t,n);for(const t of sU.values())w0(t,n);return!0}function Cd(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function An(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oU={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ts=new xu("app","Firebase",oU);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aU{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new As("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ts.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Io=iU;function fC(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:Mm,automaticDataCollectionEnabled:!0,...e},o=i.name;if(typeof o!="string"||!o)throw Ts.create("bad-app-name",{appName:String(o)});if(t||(t=oC()),!t)throw Ts.create("no-options");const a=Xf.get(o);if(a){if(yo(t,a.options)&&yo(i,a.config))return a;throw Ts.create("duplicate-app",{appName:o})}const u=new hV(o);for(const m of Dm.values())u.addComponent(m);const d=new aU(t,i,u);return Xf.set(o,d),d}function mg(n=Mm){const e=Xf.get(n);if(!e&&n===Mm&&oC())return fC();if(!e)throw Ts.create("no-app",{appName:n});return e}function Bi(n,e,t){let i=rU[n]??n;t&&(i+=`-${t}`);const o=i.match(/\s|\//),a=e.match(/\s|\//);if(o||a){const u=[`Unable to register library "${i}" with version "${e}":`];o&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&a&&u.push("and"),a&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),br.warn(u.join(" "));return}_o(new As(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lU="firebase-heartbeat-database",uU=1,Tu="firebase-heartbeat-store";let nm=null;function dC(){return nm||(nm=wV(lU,uU,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Tu)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ts.create("idb-open",{originalErrorMessage:n.message})})),nm}async function cU(n){try{const t=(await dC()).transaction(Tu),i=await t.objectStore(Tu).get(hC(n));return await t.done,i}catch(e){if(e instanceof Wi)br.warn(e.message);else{const t=Ts.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});br.warn(t.message)}}}async function R0(n,e){try{const i=(await dC()).transaction(Tu,"readwrite");await i.objectStore(Tu).put(e,hC(n)),await i.done}catch(t){if(t instanceof Wi)br.warn(t.message);else{const i=Ts.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});br.warn(i.message)}}}function hC(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fU=1024,dU=30;class hU{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new mU(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=b0();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(u=>u.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:o}),this._heartbeatsCache.heartbeats.length>dU){const u=gU(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){br.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=b0(),{heartbeatsToSend:i,unsentEntries:o}=pU(this._heartbeatsCache.heartbeats),a=Qf(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return br.warn(t),""}}}function b0(){return new Date().toISOString().substring(0,10)}function pU(n,e=fU){const t=[];let i=n.slice();for(const o of n){const a=t.find(u=>u.agent===o.agent);if(a){if(a.dates.push(o.date),N0(t)>e){a.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),N0(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class mU{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return tV()?nV().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await cU(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return R0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return R0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function N0(n){return Qf(JSON.stringify({version:2,heartbeats:n})).length}function gU(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yU(n){_o(new As("platform-logger",e=>new NV(e),"PRIVATE")),_o(new As("heartbeat",e=>new hU(e),"PRIVATE")),Bi(xm,I0,n),Bi(xm,I0,"esm2020"),Bi("fire-js","")}yU("");var _U="firebase",vU="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Bi(_U,vU,"app");function pC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const TU=pC,mC=new xu("auth","Firebase",pC());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wf=new hg("@firebase/auth");function EU(n,...e){Wf.logLevel<=Ge.WARN&&Wf.warn(`Auth (${Io}): ${n}`,...e)}function Pf(n,...e){Wf.logLevel<=Ge.ERROR&&Wf.error(`Auth (${Io}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wn(n,...e){throw yg(n,...e)}function mi(n,...e){return yg(n,...e)}function gg(n,e,t){const i={...TU(),[e]:t};return new xu("auth","Firebase",i).create(e,{appName:n.name})}function Ir(n){return gg(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function SU(n,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&Wn(n,"argument-error"),gg(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function yg(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return mC.create(n,...e)}function Ie(n,e,...t){if(!n)throw yg(e,...t)}function Ar(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Pf(e),new Error(e)}function Nr(n,e){n||Ar(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pm(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function AU(){return x0()==="http:"||x0()==="https:"}function x0(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CU(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(AU()||Wk()||"connection"in navigator)?navigator.onLine:!0}function IU(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du{constructor(e,t){this.shortDelay=e,this.longDelay=t,Nr(t>e,"Short delay should be less than long delay!"),this.isMobile=$k()||Zk()}get(){return CU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _g(n,e){Nr(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ar("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ar("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ar("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wU={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RU=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],bU=new Du(3e4,6e4);function kr(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Zi(n,e,t,i,o={}){return yC(n,o,async()=>{let a={},u={};i&&(e==="GET"?u=i:a={body:JSON.stringify(i)});const d=Mu({key:n.config.apiKey,...u}).slice(1),m=await n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);const h={method:e,headers:m,...a};return Xk()||(h.referrerPolicy="no-referrer"),n.emulatorConfig&&Co(n.emulatorConfig.host)&&(h.credentials="include"),gC.fetch()(await _C(n,n.config.apiHost,t,d),h)})}async function yC(n,e,t){n._canInitEmulator=!1;const i={...wU,...e};try{const o=new xU(n),a=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const u=await a.json();if("needConfirmation"in u)throw Af(n,"account-exists-with-different-credential",u);if(a.ok&&!("errorMessage"in u))return u;{const d=a.ok?u.errorMessage:u.error.message,[m,h]=d.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw Af(n,"credential-already-in-use",u);if(m==="EMAIL_EXISTS")throw Af(n,"email-already-in-use",u);if(m==="USER_DISABLED")throw Af(n,"user-disabled",u);const _=i[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw gg(n,_,h);Wn(n,_)}}catch(o){if(o instanceof Wi)throw o;Wn(n,"network-request-failed",{message:String(o)})}}async function Pu(n,e,t,i,o={}){const a=await Zi(n,e,t,i,o);return"mfaPendingCredential"in a&&Wn(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function _C(n,e,t,i){const o=`${e}${t}?${i}`,a=n,u=a.config.emulator?_g(n.config,o):`${n.config.apiScheme}://${o}`;return RU.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(u).toString():u}function NU(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class xU{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(mi(this.auth,"network-request-failed")),bU.get())})}}function Af(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=mi(n,e,i);return o.customData._tokenResponse=t,o}function M0(n){return n!==void 0&&n.enterprise!==void 0}class MU{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return NU(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function DU(n,e){return Zi(n,"GET","/v2/recaptchaConfig",kr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PU(n,e){return Zi(n,"POST","/v1/accounts:delete",e)}async function Zf(n,e){return Zi(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function kU(n,e=!1){const t=Ut(n),i=await t.getIdToken(e),o=vg(i);Ie(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const a=typeof o.firebase=="object"?o.firebase:void 0,u=a==null?void 0:a.sign_in_provider;return{claims:o,token:i,authTime:mu(im(o.auth_time)),issuedAtTime:mu(im(o.iat)),expirationTime:mu(im(o.exp)),signInProvider:u||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function im(n){return Number(n)*1e3}function vg(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return Pf("JWT malformed, contained fewer than 3 sections"),null;try{const o=iC(t);return o?JSON.parse(o):(Pf("Failed to decode base64 JWT payload"),null)}catch(o){return Pf("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function D0(n){const e=vg(n);return Ie(e,"internal-error"),Ie(typeof e.exp<"u","internal-error"),Ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ka(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Wi&&VU(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function VU({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UU{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=mu(this.lastLoginAt),this.creationTime=mu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jf(n){var T;const e=n.auth,t=await n.getIdToken(),i=await ka(n,Zf(e,{idToken:t}));Ie(i==null?void 0:i.users.length,e,"internal-error");const o=i.users[0];n._notifyReloadListener(o);const a=(T=o.providerUserInfo)!=null&&T.length?vC(o.providerUserInfo):[],u=OU(n.providerData,a),d=n.isAnonymous,m=!(n.email&&o.passwordHash)&&!(u!=null&&u.length),h=d?m:!1,_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new km(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(n,_)}async function LU(n){const e=Ut(n);await jf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function OU(n,e){return[...n.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function vC(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FU(n,e){const t=await yC(n,{},async()=>{const i=Mu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:a}=n.config,u=await _C(n,o,"/v1/token",`key=${a}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:d,body:i};return n.emulatorConfig&&Co(n.emulatorConfig.host)&&(m.credentials="include"),gC.fetch()(u,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function GU(n,e){return Zi(n,"POST","/v2/accounts:revokeToken",kr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ie(e.idToken,"internal-error"),Ie(typeof e.idToken<"u","internal-error"),Ie(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):D0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ie(e.length!==0,"internal-error");const t=D0(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:a}=await FU(e,t);this.updateTokensAndExpiration(i,o,Number(a))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:a}=t,u=new Na;return i&&(Ie(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),o&&(Ie(typeof o=="string","internal-error",{appName:e}),u.accessToken=o),a&&(Ie(typeof a=="number","internal-error",{appName:e}),u.expirationTime=a),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Na,this.toJSON())}_performRefresh(){return Ar("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ms(n,e){Ie(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class fi{constructor({uid:e,auth:t,stsTokenManager:i,...o}){this.providerId="firebase",this.proactiveRefresh=new UU(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new km(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await ka(this,this.stsTokenManager.getToken(this.auth,e));return Ie(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return kU(this,e)}reload(){return LU(this)}_assign(e){this!==e&&(Ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new fi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await jf(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(An(this.auth.app))return Promise.reject(Ir(this.auth));const e=await this.getIdToken();return await ka(this,PU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,o=t.email??void 0,a=t.phoneNumber??void 0,u=t.photoURL??void 0,d=t.tenantId??void 0,m=t._redirectEventId??void 0,h=t.createdAt??void 0,_=t.lastLoginAt??void 0,{uid:T,emailVerified:S,isAnonymous:I,providerData:L,stsTokenManager:F}=t;Ie(T&&F,e,"internal-error");const V=Na.fromJSON(this.name,F);Ie(typeof T=="string",e,"internal-error"),ms(i,e.name),ms(o,e.name),Ie(typeof S=="boolean",e,"internal-error"),Ie(typeof I=="boolean",e,"internal-error"),ms(a,e.name),ms(u,e.name),ms(d,e.name),ms(m,e.name),ms(h,e.name),ms(_,e.name);const K=new fi({uid:T,auth:e,email:o,emailVerified:S,displayName:i,isAnonymous:I,photoURL:u,phoneNumber:a,tenantId:d,stsTokenManager:V,createdAt:h,lastLoginAt:_});return L&&Array.isArray(L)&&(K.providerData=L.map(ne=>({...ne}))),m&&(K._redirectEventId=m),K}static async _fromIdTokenResponse(e,t,i=!1){const o=new Na;o.updateFromServerResponse(t);const a=new fi({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await jf(a),a}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];Ie(o.localId!==void 0,"internal-error");const a=o.providerUserInfo!==void 0?vC(o.providerUserInfo):[],u=!(o.email&&o.passwordHash)&&!(a!=null&&a.length),d=new Na;d.updateFromIdToken(i);const m=new fi({uid:o.localId,auth:e,stsTokenManager:d,isAnonymous:u}),h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new km(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(a!=null&&a.length)};return Object.assign(m,h),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P0=new Map;function Cr(n){Nr(n instanceof Function,"Expected a class definition");let e=P0.get(n);return e?(Nr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,P0.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}TC.type="NONE";const k0=TC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kf(n,e,t){return`firebase:${n}:${e}:${t}`}class xa{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:a}=this.auth;this.fullUserKey=kf(this.userKey,o.apiKey,a),this.fullPersistenceKey=kf("persistence",o.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Zf(this.auth,{idToken:e}).catch(()=>{});return t?fi._fromGetAccountInfoResponse(this.auth,t,e):null}return fi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new xa(Cr(k0),e,i);const o=(await Promise.all(t.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let a=o[0]||Cr(k0);const u=kf(i,e.config.apiKey,e.name);let d=null;for(const h of t)try{const _=await h._get(u);if(_){let T;if(typeof _=="string"){const S=await Zf(e,{idToken:_}).catch(()=>{});if(!S)break;T=await fi._fromGetAccountInfoResponse(e,S,_)}else T=fi._fromJSON(e,_);h!==a&&(d=T),a=h;break}}catch{}const m=o.filter(h=>h._shouldAllowMigration);return!a._shouldAllowMigration||!m.length?new xa(a,e,i):(a=m[0],d&&await a._set(u,d.toJSON()),await Promise.all(t.map(async h=>{if(h!==a)try{await h._remove(u)}catch{}})),new xa(a,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V0(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(CC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(EC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(wC(e))return"Blackberry";if(RC(e))return"Webos";if(SC(e))return"Safari";if((e.includes("chrome/")||AC(e))&&!e.includes("edge/"))return"Chrome";if(IC(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function EC(n=an()){return/firefox\//i.test(n)}function SC(n=an()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function AC(n=an()){return/crios\//i.test(n)}function CC(n=an()){return/iemobile/i.test(n)}function IC(n=an()){return/android/i.test(n)}function wC(n=an()){return/blackberry/i.test(n)}function RC(n=an()){return/webos/i.test(n)}function Tg(n=an()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function qU(n=an()){var e;return Tg(n)&&!!((e=window.navigator)!=null&&e.standalone)}function BU(){return jk()&&document.documentMode===10}function bC(n=an()){return Tg(n)||IC(n)||RC(n)||wC(n)||/windows phone/i.test(n)||CC(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NC(n,e=[]){let t;switch(n){case"Browser":t=V0(an());break;case"Worker":t=`${V0(an())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Io}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zU{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=a=>new Promise((u,d)=>{try{const m=e(a);u(m)}catch(m){d(m)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HU(n,e={}){return Zi(n,"GET","/v2/passwordPolicy",kr(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KU=6;class YU{constructor(e){var i;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??KU,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JU{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new U0(this),this.idTokenSubscription=new U0(this),this.beforeStateQueue=new zU(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=mC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Cr(t)),this._initializationPromise=this.queue(async()=>{var i,o,a;if(!this._deleted&&(this.persistenceManager=await xa.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)==null?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Zf(this,{idToken:e}),i=await fi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var a;if(An(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(a=this.redirectUser)==null?void 0:a._redirectEventId,d=i==null?void 0:i._redirectEventId,m=await this.tryRedirectSignIn(e);(!u||u===d)&&(m!=null&&m.user)&&(i=m.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(u){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await jf(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=IU()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(An(this.app))return Promise.reject(Ir(this));const t=e?Ut(e):null;return t&&Ie(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return An(this.app)?Promise.reject(Ir(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return An(this.app)?Promise.reject(Ir(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Cr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await HU(this),t=new YU(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new xu("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await GU(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Cr(e)||this._popupRedirectResolver;Ie(t,this,"argument-error"),this.redirectPersistenceManager=await xa.create(this,[Cr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let u=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ie(d,this,"internal-error"),d.then(()=>{u||a(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,i,o);return()=>{u=!0,m()}}else{const m=e.addObserver(t);return()=>{u=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=NC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;if(An(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&EU(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Vr(n){return Ut(n)}class U0{constructor(e){this.auth=e,this.observer=null,this.addObserver=aV(t=>this.observer=t)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Id={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function $U(n){Id=n}function xC(n){return Id.loadJS(n)}function QU(){return Id.recaptchaEnterpriseScript}function XU(){return Id.gapiScript}function WU(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class ZU{constructor(){this.enterprise=new jU}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class jU{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const e2="recaptcha-enterprise",MC="NO_RECAPTCHA";class t2{constructor(e){this.type=e2,this.auth=Vr(e)}async verify(e="verify",t=!1){async function i(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(u,d)=>{DU(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const h=new MU(m);return a.tenantId==null?a._agentRecaptchaConfig=h:a._tenantRecaptchaConfigs[a.tenantId]=h,u(h.siteKey)}}).catch(m=>{d(m)})})}function o(a,u,d){const m=window.grecaptcha;M0(m)?m.enterprise.ready(()=>{m.enterprise.execute(a,{action:e}).then(h=>{u(h)}).catch(()=>{u(MC)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new ZU().execute("siteKey",{action:"verify"}):new Promise((a,u)=>{i(this.auth).then(d=>{if(!t&&M0(window.grecaptcha))o(d,a,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let m=QU();m.length!==0&&(m+=d),xC(m).then(()=>{o(d,a,u)}).catch(h=>{u(h)})}}).catch(d=>{u(d)})})}}async function L0(n,e,t,i=!1,o=!1){const a=new t2(n);let u;if(o)u=MC;else try{u=await a.verify(t)}catch{u=await a.verify(t,!0)}const d={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const m=d.phoneEnrollmentInfo.phoneNumber,h=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:h,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const m=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return i?Object.assign(d,{captchaResp:u}):Object.assign(d,{captchaResponse:u}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function ed(n,e,t,i,o){var a;if((a=n._getRecaptchaConfig())!=null&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await L0(n,e,t,t==="getOobCode");return i(n,u)}else return i(n,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await L0(n,e,t,t==="getOobCode");return i(n,d)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n2(n,e){const t=Cd(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),a=t.getOptions();if(yo(a,e??{}))return o;Wn(o,"already-initialized")}return t.initialize({options:e})}function i2(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(Cr);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function r2(n,e,t){const i=Vr(n);Ie(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,a=DC(e),{host:u,port:d}=s2(e),m=d===null?"":`:${d}`,h={url:`${a}//${u}${m}/`},_=Object.freeze({host:u,port:d,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){Ie(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ie(yo(h,i.config.emulator)&&yo(_,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=h,i.emulatorConfig=_,i.settings.appVerificationDisabledForTesting=!0,Co(u)?(fg(`${a}//${u}${m}`),dg("Auth",!0)):o2()}function DC(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function s2(n){const e=DC(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const a=o[1];return{host:a,port:O0(i.substr(a.length+1))}}else{const[a,u]=i.split(":");return{host:a,port:O0(u)}}}function O0(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function o2(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ar("not implemented")}_getIdTokenResponse(e){return Ar("not implemented")}_linkToIdToken(e,t){return Ar("not implemented")}_getReauthenticationResolver(e){return Ar("not implemented")}}async function a2(n,e){return Zi(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l2(n,e){return Pu(n,"POST","/v1/accounts:signInWithPassword",kr(n,e))}async function u2(n,e){return Zi(n,"POST","/v1/accounts:sendOobCode",kr(n,e))}async function c2(n,e){return u2(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f2(n,e){return Pu(n,"POST","/v1/accounts:signInWithEmailLink",kr(n,e))}async function d2(n,e){return Pu(n,"POST","/v1/accounts:signInWithEmailLink",kr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu extends Eg{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new Eu(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new Eu(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ed(e,t,"signInWithPassword",l2);case"emailLink":return f2(e,{email:this._email,oobCode:this._password});default:Wn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ed(e,i,"signUpPassword",a2);case"emailLink":return d2(e,{idToken:t,email:this._email,oobCode:this._password});default:Wn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ma(n,e){return Pu(n,"POST","/v1/accounts:signInWithIdp",kr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h2="http://localhost";class vo extends Eg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new vo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Wn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o,...a}=t;if(!i||!o)return null;const u=new vo(i,o);return u.idToken=a.idToken||void 0,u.accessToken=a.accessToken||void 0,u.secret=a.secret,u.nonce=a.nonce,u.pendingToken=a.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return Ma(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Ma(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ma(e,t)}buildRequest(){const e={requestUri:h2,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Mu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p2(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function m2(n){const e=lu(uu(n)).link,t=e?lu(uu(e)).deep_link_id:null,i=lu(uu(n)).deep_link_id;return(i?lu(uu(i)).link:null)||i||t||e||n}class Sg{constructor(e){const t=lu(uu(e)),i=t.apiKey??null,o=t.oobCode??null,a=p2(t.mode??null);Ie(i&&o&&a,"argument-error"),this.apiKey=i,this.operation=a,this.code=o,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=m2(e);try{return new Sg(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(){this.providerId=Ka.PROVIDER_ID}static credential(e,t){return Eu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=Sg.parseLink(t);return Ie(i,"argument-error"),Eu._fromEmailAndCode(e,i.code,i.tenantId)}}Ka.PROVIDER_ID="password";Ka.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ka.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku extends Ag{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr extends ku{constructor(){super("facebook.com")}static credential(e){return vo._fromParams({providerId:Tr.PROVIDER_ID,signInMethod:Tr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Tr.credentialFromTaggedObject(e)}static credentialFromError(e){return Tr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Tr.credential(e.oauthAccessToken)}catch{return null}}}Tr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Tr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er extends ku{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return vo._fromParams({providerId:Er.PROVIDER_ID,signInMethod:Er.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Er.credentialFromTaggedObject(e)}static credentialFromError(e){return Er.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Er.credential(t,i)}catch{return null}}}Er.GOOGLE_SIGN_IN_METHOD="google.com";Er.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr extends ku{constructor(){super("github.com")}static credential(e){return vo._fromParams({providerId:Sr.PROVIDER_ID,signInMethod:Sr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Sr.credentialFromTaggedObject(e)}static credentialFromError(e){return Sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Sr.credential(e.oauthAccessToken)}catch{return null}}}Sr.GITHUB_SIGN_IN_METHOD="github.com";Sr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs extends ku{constructor(){super("twitter.com")}static credential(e,t){return vo._fromParams({providerId:gs.PROVIDER_ID,signInMethod:gs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return gs.credentialFromTaggedObject(e)}static credentialFromError(e){return gs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return gs.credential(t,i)}catch{return null}}}gs.TWITTER_SIGN_IN_METHOD="twitter.com";gs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g2(n,e){return Pu(n,"POST","/v1/accounts:signUp",kr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const a=await fi._fromIdTokenResponse(e,i,o),u=F0(i);return new To({user:a,providerId:u,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=F0(i);return new To({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function F0(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td extends Wi{constructor(e,t,i,o){super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,td.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new td(e,t,i,o)}}function PC(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?td._fromErrorAndOperation(n,a,e,i):a})}async function y2(n,e,t=!1){const i=await ka(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return To._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _2(n,e,t=!1){const{auth:i}=n;if(An(i.app))return Promise.reject(Ir(i));const o="reauthenticate";try{const a=await ka(n,PC(i,o,e,n),t);Ie(a.idToken,i,"internal-error");const u=vg(a.idToken);Ie(u,i,"internal-error");const{sub:d}=u;return Ie(n.uid===d,i,"user-mismatch"),To._forOperation(n,o,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Wn(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kC(n,e,t=!1){if(An(n.app))return Promise.reject(Ir(n));const i="signIn",o=await PC(n,i,e),a=await To._fromIdTokenResponse(n,i,o);return t||await n._updateCurrentUser(a.user),a}async function v2(n,e){return kC(Vr(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VC(n){const e=Vr(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function T2(n,e,t){const i=Vr(n);await ed(i,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",c2)}async function E2(n,e,t){if(An(n.app))return Promise.reject(Ir(n));const i=Vr(n),u=await ed(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",g2).catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&VC(n),m}),d=await To._fromIdTokenResponse(i,"signIn",u);return await i._updateCurrentUser(d.user),d}function S2(n,e,t){return An(n.app)?Promise.reject(Ir(n)):v2(Ut(n),Ka.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&VC(n),i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A2(n,e){return Zi(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C2(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const i=Ut(n),a={idToken:await i.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},u=await ka(i,A2(i.auth,a));i.displayName=u.displayName||null,i.photoURL=u.photoUrl||null;const d=i.providerData.find(({providerId:m})=>m==="password");d&&(d.displayName=i.displayName,d.photoURL=i.photoURL),await i._updateTokensIfNecessary(u)}function I2(n,e,t,i){return Ut(n).onIdTokenChanged(e,t,i)}function w2(n,e,t){return Ut(n).beforeAuthStateChanged(e,t)}function R2(n,e,t,i){return Ut(n).onAuthStateChanged(e,t,i)}function b2(n){return Ut(n).signOut()}const nd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(nd,"1"),this.storage.removeItem(nd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N2=1e3,x2=10;class LC extends UC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=bC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,d,m)=>{this.notifyListeners(u,m)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const u=this.storage.getItem(i);!t&&this.localCache[i]===u||this.notifyListeners(i,u)},a=this.storage.getItem(i);BU()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,x2):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},N2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}LC.type="LOCAL";const M2=LC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC extends UC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}OC.type="SESSION";const FC=OC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D2(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new wd(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:a}=t.data,u=this.handlersMap[o];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const d=Array.from(u).map(async h=>h(t.origin,a)),m=await D2(d);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}wd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cg(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let a,u;return new Promise((d,m)=>{const h=Cg("",20);o.port1.start();const _=setTimeout(()=>{m(new Error("unsupported_event"))},i);u={messageChannel:o,onMessage(T){const S=T;if(S.data.eventId===h)switch(S.data.status){case"ack":clearTimeout(_),a=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),d(S.data.response);break;default:clearTimeout(_),clearTimeout(a),m(new Error("invalid_response"));break}}},this.handlers.add(u),o.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[o.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zi(){return window}function k2(n){zi().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GC(){return typeof zi().WorkerGlobalScope<"u"&&typeof zi().importScripts=="function"}async function V2(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function U2(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function L2(){return GC()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qC="firebaseLocalStorageDb",O2=1,id="firebaseLocalStorage",BC="fbase_key";class Vu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Rd(n,e){return n.transaction([id],e?"readwrite":"readonly").objectStore(id)}function F2(){const n=indexedDB.deleteDatabase(qC);return new Vu(n).toPromise()}function Vm(){const n=indexedDB.open(qC,O2);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(id,{keyPath:BC})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(id)?e(i):(i.close(),await F2(),e(await Vm()))})})}async function G0(n,e,t){const i=Rd(n,!0).put({[BC]:e,value:t});return new Vu(i).toPromise()}async function G2(n,e){const t=Rd(n,!1).get(e),i=await new Vu(t).toPromise();return i===void 0?null:i.value}function q0(n,e){const t=Rd(n,!0).delete(e);return new Vu(t).toPromise()}const q2=800,B2=3;class zC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Vm(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>B2)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return GC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=wd._getInstance(L2()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,i;if(this.activeServiceWorker=await V2(),!this.activeServiceWorker)return;this.sender=new P2(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||U2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Vm();return await G0(e,nd,"1"),await q0(e,nd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>G0(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>G2(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>q0(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const a=Rd(o,!1).getAll();return new Vu(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:a}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(a)&&(this.notifyListeners(o,a),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),q2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}zC.type="LOCAL";const z2=zC;new Du(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HC(n,e){return e?Cr(e):(Ie(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ig extends Eg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ma(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ma(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ma(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function H2(n){return kC(n.auth,new Ig(n),n.bypassAuthState)}function K2(n){const{auth:e,user:t}=n;return Ie(t,e,"internal-error"),_2(t,new Ig(n),n.bypassAuthState)}async function Y2(n){const{auth:e,user:t}=n;return Ie(t,e,"internal-error"),y2(t,new Ig(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(e,t,i,o,a=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:a,error:u,type:d}=e;if(u){this.reject(u);return}const m={auth:this.auth,requestUri:t,sessionId:i,tenantId:a||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(m))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return H2;case"linkViaPopup":case"linkViaRedirect":return Y2;case"reauthViaPopup":case"reauthViaRedirect":return K2;default:Wn(this.auth,"internal-error")}}resolve(e){Nr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Nr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J2=new Du(2e3,1e4);async function rm(n,e,t){if(An(n.app))return Promise.reject(mi(n,"operation-not-supported-in-this-environment"));const i=Vr(n);SU(n,e,Ag);const o=HC(i,t);return new ho(i,"signInViaPopup",e,o).executeNotNull()}class ho extends KC{constructor(e,t,i,o,a){super(e,t,o,a),this.provider=i,this.authWindow=null,this.pollId=null,ho.currentPopupAction&&ho.currentPopupAction.cancel(),ho.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ie(e,this.auth,"internal-error"),e}async onExecution(){Nr(this.filter.length===1,"Popup operations only handle one event");const e=Cg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(mi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(mi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ho.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if((i=(t=this.authWindow)==null?void 0:t.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(mi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,J2.get())};e()}}ho.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $2="pendingRedirect",Vf=new Map;class Q2 extends KC{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Vf.get(this.auth._key());if(!e){try{const i=await X2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Vf.set(this.auth._key(),e)}return this.bypassAuthState||Vf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function X2(n,e){const t=j2(e),i=Z2(n);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function W2(n,e){Vf.set(n._key(),e)}function Z2(n){return Cr(n._redirectPersistence)}function j2(n){return kf($2,n.config.apiKey,n.name)}async function eL(n,e,t=!1){if(An(n.app))return Promise.reject(Ir(n));const i=Vr(n),o=HC(i,e),u=await new Q2(i,o,t).execute();return u&&!t&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tL=600*1e3;class nL{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!iL(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!YC(e)){const o=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";t.onError(mi(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=tL&&this.cachedEventUids.clear(),this.cachedEventUids.has(B0(e))}saveEventToCache(e){this.cachedEventUids.add(B0(e)),this.lastProcessedEventTime=Date.now()}}function B0(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function YC({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function iL(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return YC(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rL(n,e={}){return Zi(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,oL=/^https?/;async function aL(n){if(n.config.emulator)return;const{authorizedDomains:e}=await rL(n);for(const t of e)try{if(lL(t))return}catch{}Wn(n,"unauthorized-domain")}function lL(n){const e=Pm(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===i}if(!oL.test(t))return!1;if(sL.test(n))return i===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uL=new Du(3e4,6e4);function z0(){const n=zi().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function cL(n){return new Promise((e,t)=>{var o,a,u;function i(){z0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{z0(),t(mi(n,"network-request-failed"))},timeout:uL.get()})}if((a=(o=zi().gapi)==null?void 0:o.iframes)!=null&&a.Iframe)e(gapi.iframes.getContext());else if((u=zi().gapi)!=null&&u.load)i();else{const d=WU("iframefcb");return zi()[d]=()=>{gapi.load?i():t(mi(n,"network-request-failed"))},xC(`${XU()}?onload=${d}`).catch(m=>t(m))}}).catch(e=>{throw Uf=null,e})}let Uf=null;function fL(n){return Uf=Uf||cL(n),Uf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dL=new Du(5e3,15e3),hL="__/auth/iframe",pL="emulator/auth/iframe",mL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},gL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function yL(n){const e=n.config;Ie(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?_g(e,pL):`https://${n.config.authDomain}/${hL}`,i={apiKey:e.apiKey,appName:n.name,v:Io},o=gL.get(n.config.apiHost);o&&(i.eid=o);const a=n._getFrameworks();return a.length&&(i.fw=a.join(",")),`${t}?${Mu(i).slice(1)}`}async function _L(n){const e=await fL(n),t=zi().gapi;return Ie(t,n,"internal-error"),e.open({where:document.body,url:yL(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:mL,dontclear:!0},i=>new Promise(async(o,a)=>{await i.restyle({setHideOnLeave:!1});const u=mi(n,"network-request-failed"),d=zi().setTimeout(()=>{a(u)},dL.get());function m(){zi().clearTimeout(d),o(i)}i.ping(m).then(m,()=>{a(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},TL=500,EL=600,SL="_blank",AL="http://localhost";class H0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function CL(n,e,t,i=TL,o=EL){const a=Math.max((window.screen.availHeight-o)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const m={...vL,width:i.toString(),height:o.toString(),top:a,left:u},h=an().toLowerCase();t&&(d=AC(h)?SL:t),EC(h)&&(e=e||AL,m.scrollbars="yes");const _=Object.entries(m).reduce((S,[I,L])=>`${S}${I}=${L},`,"");if(qU(h)&&d!=="_self")return IL(e||"",d),new H0(null);const T=window.open(e||"",d,_);Ie(T,n,"popup-blocked");try{T.focus()}catch{}return new H0(T)}function IL(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wL="__/auth/handler",RL="emulator/auth/handler",bL=encodeURIComponent("fac");async function K0(n,e,t,i,o,a){Ie(n.config.authDomain,n,"auth-domain-config-required"),Ie(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Io,eventId:o};if(e instanceof Ag){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",oV(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,T]of Object.entries({}))u[_]=T}if(e instanceof ku){const _=e.getScopes().filter(T=>T!=="");_.length>0&&(u.scopes=_.join(","))}n.tenantId&&(u.tid=n.tenantId);const d=u;for(const _ of Object.keys(d))d[_]===void 0&&delete d[_];const m=await n._getAppCheckToken(),h=m?`#${bL}=${encodeURIComponent(m)}`:"";return`${NL(n)}?${Mu(d).slice(1)}${h}`}function NL({config:n}){return n.emulator?_g(n,RL):`https://${n.authDomain}/${wL}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sm="webStorageSupport";class xL{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=FC,this._completeRedirectFn=eL,this._overrideRedirectResult=W2}async _openPopup(e,t,i,o){var u;Nr((u=this.eventManagers[e._key()])==null?void 0:u.manager,"_initialize() not called before _openPopup()");const a=await K0(e,t,i,Pm(),o);return CL(e,a,Cg())}async _openRedirect(e,t,i,o){await this._originValidation(e);const a=await K0(e,t,i,Pm(),o);return k2(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:a}=this.eventManagers[t];return o?Promise.resolve(o):(Nr(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await _L(e),i=new nL(e);return t.register("authEvent",o=>(Ie(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(sm,{type:sm},o=>{var u;const a=(u=o==null?void 0:o[0])==null?void 0:u[sm];a!==void 0&&t(!!a),Wn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=aL(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return bC()||SC()||Tg()}}const ML=xL;var Y0="@firebase/auth",J0="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PL(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function kL(n){_o(new As("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:u,authDomain:d}=i.options;Ie(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const m={apiKey:u,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:NC(n)},h=new JU(i,o,a,m);return i2(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),_o(new As("auth-internal",e=>{const t=Vr(e.getProvider("auth").getImmediate());return(i=>new DL(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Bi(Y0,J0,PL(n)),Bi(Y0,J0,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VL=300,UL=aC("authIdTokenMaxAge")||VL;let $0=null;const LL=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>UL)return;const o=t==null?void 0:t.token;$0!==o&&($0=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function OL(n=mg()){const e=Cd(n,"auth");if(e.isInitialized())return e.getImmediate();const t=n2(n,{popupRedirectResolver:ML,persistence:[z2,M2,FC]}),i=aC("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const u=LL(a.toString());w2(t,u,()=>u(t.currentUser)),I2(t,d=>u(d))}}const o=rC("auth");return o&&r2(t,`http://${o}`),t}function FL(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}$U({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=o=>{const a=mi("internal-error");a.customData=o,t(a)},i.type="text/javascript",i.charset="UTF-8",FL().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});kL("Browser");var Q0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Es,JC;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,R){function N(){}N.prototype=R.prototype,x.F=R.prototype,x.prototype=new N,x.prototype.constructor=x,x.D=function(D,k,q){for(var M=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)M[ke-2]=arguments[ke];return R.prototype[k].apply(D,M)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(x,R,N){N||(N=0);const D=Array(16);if(typeof R=="string")for(var k=0;k<16;++k)D[k]=R.charCodeAt(N++)|R.charCodeAt(N++)<<8|R.charCodeAt(N++)<<16|R.charCodeAt(N++)<<24;else for(k=0;k<16;++k)D[k]=R[N++]|R[N++]<<8|R[N++]<<16|R[N++]<<24;R=x.g[0],N=x.g[1],k=x.g[2];let q=x.g[3],M;M=R+(q^N&(k^q))+D[0]+3614090360&4294967295,R=N+(M<<7&4294967295|M>>>25),M=q+(k^R&(N^k))+D[1]+3905402710&4294967295,q=R+(M<<12&4294967295|M>>>20),M=k+(N^q&(R^N))+D[2]+606105819&4294967295,k=q+(M<<17&4294967295|M>>>15),M=N+(R^k&(q^R))+D[3]+3250441966&4294967295,N=k+(M<<22&4294967295|M>>>10),M=R+(q^N&(k^q))+D[4]+4118548399&4294967295,R=N+(M<<7&4294967295|M>>>25),M=q+(k^R&(N^k))+D[5]+1200080426&4294967295,q=R+(M<<12&4294967295|M>>>20),M=k+(N^q&(R^N))+D[6]+2821735955&4294967295,k=q+(M<<17&4294967295|M>>>15),M=N+(R^k&(q^R))+D[7]+4249261313&4294967295,N=k+(M<<22&4294967295|M>>>10),M=R+(q^N&(k^q))+D[8]+1770035416&4294967295,R=N+(M<<7&4294967295|M>>>25),M=q+(k^R&(N^k))+D[9]+2336552879&4294967295,q=R+(M<<12&4294967295|M>>>20),M=k+(N^q&(R^N))+D[10]+4294925233&4294967295,k=q+(M<<17&4294967295|M>>>15),M=N+(R^k&(q^R))+D[11]+2304563134&4294967295,N=k+(M<<22&4294967295|M>>>10),M=R+(q^N&(k^q))+D[12]+1804603682&4294967295,R=N+(M<<7&4294967295|M>>>25),M=q+(k^R&(N^k))+D[13]+4254626195&4294967295,q=R+(M<<12&4294967295|M>>>20),M=k+(N^q&(R^N))+D[14]+2792965006&4294967295,k=q+(M<<17&4294967295|M>>>15),M=N+(R^k&(q^R))+D[15]+1236535329&4294967295,N=k+(M<<22&4294967295|M>>>10),M=R+(k^q&(N^k))+D[1]+4129170786&4294967295,R=N+(M<<5&4294967295|M>>>27),M=q+(N^k&(R^N))+D[6]+3225465664&4294967295,q=R+(M<<9&4294967295|M>>>23),M=k+(R^N&(q^R))+D[11]+643717713&4294967295,k=q+(M<<14&4294967295|M>>>18),M=N+(q^R&(k^q))+D[0]+3921069994&4294967295,N=k+(M<<20&4294967295|M>>>12),M=R+(k^q&(N^k))+D[5]+3593408605&4294967295,R=N+(M<<5&4294967295|M>>>27),M=q+(N^k&(R^N))+D[10]+38016083&4294967295,q=R+(M<<9&4294967295|M>>>23),M=k+(R^N&(q^R))+D[15]+3634488961&4294967295,k=q+(M<<14&4294967295|M>>>18),M=N+(q^R&(k^q))+D[4]+3889429448&4294967295,N=k+(M<<20&4294967295|M>>>12),M=R+(k^q&(N^k))+D[9]+568446438&4294967295,R=N+(M<<5&4294967295|M>>>27),M=q+(N^k&(R^N))+D[14]+3275163606&4294967295,q=R+(M<<9&4294967295|M>>>23),M=k+(R^N&(q^R))+D[3]+4107603335&4294967295,k=q+(M<<14&4294967295|M>>>18),M=N+(q^R&(k^q))+D[8]+1163531501&4294967295,N=k+(M<<20&4294967295|M>>>12),M=R+(k^q&(N^k))+D[13]+2850285829&4294967295,R=N+(M<<5&4294967295|M>>>27),M=q+(N^k&(R^N))+D[2]+4243563512&4294967295,q=R+(M<<9&4294967295|M>>>23),M=k+(R^N&(q^R))+D[7]+1735328473&4294967295,k=q+(M<<14&4294967295|M>>>18),M=N+(q^R&(k^q))+D[12]+2368359562&4294967295,N=k+(M<<20&4294967295|M>>>12),M=R+(N^k^q)+D[5]+4294588738&4294967295,R=N+(M<<4&4294967295|M>>>28),M=q+(R^N^k)+D[8]+2272392833&4294967295,q=R+(M<<11&4294967295|M>>>21),M=k+(q^R^N)+D[11]+1839030562&4294967295,k=q+(M<<16&4294967295|M>>>16),M=N+(k^q^R)+D[14]+4259657740&4294967295,N=k+(M<<23&4294967295|M>>>9),M=R+(N^k^q)+D[1]+2763975236&4294967295,R=N+(M<<4&4294967295|M>>>28),M=q+(R^N^k)+D[4]+1272893353&4294967295,q=R+(M<<11&4294967295|M>>>21),M=k+(q^R^N)+D[7]+4139469664&4294967295,k=q+(M<<16&4294967295|M>>>16),M=N+(k^q^R)+D[10]+3200236656&4294967295,N=k+(M<<23&4294967295|M>>>9),M=R+(N^k^q)+D[13]+681279174&4294967295,R=N+(M<<4&4294967295|M>>>28),M=q+(R^N^k)+D[0]+3936430074&4294967295,q=R+(M<<11&4294967295|M>>>21),M=k+(q^R^N)+D[3]+3572445317&4294967295,k=q+(M<<16&4294967295|M>>>16),M=N+(k^q^R)+D[6]+76029189&4294967295,N=k+(M<<23&4294967295|M>>>9),M=R+(N^k^q)+D[9]+3654602809&4294967295,R=N+(M<<4&4294967295|M>>>28),M=q+(R^N^k)+D[12]+3873151461&4294967295,q=R+(M<<11&4294967295|M>>>21),M=k+(q^R^N)+D[15]+530742520&4294967295,k=q+(M<<16&4294967295|M>>>16),M=N+(k^q^R)+D[2]+3299628645&4294967295,N=k+(M<<23&4294967295|M>>>9),M=R+(k^(N|~q))+D[0]+4096336452&4294967295,R=N+(M<<6&4294967295|M>>>26),M=q+(N^(R|~k))+D[7]+1126891415&4294967295,q=R+(M<<10&4294967295|M>>>22),M=k+(R^(q|~N))+D[14]+2878612391&4294967295,k=q+(M<<15&4294967295|M>>>17),M=N+(q^(k|~R))+D[5]+4237533241&4294967295,N=k+(M<<21&4294967295|M>>>11),M=R+(k^(N|~q))+D[12]+1700485571&4294967295,R=N+(M<<6&4294967295|M>>>26),M=q+(N^(R|~k))+D[3]+2399980690&4294967295,q=R+(M<<10&4294967295|M>>>22),M=k+(R^(q|~N))+D[10]+4293915773&4294967295,k=q+(M<<15&4294967295|M>>>17),M=N+(q^(k|~R))+D[1]+2240044497&4294967295,N=k+(M<<21&4294967295|M>>>11),M=R+(k^(N|~q))+D[8]+1873313359&4294967295,R=N+(M<<6&4294967295|M>>>26),M=q+(N^(R|~k))+D[15]+4264355552&4294967295,q=R+(M<<10&4294967295|M>>>22),M=k+(R^(q|~N))+D[6]+2734768916&4294967295,k=q+(M<<15&4294967295|M>>>17),M=N+(q^(k|~R))+D[13]+1309151649&4294967295,N=k+(M<<21&4294967295|M>>>11),M=R+(k^(N|~q))+D[4]+4149444226&4294967295,R=N+(M<<6&4294967295|M>>>26),M=q+(N^(R|~k))+D[11]+3174756917&4294967295,q=R+(M<<10&4294967295|M>>>22),M=k+(R^(q|~N))+D[2]+718787259&4294967295,k=q+(M<<15&4294967295|M>>>17),M=N+(q^(k|~R))+D[9]+3951481745&4294967295,x.g[0]=x.g[0]+R&4294967295,x.g[1]=x.g[1]+(k+(M<<21&4294967295|M>>>11))&4294967295,x.g[2]=x.g[2]+k&4294967295,x.g[3]=x.g[3]+q&4294967295}i.prototype.v=function(x,R){R===void 0&&(R=x.length);const N=R-this.blockSize,D=this.C;let k=this.h,q=0;for(;q<R;){if(k==0)for(;q<=N;)o(this,x,q),q+=this.blockSize;if(typeof x=="string"){for(;q<R;)if(D[k++]=x.charCodeAt(q++),k==this.blockSize){o(this,D),k=0;break}}else for(;q<R;)if(D[k++]=x[q++],k==this.blockSize){o(this,D),k=0;break}}this.h=k,this.o+=R},i.prototype.A=function(){var x=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);x[0]=128;for(var R=1;R<x.length-8;++R)x[R]=0;R=this.o*8;for(var N=x.length-8;N<x.length;++N)x[N]=R&255,R/=256;for(this.v(x),x=Array(16),R=0,N=0;N<4;++N)for(let D=0;D<32;D+=8)x[R++]=this.g[N]>>>D&255;return x};function a(x,R){var N=d;return Object.prototype.hasOwnProperty.call(N,x)?N[x]:N[x]=R(x)}function u(x,R){this.h=R;const N=[];let D=!0;for(let k=x.length-1;k>=0;k--){const q=x[k]|0;D&&q==R||(N[k]=q,D=!1)}this.g=N}var d={};function m(x){return-128<=x&&x<128?a(x,function(R){return new u([R|0],R<0?-1:0)}):new u([x|0],x<0?-1:0)}function h(x){if(isNaN(x)||!isFinite(x))return T;if(x<0)return V(h(-x));const R=[];let N=1;for(let D=0;x>=N;D++)R[D]=x/N|0,N*=4294967296;return new u(R,0)}function _(x,R){if(x.length==0)throw Error("number format error: empty string");if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(x.charAt(0)=="-")return V(_(x.substring(1),R));if(x.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=h(Math.pow(R,8));let D=T;for(let q=0;q<x.length;q+=8){var k=Math.min(8,x.length-q);const M=parseInt(x.substring(q,q+k),R);k<8?(k=h(Math.pow(R,k)),D=D.j(k).add(h(M))):(D=D.j(N),D=D.add(h(M)))}return D}var T=m(0),S=m(1),I=m(16777216);n=u.prototype,n.m=function(){if(F(this))return-V(this).m();let x=0,R=1;for(let N=0;N<this.g.length;N++){const D=this.i(N);x+=(D>=0?D:4294967296+D)*R,R*=4294967296}return x},n.toString=function(x){if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(L(this))return"0";if(F(this))return"-"+V(this).toString(x);const R=h(Math.pow(x,6));var N=this;let D="";for(;;){const k=oe(N,R).g;N=K(N,k.j(R));let q=((N.g.length>0?N.g[0]:N.h)>>>0).toString(x);if(N=k,L(N))return q+D;for(;q.length<6;)q="0"+q;D=q+D}},n.i=function(x){return x<0?0:x<this.g.length?this.g[x]:this.h};function L(x){if(x.h!=0)return!1;for(let R=0;R<x.g.length;R++)if(x.g[R]!=0)return!1;return!0}function F(x){return x.h==-1}n.l=function(x){return x=K(this,x),F(x)?-1:L(x)?0:1};function V(x){const R=x.g.length,N=[];for(let D=0;D<R;D++)N[D]=~x.g[D];return new u(N,~x.h).add(S)}n.abs=function(){return F(this)?V(this):this},n.add=function(x){const R=Math.max(this.g.length,x.g.length),N=[];let D=0;for(let k=0;k<=R;k++){let q=D+(this.i(k)&65535)+(x.i(k)&65535),M=(q>>>16)+(this.i(k)>>>16)+(x.i(k)>>>16);D=M>>>16,q&=65535,M&=65535,N[k]=M<<16|q}return new u(N,N[N.length-1]&-2147483648?-1:0)};function K(x,R){return x.add(V(R))}n.j=function(x){if(L(this)||L(x))return T;if(F(this))return F(x)?V(this).j(V(x)):V(V(this).j(x));if(F(x))return V(this.j(V(x)));if(this.l(I)<0&&x.l(I)<0)return h(this.m()*x.m());const R=this.g.length+x.g.length,N=[];for(var D=0;D<2*R;D++)N[D]=0;for(D=0;D<this.g.length;D++)for(let k=0;k<x.g.length;k++){const q=this.i(D)>>>16,M=this.i(D)&65535,ke=x.i(k)>>>16,lt=x.i(k)&65535;N[2*D+2*k]+=M*lt,ne(N,2*D+2*k),N[2*D+2*k+1]+=q*lt,ne(N,2*D+2*k+1),N[2*D+2*k+1]+=M*ke,ne(N,2*D+2*k+1),N[2*D+2*k+2]+=q*ke,ne(N,2*D+2*k+2)}for(x=0;x<R;x++)N[x]=N[2*x+1]<<16|N[2*x];for(x=R;x<2*R;x++)N[x]=0;return new u(N,0)};function ne(x,R){for(;(x[R]&65535)!=x[R];)x[R+1]+=x[R]>>>16,x[R]&=65535,R++}function j(x,R){this.g=x,this.h=R}function oe(x,R){if(L(R))throw Error("division by zero");if(L(x))return new j(T,T);if(F(x))return R=oe(V(x),R),new j(V(R.g),V(R.h));if(F(R))return R=oe(x,V(R)),new j(V(R.g),R.h);if(x.g.length>30){if(F(x)||F(R))throw Error("slowDivide_ only works with positive integers.");for(var N=S,D=R;D.l(x)<=0;)N=de(N),D=de(D);var k=ue(N,1),q=ue(D,1);for(D=ue(D,2),N=ue(N,2);!L(D);){var M=q.add(D);M.l(x)<=0&&(k=k.add(N),q=M),D=ue(D,1),N=ue(N,1)}return R=K(x,k.j(R)),new j(k,R)}for(k=T;x.l(R)>=0;){for(N=Math.max(1,Math.floor(x.m()/R.m())),D=Math.ceil(Math.log(N)/Math.LN2),D=D<=48?1:Math.pow(2,D-48),q=h(N),M=q.j(R);F(M)||M.l(x)>0;)N-=D,q=h(N),M=q.j(R);L(q)&&(q=S),k=k.add(q),x=K(x,M)}return new j(k,x)}n.B=function(x){return oe(this,x).h},n.and=function(x){const R=Math.max(this.g.length,x.g.length),N=[];for(let D=0;D<R;D++)N[D]=this.i(D)&x.i(D);return new u(N,this.h&x.h)},n.or=function(x){const R=Math.max(this.g.length,x.g.length),N=[];for(let D=0;D<R;D++)N[D]=this.i(D)|x.i(D);return new u(N,this.h|x.h)},n.xor=function(x){const R=Math.max(this.g.length,x.g.length),N=[];for(let D=0;D<R;D++)N[D]=this.i(D)^x.i(D);return new u(N,this.h^x.h)};function de(x){const R=x.g.length+1,N=[];for(let D=0;D<R;D++)N[D]=x.i(D)<<1|x.i(D-1)>>>31;return new u(N,x.h)}function ue(x,R){const N=R>>5;R%=32;const D=x.g.length-N,k=[];for(let q=0;q<D;q++)k[q]=R>0?x.i(q+N)>>>R|x.i(q+N+1)<<32-R:x.i(q+N);return new u(k,x.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,JC=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=h,u.fromString=_,Es=u}).apply(typeof Q0<"u"?Q0:typeof self<"u"?self:typeof window<"u"?window:{});var Cf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $C,cu,QC,Lf,Um,XC,WC,ZC;(function(){var n,e=Object.defineProperty;function t(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof Cf=="object"&&Cf];for(var E=0;E<g.length;++E){var C=g[E];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var i=t(this);function o(g,E){if(E)e:{var C=i;g=g.split(".");for(var b=0;b<g.length-1;b++){var H=g[b];if(!(H in C))break e;C=C[H]}g=g[g.length-1],b=C[g],E=E(b),E!=b&&E!=null&&e(C,g,{configurable:!0,writable:!0,value:E})}}o("Symbol.dispose",function(g){return g||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(g){return g||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(g){return g||function(E){var C=[],b;for(b in E)Object.prototype.hasOwnProperty.call(E,b)&&C.push([b,E[b]]);return C}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},u=this||self;function d(g){var E=typeof g;return E=="object"&&g!=null||E=="function"}function m(g,E,C){return g.call.apply(g.bind,arguments)}function h(g,E,C){return h=m,h.apply(null,arguments)}function _(g,E){var C=Array.prototype.slice.call(arguments,1);return function(){var b=C.slice();return b.push.apply(b,arguments),g.apply(this,b)}}function T(g,E){function C(){}C.prototype=E.prototype,g.Z=E.prototype,g.prototype=new C,g.prototype.constructor=g,g.Ob=function(b,H,X){for(var fe=Array(arguments.length-2),De=2;De<arguments.length;De++)fe[De-2]=arguments[De];return E.prototype[H].apply(b,fe)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?g=>g&&AsyncContext.Snapshot.wrap(g):g=>g;function I(g){const E=g.length;if(E>0){const C=Array(E);for(let b=0;b<E;b++)C[b]=g[b];return C}return[]}function L(g,E){for(let b=1;b<arguments.length;b++){const H=arguments[b];var C=typeof H;if(C=C!="object"?C:H?Array.isArray(H)?"array":C:"null",C=="array"||C=="object"&&typeof H.length=="number"){C=g.length||0;const X=H.length||0;g.length=C+X;for(let fe=0;fe<X;fe++)g[C+fe]=H[fe]}else g.push(H)}}class F{constructor(E,C){this.i=E,this.j=C,this.h=0,this.g=null}get(){let E;return this.h>0?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function V(g){u.setTimeout(()=>{throw g},0)}function K(){var g=x;let E=null;return g.g&&(E=g.g,g.g=g.g.next,g.g||(g.h=null),E.next=null),E}class ne{constructor(){this.h=this.g=null}add(E,C){const b=j.get();b.set(E,C),this.h?this.h.next=b:this.g=b,this.h=b}}var j=new F(()=>new oe,g=>g.reset());class oe{constructor(){this.next=this.g=this.h=null}set(E,C){this.h=E,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let de,ue=!1,x=new ne,R=()=>{const g=Promise.resolve(void 0);de=()=>{g.then(N)}};function N(){for(var g;g=K();){try{g.h.call(g.g)}catch(C){V(C)}var E=j;E.j(g),E.h<100&&(E.h++,g.next=E.g,E.g=g)}ue=!1}function D(){this.u=this.u,this.C=this.C}D.prototype.u=!1,D.prototype.dispose=function(){this.u||(this.u=!0,this.N())},D.prototype[Symbol.dispose]=function(){this.dispose()},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(g,E){this.type=g,this.g=this.target=E,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var q=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var g=!1,E=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const C=()=>{};u.addEventListener("test",C,E),u.removeEventListener("test",C,E)}catch{}return g})();function M(g){return/^[\s\xa0]*$/.test(g)}function ke(g,E){k.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g&&this.init(g,E)}T(ke,k),ke.prototype.init=function(g,E){const C=this.type=g.type,b=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;this.target=g.target||g.srcElement,this.g=E,E=g.relatedTarget,E||(C=="mouseover"?E=g.fromElement:C=="mouseout"&&(E=g.toElement)),this.relatedTarget=E,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=g.pointerType,this.state=g.state,this.i=g,g.defaultPrevented&&ke.Z.h.call(this)},ke.prototype.h=function(){ke.Z.h.call(this);const g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var lt="closure_listenable_"+(Math.random()*1e6|0),Q=0;function ee(g,E,C,b,H){this.listener=g,this.proxy=null,this.src=E,this.type=C,this.capture=!!b,this.ha=H,this.key=++Q,this.da=this.fa=!1}function Z(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function he(g,E,C){for(const b in g)E.call(C,g[b],b,g)}function pe(g,E){for(const C in g)E.call(void 0,g[C],C,g)}function P(g){const E={};for(const C in g)E[C]=g[C];return E}const z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function le(g,E){let C,b;for(let H=1;H<arguments.length;H++){b=arguments[H];for(C in b)g[C]=b[C];for(let X=0;X<z.length;X++)C=z[X],Object.prototype.hasOwnProperty.call(b,C)&&(g[C]=b[C])}}function ce(g){this.src=g,this.g={},this.h=0}ce.prototype.add=function(g,E,C,b,H){const X=g.toString();g=this.g[X],g||(g=this.g[X]=[],this.h++);const fe=Ae(g,E,b,H);return fe>-1?(E=g[fe],C||(E.fa=!1)):(E=new ee(E,this.src,X,!!b,H),E.fa=C,g.push(E)),E};function Te(g,E){const C=E.type;if(C in g.g){var b=g.g[C],H=Array.prototype.indexOf.call(b,E,void 0),X;(X=H>=0)&&Array.prototype.splice.call(b,H,1),X&&(Z(E),g.g[C].length==0&&(delete g.g[C],g.h--))}}function Ae(g,E,C,b){for(let H=0;H<g.length;++H){const X=g[H];if(!X.da&&X.listener==E&&X.capture==!!C&&X.ha==b)return H}return-1}var Re="closure_lm_"+(Math.random()*1e6|0),Ze={};function je(g,E,C,b,H){if(Array.isArray(E)){for(let X=0;X<E.length;X++)je(g,E[X],C,b,H);return null}return C=el(C),g&&g[lt]?g.J(E,C,d(b)?!!b.capture:!1,H):Ps(g,E,C,!1,b,H)}function Ps(g,E,C,b,H,X){if(!E)throw Error("Invalid event type");const fe=d(H)?!!H.capture:!!H;let De=ks(g);if(De||(g[Re]=De=new ce(g)),C=De.add(E,C,b,fe,X),C.proxy)return C;if(b=No(),C.proxy=b,b.src=g,b.listener=C,g.addEventListener)q||(H=fe),H===void 0&&(H=!1),g.addEventListener(E.toString(),b,H);else if(g.attachEvent)g.attachEvent(vi(E.toString()),b);else if(g.addListener&&g.removeListener)g.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return C}function No(){function g(C){return E.call(g.src,g.listener,C)}const E=Za;return g}function xo(g,E,C,b,H){if(Array.isArray(E))for(var X=0;X<E.length;X++)xo(g,E[X],C,b,H);else b=d(b)?!!b.capture:!!b,C=el(C),g&&g[lt]?(g=g.i,X=String(E).toString(),X in g.g&&(E=g.g[X],C=Ae(E,C,b,H),C>-1&&(Z(E[C]),Array.prototype.splice.call(E,C,1),E.length==0&&(delete g.g[X],g.h--)))):g&&(g=ks(g))&&(E=g.g[E.toString()],g=-1,E&&(g=Ae(E,C,b,H)),(C=g>-1?E[g]:null)&&Mo(C))}function Mo(g){if(typeof g!="number"&&g&&!g.da){var E=g.src;if(E&&E[lt])Te(E.i,g);else{var C=g.type,b=g.proxy;E.removeEventListener?E.removeEventListener(C,b,g.capture):E.detachEvent?E.detachEvent(vi(C),b):E.addListener&&E.removeListener&&E.removeListener(b),(C=ks(E))?(Te(C,g),C.h==0&&(C.src=null,E[Re]=null)):Z(g)}}}function vi(g){return g in Ze?Ze[g]:Ze[g]="on"+g}function Za(g,E){if(g.da)g=!0;else{E=new ke(E,this);const C=g.listener,b=g.ha||g.src;g.fa&&Mo(g),g=C.call(b,E)}return g}function ks(g){return g=g[Re],g instanceof ce?g:null}var ja="__closure_events_fn_"+(Math.random()*1e9>>>0);function el(g){return typeof g=="function"?g:(g[ja]||(g[ja]=function(E){return g.handleEvent(E)}),g[ja])}function Ct(){D.call(this),this.i=new ce(this),this.M=this,this.G=null}T(Ct,D),Ct.prototype[lt]=!0,Ct.prototype.removeEventListener=function(g,E,C,b){xo(this,g,E,C,b)};function Lt(g,E){var C,b=g.G;if(b)for(C=[];b;b=b.G)C.push(b);if(g=g.M,b=E.type||E,typeof E=="string")E=new k(E,g);else if(E instanceof k)E.target=E.target||g;else{var H=E;E=new k(b,g),le(E,H)}H=!0;let X,fe;if(C)for(fe=C.length-1;fe>=0;fe--)X=E.g=C[fe],H=Ur(X,b,!0,E)&&H;if(X=E.g=g,H=Ur(X,b,!0,E)&&H,H=Ur(X,b,!1,E)&&H,C)for(fe=0;fe<C.length;fe++)X=E.g=C[fe],H=Ur(X,b,!1,E)&&H}Ct.prototype.N=function(){if(Ct.Z.N.call(this),this.i){var g=this.i;for(const E in g.g){const C=g.g[E];for(let b=0;b<C.length;b++)Z(C[b]);delete g.g[E],g.h--}}this.G=null},Ct.prototype.J=function(g,E,C,b){return this.i.add(String(g),E,!1,C,b)},Ct.prototype.K=function(g,E,C,b){return this.i.add(String(g),E,!0,C,b)};function Ur(g,E,C,b){if(E=g.i.g[String(E)],!E)return!0;E=E.concat();let H=!0;for(let X=0;X<E.length;++X){const fe=E[X];if(fe&&!fe.da&&fe.capture==C){const De=fe.listener,vt=fe.ha||fe.src;fe.fa&&Te(g.i,fe),H=De.call(vt,b)!==!1&&H}}return H&&!b.defaultPrevented}function Yd(g,E){if(typeof g!="function")if(g&&typeof g.handleEvent=="function")g=h(g.handleEvent,g);else throw Error("Invalid listener argument");return Number(E)>2147483647?-1:u.setTimeout(g,E||0)}function Bu(g){g.g=Yd(()=>{g.g=null,g.i&&(g.i=!1,Bu(g))},g.l);const E=g.h;g.h=null,g.m.apply(null,E)}class ln extends D{constructor(E,C){super(),this.m=E,this.l=C,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:Bu(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Vs(g){D.call(this),this.h=g,this.g={}}T(Vs,D);var tl=[];function nl(g){he(g.g,function(E,C){this.g.hasOwnProperty(C)&&Mo(E)},g),g.g={}}Vs.prototype.N=function(){Vs.Z.N.call(this),nl(this)},Vs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Lr=u.JSON.stringify,Jd=u.JSON.parse,zu=class{stringify(g){return u.JSON.stringify(g,void 0)}parse(g){return u.JSON.parse(g,void 0)}};function Hu(){}function Ku(){}var Zn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Kt(){k.call(this,"d")}T(Kt,k);function Vn(){k.call(this,"c")}T(Vn,k);var _t={},Yu=null;function Do(){return Yu=Yu||new Ct}_t.Ia="serverreachability";function Ju(g){k.call(this,_t.Ia,g)}T(Ju,k);function Ti(g){const E=Do();Lt(E,new Ju(E))}_t.STAT_EVENT="statevent";function Us(g,E){k.call(this,_t.STAT_EVENT,g),this.stat=E}T(Us,k);function It(g){const E=Do();Lt(E,new Us(E,g))}_t.Ja="timingevent";function Ei(g,E){k.call(this,_t.Ja,g),this.size=E}T(Ei,k);function Si(g,E){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){g()},E)}function jn(){this.g=!0}jn.prototype.ua=function(){this.g=!1};function $d(g,E,C,b,H,X){g.info(function(){if(g.g)if(X){var fe="",De=X.split("&");for(let Qe=0;Qe<De.length;Qe++){var vt=De[Qe].split("=");if(vt.length>1){const ht=vt[0];vt=vt[1];const Fn=ht.split("_");fe=Fn.length>=2&&Fn[1]=="type"?fe+(ht+"="+vt+"&"):fe+(ht+"=redacted&")}}}else fe=null;else fe=X;return"XMLHTTP REQ ("+b+") [attempt "+H+"]: "+E+`
`+C+`
`+fe})}function $u(g,E,C,b,H,X,fe){g.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+H+"]: "+E+`
`+C+`
`+X+" "+fe})}function Ai(g,E,C,b){g.info(function(){return"XMLHTTP TEXT ("+E+"): "+Qd(g,C)+(b?" "+b:"")})}function Ls(g,E){g.info(function(){return"TIMEOUT: "+E})}jn.prototype.info=function(){};function Qd(g,E){if(!g.g)return E;if(!E)return null;try{const X=JSON.parse(E);if(X){for(g=0;g<X.length;g++)if(Array.isArray(X[g])){var C=X[g];if(!(C.length<2)){var b=C[1];if(Array.isArray(b)&&!(b.length<1)){var H=b[0];if(H!="noop"&&H!="stop"&&H!="close")for(let fe=1;fe<b.length;fe++)b[fe]=""}}}}return Lr(X)}catch{return E}}var Os={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},il={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},rl;function Fs(){}T(Fs,Hu),Fs.prototype.g=function(){return new XMLHttpRequest},rl=new Fs;function er(g){return encodeURIComponent(String(g))}function Qu(g){var E=1;g=g.split(":");const C=[];for(;E>0&&g.length;)C.push(g.shift()),E--;return g.length&&C.push(g.join(":")),C}function ei(g,E,C,b){this.j=g,this.i=E,this.l=C,this.S=b||1,this.V=new Vs(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ti}function ti(){this.i=null,this.g="",this.h=!1}var wt={},Gt={};function Ci(g,E,C){g.M=1,g.A=Gs(bt(E)),g.u=C,g.R=!0,Po(g,null)}function Po(g,E){g.F=Date.now(),Ii(g),g.B=bt(g.A);var C=g.B,b=g.S;Array.isArray(b)||(b=[String(b)]),Lo(C.i,"t",b),g.C=0,C=g.j.L,g.h=new ti,g.g=cc(g.j,C?E:null,!g.u),g.P>0&&(g.O=new ln(h(g.Y,g,g.g),g.P)),E=g.V,C=g.g,b=g.ba;var H="readystatechange";Array.isArray(H)||(H&&(tl[0]=H.toString()),H=tl);for(let X=0;X<H.length;X++){const fe=je(C,H[X],b||E.handleEvent,!1,E.h||E);if(!fe)break;E.g[fe.key]=fe}E=g.J?P(g.J):{},g.u?(g.v||(g.v="POST"),E["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.B,g.v,g.u,E)):(g.v="GET",g.g.ea(g.B,g.v,null,E)),Ti(),$d(g.i,g.v,g.B,g.l,g.S,g.u)}ei.prototype.ba=function(g){g=g.target;const E=this.O;E&&ri(g)==3?E.j():this.Y(g)},ei.prototype.Y=function(g){try{if(g==this.g)e:{const De=ri(this.g),vt=this.g.ya(),Qe=this.g.ca();if(!(De<3)&&(De!=3||this.g&&(this.h.h||this.g.la()||Yt(this.g)))){this.K||De!=4||vt==7||(vt==8||Qe<=0?Ti(3):Ti(2)),wi(this);var E=this.g.ca();this.X=E;var C=Xd(this);if(this.o=E==200,$u(this.i,this.v,this.B,this.l,this.S,De,E),this.o){if(this.U&&!this.L){t:{if(this.g){var b,H=this.g;if((b=H.g?H.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(b)){var X=b;break t}}X=null}if(g=X)Ai(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ri(this,g);else{this.o=!1,this.m=3,It(12),In(this),Un(this);break e}}if(this.R){g=!0;let ht;for(;!this.K&&this.C<C.length;)if(ht=Wu(this,C),ht==Gt){De==4&&(this.m=4,It(14),g=!1),Ai(this.i,this.l,null,"[Incomplete Response]");break}else if(ht==wt){this.m=4,It(15),Ai(this.i,this.l,C,"[Invalid Chunk]"),g=!1;break}else Ai(this.i,this.l,ht,null),Ri(this,ht);if(Xu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),De!=4||C.length!=0||this.h.h||(this.m=1,It(16),g=!1),this.o=this.o&&g,!g)Ai(this.i,this.l,C,"[Invalid Chunked Response]"),In(this),Un(this);else if(C.length>0&&!this.W){this.W=!0;var fe=this.j;fe.g==this&&fe.aa&&!fe.P&&(fe.j.info("Great, no buffering proxy detected. Bytes received: "+C.length),vl(fe),fe.P=!0,It(11))}}else Ai(this.i,this.l,C,null),Ri(this,C);De==4&&In(this),this.o&&!this.K&&(De==4?oc(this.j,this):(this.o=!1,Ii(this)))}else nr(this.g),E==400&&C.indexOf("Unknown SID")>0?(this.m=3,It(12)):(this.m=0,It(13)),In(this),Un(this)}}}catch{}finally{}};function Xd(g){if(!Xu(g))return g.g.la();const E=Yt(g.g);if(E==="")return"";let C="";const b=E.length,H=ri(g.g)==4;if(!g.h.i){if(typeof TextDecoder>"u")return In(g),Un(g),"";g.h.i=new u.TextDecoder}for(let X=0;X<b;X++)g.h.h=!0,C+=g.h.i.decode(E[X],{stream:!(H&&X==b-1)});return E.length=0,g.h.g+=C,g.C=0,g.h.g}function Xu(g){return g.g?g.v=="GET"&&g.M!=2&&g.j.Aa:!1}function Wu(g,E){var C=g.C,b=E.indexOf(`
`,C);return b==-1?Gt:(C=Number(E.substring(C,b)),isNaN(C)?wt:(b+=1,b+C>E.length?Gt:(E=E.slice(b,b+C),g.C=b+C,E)))}ei.prototype.cancel=function(){this.K=!0,In(this)};function Ii(g){g.T=Date.now()+g.H,ko(g,g.H)}function ko(g,E){if(g.D!=null)throw Error("WatchDog timer not null");g.D=Si(h(g.aa,g),E)}function wi(g){g.D&&(u.clearTimeout(g.D),g.D=null)}ei.prototype.aa=function(){this.D=null;const g=Date.now();g-this.T>=0?(Ls(this.i,this.B),this.M!=2&&(Ti(),It(17)),In(this),this.m=2,Un(this)):ko(this,this.T-g)};function Un(g){g.j.I==0||g.K||oc(g.j,g)}function In(g){wi(g);var E=g.O;E&&typeof E.dispose=="function"&&E.dispose(),g.O=null,nl(g.V),g.g&&(E=g.g,g.g=null,E.abort(),E.dispose())}function Ri(g,E){try{var C=g.j;if(C.I!=0&&(C.g==g||Ni(C.h,g))){if(!g.L&&Ni(C.h,g)&&C.I==3){try{var b=C.Ba.g.parse(E)}catch{b=null}if(Array.isArray(b)&&b.length==3){var H=b;if(H[0]==0){e:if(!C.v){if(C.g)if(C.g.F+3e3<g.F)Bo(C),Kr(C);else break e;Js(C),It(18)}}else C.xa=H[1],0<C.xa-C.K&&H[2]<37500&&C.F&&C.A==0&&!C.C&&(C.C=Si(h(C.Va,C),6e3));bi(C.h)<=1&&C.ta&&(C.ta=void 0)}else Vi(C,11)}else if((g.L||C.g==g)&&Bo(C),!M(E))for(H=C.Ba.g.parse(E),E=0;E<H.length;E++){let Qe=H[E];const ht=Qe[0];if(!(ht<=C.K))if(C.K=ht,Qe=Qe[1],C.I==2)if(Qe[0]=="c"){C.M=Qe[1],C.ba=Qe[2];const Fn=Qe[3];Fn!=null&&(C.ka=Fn,C.j.info("VER="+C.ka));const Ui=Qe[4];Ui!=null&&(C.za=Ui,C.j.info("SVER="+C.za));const si=Qe[5];si!=null&&typeof si=="number"&&si>0&&(b=1.5*si,C.O=b,C.j.info("backChannelRequestTimeoutMs_="+b)),b=C;const oi=g.g;if(oi){const $s=oi.g?oi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if($s){var X=b.h;X.g||$s.indexOf("spdy")==-1&&$s.indexOf("quic")==-1&&$s.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(al(X,X.h),X.h=null))}if(b.G){const zo=oi.g?oi.g.getResponseHeader("X-HTTP-Session-Id"):null;zo&&(b.wa=zo,et(b.J,b.G,zo))}}C.I=3,C.l&&C.l.ra(),C.aa&&(C.T=Date.now()-g.F,C.j.info("Handshake RTT: "+C.T+"ms")),b=C;var fe=g;if(b.na=uc(b,b.L?b.ba:null,b.W),fe.L){ll(b.h,fe);var De=fe,vt=b.O;vt&&(De.H=vt),De.D&&(wi(De),Ii(De)),b.g=fe}else rc(b);C.i.length>0&&ki(C)}else Qe[0]!="stop"&&Qe[0]!="close"||Vi(C,7);else C.I==3&&(Qe[0]=="stop"||Qe[0]=="close"?Qe[0]=="stop"?Vi(C,7):yl(C):Qe[0]!="noop"&&C.l&&C.l.qa(Qe),C.A=0)}}Ti(4)}catch{}}var Rt=class{constructor(g,E){this.g=g,this.map=E}};function sl(g){this.l=g||10,u.PerformanceNavigationTiming?(g=u.performance.getEntriesByType("navigation"),g=g.length>0&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ol(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function bi(g){return g.h?1:g.g?g.g.size:0}function Ni(g,E){return g.h?g.h==E:g.g?g.g.has(E):!1}function al(g,E){g.g?g.g.add(E):g.h=E}function ll(g,E){g.h&&g.h==E?g.h=null:g.g&&g.g.has(E)&&g.g.delete(E)}sl.prototype.cancel=function(){if(this.i=ul(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function ul(g){if(g.h!=null)return g.i.concat(g.h.G);if(g.g!=null&&g.g.size!==0){let E=g.i;for(const C of g.g.values())E=E.concat(C.G);return E}return I(g.i)}var Zu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Vo(g,E){if(g){g=g.split("&");for(let C=0;C<g.length;C++){const b=g[C].indexOf("=");let H,X=null;b>=0?(H=g[C].substring(0,b),X=g[C].substring(b+1)):H=g[C],E(H,X?decodeURIComponent(X.replace(/\+/g," ")):"")}}}function wn(g){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let E;g instanceof wn?(this.l=g.l,qt(this,g.j),this.o=g.o,this.g=g.g,Or(this,g.u),this.h=g.h,cl(this,nc(g.i)),this.m=g.m):g&&(E=String(g).match(Zu))?(this.l=!1,qt(this,E[1]||"",!0),this.o=xi(E[2]||""),this.g=xi(E[3]||"",!0),Or(this,E[4]),this.h=xi(E[5]||"",!0),cl(this,E[6]||"",!0),this.m=xi(E[7]||"")):(this.l=!1,this.i=new Gr(null,this.l))}wn.prototype.toString=function(){const g=[];var E=this.j;E&&g.push(qs(E,Uo,!0),":");var C=this.g;return(C||E=="file")&&(g.push("//"),(E=this.o)&&g.push(qs(E,Uo,!0),"@"),g.push(er(C).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.u,C!=null&&g.push(":",String(C))),(C=this.h)&&(this.g&&C.charAt(0)!="/"&&g.push("/"),g.push(qs(C,C.charAt(0)=="/"?fl:ju,!0))),(C=this.i.toString())&&g.push("?",C),(C=this.m)&&g.push("#",qs(C,ec)),g.join("")},wn.prototype.resolve=function(g){const E=bt(this);let C=!!g.j;C?qt(E,g.j):C=!!g.o,C?E.o=g.o:C=!!g.g,C?E.g=g.g:C=g.u!=null;var b=g.h;if(C)Or(E,g.u);else if(C=!!g.h){if(b.charAt(0)!="/")if(this.g&&!this.h)b="/"+b;else{var H=E.h.lastIndexOf("/");H!=-1&&(b=E.h.slice(0,H+1)+b)}if(H=b,H==".."||H==".")b="";else if(H.indexOf("./")!=-1||H.indexOf("/.")!=-1){b=H.lastIndexOf("/",0)==0,H=H.split("/");const X=[];for(let fe=0;fe<H.length;){const De=H[fe++];De=="."?b&&fe==H.length&&X.push(""):De==".."?((X.length>1||X.length==1&&X[0]!="")&&X.pop(),b&&fe==H.length&&X.push("")):(X.push(De),b=!0)}b=X.join("/")}else b=H}return C?E.h=b:C=g.i.toString()!=="",C?cl(E,nc(g.i)):C=!!g.m,C&&(E.m=g.m),E};function bt(g){return new wn(g)}function qt(g,E,C){g.j=C?xi(E,!0):E,g.j&&(g.j=g.j.replace(/:$/,""))}function Or(g,E){if(E){if(E=Number(E),isNaN(E)||E<0)throw Error("Bad port number "+E);g.u=E}else g.u=null}function cl(g,E,C){E instanceof Gr?(g.i=E,Oo(g.i,g.l)):(C||(E=qs(E,Fr)),g.i=new Gr(E,g.l))}function et(g,E,C){g.i.set(E,C)}function Gs(g){return et(g,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),g}function xi(g,E){return g?E?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function qs(g,E,C){return typeof g=="string"?(g=encodeURI(g).replace(E,pn),C&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function pn(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var Uo=/[#\/\?@]/g,ju=/[#\?:]/g,fl=/[#\?]/g,Fr=/[#\?@]/g,ec=/#/g;function Gr(g,E){this.h=this.g=null,this.i=g||null,this.j=!!E}function mn(g){g.g||(g.g=new Map,g.h=0,g.i&&Vo(g.i,function(E,C){g.add(decodeURIComponent(E.replace(/\+/g," ")),C)}))}n=Gr.prototype,n.add=function(g,E){mn(this),this.i=null,g=qr(this,g);let C=this.g.get(g);return C||this.g.set(g,C=[]),C.push(E),this.h+=1,this};function tc(g,E){mn(g),E=qr(g,E),g.g.has(E)&&(g.i=null,g.h-=g.g.get(E).length,g.g.delete(E))}function dl(g,E){return mn(g),E=qr(g,E),g.g.has(E)}n.forEach=function(g,E){mn(this),this.g.forEach(function(C,b){C.forEach(function(H){g.call(E,H,b,this)},this)},this)};function hl(g,E){mn(g);let C=[];if(typeof E=="string")dl(g,E)&&(C=C.concat(g.g.get(qr(g,E))));else for(g=Array.from(g.g.values()),E=0;E<g.length;E++)C=C.concat(g[E]);return C}n.set=function(g,E){return mn(this),this.i=null,g=qr(this,g),dl(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[E]),this.h+=1,this},n.get=function(g,E){return g?(g=hl(this,g),g.length>0?String(g[0]):E):E};function Lo(g,E,C){tc(g,E),C.length>0&&(g.i=null,g.g.set(qr(g,E),I(C)),g.h+=C.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],E=Array.from(this.g.keys());for(let b=0;b<E.length;b++){var C=E[b];const H=er(C);C=hl(this,C);for(let X=0;X<C.length;X++){let fe=H;C[X]!==""&&(fe+="="+er(C[X])),g.push(fe)}}return this.i=g.join("&")};function nc(g){const E=new Gr;return E.i=g.i,g.g&&(E.g=new Map(g.g),E.h=g.h),E}function qr(g,E){return E=String(E),g.j&&(E=E.toLowerCase()),E}function Oo(g,E){E&&!g.j&&(mn(g),g.i=null,g.g.forEach(function(C,b){const H=b.toLowerCase();b!=H&&(tc(this,b),Lo(this,H,C))},g)),g.j=E}function ni(g,E){const C=new jn;if(u.Image){const b=new Image;b.onload=_(Ln,C,"TestLoadImage: loaded",!0,E,b),b.onerror=_(Ln,C,"TestLoadImage: error",!1,E,b),b.onabort=_(Ln,C,"TestLoadImage: abort",!1,E,b),b.ontimeout=_(Ln,C,"TestLoadImage: timeout",!1,E,b),u.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=g}else E(!1)}function pl(g,E){const C=new jn,b=new AbortController,H=setTimeout(()=>{b.abort(),Ln(C,"TestPingServer: timeout",!1,E)},1e4);fetch(g,{signal:b.signal}).then(X=>{clearTimeout(H),X.ok?Ln(C,"TestPingServer: ok",!0,E):Ln(C,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(H),Ln(C,"TestPingServer: error",!1,E)})}function Ln(g,E,C,b,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),b(C)}catch{}}function Br(){this.g=new zu}function Mi(g){this.i=g.Sb||null,this.h=g.ab||!1}T(Mi,Hu),Mi.prototype.g=function(){return new Bs(this.i,this.h)};function Bs(g,E){Ct.call(this),this.H=g,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(Bs,Ct),n=Bs.prototype,n.open=function(g,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=g,this.D=E,this.readyState=1,ii(this)},n.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const E={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};g&&(E.body=g),(this.H||u).fetch(new Request(this.D,E)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,zr(this)),this.readyState=0},n.Pa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,ii(this)),this.g&&(this.readyState=3,ii(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Fo(this)}else g.text().then(this.Oa.bind(this),this.ga.bind(this))};function Fo(g){g.j.read().then(g.Ma.bind(g)).catch(g.ga.bind(g))}n.Ma=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var E=g.value?g.value:new Uint8Array(0);(E=this.B.decode(E,{stream:!g.done}))&&(this.response=this.responseText+=E)}g.done?zr(this):ii(this),this.readyState==3&&Fo(this)}},n.Oa=function(g){this.g&&(this.response=this.responseText=g,zr(this))},n.Na=function(g){this.g&&(this.response=g,zr(this))},n.ga=function(){this.g&&zr(this)};function zr(g){g.readyState=4,g.l=null,g.j=null,g.B=null,ii(g)}n.setRequestHeader=function(g,E){this.A.append(g,E)},n.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],E=this.h.entries();for(var C=E.next();!C.done;)C=C.value,g.push(C[0]+": "+C[1]),C=E.next();return g.join(`\r
`)};function ii(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(Bs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function On(g){let E="";return he(g,function(C,b){E+=b,E+=":",E+=C,E+=`\r
`}),E}function zs(g,E,C){e:{for(b in C){var b=!1;break e}b=!0}b||(C=On(C),typeof g=="string"?C!=null&&er(C):et(g,E,C))}function it(g){Ct.call(this),this.headers=new Map,this.L=g||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(it,Ct);var Di=/^https?$/i,ml=["POST","PUT"];n=it.prototype,n.Fa=function(g){this.H=g},n.ea=function(g,E,C,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);E=E?E.toUpperCase():"GET",this.D=g,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():rl.g(),this.g.onreadystatechange=S(h(this.Ca,this));try{this.B=!0,this.g.open(E,String(g),!0),this.B=!1}catch(X){Hs(this,X);return}if(g=C||"",C=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var H in b)C.set(H,b[H]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const X of b.keys())C.set(X,b.get(X));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(C.keys()).find(X=>X.toLowerCase()=="content-type"),H=u.FormData&&g instanceof u.FormData,!(Array.prototype.indexOf.call(ml,E,void 0)>=0)||b||H||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,fe]of C)this.g.setRequestHeader(X,fe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(g),this.v=!1}catch(X){Hs(this,X)}};function Hs(g,E){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=E,g.o=5,gl(g),tr(g)}function gl(g){g.A||(g.A=!0,Lt(g,"complete"),Lt(g,"error"))}n.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=g||7,Lt(this,"complete"),Lt(this,"abort"),tr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),tr(this,!0)),it.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Ks(this):this.Xa())},n.Xa=function(){Ks(this)};function Ks(g){if(g.h&&typeof a<"u"){if(g.v&&ri(g)==4)setTimeout(g.Ca.bind(g),0);else if(Lt(g,"readystatechange"),ri(g)==4){g.h=!1;try{const X=g.ca();e:switch(X){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var C;if(!(C=E)){var b;if(b=X===0){let fe=String(g.D).match(Zu)[1]||null;!fe&&u.self&&u.self.location&&(fe=u.self.location.protocol.slice(0,-1)),b=!Di.test(fe?fe.toLowerCase():"")}C=b}if(C)Lt(g,"complete"),Lt(g,"success");else{g.o=6;try{var H=ri(g)>2?g.g.statusText:""}catch{H=""}g.l=H+" ["+g.ca()+"]",gl(g)}}finally{tr(g)}}}}function tr(g,E){if(g.g){g.m&&(clearTimeout(g.m),g.m=null);const C=g.g;g.g=null,E||Lt(g,"ready");try{C.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function ri(g){return g.g?g.g.readyState:0}n.ca=function(){try{return ri(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(g){if(this.g){var E=this.g.responseText;return g&&E.indexOf(g)==0&&(E=E.substring(g.length)),Jd(E)}};function Yt(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.F){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function nr(g){const E={};g=(g.g&&ri(g)>=2&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<g.length;b++){if(M(g[b]))continue;var C=Qu(g[b]);const H=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const X=E[H]||[];E[H]=X,X.push(C)}pe(E,function(b){return b.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Pi(g,E,C){return C&&C.internalChannelParams&&C.internalChannelParams[g]||E}function Hr(g){this.za=0,this.i=[],this.j=new jn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Pi("failFast",!1,g),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Pi("baseRetryDelayMs",5e3,g),this.Za=Pi("retryDelaySeedMs",1e4,g),this.Ta=Pi("forwardChannelMaxRetries",2,g),this.va=Pi("forwardChannelRequestTimeoutMs",2e4,g),this.ma=g&&g.xmlHttpFactory||void 0,this.Ua=g&&g.Rb||void 0,this.Aa=g&&g.useFetchStreams||!1,this.O=void 0,this.L=g&&g.supportsCrossDomainXhr||!1,this.M="",this.h=new sl(g&&g.concurrentRequestLimit),this.Ba=new Br,this.S=g&&g.fastHandshake||!1,this.R=g&&g.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=g&&g.Pb||!1,g&&g.ua&&this.j.ua(),g&&g.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&g&&g.detectBufferingProxy||!1,this.ia=void 0,g&&g.longPollingTimeout&&g.longPollingTimeout>0&&(this.ia=g.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Hr.prototype,n.ka=8,n.I=1,n.connect=function(g,E,C,b){It(0),this.W=g,this.H=E||{},C&&b!==void 0&&(this.H.OSID=C,this.H.OAID=b),this.F=this.X,this.J=uc(this,null,this.W),ki(this)};function yl(g){if(Go(g),g.I==3){var E=g.V++,C=bt(g.J);if(et(C,"SID",g.M),et(C,"RID",E),et(C,"TYPE","terminate"),Ys(g,C),E=new ei(g,g.j,E),E.M=2,E.A=Gs(bt(C)),C=!1,u.navigator&&u.navigator.sendBeacon)try{C=u.navigator.sendBeacon(E.A.toString(),"")}catch{}!C&&u.Image&&(new Image().src=E.A,C=!0),C||(E.g=cc(E.j,null),E.g.ea(E.A)),E.F=Date.now(),Ii(E)}lc(g)}function Kr(g){g.g&&(vl(g),g.g.cancel(),g.g=null)}function Go(g){Kr(g),g.v&&(u.clearTimeout(g.v),g.v=null),Bo(g),g.h.cancel(),g.m&&(typeof g.m=="number"&&u.clearTimeout(g.m),g.m=null)}function ki(g){if(!ol(g.h)&&!g.m){g.m=!0;var E=g.Ea;de||R(),ue||(de(),ue=!0),x.add(E,g),g.D=0}}function qo(g,E){return bi(g.h)>=g.h.j-(g.m?1:0)?!1:g.m?(g.i=E.G.concat(g.i),!0):g.I==1||g.I==2||g.D>=(g.Sa?0:g.Ta)?!1:(g.m=Si(h(g.Ea,g,E),ac(g,g.D)),g.D++,!0)}n.Ea=function(g){if(this.m)if(this.m=null,this.I==1){if(!g){this.V=Math.floor(Math.random()*1e5),g=this.V++;const H=new ei(this,this.j,g);let X=this.o;if(this.U&&(X?(X=P(X),le(X,this.U)):X=this.U),this.u!==null||this.R||(H.J=X,X=null),this.S)e:{for(var E=0,C=0;C<this.i.length;C++){t:{var b=this.i[C];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(E+=b,E>4096){E=C;break e}if(E===4096||C===this.i.length-1){E=C+1;break e}}E=1e3}else E=1e3;E=ic(this,H,E),C=bt(this.J),et(C,"RID",g),et(C,"CVER",22),this.G&&et(C,"X-HTTP-Session-Id",this.G),Ys(this,C),X&&(this.R?E="headers="+er(On(X))+"&"+E:this.u&&zs(C,this.u,X)),al(this.h,H),this.Ra&&et(C,"TYPE","init"),this.S?(et(C,"$req",E),et(C,"SID","null"),H.U=!0,Ci(H,C,null)):Ci(H,C,E),this.I=2}}else this.I==3&&(g?_l(this,g):this.i.length==0||ol(this.h)||_l(this))};function _l(g,E){var C;E?C=E.l:C=g.V++;const b=bt(g.J);et(b,"SID",g.M),et(b,"RID",C),et(b,"AID",g.K),Ys(g,b),g.u&&g.o&&zs(b,g.u,g.o),C=new ei(g,g.j,C,g.D+1),g.u===null&&(C.J=g.o),E&&(g.i=E.G.concat(g.i)),E=ic(g,C,1e3),C.H=Math.round(g.va*.5)+Math.round(g.va*.5*Math.random()),al(g.h,C),Ci(C,b,E)}function Ys(g,E){g.H&&he(g.H,function(C,b){et(E,b,C)}),g.l&&he({},function(C,b){et(E,b,C)})}function ic(g,E,C){C=Math.min(g.i.length,C);const b=g.l?h(g.l.Ka,g.l,g):null;e:{var H=g.i;let De=-1;for(;;){const vt=["count="+C];De==-1?C>0?(De=H[0].g,vt.push("ofs="+De)):De=0:vt.push("ofs="+De);let Qe=!0;for(let ht=0;ht<C;ht++){var X=H[ht].g;const Fn=H[ht].map;if(X-=De,X<0)De=Math.max(0,H[ht].g-100),Qe=!1;else try{X="req"+X+"_"||"";try{var fe=Fn instanceof Map?Fn:Object.entries(Fn);for(const[Ui,si]of fe){let oi=si;d(si)&&(oi=Lr(si)),vt.push(X+Ui+"="+encodeURIComponent(oi))}}catch(Ui){throw vt.push(X+"type="+encodeURIComponent("_badmap")),Ui}}catch{b&&b(Fn)}}if(Qe){fe=vt.join("&");break e}}fe=void 0}return g=g.i.splice(0,C),E.G=g,fe}function rc(g){if(!g.g&&!g.v){g.Y=1;var E=g.Da;de||R(),ue||(de(),ue=!0),x.add(E,g),g.A=0}}function Js(g){return g.g||g.v||g.A>=3?!1:(g.Y++,g.v=Si(h(g.Da,g),ac(g,g.A)),g.A++,!0)}n.Da=function(){if(this.v=null,sc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var g=4*this.T;this.j.info("BP detection timer enabled: "+g),this.B=Si(h(this.Wa,this),g)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,It(10),Kr(this),sc(this))};function vl(g){g.B!=null&&(u.clearTimeout(g.B),g.B=null)}function sc(g){g.g=new ei(g,g.j,"rpc",g.Y),g.u===null&&(g.g.J=g.o),g.g.P=0;var E=bt(g.na);et(E,"RID","rpc"),et(E,"SID",g.M),et(E,"AID",g.K),et(E,"CI",g.F?"0":"1"),!g.F&&g.ia&&et(E,"TO",g.ia),et(E,"TYPE","xmlhttp"),Ys(g,E),g.u&&g.o&&zs(E,g.u,g.o),g.O&&(g.g.H=g.O);var C=g.g;g=g.ba,C.M=1,C.A=Gs(bt(E)),C.u=null,C.R=!0,Po(C,g)}n.Va=function(){this.C!=null&&(this.C=null,Kr(this),Js(this),It(19))};function Bo(g){g.C!=null&&(u.clearTimeout(g.C),g.C=null)}function oc(g,E){var C=null;if(g.g==E){Bo(g),vl(g),g.g=null;var b=2}else if(Ni(g.h,E))C=E.G,ll(g.h,E),b=1;else return;if(g.I!=0){if(E.o)if(b==1){C=E.u?E.u.length:0,E=Date.now()-E.F;var H=g.D;b=Do(),Lt(b,new Ei(b,C)),ki(g)}else rc(g);else if(H=E.m,H==3||H==0&&E.X>0||!(b==1&&qo(g,E)||b==2&&Js(g)))switch(C&&C.length>0&&(E=g.h,E.i=E.i.concat(C)),H){case 1:Vi(g,5);break;case 4:Vi(g,10);break;case 3:Vi(g,6);break;default:Vi(g,2)}}}function ac(g,E){let C=g.Qa+Math.floor(Math.random()*g.Za);return g.isActive()||(C*=2),C*E}function Vi(g,E){if(g.j.info("Error code "+E),E==2){var C=h(g.bb,g),b=g.Ua;const H=!b;b=new wn(b||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||qt(b,"https"),Gs(b),H?ni(b.toString(),C):pl(b.toString(),C)}else It(2);g.I=0,g.l&&g.l.pa(E),lc(g),Go(g)}n.bb=function(g){g?(this.j.info("Successfully pinged google.com"),It(2)):(this.j.info("Failed to ping google.com"),It(1))};function lc(g){if(g.I=0,g.ja=[],g.l){const E=ul(g.h);(E.length!=0||g.i.length!=0)&&(L(g.ja,E),L(g.ja,g.i),g.h.i.length=0,I(g.i),g.i.length=0),g.l.oa()}}function uc(g,E,C){var b=C instanceof wn?bt(C):new wn(C);if(b.g!="")E&&(b.g=E+"."+b.g),Or(b,b.u);else{var H=u.location;b=H.protocol,E=E?E+"."+H.hostname:H.hostname,H=+H.port;const X=new wn(null);b&&qt(X,b),E&&(X.g=E),H&&Or(X,H),C&&(X.h=C),b=X}return C=g.G,E=g.wa,C&&E&&et(b,C,E),et(b,"VER",g.ka),Ys(g,b),b}function cc(g,E,C){if(E&&!g.L)throw Error("Can't create secondary domain capable XhrIo object.");return E=g.Aa&&!g.ma?new it(new Mi({ab:C})):new it(g.ma),E.Fa(g.L),E}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function fc(){}n=fc.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Yr(){}Yr.prototype.g=function(g,E){return new un(g,E)};function un(g,E){Ct.call(this),this.g=new Hr(E),this.l=g,this.h=E&&E.messageUrlParams||null,g=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(g?g["X-WebChannel-Content-Type"]=E.messageContentType:g={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.sa&&(g?g["X-WebChannel-Client-Profile"]=E.sa:g={"X-WebChannel-Client-Profile":E.sa}),this.g.U=g,(g=E&&E.Qb)&&!M(g)&&(this.g.u=g),this.A=E&&E.supportsCrossDomainXhr||!1,this.v=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!M(E)&&(this.g.G=E,g=this.h,g!==null&&E in g&&(g=this.h,E in g&&delete g[E])),this.j=new ir(this)}T(un,Ct),un.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},un.prototype.close=function(){yl(this.g)},un.prototype.o=function(g){var E=this.g;if(typeof g=="string"){var C={};C.__data__=g,g=C}else this.v&&(C={},C.__data__=Lr(g),g=C);E.i.push(new Rt(E.Ya++,g)),E.I==3&&ki(E)},un.prototype.N=function(){this.g.l=null,delete this.j,yl(this.g),delete this.g,un.Z.N.call(this)};function dc(g){Kt.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var E=g.__sm__;if(E){e:{for(const C in E){g=C;break e}g=void 0}(this.i=g)&&(g=this.i,E=E!==null&&g in E?E[g]:void 0),this.data=E}else this.data=g}T(dc,Kt);function hc(){Vn.call(this),this.status=1}T(hc,Vn);function ir(g){this.g=g}T(ir,fc),ir.prototype.ra=function(){Lt(this.g,"a")},ir.prototype.qa=function(g){Lt(this.g,new dc(g))},ir.prototype.pa=function(g){Lt(this.g,new hc)},ir.prototype.oa=function(){Lt(this.g,"b")},Yr.prototype.createWebChannel=Yr.prototype.g,un.prototype.send=un.prototype.o,un.prototype.open=un.prototype.m,un.prototype.close=un.prototype.close,ZC=function(){return new Yr},WC=function(){return Do()},XC=_t,Um={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Os.NO_ERROR=0,Os.TIMEOUT=8,Os.HTTP_ERROR=6,Lf=Os,il.COMPLETE="complete",QC=il,Ku.EventType=Zn,Zn.OPEN="a",Zn.CLOSE="b",Zn.ERROR="c",Zn.MESSAGE="d",Ct.prototype.listen=Ct.prototype.J,cu=Ku,it.prototype.listenOnce=it.prototype.K,it.prototype.getLastError=it.prototype.Ha,it.prototype.getLastErrorCode=it.prototype.ya,it.prototype.getStatus=it.prototype.ca,it.prototype.getResponseJson=it.prototype.La,it.prototype.getResponseText=it.prototype.la,it.prototype.send=it.prototype.ea,it.prototype.setWithCredentials=it.prototype.Fa,$C=it}).apply(typeof Cf<"u"?Cf:typeof self<"u"?self:typeof window<"u"?window:{});const X0="@firebase/firestore",W0="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}rn.UNAUTHENTICATED=new rn(null),rn.GOOGLE_CREDENTIALS=new rn("google-credentials-uid"),rn.FIRST_PARTY=new rn("first-party-uid"),rn.MOCK_USER=new rn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ya="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eo=new hg("@firebase/firestore");function Ta(){return Eo.logLevel}function ye(n,...e){if(Eo.logLevel<=Ge.DEBUG){const t=e.map(wg);Eo.debug(`Firestore (${Ya}): ${n}`,...t)}}function xr(n,...e){if(Eo.logLevel<=Ge.ERROR){const t=e.map(wg);Eo.error(`Firestore (${Ya}): ${n}`,...t)}}function Va(n,...e){if(Eo.logLevel<=Ge.WARN){const t=e.map(wg);Eo.warn(`Firestore (${Ya}): ${n}`,...t)}}function wg(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function we(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,jC(n,i,t)}function jC(n,e,t){let i=`FIRESTORE (${Ya}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw xr(i),new Error(i)}function We(n,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,n||jC(e,o,i)}function Me(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ge extends Wi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class GL{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(rn.UNAUTHENTICATED)))}shutdown(){}}class qL{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class BL{constructor(e){this.t=e,this.currentUser=rn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){We(this.o===void 0,42304);let i=this.i;const o=m=>this.i!==i?(i=this.i,t(m)):Promise.resolve();let a=new wr;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new wr,e.enqueueRetryable((()=>o(this.currentUser)))};const u=()=>{const m=a;e.enqueueRetryable((async()=>{await m.promise,await o(this.currentUser)}))},d=m=>{ye("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((m=>d(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?d(m):(ye("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new wr)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(ye("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(We(typeof i.accessToken=="string",31837,{l:i}),new eI(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return We(e===null||typeof e=="string",2055,{h:e}),new rn(e)}}class zL{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=rn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class HL{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new zL(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(rn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Z0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class KL{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,An(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){We(this.o===void 0,3512);const i=a=>{a.error!=null&&ye("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.m;return this.m=a.token,ye("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>i(a)))};const o=a=>{ye("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>o(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?o(a):ye("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Z0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(We(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Z0(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YL(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=YL(40);for(let a=0;a<o.length;++a)i.length<20&&o[a]<t&&(i+=e.charAt(o[a]%62))}return i}}function qe(n,e){return n<e?-1:n>e?1:0}function Lm(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const o=n.charAt(i),a=e.charAt(i);if(o!==a)return om(o)===om(a)?qe(o,a):om(o)?1:-1}return qe(n.length,e.length)}const JL=55296,$L=57343;function om(n){const e=n.charCodeAt(0);return e>=JL&&e<=$L}function Ua(n,e,t){return n.length===e.length&&n.every(((i,o)=>t(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j0="__name__";class qi{constructor(e,t,i){t===void 0?t=0:t>e.length&&we(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&we(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return qi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof qi?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const a=qi.compareSegments(e.get(o),t.get(o));if(a!==0)return a}return qe(e.length,t.length)}static compareSegments(e,t){const i=qi.isNumericId(e),o=qi.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?qi.extractNumericId(e).compare(qi.extractNumericId(t)):Lm(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Es.fromString(e.substring(4,e.length-2))}}class ut extends qi{construct(e,t,i){return new ut(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new ge(re.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new ut(t)}static emptyPath(){return new ut([])}}const QL=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Zt extends qi{construct(e,t,i){return new Zt(e,t,i)}static isValidIdentifier(e){return QL.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Zt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===j0}static keyField(){return new Zt([j0])}static fromServerFormat(e){const t=[];let i="",o=0;const a=()=>{if(i.length===0)throw new ge(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let u=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new ge(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[o+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new ge(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=m,o+=2}else d==="`"?(u=!u,o++):d!=="."||u?(i+=d,o++):(a(),o++)}if(a(),u)throw new ge(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Zt(t)}static emptyPath(){return new Zt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e){this.path=e}static fromPath(e){return new Se(ut.fromString(e))}static fromName(e){return new Se(ut.fromString(e).popFirst(5))}static empty(){return new Se(ut.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ut.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ut.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Se(new ut(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tI(n,e,t){if(!t)throw new ge(re.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function XL(n,e,t,i){if(e===!0&&i===!0)throw new ge(re.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function eS(n){if(!Se.isDocumentKey(n))throw new ge(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function tS(n){if(Se.isDocumentKey(n))throw new ge(re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function nI(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function bd(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":we(12329,{type:typeof n})}function $i(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ge(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=bd(n);throw new ge(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vt(n,e){const t={typeString:n};return e&&(t.value=e),t}function Uu(n,e){if(!nI(n))throw new ge(re.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,a="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const u=n[i];if(o&&typeof u!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(a!==void 0&&u!==a.value){t=`Expected '${i}' field to equal '${a.value}'`;break}}if(t)throw new ge(re.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nS=-62135596800,iS=1e6;class dt{static now(){return dt.fromMillis(Date.now())}static fromDate(e){return dt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*iS);return new dt(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ge(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ge(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<nS)throw new ge(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ge(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/iS}_compareTo(e){return this.seconds===e.seconds?qe(this.nanoseconds,e.nanoseconds):qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:dt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Uu(e,dt._jsonSchema))return new dt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-nS;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}dt._jsonSchemaVersion="firestore/timestamp/1.0",dt._jsonSchema={type:Vt("string",dt._jsonSchemaVersion),seconds:Vt("number"),nanoseconds:Vt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{static fromTimestamp(e){return new Ne(e)}static min(){return new Ne(new dt(0,0))}static max(){return new Ne(new dt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Su=-1;function WL(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,o=Ne.fromTimestamp(i===1e9?new dt(t+1,0):new dt(t,i));return new Cs(o,Se.empty(),e)}function ZL(n){return new Cs(n.readTime,n.key,Su)}class Cs{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Cs(Ne.min(),Se.empty(),Su)}static max(){return new Cs(Ne.max(),Se.empty(),Su)}}function jL(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Se.comparator(n.documentKey,e.documentKey),t!==0?t:qe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class tO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ja(n){if(n.code!==re.FAILED_PRECONDITION||n.message!==eO)throw n;ye("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&we(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ae(((i,o)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,o)},this.catchCallback=a=>{this.wrapFailure(t,a).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ae?t:ae.resolve(t)}catch(t){return ae.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ae.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ae.reject(t)}static resolve(e){return new ae(((t,i)=>{t(e)}))}static reject(e){return new ae(((t,i)=>{i(e)}))}static waitFor(e){return new ae(((t,i)=>{let o=0,a=0,u=!1;e.forEach((d=>{++o,d.next((()=>{++a,u&&a===o&&t()}),(m=>i(m)))})),u=!0,a===o&&t()}))}static or(e){let t=ae.resolve(!1);for(const i of e)t=t.next((o=>o?ae.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,a)=>{i.push(t.call(this,o,a))})),this.waitFor(i)}static mapArray(e,t){return new ae(((i,o)=>{const a=e.length,u=new Array(a);let d=0;for(let m=0;m<a;m++){const h=m;t(e[h]).next((_=>{u[h]=_,++d,d===a&&i(u)}),(_=>o(_)))}}))}static doWhile(e,t){return new ae(((i,o)=>{const a=()=>{e()===!0?t().next((()=>{a()}),o):i()};a()}))}}function nO(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function $a(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Nd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bg=-1;function xd(n){return n==null}function rd(n){return n===0&&1/n==-1/0}function iO(n){return typeof n=="number"&&Number.isInteger(n)&&!rd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iI="";function rO(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=rS(e)),e=sO(n.get(t),e);return rS(e)}function sO(n,e){let t=e;const i=n.length;for(let o=0;o<i;o++){const a=n.charAt(o);switch(a){case"\0":t+="";break;case iI:t+="";break;default:t+=a}}return t}function rS(n){return n+iI+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sS(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ms(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function rI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e,t){this.comparator=e,this.root=t||Wt.EMPTY}insert(e,t){return new mt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Wt.BLACK,null,null))}remove(e){return new mt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Wt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new If(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new If(this.root,e,this.comparator,!1)}getReverseIterator(){return new If(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new If(this.root,e,this.comparator,!0)}}class If{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?i(e.key,t):1,t&&o&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Wt{constructor(e,t,i,o,a){this.key=e,this.value=t,this.color=i??Wt.RED,this.left=o??Wt.EMPTY,this.right=a??Wt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,a){return new Wt(e??this.key,t??this.value,i??this.color,o??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const a=i(e,o.key);return o=a<0?o.copy(null,null,null,o.left.insert(e,t,i),null):a===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Wt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Wt.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Wt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Wt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw we(43730,{key:this.key,value:this.value});if(this.right.isRed())throw we(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw we(27949);return e+(this.isRed()?0:1)}}Wt.EMPTY=null,Wt.RED=!0,Wt.BLACK=!1;Wt.EMPTY=new class{constructor(){this.size=0}get key(){throw we(57766)}get value(){throw we(16141)}get color(){throw we(16727)}get left(){throw we(29726)}get right(){throw we(36894)}copy(e,t,i,o,a){return this}insert(e,t,i){return new Wt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.comparator=e,this.data=new mt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new oS(this.data.getIterator())}getIteratorFrom(e){return new oS(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Ft)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=i.getNext().key;if(this.comparator(o,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Ft(this.comparator);return t.data=e,t}}class oS{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e){this.fields=e,e.sort(Zt.comparator)}static empty(){return new kn([])}unionWith(e){let t=new Ft(Zt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new kn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ua(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new sI("Invalid base64 string: "+a):a}})(e);return new jt(t)}static fromUint8Array(e){const t=(function(o){let a="";for(let u=0;u<o.length;++u)a+=String.fromCharCode(o[u]);return a})(e);return new jt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}jt.EMPTY_BYTE_STRING=new jt("");const oO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Is(n){if(We(!!n,39018),typeof n=="string"){let e=0;const t=oO.exec(n);if(We(!!t,46558,{timestamp:n}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:St(n.seconds),nanos:St(n.nanos)}}function St(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ws(n){return typeof n=="string"?jt.fromBase64String(n):jt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oI="server_timestamp",aI="__type__",lI="__previous_value__",uI="__local_write_time__";function Ng(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[aI])==null?void 0:i.stringValue)===oI}function Md(n){const e=n.mapValue.fields[lI];return Ng(e)?Md(e):e}function Au(n){const e=Is(n.mapValue.fields[uI].timestampValue);return new dt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aO{constructor(e,t,i,o,a,u,d,m,h,_){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=m,this.useFetchStreams=h,this.isUsingEmulator=_}}const sd="(default)";class Cu{constructor(e,t){this.projectId=e,this.database=t||sd}static empty(){return new Cu("","")}get isDefaultDatabase(){return this.database===sd}isEqual(e){return e instanceof Cu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cI="__type__",lO="__max__",wf={mapValue:{}},fI="__vector__",od="value";function Rs(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Ng(n)?4:cO(n)?9007199254740991:uO(n)?10:11:we(28295,{value:n})}function Qi(n,e){if(n===e)return!0;const t=Rs(n);if(t!==Rs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Au(n).isEqual(Au(e));case 3:return(function(o,a){if(typeof o.timestampValue=="string"&&typeof a.timestampValue=="string"&&o.timestampValue.length===a.timestampValue.length)return o.timestampValue===a.timestampValue;const u=Is(o.timestampValue),d=Is(a.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,a){return ws(o.bytesValue).isEqual(ws(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,a){return St(o.geoPointValue.latitude)===St(a.geoPointValue.latitude)&&St(o.geoPointValue.longitude)===St(a.geoPointValue.longitude)})(n,e);case 2:return(function(o,a){if("integerValue"in o&&"integerValue"in a)return St(o.integerValue)===St(a.integerValue);if("doubleValue"in o&&"doubleValue"in a){const u=St(o.doubleValue),d=St(a.doubleValue);return u===d?rd(u)===rd(d):isNaN(u)&&isNaN(d)}return!1})(n,e);case 9:return Ua(n.arrayValue.values||[],e.arrayValue.values||[],Qi);case 10:case 11:return(function(o,a){const u=o.mapValue.fields||{},d=a.mapValue.fields||{};if(sS(u)!==sS(d))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(d[m]===void 0||!Qi(u[m],d[m])))return!1;return!0})(n,e);default:return we(52216,{left:n})}}function Iu(n,e){return(n.values||[]).find((t=>Qi(t,e)))!==void 0}function La(n,e){if(n===e)return 0;const t=Rs(n),i=Rs(e);if(t!==i)return qe(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return qe(n.booleanValue,e.booleanValue);case 2:return(function(a,u){const d=St(a.integerValue||a.doubleValue),m=St(u.integerValue||u.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1})(n,e);case 3:return aS(n.timestampValue,e.timestampValue);case 4:return aS(Au(n),Au(e));case 5:return Lm(n.stringValue,e.stringValue);case 6:return(function(a,u){const d=ws(a),m=ws(u);return d.compareTo(m)})(n.bytesValue,e.bytesValue);case 7:return(function(a,u){const d=a.split("/"),m=u.split("/");for(let h=0;h<d.length&&h<m.length;h++){const _=qe(d[h],m[h]);if(_!==0)return _}return qe(d.length,m.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,u){const d=qe(St(a.latitude),St(u.latitude));return d!==0?d:qe(St(a.longitude),St(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return lS(n.arrayValue,e.arrayValue);case 10:return(function(a,u){var S,I,L,F;const d=a.fields||{},m=u.fields||{},h=(S=d[od])==null?void 0:S.arrayValue,_=(I=m[od])==null?void 0:I.arrayValue,T=qe(((L=h==null?void 0:h.values)==null?void 0:L.length)||0,((F=_==null?void 0:_.values)==null?void 0:F.length)||0);return T!==0?T:lS(h,_)})(n.mapValue,e.mapValue);case 11:return(function(a,u){if(a===wf.mapValue&&u===wf.mapValue)return 0;if(a===wf.mapValue)return 1;if(u===wf.mapValue)return-1;const d=a.fields||{},m=Object.keys(d),h=u.fields||{},_=Object.keys(h);m.sort(),_.sort();for(let T=0;T<m.length&&T<_.length;++T){const S=Lm(m[T],_[T]);if(S!==0)return S;const I=La(d[m[T]],h[_[T]]);if(I!==0)return I}return qe(m.length,_.length)})(n.mapValue,e.mapValue);default:throw we(23264,{he:t})}}function aS(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return qe(n,e);const t=Is(n),i=Is(e),o=qe(t.seconds,i.seconds);return o!==0?o:qe(t.nanos,i.nanos)}function lS(n,e){const t=n.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const a=La(t[o],i[o]);if(a)return a}return qe(t.length,i.length)}function Oa(n){return Om(n)}function Om(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=Is(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return ws(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Se.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",o=!0;for(const a of t.values||[])o?o=!1:i+=",",i+=Om(a);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",a=!0;for(const u of i)a?a=!1:o+=",",o+=`${u}:${Om(t.fields[u])}`;return o+"}"})(n.mapValue):we(61005,{value:n})}function Of(n){switch(Rs(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Md(n);return e?16+Of(e):16;case 5:return 2*n.stringValue.length;case 6:return ws(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,a)=>o+Of(a)),0)})(n.arrayValue);case 10:case 11:return(function(i){let o=0;return Ms(i.fields,((a,u)=>{o+=a.length+Of(u)})),o})(n.mapValue);default:throw we(13486,{value:n})}}function uS(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Fm(n){return!!n&&"integerValue"in n}function xg(n){return!!n&&"arrayValue"in n}function cS(n){return!!n&&"nullValue"in n}function fS(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ff(n){return!!n&&"mapValue"in n}function uO(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[cI])==null?void 0:i.stringValue)===fI}function gu(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Ms(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=gu(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=gu(n.arrayValue.values[t]);return e}return{...n}}function cO(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===lO}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this.value=e}static empty(){return new Cn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Ff(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=gu(t)}setAll(e){let t=Zt.emptyPath(),i={},o=[];e.forEach(((u,d)=>{if(!t.isImmediateParentOf(d)){const m=this.getFieldsMap(t);this.applyChanges(m,i,o),i={},o=[],t=d.popLast()}u?i[d.lastSegment()]=gu(u):o.push(d.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,i,o)}delete(e){const t=this.field(e.popLast());Ff(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Qi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];Ff(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){Ms(t,((o,a)=>e[o]=a));for(const o of i)delete e[o]}clone(){return new Cn(gu(this.value))}}function dI(n){const e=[];return Ms(n.fields,((t,i)=>{const o=new Zt([t]);if(Ff(i)){const a=dI(i.mapValue).fields;if(a.length===0)e.push(o);else for(const u of a)e.push(o.child(u))}else e.push(o)})),new kn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e,t,i,o,a,u,d){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=a,this.data=u,this.documentState=d}static newInvalidDocument(e){return new sn(e,0,Ne.min(),Ne.min(),Ne.min(),Cn.empty(),0)}static newFoundDocument(e,t,i,o){return new sn(e,1,t,Ne.min(),i,o,0)}static newNoDocument(e,t){return new sn(e,2,t,Ne.min(),Ne.min(),Cn.empty(),0)}static newUnknownDocument(e,t){return new sn(e,3,t,Ne.min(),Ne.min(),Cn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Cn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Cn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof sn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new sn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(e,t){this.position=e,this.inclusive=t}}function dS(n,e,t){let i=0;for(let o=0;o<n.position.length;o++){const a=e[o],u=n.position[o];if(a.field.isKeyField()?i=Se.comparator(Se.fromName(u.referenceValue),t.key):i=La(u,t.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function hS(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Qi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(e,t="asc"){this.field=e,this.dir=t}}function fO(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{}class kt extends hI{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new hO(e,t,i):t==="array-contains"?new gO(e,i):t==="in"?new yO(e,i):t==="not-in"?new _O(e,i):t==="array-contains-any"?new vO(e,i):new kt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new pO(e,i):new mO(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(La(t,this.value)):t!==null&&Rs(this.value)===Rs(t)&&this.matchesComparison(La(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return we(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class yi extends hI{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new yi(e,t)}matches(e){return pI(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function pI(n){return n.op==="and"}function mI(n){return dO(n)&&pI(n)}function dO(n){for(const e of n.filters)if(e instanceof yi)return!1;return!0}function Gm(n){if(n instanceof kt)return n.field.canonicalString()+n.op.toString()+Oa(n.value);if(mI(n))return n.filters.map((e=>Gm(e))).join(",");{const e=n.filters.map((t=>Gm(t))).join(",");return`${n.op}(${e})`}}function gI(n,e){return n instanceof kt?(function(i,o){return o instanceof kt&&i.op===o.op&&i.field.isEqual(o.field)&&Qi(i.value,o.value)})(n,e):n instanceof yi?(function(i,o){return o instanceof yi&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((a,u,d)=>a&&gI(u,o.filters[d])),!0):!1})(n,e):void we(19439)}function yI(n){return n instanceof kt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Oa(t.value)}`})(n):n instanceof yi?(function(t){return t.op.toString()+" {"+t.getFilters().map(yI).join(" ,")+"}"})(n):"Filter"}class hO extends kt{constructor(e,t,i){super(e,t,i),this.key=Se.fromName(i.referenceValue)}matches(e){const t=Se.comparator(e.key,this.key);return this.matchesComparison(t)}}class pO extends kt{constructor(e,t){super(e,"in",t),this.keys=_I("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class mO extends kt{constructor(e,t){super(e,"not-in",t),this.keys=_I("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function _I(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((i=>Se.fromName(i.referenceValue)))}class gO extends kt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return xg(t)&&Iu(t.arrayValue,this.value)}}class yO extends kt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Iu(this.value.arrayValue,t)}}class _O extends kt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Iu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Iu(this.value.arrayValue,t)}}class vO extends kt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!xg(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Iu(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TO{constructor(e,t=null,i=[],o=[],a=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=a,this.startAt=u,this.endAt=d,this.Te=null}}function pS(n,e=null,t=[],i=[],o=null,a=null,u=null){return new TO(n,e,t,i,o,a,u)}function Mg(n){const e=Me(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>Gm(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(a){return a.field.canonicalString()+a.dir})(i))).join(","),xd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Oa(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Oa(i))).join(",")),e.Te=t}return e.Te}function Dg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!fO(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!gI(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!hS(n.startAt,e.startAt)&&hS(n.endAt,e.endAt)}function qm(n){return Se.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(e,t=null,i=[],o=[],a=null,u="F",d=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=a,this.limitType=u,this.startAt=d,this.endAt=m,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function EO(n,e,t,i,o,a,u,d){return new Qa(n,e,t,i,o,a,u,d)}function Pg(n){return new Qa(n)}function mS(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function vI(n){return n.collectionGroup!==null}function yu(n){const e=Me(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),t.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let d=new Ft(Zt.comparator);return u.filters.forEach((m=>{m.getFlattenedFilters().forEach((h=>{h.isInequality()&&(d=d.add(h.field))}))})),d})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new wu(a,i))})),t.has(Zt.keyField().canonicalString())||e.Ie.push(new wu(Zt.keyField(),i))}return e.Ie}function Hi(n){const e=Me(n);return e.Ee||(e.Ee=SO(e,yu(n))),e.Ee}function SO(n,e){if(n.limitType==="F")return pS(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const a=o.dir==="desc"?"asc":"desc";return new wu(o.field,a)}));const t=n.endAt?new ad(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new ad(n.startAt.position,n.startAt.inclusive):null;return pS(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function Bm(n,e){const t=n.filters.concat([e]);return new Qa(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function zm(n,e,t){return new Qa(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Dd(n,e){return Dg(Hi(n),Hi(e))&&n.limitType===e.limitType}function TI(n){return`${Mg(Hi(n))}|lt:${n.limitType}`}function Ea(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>yI(o))).join(", ")}]`),xd(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>Oa(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>Oa(o))).join(",")),`Target(${i})`})(Hi(n))}; limitType=${n.limitType})`}function Pd(n,e){return e.isFoundDocument()&&(function(i,o){const a=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):Se.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)})(n,e)&&(function(i,o){for(const a of yu(i))if(!a.field.isKeyField()&&o.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(i,o){for(const a of i.filters)if(!a.matches(o))return!1;return!0})(n,e)&&(function(i,o){return!(i.startAt&&!(function(u,d,m){const h=dS(u,d,m);return u.inclusive?h<=0:h<0})(i.startAt,yu(i),o)||i.endAt&&!(function(u,d,m){const h=dS(u,d,m);return u.inclusive?h>=0:h>0})(i.endAt,yu(i),o))})(n,e)}function AO(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function EI(n){return(e,t)=>{let i=!1;for(const o of yu(n)){const a=CO(o,e,t);if(a!==0)return a;i=i||o.field.isKeyField()}return 0}}function CO(n,e,t){const i=n.field.isKeyField()?Se.comparator(e.key,t.key):(function(a,u,d){const m=u.data.field(a),h=d.data.field(a);return m!==null&&h!==null?La(m,h):we(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return we(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,a]of i)if(this.equalsFn(o,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let a=0;a<o.length;a++)if(this.equalsFn(o[a][0],e))return void(o[a]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Ms(this.inner,((t,i)=>{for(const[o,a]of i)e(o,a)}))}isEmpty(){return rI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IO=new mt(Se.comparator);function Mr(){return IO}const SI=new mt(Se.comparator);function fu(...n){let e=SI;for(const t of n)e=e.insert(t.key,t);return e}function AI(n){let e=SI;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function po(){return _u()}function CI(){return _u()}function _u(){return new wo((n=>n.toString()),((n,e)=>n.isEqual(e)))}const wO=new mt(Se.comparator),RO=new Ft(Se.comparator);function Be(...n){let e=RO;for(const t of n)e=e.add(t);return e}const bO=new Ft(qe);function NO(){return bO}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kg(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rd(e)?"-0":e}}function II(n){return{integerValue:""+n}}function xO(n,e){return iO(e)?II(e):kg(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd{constructor(){this._=void 0}}function MO(n,e,t){return n instanceof Ru?(function(o,a){const u={fields:{[aI]:{stringValue:oI},[uI]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return a&&Ng(a)&&(a=Md(a)),a&&(u.fields[lI]=a),{mapValue:u}})(t,e):n instanceof bu?RI(n,e):n instanceof Nu?bI(n,e):(function(o,a){const u=wI(o,a),d=gS(u)+gS(o.Ae);return Fm(u)&&Fm(o.Ae)?II(d):kg(o.serializer,d)})(n,e)}function DO(n,e,t){return n instanceof bu?RI(n,e):n instanceof Nu?bI(n,e):t}function wI(n,e){return n instanceof ld?(function(i){return Fm(i)||(function(a){return!!a&&"doubleValue"in a})(i)})(e)?e:{integerValue:0}:null}class Ru extends kd{}class bu extends kd{constructor(e){super(),this.elements=e}}function RI(n,e){const t=NI(e);for(const i of n.elements)t.some((o=>Qi(o,i)))||t.push(i);return{arrayValue:{values:t}}}class Nu extends kd{constructor(e){super(),this.elements=e}}function bI(n,e){let t=NI(e);for(const i of n.elements)t=t.filter((o=>!Qi(o,i)));return{arrayValue:{values:t}}}class ld extends kd{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function gS(n){return St(n.integerValue||n.doubleValue)}function NI(n){return xg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PO{constructor(e,t){this.field=e,this.transform=t}}function kO(n,e){return n.field.isEqual(e.field)&&(function(i,o){return i instanceof bu&&o instanceof bu||i instanceof Nu&&o instanceof Nu?Ua(i.elements,o.elements,Qi):i instanceof ld&&o instanceof ld?Qi(i.Ae,o.Ae):i instanceof Ru&&o instanceof Ru})(n.transform,e.transform)}class VO{constructor(e,t){this.version=e,this.transformResults=t}}class gi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new gi}static exists(e){return new gi(void 0,e)}static updateTime(e){return new gi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Gf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Vd{}function xI(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Vg(n.key,gi.none()):new Lu(n.key,n.data,gi.none());{const t=n.data,i=Cn.empty();let o=new Ft(Zt.comparator);for(let a of e.fields)if(!o.has(a)){let u=t.field(a);u===null&&a.length>1&&(a=a.popLast(),u=t.field(a)),u===null?i.delete(a):i.set(a,u),o=o.add(a)}return new Ds(n.key,i,new kn(o.toArray()),gi.none())}}function UO(n,e,t){n instanceof Lu?(function(o,a,u){const d=o.value.clone(),m=_S(o.fieldTransforms,a,u.transformResults);d.setAll(m),a.convertToFoundDocument(u.version,d).setHasCommittedMutations()})(n,e,t):n instanceof Ds?(function(o,a,u){if(!Gf(o.precondition,a))return void a.convertToUnknownDocument(u.version);const d=_S(o.fieldTransforms,a,u.transformResults),m=a.data;m.setAll(MI(o)),m.setAll(d),a.convertToFoundDocument(u.version,m).setHasCommittedMutations()})(n,e,t):(function(o,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function vu(n,e,t,i){return n instanceof Lu?(function(a,u,d,m){if(!Gf(a.precondition,u))return d;const h=a.value.clone(),_=vS(a.fieldTransforms,m,u);return h.setAll(_),u.convertToFoundDocument(u.version,h).setHasLocalMutations(),null})(n,e,t,i):n instanceof Ds?(function(a,u,d,m){if(!Gf(a.precondition,u))return d;const h=vS(a.fieldTransforms,m,u),_=u.data;return _.setAll(MI(a)),_.setAll(h),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((T=>T.field)))})(n,e,t,i):(function(a,u,d){return Gf(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d})(n,e,t)}function LO(n,e){let t=null;for(const i of n.fieldTransforms){const o=e.data.field(i.field),a=wI(i.transform,o||null);a!=null&&(t===null&&(t=Cn.empty()),t.set(i.field,a))}return t||null}function yS(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Ua(i,o,((a,u)=>kO(a,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Lu extends Vd{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ds extends Vd{constructor(e,t,i,o,a=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function MI(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function _S(n,e,t){const i=new Map;We(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let o=0;o<t.length;o++){const a=n[o],u=a.transform,d=e.data.field(a.field);i.set(a.field,DO(u,d,t[o]))}return i}function vS(n,e,t){const i=new Map;for(const o of n){const a=o.transform,u=t.data.field(o.field);i.set(o.field,MO(a,u,e))}return i}class Vg extends Vd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class OO extends Vd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FO{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const a=this.mutations[o];a.key.isEqual(e.key)&&UO(a,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=vu(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=vu(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=CI();return this.mutations.forEach((o=>{const a=e.get(o.key),u=a.overlayedDocument;let d=this.applyToLocalView(u,a.mutatedFields);d=t.has(o.key)?null:d;const m=xI(u,d);m!==null&&i.set(o.key,m),u.isValidDocument()||u.convertToNoDocument(Ne.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Be())}isEqual(e){return this.batchId===e.batchId&&Ua(this.mutations,e.mutations,((t,i)=>yS(t,i)))&&Ua(this.baseMutations,e.baseMutations,((t,i)=>yS(t,i)))}}class Ug{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){We(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let o=(function(){return wO})();const a=e.mutations;for(let u=0;u<a.length;u++)o=o.insert(a[u].key,i[u].version);return new Ug(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GO{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qO{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pt,Ke;function BO(n){switch(n){case re.OK:return we(64938);case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0;default:return we(15467,{code:n})}}function DI(n){if(n===void 0)return xr("GRPC error has no .code"),re.UNKNOWN;switch(n){case Pt.OK:return re.OK;case Pt.CANCELLED:return re.CANCELLED;case Pt.UNKNOWN:return re.UNKNOWN;case Pt.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case Pt.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case Pt.INTERNAL:return re.INTERNAL;case Pt.UNAVAILABLE:return re.UNAVAILABLE;case Pt.UNAUTHENTICATED:return re.UNAUTHENTICATED;case Pt.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case Pt.NOT_FOUND:return re.NOT_FOUND;case Pt.ALREADY_EXISTS:return re.ALREADY_EXISTS;case Pt.PERMISSION_DENIED:return re.PERMISSION_DENIED;case Pt.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case Pt.ABORTED:return re.ABORTED;case Pt.OUT_OF_RANGE:return re.OUT_OF_RANGE;case Pt.UNIMPLEMENTED:return re.UNIMPLEMENTED;case Pt.DATA_LOSS:return re.DATA_LOSS;default:return we(39323,{code:n})}}(Ke=Pt||(Pt={}))[Ke.OK=0]="OK",Ke[Ke.CANCELLED=1]="CANCELLED",Ke[Ke.UNKNOWN=2]="UNKNOWN",Ke[Ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ke[Ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ke[Ke.NOT_FOUND=5]="NOT_FOUND",Ke[Ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ke[Ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ke[Ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ke[Ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ke[Ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ke[Ke.ABORTED=10]="ABORTED",Ke[Ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ke[Ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ke[Ke.INTERNAL=13]="INTERNAL",Ke[Ke.UNAVAILABLE=14]="UNAVAILABLE",Ke[Ke.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zO(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HO=new Es([4294967295,4294967295],0);function TS(n){const e=zO().encode(n),t=new JC;return t.update(e),new Uint8Array(t.digest())}function ES(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Es([t,i],0),new Es([o,a],0)]}class Lg{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new du(`Invalid padding: ${t}`);if(i<0)throw new du(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new du(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new du(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Es.fromNumber(this.ge)}ye(e,t,i){let o=e.add(t.multiply(Es.fromNumber(i)));return o.compare(HO)===1&&(o=new Es([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=TS(e),[i,o]=ES(t);for(let a=0;a<this.hashCount;a++){const u=this.ye(i,o,a);if(!this.we(u))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new Lg(a,o,t);return i.forEach((d=>u.insert(d))),u}insert(e){if(this.ge===0)return;const t=TS(e),[i,o]=ES(t);for(let a=0;a<this.hashCount;a++){const u=this.ye(i,o,a);this.Se(u)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class du extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(e,t,i,o,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,Ou.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Ud(Ne.min(),o,new mt(qe),Mr(),Be())}}class Ou{constructor(e,t,i,o,a){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Ou(i,t,Be(),Be(),Be())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(e,t,i,o){this.be=e,this.removedTargetIds=t,this.key=i,this.De=o}}class PI{constructor(e,t){this.targetId=e,this.Ce=t}}class kI{constructor(e,t,i=jt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class SS{constructor(){this.ve=0,this.Fe=AS(),this.Me=jt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Be(),t=Be(),i=Be();return this.Fe.forEach(((o,a)=>{switch(a){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:we(38017,{changeType:a})}})),new Ou(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=AS()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,We(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class KO{constructor(e){this.Ge=e,this.ze=new Map,this.je=Mr(),this.Je=Rf(),this.He=Rf(),this.Ye=new mt(qe)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:we(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,i=e.Ce.count,o=this.ot(t);if(o){const a=o.target;if(qm(a))if(i===0){const u=new Se(a.path);this.et(t,u,sn.newNoDocument(u,Ne.min()))}else We(i===1,20013,{expectedCount:i});else{const u=this._t(t);if(u!==i){const d=this.ut(e),m=d?this.ct(d,e,u):1;if(m!==0){this.it(t);const h=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,h)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:a=0}=t;let u,d;try{u=ws(i).toUint8Array()}catch(m){if(m instanceof sI)return Va("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{d=new Lg(u,o,a)}catch(m){return Va(m instanceof du?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return d.ge===0?null:d}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let o=0;return i.forEach((a=>{const u=this.Ge.ht(),d=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;e.mightContain(d)||(this.et(t,a,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((a,u)=>{const d=this.ot(u);if(d){if(a.current&&qm(d.target)){const m=new Se(d.target.path);this.It(m).has(u)||this.Et(u,m)||this.et(u,m,sn.newNoDocument(m,e))}a.Be&&(t.set(u,a.ke()),a.qe())}}));let i=Be();this.He.forEach(((a,u)=>{let d=!0;u.forEachWhile((m=>{const h=this.ot(m);return!h||h.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(i=i.add(a))})),this.je.forEach(((a,u)=>u.setReadTime(e)));const o=new Ud(e,t,this.Ye,this.je,i);return this.je=Mr(),this.Je=Rf(),this.He=Rf(),this.Ye=new mt(qe),o}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new SS,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Ft(qe),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Ft(qe),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ye("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new SS),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Rf(){return new mt(Se.comparator)}function AS(){return new mt(Se.comparator)}const YO={asc:"ASCENDING",desc:"DESCENDING"},JO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},$O={and:"AND",or:"OR"};class QO{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Hm(n,e){return n.useProto3Json||xd(e)?e:{value:e}}function ud(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function VI(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function XO(n,e){return ud(n,e.toTimestamp())}function Ki(n){return We(!!n,49232),Ne.fromTimestamp((function(t){const i=Is(t);return new dt(i.seconds,i.nanos)})(n))}function Og(n,e){return Km(n,e).canonicalString()}function Km(n,e){const t=(function(o){return new ut(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?t:t.child(e)}function UI(n){const e=ut.fromString(n);return We(qI(e),10190,{key:e.toString()}),e}function Ym(n,e){return Og(n.databaseId,e.path)}function am(n,e){const t=UI(e);if(t.get(1)!==n.databaseId.projectId)throw new ge(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ge(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Se(OI(t))}function LI(n,e){return Og(n.databaseId,e)}function WO(n){const e=UI(n);return e.length===4?ut.emptyPath():OI(e)}function Jm(n){return new ut(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function OI(n){return We(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function CS(n,e,t){return{name:Ym(n,e),fields:t.value.mapValue.fields}}function ZO(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:we(39313,{state:h})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],a=(function(h,_){return h.useProto3Json?(We(_===void 0||typeof _=="string",58123),jt.fromBase64String(_||"")):(We(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),jt.fromUint8Array(_||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&(function(h){const _=h.code===void 0?re.UNKNOWN:DI(h.code);return new ge(_,h.message||"")})(u);t=new kI(i,o,a,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=am(n,i.document.name),a=Ki(i.document.updateTime),u=i.document.createTime?Ki(i.document.createTime):Ne.min(),d=new Cn({mapValue:{fields:i.document.fields}}),m=sn.newFoundDocument(o,a,u,d),h=i.targetIds||[],_=i.removedTargetIds||[];t=new qf(h,_,m.key,m)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=am(n,i.document),a=i.readTime?Ki(i.readTime):Ne.min(),u=sn.newNoDocument(o,a),d=i.removedTargetIds||[];t=new qf([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=am(n,i.document),a=i.removedTargetIds||[];t=new qf([],a,o,null)}else{if(!("filter"in e))return we(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:a}=i,u=new qO(o,a),d=i.targetId;t=new PI(d,u)}}return t}function jO(n,e){let t;if(e instanceof Lu)t={update:CS(n,e.key,e.value)};else if(e instanceof Vg)t={delete:Ym(n,e.key)};else if(e instanceof Ds)t={update:CS(n,e.key,e.data),updateMask:l4(e.fieldMask)};else{if(!(e instanceof OO))return we(16599,{Vt:e.type});t={verify:Ym(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(a,u){const d=u.transform;if(d instanceof Ru)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof bu)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Nu)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof ld)return{fieldPath:u.field.canonicalString(),increment:d.Ae};throw we(20930,{transform:u.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,a){return a.updateTime!==void 0?{updateTime:XO(o,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:we(27497)})(n,e.precondition)),t}function e4(n,e){return n&&n.length>0?(We(e!==void 0,14353),n.map((t=>(function(o,a){let u=o.updateTime?Ki(o.updateTime):Ki(a);return u.isEqual(Ne.min())&&(u=Ki(a)),new VO(u,o.transformResults||[])})(t,e)))):[]}function t4(n,e){return{documents:[LI(n,e.path)]}}function n4(n,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=LI(n,o);const a=(function(h){if(h.length!==0)return GI(yi.create(h,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const u=(function(h){if(h.length!==0)return h.map((_=>(function(S){return{field:Sa(S.field),direction:s4(S.dir)}})(_)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=Hm(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{ft:t,parent:o}}function i4(n){let e=WO(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){We(i===1,65062);const _=t.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let a=[];t.where&&(a=(function(T){const S=FI(T);return S instanceof yi&&mI(S)?S.getFilters():[S]})(t.where));let u=[];t.orderBy&&(u=(function(T){return T.map((S=>(function(L){return new wu(Aa(L.field),(function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(L.direction))})(S)))})(t.orderBy));let d=null;t.limit&&(d=(function(T){let S;return S=typeof T=="object"?T.value:T,xd(S)?null:S})(t.limit));let m=null;t.startAt&&(m=(function(T){const S=!!T.before,I=T.values||[];return new ad(I,S)})(t.startAt));let h=null;return t.endAt&&(h=(function(T){const S=!T.before,I=T.values||[];return new ad(I,S)})(t.endAt)),EO(e,o,u,a,d,"F",m,h)}function r4(n,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return we(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function FI(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Aa(t.unaryFilter.field);return kt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=Aa(t.unaryFilter.field);return kt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Aa(t.unaryFilter.field);return kt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Aa(t.unaryFilter.field);return kt.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return we(61313);default:return we(60726)}})(n):n.fieldFilter!==void 0?(function(t){return kt.create(Aa(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return we(58110);default:return we(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return yi.create(t.compositeFilter.filters.map((i=>FI(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return we(1026)}})(t.compositeFilter.op))})(n):we(30097,{filter:n})}function s4(n){return YO[n]}function o4(n){return JO[n]}function a4(n){return $O[n]}function Sa(n){return{fieldPath:n.canonicalString()}}function Aa(n){return Zt.fromServerFormat(n.fieldPath)}function GI(n){return n instanceof kt?(function(t){if(t.op==="=="){if(fS(t.value))return{unaryFilter:{field:Sa(t.field),op:"IS_NAN"}};if(cS(t.value))return{unaryFilter:{field:Sa(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(fS(t.value))return{unaryFilter:{field:Sa(t.field),op:"IS_NOT_NAN"}};if(cS(t.value))return{unaryFilter:{field:Sa(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Sa(t.field),op:o4(t.op),value:t.value}}})(n):n instanceof yi?(function(t){const i=t.getFilters().map((o=>GI(o)));return i.length===1?i[0]:{compositeFilter:{op:a4(t.op),filters:i}}})(n):we(54877,{filter:n})}function l4(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function qI(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(e,t,i,o,a=Ne.min(),u=Ne.min(),d=jt.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=m}withSequenceNumber(e){return new _s(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new _s(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new _s(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new _s(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u4{constructor(e){this.yt=e}}function c4(n){const e=i4({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?zm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f4{constructor(){this.Cn=new d4}addToCollectionParentIndex(e,t){return this.Cn.add(t),ae.resolve()}getCollectionParents(e,t){return ae.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ae.resolve()}deleteFieldIndex(e,t){return ae.resolve()}deleteAllFieldIndexes(e){return ae.resolve()}createTargetIndexes(e,t){return ae.resolve()}getDocumentsMatchingTarget(e,t){return ae.resolve(null)}getIndexType(e,t){return ae.resolve(0)}getFieldIndexes(e,t){return ae.resolve([])}getNextCollectionGroupToUpdate(e){return ae.resolve(null)}getMinOffset(e,t){return ae.resolve(Cs.min())}getMinOffsetFromCollectionGroup(e,t){return ae.resolve(Cs.min())}updateCollectionGroup(e,t,i){return ae.resolve()}updateIndexEntries(e,t){return ae.resolve()}}class d4{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new Ft(ut.comparator),a=!o.has(i);return this.index[t]=o.add(i),a}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Ft(ut.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},BI=41943040;class Sn{static withCacheSize(e){return new Sn(e,Sn.DEFAULT_COLLECTION_PERCENTILE,Sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Sn.DEFAULT_COLLECTION_PERCENTILE=10,Sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Sn.DEFAULT=new Sn(BI,Sn.DEFAULT_COLLECTION_PERCENTILE,Sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Sn.DISABLED=new Sn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Fa(0)}static cr(){return new Fa(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wS="LruGarbageCollector",h4=1048576;function RS([n,e],[t,i]){const o=qe(n,t);return o===0?qe(e,i):o}class p4{constructor(e){this.Ir=e,this.buffer=new Ft(RS),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();RS(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class m4{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ye(wS,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){$a(t)?ye(wS,"Ignoring IndexedDB error during garbage collection: ",t):await Ja(t)}await this.Vr(3e5)}))}}class g4{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return ae.resolve(Nd.ce);const i=new p4(t);return this.mr.forEachTarget(e,(o=>i.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>i.Ar(o))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ye("LruGarbageCollector","Garbage collection skipped; disabled"),ae.resolve(IS)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(ye("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),IS):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,o,a,u,d,m,h;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(ye("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,u=Date.now(),this.nthSequenceNumber(e,o)))).next((T=>(i=T,d=Date.now(),this.removeTargets(e,i,t)))).next((T=>(a=T,m=Date.now(),this.removeOrphanedDocuments(e,i)))).next((T=>(h=Date.now(),Ta()<=Ge.DEBUG&&ye("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-_}ms
	Determined least recently used ${o} in `+(d-u)+`ms
	Removed ${a} targets in `+(m-d)+`ms
	Removed ${T} documents in `+(h-m)+`ms
Total Duration: ${h-_}ms`),ae.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:a,documentsRemoved:T}))))}}function y4(n,e){return new g4(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _4{constructor(){this.changes=new wo((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,sn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?ae.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v4{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T4{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&vu(i.mutation,o,kn.empty(),dt.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Be()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Be()){const o=po();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((a=>{let u=fu();return a.forEach(((d,m)=>{u=u.insert(d,m.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const i=po();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Be())))}populateOverlays(e,t,i){const o=[];return i.forEach((a=>{t.has(a)||o.push(a)})),this.documentOverlayCache.getOverlays(e,o).next((a=>{a.forEach(((u,d)=>{t.set(u,d)}))}))}computeViews(e,t,i,o){let a=Mr();const u=_u(),d=(function(){return _u()})();return t.forEach(((m,h)=>{const _=i.get(h.key);o.has(h.key)&&(_===void 0||_.mutation instanceof Ds)?a=a.insert(h.key,h):_!==void 0?(u.set(h.key,_.mutation.getFieldMask()),vu(_.mutation,h,_.mutation.getFieldMask(),dt.now())):u.set(h.key,kn.empty())})),this.recalculateAndSaveOverlays(e,a).next((m=>(m.forEach(((h,_)=>u.set(h,_))),t.forEach(((h,_)=>d.set(h,new v4(_,u.get(h)??null)))),d)))}recalculateAndSaveOverlays(e,t){const i=_u();let o=new mt(((u,d)=>u-d)),a=Be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const d of u)d.keys().forEach((m=>{const h=t.get(m);if(h===null)return;let _=i.get(m)||kn.empty();_=d.applyToLocalView(h,_),i.set(m,_);const T=(o.get(d.batchId)||Be()).add(m);o=o.insert(d.batchId,T)}))})).next((()=>{const u=[],d=o.getReverseIterator();for(;d.hasNext();){const m=d.getNext(),h=m.key,_=m.value,T=CI();_.forEach((S=>{if(!a.has(S)){const I=xI(t.get(S),i.get(S));I!==null&&T.set(S,I),a=a.add(S)}})),u.push(this.documentOverlayCache.saveOverlays(e,h,T))}return ae.waitFor(u)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return(function(u){return Se.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):vI(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((a=>{const u=o-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-a.size):ae.resolve(po());let d=Su,m=a;return u.next((h=>ae.forEach(h,((_,T)=>(d<T.largestBatchId&&(d=T.largestBatchId),a.get(_)?ae.resolve():this.remoteDocumentCache.getEntry(e,_).next((S=>{m=m.insert(_,S)}))))).next((()=>this.populateOverlays(e,h,a))).next((()=>this.computeViews(e,m,h,Be()))).next((_=>({batchId:d,changes:AI(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Se(t)).next((i=>{let o=fu();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const a=t.collectionGroup;let u=fu();return this.indexManager.getCollectionParents(e,a).next((d=>ae.forEach(d,(m=>{const h=(function(T,S){return new Qa(S,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(t,m.child(a));return this.getDocumentsMatchingCollectionQuery(e,h,i,o).next((_=>{_.forEach(((T,S)=>{u=u.insert(T,S)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,a,o)))).next((u=>{a.forEach(((m,h)=>{const _=h.getKey();u.get(_)===null&&(u=u.insert(_,sn.newInvalidDocument(_)))}));let d=fu();return u.forEach(((m,h)=>{const _=a.get(m);_!==void 0&&vu(_.mutation,h,kn.empty(),dt.now()),Pd(t,h)&&(d=d.insert(m,h))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E4{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ae.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:Ki(o.createTime)}})(t)),ae.resolve()}getNamedQuery(e,t){return ae.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:c4(o.bundledQuery),readTime:Ki(o.readTime)}})(t)),ae.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S4{constructor(){this.overlays=new mt(Se.comparator),this.qr=new Map}getOverlay(e,t){return ae.resolve(this.overlays.get(t))}getOverlays(e,t){const i=po();return ae.forEach(t,(o=>this.getOverlay(e,o).next((a=>{a!==null&&i.set(o,a)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,a)=>{this.St(e,t,a)})),ae.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.qr.get(i);return o!==void 0&&(o.forEach((a=>this.overlays=this.overlays.remove(a))),this.qr.delete(i)),ae.resolve()}getOverlaysForCollection(e,t,i){const o=po(),a=t.length+1,u=new Se(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const m=d.getNext().value,h=m.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===a&&m.largestBatchId>i&&o.set(m.getKey(),m)}return ae.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let a=new mt(((h,_)=>h-_));const u=this.overlays.getIterator();for(;u.hasNext();){const h=u.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>i){let _=a.get(h.largestBatchId);_===null&&(_=po(),a=a.insert(h.largestBatchId,_)),_.set(h.getKey(),h)}}const d=po(),m=a.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((h,_)=>d.set(h,_))),!(d.size()>=o)););return ae.resolve(d)}St(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const u=this.qr.get(o.largestBatchId).delete(i.key);this.qr.set(o.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new GO(t,i));let a=this.qr.get(t);a===void 0&&(a=Be(),this.qr.set(t,a)),this.qr.set(t,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A4{constructor(){this.sessionToken=jt.EMPTY_BYTE_STRING}getSessionToken(e){return ae.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ae.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg{constructor(){this.Qr=new Ft(zt.$r),this.Ur=new Ft(zt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new zt(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new zt(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new Se(new ut([])),i=new zt(t,e),o=new zt(t,e+1),a=[];return this.Ur.forEachInRange([i,o],(u=>{this.Gr(u),a.push(u.key)})),a}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Se(new ut([])),i=new zt(t,e),o=new zt(t,e+1);let a=Be();return this.Ur.forEachInRange([i,o],(u=>{a=a.add(u.key)})),a}containsKey(e){const t=new zt(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class zt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Se.comparator(e.key,t.key)||qe(e.Yr,t.Yr)}static Kr(e,t){return qe(e.Yr,t.Yr)||Se.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C4{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Ft(zt.$r)}checkEmpty(e){return ae.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new FO(a,t,i,o);this.mutationQueue.push(u);for(const d of o)this.Zr=this.Zr.add(new zt(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return ae.resolve(u)}lookupMutationBatch(e,t){return ae.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.ei(i),a=o<0?0:o;return ae.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ae.resolve(this.mutationQueue.length===0?bg:this.tr-1)}getAllMutationBatches(e){return ae.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new zt(t,0),o=new zt(t,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([i,o],(u=>{const d=this.Xr(u.Yr);a.push(d)})),ae.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Ft(qe);return t.forEach((o=>{const a=new zt(o,0),u=new zt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,u],(d=>{i=i.add(d.Yr)}))})),ae.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let a=i;Se.isDocumentKey(a)||(a=a.child(""));const u=new zt(new Se(a),0);let d=new Ft(qe);return this.Zr.forEachWhile((m=>{const h=m.key.path;return!!i.isPrefixOf(h)&&(h.length===o&&(d=d.add(m.Yr)),!0)}),u),ae.resolve(this.ti(d))}ti(e){const t=[];return e.forEach((i=>{const o=this.Xr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){We(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return ae.forEach(t.mutations,(o=>{const a=new zt(o.key,t.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new zt(t,0),o=this.Zr.firstAfterOrEqual(i);return ae.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ae.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I4{constructor(e){this.ri=e,this.docs=(function(){return new mt(Se.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),a=o?o.size:0,u=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return ae.resolve(i?i.document.mutableCopy():sn.newInvalidDocument(t))}getEntries(e,t){let i=Mr();return t.forEach((o=>{const a=this.docs.get(o);i=i.insert(o,a?a.document.mutableCopy():sn.newInvalidDocument(o))})),ae.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let a=Mr();const u=t.path,d=new Se(u.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(d);for(;m.hasNext();){const{key:h,value:{document:_}}=m.getNext();if(!u.isPrefixOf(h.path))break;h.path.length>u.length+1||jL(ZL(_),i)<=0||(o.has(_.key)||Pd(t,_))&&(a=a.insert(_.key,_.mutableCopy()))}return ae.resolve(a)}getAllFromCollectionGroup(e,t,i,o){we(9500)}ii(e,t){return ae.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new w4(this)}getSize(e){return ae.resolve(this.size)}}class w4 extends _4{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(i)})),ae.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R4{constructor(e){this.persistence=e,this.si=new wo((t=>Mg(t)),Dg),this.lastRemoteSnapshotVersion=Ne.min(),this.highestTargetId=0,this.oi=0,this._i=new Fg,this.targetCount=0,this.ai=Fa.ur()}forEachTarget(e,t){return this.si.forEach(((i,o)=>t(o))),ae.resolve()}getLastRemoteSnapshotVersion(e){return ae.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ae.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ae.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),ae.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Fa(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ae.resolve()}updateTargetData(e,t){return this.Pr(t),ae.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ae.resolve()}removeTargets(e,t,i){let o=0;const a=[];return this.si.forEach(((u,d)=>{d.sequenceNumber<=t&&i.get(d.targetId)===null&&(this.si.delete(u),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)})),ae.waitFor(a).next((()=>o))}getTargetCount(e){return ae.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return ae.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),ae.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const o=this.persistence.referenceDelegate,a=[];return o&&t.forEach((u=>{a.push(o.markPotentiallyOrphaned(e,u))})),ae.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ae.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return ae.resolve(i)}containsKey(e,t){return ae.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(e,t){this.ui={},this.overlays={},this.ci=new Nd(0),this.li=!1,this.li=!0,this.hi=new A4,this.referenceDelegate=e(this),this.Pi=new R4(this),this.indexManager=new f4,this.remoteDocumentCache=(function(o){return new I4(o)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new u4(t),this.Ii=new E4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new S4,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new C4(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){ye("MemoryPersistence","Starting transaction:",e);const o=new b4(this.ci.next());return this.referenceDelegate.Ei(),i(o).next((a=>this.referenceDelegate.di(o).next((()=>a)))).toPromise().then((a=>(o.raiseOnCommittedEvent(),a)))}Ai(e,t){return ae.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class b4 extends tO{constructor(e){super(),this.currentSequenceNumber=e}}class Gg{constructor(e){this.persistence=e,this.Ri=new Fg,this.Vi=null}static mi(e){return new Gg(e)}get fi(){if(this.Vi)return this.Vi;throw we(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),ae.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),ae.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ae.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((a=>this.fi.add(a.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ae.forEach(this.fi,(i=>{const o=Se.fromPath(i);return this.gi(e,o).next((a=>{a||t.removeEntry(o,Ne.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return ae.or([()=>ae.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class cd{constructor(e,t){this.persistence=e,this.pi=new wo((i=>rO(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=y4(this,t)}static mi(e,t){return new cd(e,t)}Ei(){}di(e){return ae.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((o=>i+o))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return ae.forEach(this.pi,((i,o)=>this.br(e,i,o).next((a=>a?ae.resolve():t(o)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),a=o.newChangeBuffer();return o.ii(e,(u=>this.br(e,u,t).next((d=>{d||(i++,a.removeEntry(u,Ne.min()))})))).next((()=>a.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ae.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),ae.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),ae.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ae.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Of(e.data.value)),t}br(e,t,i){return ae.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return ae.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=o}static As(e,t){let i=Be(),o=Be();for(const a of t.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:o=o.add(a.doc.key)}return new qg(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x4{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return eV()?8:nO(an())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,o){const a={result:null};return this.ys(e,t).next((u=>{a.result=u})).next((()=>{if(!a.result)return this.ws(e,t,o,i).next((u=>{a.result=u}))})).next((()=>{if(a.result)return;const u=new N4;return this.Ss(e,t,u).next((d=>{if(a.result=d,this.Vs)return this.bs(e,t,u,d.size)}))})).next((()=>a.result))}bs(e,t,i,o){return i.documentReadCount<this.fs?(Ta()<=Ge.DEBUG&&ye("QueryEngine","SDK will not create cache indexes for query:",Ea(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ae.resolve()):(Ta()<=Ge.DEBUG&&ye("QueryEngine","Query:",Ea(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.gs*o?(Ta()<=Ge.DEBUG&&ye("QueryEngine","The SDK decides to create cache indexes for query:",Ea(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Hi(t))):ae.resolve())}ys(e,t){if(mS(t))return ae.resolve(null);let i=Hi(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=zm(t,null,"F"),i=Hi(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((a=>{const u=Be(...a);return this.ps.getDocuments(e,u).next((d=>this.indexManager.getMinOffset(e,i).next((m=>{const h=this.Ds(t,d);return this.Cs(t,h,u,m.readTime)?this.ys(e,zm(t,null,"F")):this.vs(e,h,t,m)}))))})))))}ws(e,t,i,o){return mS(t)||o.isEqual(Ne.min())?ae.resolve(null):this.ps.getDocuments(e,i).next((a=>{const u=this.Ds(t,a);return this.Cs(t,u,i,o)?ae.resolve(null):(Ta()<=Ge.DEBUG&&ye("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Ea(t)),this.vs(e,u,t,WL(o,Su)).next((d=>d)))}))}Ds(e,t){let i=new Ft(EI(e));return t.forEach(((o,a)=>{Pd(e,a)&&(i=i.add(a))})),i}Cs(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(o)>0)}Ss(e,t,i){return Ta()<=Ge.DEBUG&&ye("QueryEngine","Using full collection scan to execute query:",Ea(t)),this.ps.getDocumentsMatchingQuery(e,t,Cs.min(),i)}vs(e,t,i,o){return this.ps.getDocumentsMatchingQuery(e,i,o).next((a=>(t.forEach((u=>{a=a.insert(u.key,u)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bg="LocalStore",M4=3e8;class D4{constructor(e,t,i,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new mt(qe),this.xs=new wo((a=>Mg(a)),Dg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new T4(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function P4(n,e,t,i){return new D4(n,e,t,i)}async function HI(n,e){const t=Me(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((a=>(o=a,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((a=>{const u=[],d=[];let m=Be();for(const h of o){u.push(h.batchId);for(const _ of h.mutations)m=m.add(_.key)}for(const h of a){d.push(h.batchId);for(const _ of h.mutations)m=m.add(_.key)}return t.localDocuments.getDocuments(i,m).next((h=>({Ls:h,removedBatchIds:u,addedBatchIds:d})))}))}))}function k4(n,e){const t=Me(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),a=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(d,m,h,_){const T=h.batch,S=T.keys();let I=ae.resolve();return S.forEach((L=>{I=I.next((()=>_.getEntry(m,L))).next((F=>{const V=h.docVersions.get(L);We(V!==null,48541),F.version.compareTo(V)<0&&(T.applyToRemoteDocument(F,h),F.isValidDocument()&&(F.setReadTime(h.commitVersion),_.addEntry(F)))}))})),I.next((()=>d.mutationQueue.removeMutationBatch(m,T)))})(t,i,e,a).next((()=>a.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(d){let m=Be();for(let h=0;h<d.mutationResults.length;++h)d.mutationResults[h].transformResults.length>0&&(m=m.add(d.batch.mutations[h].key));return m})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function KI(n){const e=Me(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function V4(n,e){const t=Me(n),i=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const u=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const d=[];e.targetChanges.forEach(((_,T)=>{const S=o.get(T);if(!S)return;d.push(t.Pi.removeMatchingKeys(a,_.removedDocuments,T).next((()=>t.Pi.addMatchingKeys(a,_.addedDocuments,T))));let I=S.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(T)!==null?I=I.withResumeToken(jt.EMPTY_BYTE_STRING,Ne.min()).withLastLimboFreeSnapshotVersion(Ne.min()):_.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(_.resumeToken,i)),o=o.insert(T,I),(function(F,V,K){return F.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-F.snapshotVersion.toMicroseconds()>=M4?!0:K.addedDocuments.size+K.modifiedDocuments.size+K.removedDocuments.size>0})(S,I,_)&&d.push(t.Pi.updateTargetData(a,I))}));let m=Mr(),h=Be();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(a,_))})),d.push(U4(a,u,e.documentUpdates).next((_=>{m=_.ks,h=_.qs}))),!i.isEqual(Ne.min())){const _=t.Pi.getLastRemoteSnapshotVersion(a).next((T=>t.Pi.setTargetsMetadata(a,a.currentSequenceNumber,i)));d.push(_)}return ae.waitFor(d).next((()=>u.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,m,h))).next((()=>m))})).then((a=>(t.Ms=o,a)))}function U4(n,e,t){let i=Be(),o=Be();return t.forEach((a=>i=i.add(a))),e.getEntries(n,i).next((a=>{let u=Mr();return t.forEach(((d,m)=>{const h=a.get(d);m.isFoundDocument()!==h.isFoundDocument()&&(o=o.add(d)),m.isNoDocument()&&m.version.isEqual(Ne.min())?(e.removeEntry(d,m.readTime),u=u.insert(d,m)):!h.isValidDocument()||m.version.compareTo(h.version)>0||m.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(m),u=u.insert(d,m)):ye(Bg,"Ignoring outdated watch update for ",d,". Current version:",h.version," Watch version:",m.version)})),{ks:u,qs:o}}))}function L4(n,e){const t=Me(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=bg),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function O4(n,e){const t=Me(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.Pi.getTargetData(i,e).next((a=>a?(o=a,ae.resolve(o)):t.Pi.allocateTargetId(i).next((u=>(o=new _s(e,u,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.Ms.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function $m(n,e,t){const i=Me(n),o=i.Ms.get(e),a=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",a,(u=>i.persistence.referenceDelegate.removeTarget(u,o)))}catch(u){if(!$a(u))throw u;ye(Bg,`Failed to update sequence numbers for target ${e}: ${u}`)}i.Ms=i.Ms.remove(e),i.xs.delete(o.target)}function bS(n,e,t){const i=Me(n);let o=Ne.min(),a=Be();return i.persistence.runTransaction("Execute query","readwrite",(u=>(function(m,h,_){const T=Me(m),S=T.xs.get(_);return S!==void 0?ae.resolve(T.Ms.get(S)):T.Pi.getTargetData(h,_)})(i,u,Hi(e)).next((d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(u,d.targetId).next((m=>{a=m}))})).next((()=>i.Fs.getDocumentsMatchingQuery(u,e,t?o:Ne.min(),t?a:Be()))).next((d=>(F4(i,AO(e),d),{documents:d,Qs:a})))))}function F4(n,e,t){let i=n.Os.get(e)||Ne.min();t.forEach(((o,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)})),n.Os.set(e,i)}class NS{constructor(){this.activeTargetIds=NO()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class G4{constructor(){this.Mo=new NS,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new NS,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q4{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xS="ConnectivityMonitor";class MS{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ye(xS,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ye(xS,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bf=null;function Qm(){return bf===null?bf=(function(){return 268435456+Math.round(2147483648*Math.random())})():bf++,"0x"+bf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lm="RestConnection",B4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class z4{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${o}`,this.Wo=this.databaseId.database===sd?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Go(e,t,i,o,a){const u=Qm(),d=this.zo(e,t.toUriEncodedString());ye(lm,`Sending RPC '${e}' ${u}:`,d,i);const m={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(m,o,a);const{host:h}=new URL(d),_=Co(h);return this.Jo(e,d,m,i,_).then((T=>(ye(lm,`Received RPC '${e}' ${u}: `,T),T)),(T=>{throw Va(lm,`RPC '${e}' ${u} failed with error: `,T,"url: ",d,"request:",i),T}))}Ho(e,t,i,o,a,u){return this.Go(e,t,i,o,a)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ya})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,a)=>e[a]=o)),i&&i.headers.forEach(((o,a)=>e[a]=o))}zo(e,t){const i=B4[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H4{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tn="WebChannelConnection";class K4 extends z4{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,o,a){const u=Qm();return new Promise(((d,m)=>{const h=new $C;h.setWithCredentials(!0),h.listenOnce(QC.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case Lf.NO_ERROR:const T=h.getResponseJson();ye(tn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(T)),d(T);break;case Lf.TIMEOUT:ye(tn,`RPC '${e}' ${u} timed out`),m(new ge(re.DEADLINE_EXCEEDED,"Request time out"));break;case Lf.HTTP_ERROR:const S=h.getStatus();if(ye(tn,`RPC '${e}' ${u} failed with status:`,S,"response text:",h.getResponseText()),S>0){let I=h.getResponseJson();Array.isArray(I)&&(I=I[0]);const L=I==null?void 0:I.error;if(L&&L.status&&L.message){const F=(function(K){const ne=K.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(ne)>=0?ne:re.UNKNOWN})(L.status);m(new ge(F,L.message))}else m(new ge(re.UNKNOWN,"Server responded with status "+h.getStatus()))}else m(new ge(re.UNAVAILABLE,"Connection failed."));break;default:we(9055,{l_:e,streamId:u,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{ye(tn,`RPC '${e}' ${u} completed.`)}}));const _=JSON.stringify(o);ye(tn,`RPC '${e}' ${u} sending request:`,o),h.send(t,"POST",_,i,15)}))}T_(e,t,i){const o=Qm(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=ZC(),d=WC(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(m.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(m.useFetchStreams=!0),this.jo(m.initMessageHeaders,t,i),m.encodeInitMessageHeaders=!0;const _=a.join("");ye(tn,`Creating RPC '${e}' stream ${o}: ${_}`,m);const T=u.createWebChannel(_,m);this.I_(T);let S=!1,I=!1;const L=new H4({Yo:V=>{I?ye(tn,`Not sending because RPC '${e}' stream ${o} is closed:`,V):(S||(ye(tn,`Opening RPC '${e}' stream ${o} transport.`),T.open(),S=!0),ye(tn,`RPC '${e}' stream ${o} sending:`,V),T.send(V))},Zo:()=>T.close()}),F=(V,K,ne)=>{V.listen(K,(j=>{try{ne(j)}catch(oe){setTimeout((()=>{throw oe}),0)}}))};return F(T,cu.EventType.OPEN,(()=>{I||(ye(tn,`RPC '${e}' stream ${o} transport opened.`),L.o_())})),F(T,cu.EventType.CLOSE,(()=>{I||(I=!0,ye(tn,`RPC '${e}' stream ${o} transport closed`),L.a_(),this.E_(T))})),F(T,cu.EventType.ERROR,(V=>{I||(I=!0,Va(tn,`RPC '${e}' stream ${o} transport errored. Name:`,V.name,"Message:",V.message),L.a_(new ge(re.UNAVAILABLE,"The operation could not be completed")))})),F(T,cu.EventType.MESSAGE,(V=>{var K;if(!I){const ne=V.data[0];We(!!ne,16349);const j=ne,oe=(j==null?void 0:j.error)||((K=j[0])==null?void 0:K.error);if(oe){ye(tn,`RPC '${e}' stream ${o} received error:`,oe);const de=oe.status;let ue=(function(N){const D=Pt[N];if(D!==void 0)return DI(D)})(de),x=oe.message;ue===void 0&&(ue=re.INTERNAL,x="Unknown error status: "+de+" with message "+oe.message),I=!0,L.a_(new ge(ue,x)),T.close()}else ye(tn,`RPC '${e}' stream ${o} received:`,ne),L.u_(ne)}})),F(d,XC.STAT_EVENT,(V=>{V.stat===Um.PROXY?ye(tn,`RPC '${e}' stream ${o} detected buffering proxy`):V.stat===Um.NOPROXY&&ye(tn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{L.__()}),0),L}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function um(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ld(n){return new QO(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(e,t,i=1e3,o=1.5,a=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=o,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-i);o>0&&ye("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DS="PersistentStream";class JI{constructor(e,t,i,o,a,u,d,m){this.Mi=e,this.S_=i,this.b_=o,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new YI(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===re.RESOURCE_EXHAUSTED?(xr(t.toString()),xr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.D_===t&&this.G_(i,o)}),(i=>{e((()=>{const o=new ge(re.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(o)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{i((()=>this.z_(o)))})),this.stream.onMessage((o=>{i((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ye(DS,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ye(DS,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Y4 extends JI{constructor(e,t,i,o,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,u),this.serializer=a}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=ZO(this.serializer,e),i=(function(a){if(!("targetChange"in a))return Ne.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?Ne.min():u.readTime?Ki(u.readTime):Ne.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=Jm(this.serializer),t.addTarget=(function(a,u){let d;const m=u.target;if(d=qm(m)?{documents:t4(a,m)}:{query:n4(a,m).ft},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=VI(a,u.resumeToken);const h=Hm(a,u.expectedCount);h!==null&&(d.expectedCount=h)}else if(u.snapshotVersion.compareTo(Ne.min())>0){d.readTime=ud(a,u.snapshotVersion.toTimestamp());const h=Hm(a,u.expectedCount);h!==null&&(d.expectedCount=h)}return d})(this.serializer,e);const i=r4(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=Jm(this.serializer),t.removeTarget=e,this.q_(t)}}class J4 extends JI{constructor(e,t,i,o,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,u),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return We(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,We(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){We(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=e4(e.writeResults,e.commitTime),i=Ki(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=Jm(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>jO(this.serializer,i)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $4{}class Q4 extends $4{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ge(re.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,u])=>this.connection.Go(e,Km(t,i),o,a,u))).catch((a=>{throw a.name==="FirebaseError"?(a.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ge(re.UNKNOWN,a.toString())}))}Ho(e,t,i,o,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Ho(e,Km(t,i),o,u,d,a))).catch((u=>{throw u.name==="FirebaseError"?(u.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ge(re.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class X4{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(xr(t),this.aa=!1):ye("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const So="RemoteStore";class W4{constructor(e,t,i,o,a){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo((u=>{i.enqueueAndForget((async()=>{Ro(this)&&(ye(So,"Restarting streams for network reachability change."),await(async function(m){const h=Me(m);h.Ea.add(4),await Fu(h),h.Ra.set("Unknown"),h.Ea.delete(4),await Od(h)})(this))}))})),this.Ra=new X4(i,o)}}async function Od(n){if(Ro(n))for(const e of n.da)await e(!0)}async function Fu(n){for(const e of n.da)await e(!1)}function $I(n,e){const t=Me(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Yg(t)?Kg(t):Xa(t).O_()&&Hg(t,e))}function zg(n,e){const t=Me(n),i=Xa(t);t.Ia.delete(e),i.O_()&&QI(t,e),t.Ia.size===0&&(i.O_()?i.L_():Ro(t)&&t.Ra.set("Unknown"))}function Hg(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ne.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Xa(n).Y_(e)}function QI(n,e){n.Va.Ue(e),Xa(n).Z_(e)}function Kg(n){n.Va=new KO({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Xa(n).start(),n.Ra.ua()}function Yg(n){return Ro(n)&&!Xa(n).x_()&&n.Ia.size>0}function Ro(n){return Me(n).Ea.size===0}function XI(n){n.Va=void 0}async function Z4(n){n.Ra.set("Online")}async function j4(n){n.Ia.forEach(((e,t)=>{Hg(n,e)}))}async function e3(n,e){XI(n),Yg(n)?(n.Ra.ha(e),Kg(n)):n.Ra.set("Unknown")}async function t3(n,e,t){if(n.Ra.set("Online"),e instanceof kI&&e.state===2&&e.cause)try{await(async function(o,a){const u=a.cause;for(const d of a.targetIds)o.Ia.has(d)&&(await o.remoteSyncer.rejectListen(d,u),o.Ia.delete(d),o.Va.removeTarget(d))})(n,e)}catch(i){ye(So,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await fd(n,i)}else if(e instanceof qf?n.Va.Ze(e):e instanceof PI?n.Va.st(e):n.Va.tt(e),!t.isEqual(Ne.min()))try{const i=await KI(n.localStore);t.compareTo(i)>=0&&await(function(a,u){const d=a.Va.Tt(u);return d.targetChanges.forEach(((m,h)=>{if(m.resumeToken.approximateByteSize()>0){const _=a.Ia.get(h);_&&a.Ia.set(h,_.withResumeToken(m.resumeToken,u))}})),d.targetMismatches.forEach(((m,h)=>{const _=a.Ia.get(m);if(!_)return;a.Ia.set(m,_.withResumeToken(jt.EMPTY_BYTE_STRING,_.snapshotVersion)),QI(a,m);const T=new _s(_.target,m,h,_.sequenceNumber);Hg(a,T)})),a.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(i){ye(So,"Failed to raise snapshot:",i),await fd(n,i)}}async function fd(n,e,t){if(!$a(e))throw e;n.Ea.add(1),await Fu(n),n.Ra.set("Offline"),t||(t=()=>KI(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ye(So,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Od(n)}))}function WI(n,e){return e().catch((t=>fd(n,t,e)))}async function Fd(n){const e=Me(n),t=bs(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:bg;for(;n3(e);)try{const o=await L4(e.localStore,i);if(o===null){e.Ta.length===0&&t.L_();break}i=o.batchId,i3(e,o)}catch(o){await fd(e,o)}ZI(e)&&jI(e)}function n3(n){return Ro(n)&&n.Ta.length<10}function i3(n,e){n.Ta.push(e);const t=bs(n);t.O_()&&t.X_&&t.ea(e.mutations)}function ZI(n){return Ro(n)&&!bs(n).x_()&&n.Ta.length>0}function jI(n){bs(n).start()}async function r3(n){bs(n).ra()}async function s3(n){const e=bs(n);for(const t of n.Ta)e.ea(t.mutations)}async function o3(n,e,t){const i=n.Ta.shift(),o=Ug.from(i,e,t);await WI(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await Fd(n)}async function a3(n,e){e&&bs(n).X_&&await(async function(i,o){if((function(u){return BO(u)&&u!==re.ABORTED})(o.code)){const a=i.Ta.shift();bs(i).B_(),await WI(i,(()=>i.remoteSyncer.rejectFailedWrite(a.batchId,o))),await Fd(i)}})(n,e),ZI(n)&&jI(n)}async function PS(n,e){const t=Me(n);t.asyncQueue.verifyOperationInProgress(),ye(So,"RemoteStore received new credentials");const i=Ro(t);t.Ea.add(3),await Fu(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Od(t)}async function l3(n,e){const t=Me(n);e?(t.Ea.delete(2),await Od(t)):e||(t.Ea.add(2),await Fu(t),t.Ra.set("Unknown"))}function Xa(n){return n.ma||(n.ma=(function(t,i,o){const a=Me(t);return a.sa(),new Y4(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)})(n.datastore,n.asyncQueue,{Xo:Z4.bind(null,n),t_:j4.bind(null,n),r_:e3.bind(null,n),H_:t3.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),Yg(n)?Kg(n):n.Ra.set("Unknown")):(await n.ma.stop(),XI(n))}))),n.ma}function bs(n){return n.fa||(n.fa=(function(t,i,o){const a=Me(t);return a.sa(),new J4(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:r3.bind(null,n),r_:a3.bind(null,n),ta:s3.bind(null,n),na:o3.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Fd(n)):(await n.fa.stop(),n.Ta.length>0&&(ye(So,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jg{constructor(e,t,i,o,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=a,this.deferred=new wr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,a){const u=Date.now()+i,d=new Jg(e,t,u,o,a);return d.start(i),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ge(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function $g(n,e){if(xr("AsyncQueue",`${e}: ${n}`),$a(n))return new ge(re.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{static emptySet(e){return new Da(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Se.comparator(t.key,i.key):(t,i)=>Se.comparator(t.key,i.key),this.keyedMap=fu(),this.sortedSet=new mt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Da)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=i.getNext().key;if(!o.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Da;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS{constructor(){this.ga=new mt(Se.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):we(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Ga{constructor(e,t,i,o,a,u,d,m,h){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=m,this.hasCachedResults=h}static fromInitialDocuments(e,t,i,o,a){const u=[];return t.forEach((d=>{u.push({type:0,doc:d})})),new Ga(e,t,Da.emptySet(t),u,i,o,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Dd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u3{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class c3{constructor(){this.queries=VS(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const o=Me(t),a=o.queries;o.queries=VS(),a.forEach(((u,d)=>{for(const m of d.Sa)m.onError(i)}))})(this,new ge(re.ABORTED,"Firestore shutting down"))}}function VS(){return new wo((n=>TI(n)),Dd)}async function ew(n,e){const t=Me(n);let i=3;const o=e.query;let a=t.queries.get(o);a?!a.ba()&&e.Da()&&(i=2):(a=new u3,i=e.Da()?0:1);try{switch(i){case 0:a.wa=await t.onListen(o,!0);break;case 1:a.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(u){const d=$g(u,`Initialization of query '${Ea(e.query)}' failed`);return void e.onError(d)}t.queries.set(o,a),a.Sa.push(e),e.va(t.onlineState),a.wa&&e.Fa(a.wa)&&Qg(t)}async function tw(n,e){const t=Me(n),i=e.query;let o=3;const a=t.queries.get(i);if(a){const u=a.Sa.indexOf(e);u>=0&&(a.Sa.splice(u,1),a.Sa.length===0?o=e.Da()?0:1:!a.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function f3(n,e){const t=Me(n);let i=!1;for(const o of e){const a=o.query,u=t.queries.get(a);if(u){for(const d of u.Sa)d.Fa(o)&&(i=!0);u.wa=o}}i&&Qg(t)}function d3(n,e,t){const i=Me(n),o=i.queries.get(e);if(o)for(const a of o.Sa)a.onError(t);i.queries.delete(e)}function Qg(n){n.Ca.forEach((e=>{e.next()}))}var Xm,US;(US=Xm||(Xm={})).Ma="default",US.Cache="cache";class nw{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Ga(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Ga.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Xm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iw{constructor(e){this.key=e}}class rw{constructor(e){this.key=e}}class h3{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Be(),this.mutatedKeys=Be(),this.eu=EI(e),this.tu=new Da(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new kS,o=t?t.tu:this.tu;let a=t?t.mutatedKeys:this.mutatedKeys,u=o,d=!1;const m=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,h=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((_,T)=>{const S=o.get(_),I=Pd(this.query,T)?T:null,L=!!S&&this.mutatedKeys.has(S.key),F=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let V=!1;S&&I?S.data.isEqual(I.data)?L!==F&&(i.track({type:3,doc:I}),V=!0):this.su(S,I)||(i.track({type:2,doc:I}),V=!0,(m&&this.eu(I,m)>0||h&&this.eu(I,h)<0)&&(d=!0)):!S&&I?(i.track({type:0,doc:I}),V=!0):S&&!I&&(i.track({type:1,doc:S}),V=!0,(m||h)&&(d=!0)),V&&(I?(u=u.add(I),a=F?a.add(_):a.delete(_)):(u=u.delete(_),a=a.delete(_)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const _=this.query.limitType==="F"?u.last():u.first();u=u.delete(_.key),a=a.delete(_.key),i.track({type:1,doc:_})}return{tu:u,iu:i,Cs:d,mutatedKeys:a}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((_,T)=>(function(I,L){const F=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return we(20277,{Rt:V})}};return F(I)-F(L)})(_.type,T.type)||this.eu(_.doc,T.doc))),this.ou(i),o=o??!1;const d=t&&!o?this._u():[],m=this.Xa.size===0&&this.current&&!o?1:0,h=m!==this.Za;return this.Za=m,u.length!==0||h?{snapshot:new Ga(this.query,e.tu,a,u,e.mutatedKeys,m===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new kS,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Be(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new rw(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new iw(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=Be();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Ga.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Xg="SyncEngine";class p3{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class m3{constructor(e){this.key=e,this.hu=!1}}class g3{constructor(e,t,i,o,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new wo((d=>TI(d)),Dd),this.Iu=new Map,this.Eu=new Set,this.du=new mt(Se.comparator),this.Au=new Map,this.Ru=new Fg,this.Vu={},this.mu=new Map,this.fu=Fa.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function y3(n,e,t=!0){const i=cw(n);let o;const a=i.Tu.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),o=a.view.lu()):o=await sw(i,e,t,!0),o}async function _3(n,e){const t=cw(n);await sw(t,e,!0,!1)}async function sw(n,e,t,i){const o=await O4(n.localStore,Hi(e)),a=o.targetId,u=n.sharedClientState.addLocalQueryTarget(a,t);let d;return i&&(d=await v3(n,e,a,u==="current",o.resumeToken)),n.isPrimaryClient&&t&&$I(n.remoteStore,o),d}async function v3(n,e,t,i,o){n.pu=(T,S,I)=>(async function(F,V,K,ne){let j=V.view.ru(K);j.Cs&&(j=await bS(F.localStore,V.query,!1).then((({documents:x})=>V.view.ru(x,j))));const oe=ne&&ne.targetChanges.get(V.targetId),de=ne&&ne.targetMismatches.get(V.targetId)!=null,ue=V.view.applyChanges(j,F.isPrimaryClient,oe,de);return OS(F,V.targetId,ue.au),ue.snapshot})(n,T,S,I);const a=await bS(n.localStore,e,!0),u=new h3(e,a.Qs),d=u.ru(a.documents),m=Ou.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",o),h=u.applyChanges(d,n.isPrimaryClient,m);OS(n,t,h.au);const _=new p3(e,t,u);return n.Tu.set(e,_),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),h.snapshot}async function T3(n,e,t){const i=Me(n),o=i.Tu.get(e),a=i.Iu.get(o.targetId);if(a.length>1)return i.Iu.set(o.targetId,a.filter((u=>!Dd(u,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await $m(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&zg(i.remoteStore,o.targetId),Wm(i,o.targetId)})).catch(Ja)):(Wm(i,o.targetId),await $m(i.localStore,o.targetId,!0))}async function E3(n,e){const t=Me(n),i=t.Tu.get(e),o=t.Iu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),zg(t.remoteStore,i.targetId))}async function S3(n,e,t){const i=N3(n);try{const o=await(function(u,d){const m=Me(u),h=dt.now(),_=d.reduce(((I,L)=>I.add(L.key)),Be());let T,S;return m.persistence.runTransaction("Locally write mutations","readwrite",(I=>{let L=Mr(),F=Be();return m.Ns.getEntries(I,_).next((V=>{L=V,L.forEach(((K,ne)=>{ne.isValidDocument()||(F=F.add(K))}))})).next((()=>m.localDocuments.getOverlayedDocuments(I,L))).next((V=>{T=V;const K=[];for(const ne of d){const j=LO(ne,T.get(ne.key).overlayedDocument);j!=null&&K.push(new Ds(ne.key,j,dI(j.value.mapValue),gi.exists(!0)))}return m.mutationQueue.addMutationBatch(I,h,K,d)})).next((V=>{S=V;const K=V.applyToLocalDocumentSet(T,F);return m.documentOverlayCache.saveOverlays(I,V.batchId,K)}))})).then((()=>({batchId:S.batchId,changes:AI(T)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(u,d,m){let h=u.Vu[u.currentUser.toKey()];h||(h=new mt(qe)),h=h.insert(d,m),u.Vu[u.currentUser.toKey()]=h})(i,o.batchId,t),await Gu(i,o.changes),await Fd(i.remoteStore)}catch(o){const a=$g(o,"Failed to persist write");t.reject(a)}}async function ow(n,e){const t=Me(n);try{const i=await V4(t.localStore,e);e.targetChanges.forEach(((o,a)=>{const u=t.Au.get(a);u&&(We(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?u.hu=!0:o.modifiedDocuments.size>0?We(u.hu,14607):o.removedDocuments.size>0&&(We(u.hu,42227),u.hu=!1))})),await Gu(t,i,e)}catch(i){await Ja(i)}}function LS(n,e,t){const i=Me(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Tu.forEach(((a,u)=>{const d=u.view.va(e);d.snapshot&&o.push(d.snapshot)})),(function(u,d){const m=Me(u);m.onlineState=d;let h=!1;m.queries.forEach(((_,T)=>{for(const S of T.Sa)S.va(d)&&(h=!0)})),h&&Qg(m)})(i.eventManager,e),o.length&&i.Pu.H_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function A3(n,e,t){const i=Me(n);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Au.get(e),a=o&&o.key;if(a){let u=new mt(Se.comparator);u=u.insert(a,sn.newNoDocument(a,Ne.min()));const d=Be().add(a),m=new Ud(Ne.min(),new Map,new mt(qe),u,d);await ow(i,m),i.du=i.du.remove(a),i.Au.delete(e),Wg(i)}else await $m(i.localStore,e,!1).then((()=>Wm(i,e,t))).catch(Ja)}async function C3(n,e){const t=Me(n),i=e.batch.batchId;try{const o=await k4(t.localStore,e);lw(t,i,null),aw(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Gu(t,o)}catch(o){await Ja(o)}}async function I3(n,e,t){const i=Me(n);try{const o=await(function(u,d){const m=Me(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let _;return m.mutationQueue.lookupMutationBatch(h,d).next((T=>(We(T!==null,37113),_=T.keys(),m.mutationQueue.removeMutationBatch(h,T)))).next((()=>m.mutationQueue.performConsistencyCheck(h))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(h,_,d))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,_))).next((()=>m.localDocuments.getDocuments(h,_)))}))})(i.localStore,e);lw(i,e,t),aw(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Gu(i,o)}catch(o){await Ja(o)}}function aw(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function lw(n,e,t){const i=Me(n);let o=i.Vu[i.currentUser.toKey()];if(o){const a=o.get(e);a&&(t?a.reject(t):a.resolve(),o=o.remove(e)),i.Vu[i.currentUser.toKey()]=o}}function Wm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((i=>{n.Ru.containsKey(i)||uw(n,i)}))}function uw(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(zg(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Wg(n))}function OS(n,e,t){for(const i of t)i instanceof iw?(n.Ru.addReference(i.key,e),w3(n,i)):i instanceof rw?(ye(Xg,"Document no longer in limbo: "+i.key),n.Ru.removeReference(i.key,e),n.Ru.containsKey(i.key)||uw(n,i.key)):we(19791,{wu:i})}function w3(n,e){const t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Eu.has(i)||(ye(Xg,"New document in limbo: "+t),n.Eu.add(i),Wg(n))}function Wg(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Se(ut.fromString(e)),i=n.fu.next();n.Au.set(i,new m3(t)),n.du=n.du.insert(t,i),$I(n.remoteStore,new _s(Hi(Pg(t.path)),i,"TargetPurposeLimboResolution",Nd.ce))}}async function Gu(n,e,t){const i=Me(n),o=[],a=[],u=[];i.Tu.isEmpty()||(i.Tu.forEach(((d,m)=>{u.push(i.pu(m,e,t).then((h=>{var _;if((h||t)&&i.isPrimaryClient){const T=h?!h.fromCache:(_=t==null?void 0:t.targetChanges.get(m.targetId))==null?void 0:_.current;i.sharedClientState.updateQueryState(m.targetId,T?"current":"not-current")}if(h){o.push(h);const T=qg.As(m.targetId,h);a.push(T)}})))})),await Promise.all(u),i.Pu.H_(o),await(async function(m,h){const _=Me(m);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>ae.forEach(h,(S=>ae.forEach(S.Es,(I=>_.persistence.referenceDelegate.addReference(T,S.targetId,I))).next((()=>ae.forEach(S.ds,(I=>_.persistence.referenceDelegate.removeReference(T,S.targetId,I)))))))))}catch(T){if(!$a(T))throw T;ye(Bg,"Failed to update sequence numbers: "+T)}for(const T of h){const S=T.targetId;if(!T.fromCache){const I=_.Ms.get(S),L=I.snapshotVersion,F=I.withLastLimboFreeSnapshotVersion(L);_.Ms=_.Ms.insert(S,F)}}})(i.localStore,a))}async function R3(n,e){const t=Me(n);if(!t.currentUser.isEqual(e)){ye(Xg,"User change. New user:",e.toKey());const i=await HI(t.localStore,e);t.currentUser=e,(function(a,u){a.mu.forEach((d=>{d.forEach((m=>{m.reject(new ge(re.CANCELLED,u))}))})),a.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Gu(t,i.Ls)}}function b3(n,e){const t=Me(n),i=t.Au.get(e);if(i&&i.hu)return Be().add(i.key);{let o=Be();const a=t.Iu.get(e);if(!a)return o;for(const u of a){const d=t.Tu.get(u);o=o.unionWith(d.view.nu)}return o}}function cw(n){const e=Me(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=ow.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=b3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=A3.bind(null,e),e.Pu.H_=f3.bind(null,e.eventManager),e.Pu.yu=d3.bind(null,e.eventManager),e}function N3(n){const e=Me(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=C3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=I3.bind(null,e),e}class dd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ld(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return P4(this.persistence,new x4,e.initialUser,this.serializer)}Cu(e){return new zI(Gg.mi,this.serializer)}Du(e){return new G4}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}dd.provider={build:()=>new dd};class x3 extends dd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){We(this.persistence.referenceDelegate instanceof cd,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new m4(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Sn.withCacheSize(this.cacheSizeBytes):Sn.DEFAULT;return new zI((i=>cd.mi(i,t)),this.serializer)}}class Zm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>LS(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=R3.bind(null,this.syncEngine),await l3(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new c3})()}createDatastore(e){const t=Ld(e.databaseInfo.databaseId),i=(function(a){return new K4(a)})(e.databaseInfo);return(function(a,u,d,m){return new Q4(a,u,d,m)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,a,u,d){return new W4(i,o,a,u,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>LS(this.syncEngine,t,0)),(function(){return MS.v()?new MS:new q4})())}createSyncEngine(e,t){return(function(o,a,u,d,m,h,_){const T=new g3(o,a,u,d,m,h);return _&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const a=Me(o);ye(So,"RemoteStore shutting down."),a.Ea.add(5),await Fu(a),a.Aa.shutdown(),a.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Zm.provider={build:()=>new Zm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):xr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ns="FirestoreClient";class M3{constructor(e,t,i,o,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=rn.UNAUTHENTICATED,this.clientId=Rg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,(async u=>{ye(Ns,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(i,(u=>(ye(Ns,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new wr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=$g(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function cm(n,e){n.asyncQueue.verifyOperationInProgress(),ye(Ns,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async o=>{i.isEqual(o)||(await HI(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function FS(n,e){n.asyncQueue.verifyOperationInProgress();const t=await D3(n);ye(Ns,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>PS(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,o)=>PS(e.remoteStore,o))),n._onlineComponents=e}async function D3(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ye(Ns,"Using user provided OfflineComponentProvider");try{await cm(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===re.FAILED_PRECONDITION||o.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Va("Error using user provided cache. Falling back to memory cache: "+t),await cm(n,new dd)}}else ye(Ns,"Using default OfflineComponentProvider"),await cm(n,new x3(void 0));return n._offlineComponents}async function dw(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ye(Ns,"Using user provided OnlineComponentProvider"),await FS(n,n._uninitializedComponentsProvider._online)):(ye(Ns,"Using default OnlineComponentProvider"),await FS(n,new Zm))),n._onlineComponents}function P3(n){return dw(n).then((e=>e.syncEngine))}async function hw(n){const e=await dw(n),t=e.eventManager;return t.onListen=y3.bind(null,e.syncEngine),t.onUnlisten=T3.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=_3.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=E3.bind(null,e.syncEngine),t}function k3(n,e,t={}){const i=new wr;return n.asyncQueue.enqueueAndForget((async()=>(function(a,u,d,m,h){const _=new fw({next:S=>{_.Nu(),u.enqueueAndForget((()=>tw(a,T)));const I=S.docs.has(d);!I&&S.fromCache?h.reject(new ge(re.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&S.fromCache&&m&&m.source==="server"?h.reject(new ge(re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(S)},error:S=>h.reject(S)}),T=new nw(Pg(d.path),_,{includeMetadataChanges:!0,qa:!0});return ew(a,T)})(await hw(n),n.asyncQueue,e,t,i))),i.promise}function V3(n,e,t={}){const i=new wr;return n.asyncQueue.enqueueAndForget((async()=>(function(a,u,d,m,h){const _=new fw({next:S=>{_.Nu(),u.enqueueAndForget((()=>tw(a,T))),S.fromCache&&m.source==="server"?h.reject(new ge(re.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(S)},error:S=>h.reject(S)}),T=new nw(d,_,{includeMetadataChanges:!0,qa:!0});return ew(a,T)})(await hw(n),n.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pw(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mw="firestore.googleapis.com",qS=!0;class BS{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ge(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=mw,this.ssl=qS}else this.host=e.host,this.ssl=e.ssl??qS;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=BI;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<h4)throw new ge(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}XL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=pw(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ge(re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ge(re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ge(re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Gd{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new BS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ge(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ge(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new BS(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new GL;switch(i.type){case"firstParty":return new HL(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ge(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=GS.get(t);i&&(ye("ComponentProvider","Removing Datastore"),GS.delete(t),i.terminate())})(this),Promise.resolve()}}function U3(n,e,t,i={}){var h;n=$i(n,Gd);const o=Co(e),a=n._getSettings(),u={...a,emulatorOptions:n._getEmulatorOptions()},d=`${e}:${t}`;o&&(fg(`https://${d}`),dg("Firestore",!0)),a.host!==mw&&a.host!==d&&Va("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...a,host:d,ssl:o,emulatorOptions:i};if(!yo(m,u)&&(n._setSettings(m),i.mockUserToken)){let _,T;if(typeof i.mockUserToken=="string")_=i.mockUserToken,T=rn.MOCK_USER;else{_=lC(i.mockUserToken,(h=n._app)==null?void 0:h.options.projectId);const S=i.mockUserToken.sub||i.mockUserToken.user_id;if(!S)throw new ge(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new rn(S)}n._authCredentials=new qL(new eI(_,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new bo(this.firestore,e,this._query)}}class At{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ss(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new At(this.firestore,e,this._key)}toJSON(){return{type:At._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Uu(t,At._jsonSchema))return new At(e,i||null,new Se(ut.fromString(t.referencePath)))}}At._jsonSchemaVersion="firestore/documentReference/1.0",At._jsonSchema={type:Vt("string",At._jsonSchemaVersion),referencePath:Vt("string")};class Ss extends bo{constructor(e,t,i){super(e,t,Pg(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new At(this.firestore,null,new Se(e))}withConverter(e){return new Ss(this.firestore,e,this._path)}}function zS(n,e,...t){if(n=Ut(n),tI("collection","path",e),n instanceof Gd){const i=ut.fromString(e,...t);return tS(i),new Ss(n,null,i)}{if(!(n instanceof At||n instanceof Ss))throw new ge(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(ut.fromString(e,...t));return tS(i),new Ss(n.firestore,null,i)}}function En(n,e,...t){if(n=Ut(n),arguments.length===1&&(e=Rg.newId()),tI("doc","path",e),n instanceof Gd){const i=ut.fromString(e,...t);return eS(i),new At(n,null,new Se(i))}{if(!(n instanceof At||n instanceof Ss))throw new ge(re.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(ut.fromString(e,...t));return eS(i),new At(n.firestore,n instanceof Ss?n.converter:null,new Se(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HS="AsyncQueue";class KS{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new YI(this,"async_queue_retry"),this._c=()=>{const i=um();i&&ye(HS,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=um();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=um();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new wr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!$a(e))throw e;ye(HS,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,xr("INTERNAL UNHANDLED ERROR: ",YS(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=Jg.createAndSchedule(this,e,t,i,(a=>this.hc(a)));return this.tc.push(o),o}uc(){this.nc&&we(47125,{Pc:YS(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function YS(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Wa extends Gd{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new KS,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new KS(e),this._firestoreClient=void 0,await e}}}function L3(n,e){const t=typeof n=="object"?n:mg(),i=typeof n=="string"?n:sd,o=Cd(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const a=sC("firestore");a&&U3(o,...a)}return o}function Zg(n){if(n._terminated)throw new ge(re.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||O3(n),n._firestoreClient}function O3(n){var i,o,a;const e=n._freezeSettings(),t=(function(d,m,h,_){return new aO(d,m,h,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,pw(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)})(n._databaseId,((i=n._app)==null?void 0:i.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((a=e.localCache)!=null&&a._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new M3(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(d){const m=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(m),_online:m}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new $n(jt.fromBase64String(e))}catch(t){throw new ge(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new $n(jt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:$n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Uu(e,$n._jsonSchema))return $n.fromBase64String(e.bytes)}}$n._jsonSchemaVersion="firestore/bytes/1.0",$n._jsonSchema={type:Vt("string",$n._jsonSchemaVersion),bytes:Vt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ge(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Zt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ge(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ge(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return qe(this._lat,e._lat)||qe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Yi._jsonSchemaVersion}}static fromJSON(e){if(Uu(e,Yi._jsonSchema))return new Yi(e.latitude,e.longitude)}}Yi._jsonSchemaVersion="firestore/geoPoint/1.0",Yi._jsonSchema={type:Vt("string",Yi._jsonSchemaVersion),latitude:Vt("number"),longitude:Vt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==o[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ji._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Uu(e,Ji._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Ji(e.vectorValues);throw new ge(re.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ji._jsonSchemaVersion="firestore/vectorValue/1.0",Ji._jsonSchema={type:Vt("string",Ji._jsonSchemaVersion),vectorValues:Vt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F3=/^__.*__$/;class G3{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Ds(e,this.data,this.fieldMask,t,this.fieldTransforms):new Lu(e,this.data,t,this.fieldTransforms)}}class gw{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Ds(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function yw(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw we(40011,{Ac:n})}}class jg{constructor(e,t,i,o,a,u){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new jg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return hd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(yw(this.Ac)&&F3.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class q3{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Ld(e)}Cc(e,t,i,o=!1){return new jg({Ac:e,methodName:t,Dc:i,path:Zt.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ey(n){const e=n._freezeSettings(),t=Ld(n._databaseId);return new q3(n._databaseId,!!e.ignoreUndefinedProperties,t)}function B3(n,e,t,i,o,a={}){const u=n.Cc(a.merge||a.mergeFields?2:0,e,t,o);ny("Data must be an object, but it was:",u,i);const d=_w(i,u);let m,h;if(a.merge)m=new kn(u.fieldMask),h=u.fieldTransforms;else if(a.mergeFields){const _=[];for(const T of a.mergeFields){const S=jm(e,T,t);if(!u.contains(S))throw new ge(re.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);Tw(_,S)||_.push(S)}m=new kn(_),h=u.fieldTransforms.filter((T=>m.covers(T.field)))}else m=null,h=u.fieldTransforms;return new G3(new Cn(d),m,h)}class zd extends Bd{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof zd}}class ty extends Bd{_toFieldTransform(e){return new PO(e.path,new Ru)}isEqual(e){return e instanceof ty}}function z3(n,e,t,i){const o=n.Cc(1,e,t);ny("Data must be an object, but it was:",o,i);const a=[],u=Cn.empty();Ms(i,((m,h)=>{const _=iy(e,m,t);h=Ut(h);const T=o.yc(_);if(h instanceof zd)a.push(_);else{const S=qu(h,T);S!=null&&(a.push(_),u.set(_,S))}}));const d=new kn(a);return new gw(u,d,o.fieldTransforms)}function H3(n,e,t,i,o,a){const u=n.Cc(1,e,t),d=[jm(e,i,t)],m=[o];if(a.length%2!=0)throw new ge(re.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<a.length;S+=2)d.push(jm(e,a[S])),m.push(a[S+1]);const h=[],_=Cn.empty();for(let S=d.length-1;S>=0;--S)if(!Tw(h,d[S])){const I=d[S];let L=m[S];L=Ut(L);const F=u.yc(I);if(L instanceof zd)h.push(I);else{const V=qu(L,F);V!=null&&(h.push(I),_.set(I,V))}}const T=new kn(h);return new gw(_,T,u.fieldTransforms)}function K3(n,e,t,i=!1){return qu(t,n.Cc(i?4:3,e))}function qu(n,e){if(vw(n=Ut(n)))return ny("Unsupported field value:",e,n),_w(n,e);if(n instanceof Bd)return(function(i,o){if(!yw(o.Ac))throw o.Sc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(o);a&&o.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,o){const a=[];let u=0;for(const d of i){let m=qu(d,o.wc(u));m==null&&(m={nullValue:"NULL_VALUE"}),a.push(m),u++}return{arrayValue:{values:a}}})(n,e)}return(function(i,o){if((i=Ut(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return xO(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=dt.fromDate(i);return{timestampValue:ud(o.serializer,a)}}if(i instanceof dt){const a=new dt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:ud(o.serializer,a)}}if(i instanceof Yi)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof $n)return{bytesValue:VI(o.serializer,i._byteString)};if(i instanceof At){const a=o.databaseId,u=i.firestore._databaseId;if(!u.isEqual(a))throw o.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Og(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof Ji)return(function(u,d){return{mapValue:{fields:{[cI]:{stringValue:fI},[od]:{arrayValue:{values:u.toArray().map((h=>{if(typeof h!="number")throw d.Sc("VectorValues must only contain numeric values.");return kg(d.serializer,h)}))}}}}}})(i,o);throw o.Sc(`Unsupported field value: ${bd(i)}`)})(n,e)}function _w(n,e){const t={};return rI(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ms(n,((i,o)=>{const a=qu(o,e.mc(i));a!=null&&(t[i]=a)})),{mapValue:{fields:t}}}function vw(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof dt||n instanceof Yi||n instanceof $n||n instanceof At||n instanceof Bd||n instanceof Ji)}function ny(n,e,t){if(!vw(t)||!nI(t)){const i=bd(t);throw i==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+i)}}function jm(n,e,t){if((e=Ut(e))instanceof qd)return e._internalPath;if(typeof e=="string")return iy(n,e);throw hd("Field path arguments must be of type string or ",n,!1,void 0,t)}const Y3=new RegExp("[~\\*/\\[\\]]");function iy(n,e,t){if(e.search(Y3)>=0)throw hd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new qd(...e.split("."))._internalPath}catch{throw hd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function hd(n,e,t,i,o){const a=i&&!i.isEmpty(),u=o!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let m="";return(a||u)&&(m+=" (found",a&&(m+=` in field ${i}`),u&&(m+=` in document ${o}`),m+=")"),new ge(re.INVALID_ARGUMENT,d+n+m)}function Tw(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(e,t,i,o,a){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new At(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new J3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Hd("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class J3 extends Ew{data(){return super.data()}}function Hd(n,e){return typeof e=="string"?iy(n,e):e instanceof qd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $3(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ge(re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ry{}class Sw extends ry{}function JS(n,e,...t){let i=[];e instanceof ry&&i.push(e),i=i.concat(t),(function(a){const u=a.filter((m=>m instanceof sy)).length,d=a.filter((m=>m instanceof Kd)).length;if(u>1||u>0&&d>0)throw new ge(re.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const o of i)n=o._apply(n);return n}class Kd extends Sw{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new Kd(e,t,i)}_apply(e){const t=this._parse(e);return Aw(e._query,t),new bo(e.firestore,e.converter,Bm(e._query,t))}_parse(e){const t=ey(e.firestore);return(function(a,u,d,m,h,_,T){let S;if(h.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new ge(re.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){WS(T,_);const L=[];for(const F of T)L.push(XS(m,a,F));S={arrayValue:{values:L}}}else S=XS(m,a,T)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||WS(T,_),S=K3(d,u,T,_==="in"||_==="not-in");return kt.create(h,_,S)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function $S(n,e,t){const i=e,o=Hd("where",n);return Kd._create(o,i,t)}class sy extends ry{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new sy(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:yi.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,a){let u=o;const d=a.getFlattenedFilters();for(const m of d)Aw(u,m),u=Bm(u,m)})(e._query,t),new bo(e.firestore,e.converter,Bm(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class oy extends Sw{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new oy(e,t)}_apply(e){const t=(function(o,a,u){if(o.startAt!==null)throw new ge(re.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new ge(re.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new wu(a,u)})(e._query,this._field,this._direction);return new bo(e.firestore,e.converter,(function(o,a){const u=o.explicitOrderBy.concat([a]);return new Qa(o.path,o.collectionGroup,u,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,t))}}function QS(n,e="asc"){const t=e,i=Hd("orderBy",n);return oy._create(i,t)}function XS(n,e,t){if(typeof(t=Ut(t))=="string"){if(t==="")throw new ge(re.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!vI(e)&&t.indexOf("/")!==-1)throw new ge(re.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(ut.fromString(t));if(!Se.isDocumentKey(i))throw new ge(re.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return uS(n,new Se(i))}if(t instanceof At)return uS(n,t._key);throw new ge(re.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${bd(t)}.`)}function WS(n,e){if(!Array.isArray(n)||n.length===0)throw new ge(re.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Aw(n,e){const t=(function(o,a){for(const u of o)for(const d of u.getFlattenedFilters())if(a.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ge(re.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ge(re.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class Q3{convertValue(e,t="none"){switch(Rs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return St(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ws(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw we(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Ms(e,((o,a)=>{i[o]=this.convertValue(a,t)})),i}convertVectorValue(e){var i,o,a;const t=(a=(o=(i=e.fields)==null?void 0:i[od].arrayValue)==null?void 0:o.values)==null?void 0:a.map((u=>St(u.doubleValue)));return new Ji(t)}convertGeoPoint(e){return new Yi(St(e.latitude),St(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Md(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Au(e));default:return null}}convertTimestamp(e){const t=Is(e);return new dt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=ut.fromString(e);We(qI(i),9688,{name:e});const o=new Cu(i.get(1),i.get(3)),a=new Se(i.popFirst(5));return o.isEqual(t)||xr(`Document ${a} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X3(n,e,t){let i;return i=n?n.toFirestore(e):e,i}class hu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class go extends Ew{constructor(e,t,i,o,a,u){super(e,t,i,o,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Bf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Hd("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(re.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=go._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}go._jsonSchemaVersion="firestore/documentSnapshot/1.0",go._jsonSchema={type:Vt("string",go._jsonSchemaVersion),bundleSource:Vt("string","DocumentSnapshot"),bundleName:Vt("string"),bundle:Vt("string")};class Bf extends go{data(e={}){return super.data(e)}}class Pa{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new hu(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Bf(this._firestore,this._userDataWriter,i.key,i,new hu(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ge(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,a){if(o._snapshot.oldDocs.isEmpty()){let u=0;return o._snapshot.docChanges.map((d=>{const m=new Bf(o._firestore,o._userDataWriter,d.doc.key,d.doc,new hu(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:m,oldIndex:-1,newIndex:u++}}))}{let u=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((d=>a||d.type!==3)).map((d=>{const m=new Bf(o._firestore,o._userDataWriter,d.doc.key,d.doc,new hu(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);let h=-1,_=-1;return d.type!==0&&(h=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),d.type!==1&&(u=u.add(d.doc),_=u.indexOf(d.doc.key)),{type:W3(d.type),doc:m,oldIndex:h,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(re.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Pa._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Rg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),i.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),o.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function W3(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return we(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fm(n){n=$i(n,At);const e=$i(n.firestore,Wa);return k3(Zg(e),n._key).then((t=>j3(e,n,t)))}Pa._jsonSchemaVersion="firestore/querySnapshot/1.0",Pa._jsonSchema={type:Vt("string",Pa._jsonSchemaVersion),bundleSource:Vt("string","QuerySnapshot"),bundleName:Vt("string"),bundle:Vt("string")};class Cw extends Q3{constructor(e){super(),this.firestore=e}convertBytes(e){return new $n(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new At(this.firestore,null,t)}}function ZS(n){n=$i(n,bo);const e=$i(n.firestore,Wa),t=Zg(e),i=new Cw(e);return $3(n._query),V3(t,n._query).then((o=>new Pa(e,i,n,o)))}function wa(n,e,t){n=$i(n,At);const i=$i(n.firestore,Wa),o=X3(n.converter,e);return ay(i,[B3(ey(i),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,gi.none())])}function Nf(n,e,t,...i){n=$i(n,At);const o=$i(n.firestore,Wa),a=ey(o);let u;return u=typeof(e=Ut(e))=="string"||e instanceof qd?H3(a,"updateDoc",n._key,e,t,i):z3(a,"updateDoc",n._key,e),ay(o,[u.toMutation(n._key,gi.exists(!0))])}function Z3(n){return ay($i(n.firestore,Wa),[new Vg(n._key,gi.none())])}function ay(n,e){return(function(i,o){const a=new wr;return i.asyncQueue.enqueueAndForget((async()=>S3(await P3(i),o,a))),a.promise})(Zg(n),e)}function j3(n,e,t){const i=t.docs.get(e._key),o=new Cw(n);return new go(n,o,e._key,i,new hu(t.hasPendingWrites,t.fromCache),e.converter)}function fn(){return new ty("serverTimestamp")}(function(e,t=!0){(function(o){Ya=o})(Io),_o(new As("firestore",((i,{instanceIdentifier:o,options:a})=>{const u=i.getProvider("app").getImmediate(),d=new Wa(new BL(i.getProvider("auth-internal")),new KL(u,i.getProvider("app-check-internal")),(function(h,_){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new ge(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Cu(h.options.projectId,_)})(u,o),u);return a={useFetchStreams:t,...a},d._setSettings(a),d}),"PUBLIC").setMultipleInstances(!0)),Bi(X0,W0,e),Bi(X0,W0,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iw="firebasestorage.googleapis.com",e6="storageBucket",t6=120*1e3,n6=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji extends Wi{constructor(e,t,i=0){super(dm(e),`Firebase Storage: ${t} (${dm(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ji.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return dm(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Xi;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Xi||(Xi={}));function dm(n){return"storage/"+n}function i6(){const n="An unknown error occurred, please check the error payload for server response.";return new ji(Xi.UNKNOWN,n)}function r6(){return new ji(Xi.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function s6(){return new ji(Xi.CANCELED,"User canceled the upload/download.")}function o6(n){return new ji(Xi.INVALID_URL,"Invalid URL '"+n+"'.")}function a6(n){return new ji(Xi.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function jS(n){return new ji(Xi.INVALID_ARGUMENT,n)}function ww(){return new ji(Xi.APP_DELETED,"The Firebase app was deleted.")}function l6(n){return new ji(Xi.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=di.makeFromUrl(e,t)}catch{return new di(e,"")}if(i.path==="")return i;throw a6(e)}static makeFromUrl(e,t){let i=null;const o="([A-Za-z0-9.\\-_]+)";function a(oe){oe.path.charAt(oe.path.length-1)==="/"&&(oe.path_=oe.path_.slice(0,-1))}const u="(/(.*))?$",d=new RegExp("^gs://"+o+u,"i"),m={bucket:1,path:3};function h(oe){oe.path_=decodeURIComponent(oe.path)}const _="v[A-Za-z0-9_]+",T=t.replace(/[.]/g,"\\."),S="(/([^?#]*).*)?$",I=new RegExp(`^https?://${T}/${_}/b/${o}/o${S}`,"i"),L={bucket:1,path:3},F=t===Iw?"(?:storage.googleapis.com|storage.cloud.google.com)":t,V="([^?#]*)",K=new RegExp(`^https?://${F}/${o}/${V}`,"i"),j=[{regex:d,indices:m,postModify:a},{regex:I,indices:L,postModify:h},{regex:K,indices:{bucket:1,path:2},postModify:h}];for(let oe=0;oe<j.length;oe++){const de=j[oe],ue=de.regex.exec(e);if(ue){const x=ue[de.indices.bucket];let R=ue[de.indices.path];R||(R=""),i=new di(x,R),de.postModify(i);break}}if(i==null)throw o6(e);return i}}class u6{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c6(n,e,t){let i=1,o=null,a=null,u=!1,d=0;function m(){return d===2}let h=!1;function _(...V){h||(h=!0,e.apply(null,V))}function T(V){o=setTimeout(()=>{o=null,n(I,m())},V)}function S(){a&&clearTimeout(a)}function I(V,...K){if(h){S();return}if(V){S(),_.call(null,V,...K);return}if(m()||u){S(),_.call(null,V,...K);return}i<64&&(i*=2);let j;d===1?(d=2,j=0):j=(i+Math.random())*1e3,T(j)}let L=!1;function F(V){L||(L=!0,S(),!h&&(o!==null?(V||(d=2),clearTimeout(o),T(0)):V||(d=1)))}return T(0),a=setTimeout(()=>{u=!0,F(!0)},t),F}function f6(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d6(n){return n!==void 0}function eA(n,e,t,i){if(i<e)throw jS(`Invalid value for '${n}'. Expected ${e} or greater.`);if(i>t)throw jS(`Invalid value for '${n}'. Expected ${t} or less.`)}function h6(n){const e=encodeURIComponent;let t="?";for(const i in n)if(n.hasOwnProperty(i)){const o=e(i)+"="+e(n[i]);t=t+o+"&"}return t=t.slice(0,-1),t}var pd;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(pd||(pd={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p6(n,e){const t=n>=500&&n<600,o=[408,429].indexOf(n)!==-1,a=e.indexOf(n)!==-1;return t||o||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m6{constructor(e,t,i,o,a,u,d,m,h,_,T,S=!0,I=!1){this.url_=e,this.method_=t,this.headers_=i,this.body_=o,this.successCodes_=a,this.additionalRetryCodes_=u,this.callback_=d,this.errorCallback_=m,this.timeout_=h,this.progressCallback_=_,this.connectionFactory_=T,this.retry=S,this.isUsingEmulator=I,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((L,F)=>{this.resolve_=L,this.reject_=F,this.start_()})}start_(){const e=(i,o)=>{if(o){i(!1,new xf(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const u=d=>{const m=d.loaded,h=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(m,h)};this.progressCallback_!==null&&a.addUploadProgressListener(u),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(u),this.pendingConnection_=null;const d=a.getErrorCode()===pd.NO_ERROR,m=a.getStatus();if(!d||p6(m,this.additionalRetryCodes_)&&this.retry){const _=a.getErrorCode()===pd.ABORT;i(!1,new xf(!1,null,_));return}const h=this.successCodes_.indexOf(m)!==-1;i(!0,new xf(h,a))})},t=(i,o)=>{const a=this.resolve_,u=this.reject_,d=o.connection;if(o.wasSuccessCode)try{const m=this.callback_(d,d.getResponse());d6(m)?a(m):a()}catch(m){u(m)}else if(d!==null){const m=i6();m.serverResponse=d.getErrorText(),this.errorCallback_?u(this.errorCallback_(d,m)):u(m)}else if(o.canceled){const m=this.appDelete_?ww():s6();u(m)}else{const m=r6();u(m)}};this.canceled_?t(!1,new xf(!1,null,!0)):this.backoffId_=c6(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&f6(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class xf{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function g6(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function y6(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function _6(n,e){e&&(n["X-Firebase-GMPID"]=e)}function v6(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function T6(n,e,t,i,o,a,u=!0,d=!1){const m=h6(n.urlParams),h=n.url+m,_=Object.assign({},n.headers);return _6(_,e),g6(_,t),y6(_,a),v6(_,i),new m6(h,n.method,_,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,o,u,d)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E6(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function S6(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(e,t){this._service=e,t instanceof di?this._location=t:this._location=di.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new md(e,t)}get root(){const e=new di(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return S6(this._location.path)}get storage(){return this._service}get parent(){const e=E6(this._location.path);if(e===null)return null;const t=new di(this._location.bucket,e);return new md(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw l6(e)}}function tA(n,e){const t=e==null?void 0:e[e6];return t==null?null:di.makeFromBucketSpec(t,n)}function A6(n,e,t,i={}){n.host=`${e}:${t}`;const o=Co(e);o&&(fg(`https://${n.host}/b`),dg("Storage",!0)),n._isUsingEmulator=!0,n._protocol=o?"https":"http";const{mockUserToken:a}=i;a&&(n._overrideAuthToken=typeof a=="string"?a:lC(a,n.app.options.projectId))}class C6{constructor(e,t,i,o,a,u=!1){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=o,this._firebaseVersion=a,this._isUsingEmulator=u,this._bucket=null,this._host=Iw,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=t6,this._maxUploadRetryTime=n6,this._requests=new Set,o!=null?this._bucket=di.makeFromBucketSpec(o,this._host):this._bucket=tA(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=di.makeFromBucketSpec(this._url,e):this._bucket=tA(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){eA("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){eA("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(An(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new md(this,e)}_makeRequest(e,t,i,o,a=!0){if(this._deleted)return new u6(ww());{const u=T6(e,this._appId,i,o,t,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}async makeRequestWithTokens(e,t){const[i,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,i,o).getPromise()}}const nA="@firebase/storage",iA="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rw="storage";function I6(n=mg(),e){n=Ut(n);const i=Cd(n,Rw).getImmediate({identifier:e}),o=sC("storage");return o&&w6(i,...o),i}function w6(n,e,t,i={}){A6(n,e,t,i)}function R6(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),o=n.getProvider("app-check-internal");return new C6(t,i,o,e,Io)}function b6(){_o(new As(Rw,R6,"PUBLIC").setMultipleInstances(!0)),Bi(nA,iA,""),Bi(nA,iA,"esm2020")}b6();const N6={apiKey:"AIzaSyBS-VEqFtxSaxfBju7nRTB7iRu71V5PZUM",authDomain:"storytime-cea95.firebaseapp.com",projectId:"storytime-cea95",storageBucket:"storytime-cea95.firebasestorage.app",messagingSenderId:"790986694128",appId:"1:790986694128:web:05a77ed50c300ad8671135"},ly=fC(N6),vr=OL(ly),nn=L3(ly);I6(ly);const bw=new Er,Nw=new Tr,xw=new Sr;bw.setCustomParameters({prompt:"select_account"});Nw.setCustomParameters({display:"popup"});xw.addScope("read:user");const rA={async signUp(n,e,t){try{const i=await E2(vr,n,e);return await C2(i.user,{displayName:t}),await wa(En(nn,"users",i.user.uid),{email:n,displayName:t,photoURL:null,createdAt:fn(),lastLogin:fn(),role:"user"}),{success:!0,user:i.user}}catch(i){return{success:!1,error:i.message}}},async signIn(n,e){try{const t=await S2(vr,n,e),i=En(nn,"users",t.user.uid);return await Nf(i,{lastLogin:fn()}),{success:!0,user:t.user}}catch(t){return{success:!1,error:t.message}}},async signInWithGoogle(){try{const e=(await rm(vr,bw)).user;return(await fm(En(nn,"users",e.uid))).exists()?await Nf(En(nn,"users",e.uid),{lastLogin:fn()}):await wa(En(nn,"users",e.uid),{email:e.email,displayName:e.displayName,photoURL:e.photoURL,createdAt:fn(),lastLogin:fn(),role:"user"}),{success:!0,user:e}}catch(n){return{success:!1,error:n.message}}},async signInWithFacebook(){try{const e=(await rm(vr,Nw)).user;return(await fm(En(nn,"users",e.uid))).exists()?await Nf(En(nn,"users",e.uid),{lastLogin:fn()}):await wa(En(nn,"users",e.uid),{email:e.email,displayName:e.displayName,photoURL:e.photoURL,createdAt:fn(),lastLogin:fn(),role:"user"}),{success:!0,user:e}}catch(n){return{success:!1,error:n.message}}},async signInWithGithub(){try{const e=(await rm(vr,xw)).user;return(await fm(En(nn,"users",e.uid))).exists()?await Nf(En(nn,"users",e.uid),{lastLogin:fn()}):await wa(En(nn,"users",e.uid),{email:e.email,displayName:e.displayName,photoURL:e.photoURL,createdAt:fn(),lastLogin:fn(),role:"user"}),{success:!0,user:e}}catch(n){return{success:!1,error:n.message}}},async logout(){try{return await b2(vr),{success:!0}}catch(n){return{success:!1,error:n.message}}},async resetPassword(n){try{return await T2(vr,n),{success:!0}}catch(e){return{success:!1,error:e.message}}},getCurrentUser(){return vr.currentUser},onAuthStateChange(n){return R2(vr,n)}},hm={async saveBook(n,e){const t={...e,userId:n,updatedAt:fn()};return e.id||(t.createdAt=fn(),t.id=crypto.randomUUID()),await wa(En(nn,"users",n,"books",t.id),t),t},async getUserBooks(n){const e=JS(zS(nn,"users",n,"books"),QS("createdAt","desc"));return(await ZS(e)).docs.map(i=>({id:i.id,...i.data()}))},async getPublicBooks(){const n=JS(zS(nn,"books"),$S("publishStatus","==","universal"),$S("isApproved","==",!0),QS("createdAt","desc"));return(await ZS(n)).docs.map(t=>({id:t.id,...t.data()}))},async deleteBook(n,e){await Z3(En(nn,"users",n,"books",e))},async publishBook(n,e){const t={...e,userId:n,publishedAt:fn(),isApproved:!0,publishStatus:"universal"};return await wa(En(nn,"books",e.id),t),t}},x6="StoryTimeDB",qa="books",M6=1,Mw=()=>new Promise((n,e)=>{const t=indexedDB.open(x6,M6);t.onupgradeneeded=()=>{const i=t.result;i.objectStoreNames.contains(qa)||i.createObjectStore(qa,{keyPath:"id"})},t.onsuccess=()=>n(t.result),t.onerror=()=>e(t.error)}),sA=async()=>{const n=await Mw();return new Promise((e,t)=>{const a=n.transaction(qa,"readonly").objectStore(qa).getAll();a.onsuccess=()=>e(a.result||[]),a.onerror=()=>t(a.error)})},ou=async n=>{const e=await Mw();return new Promise((t,i)=>{const u=e.transaction(qa,"readwrite").objectStore(qa).put(n);u.onsuccess=()=>t(),u.onerror=()=>i(u.error)})},D6=()=>typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():"book-"+Date.now()+"-"+Math.random().toString(36).substr(2,9),P6=()=>{const[n,e]=He.useState("language_select"),[t,i]=He.useState("en"),[o,a]=He.useState(null),[u,d]=He.useState([]),[m,h]=He.useState([]),[_,T]=He.useState(null),[S,I]=He.useState(null),[L,F]=He.useState(!1),[V,K]=He.useState(""),[ne,j]=He.useState(Date.now());He.useEffect(()=>{const ee=rA.onAuthStateChange(async Z=>{Z&&console.log("Existing Firebase session found:",Z.uid)});return()=>ee()},[]),He.useEffect(()=>{(async()=>{try{const Z=await sA();if(Z.length>0)d(Z),h(Z);else{const he=[{id:"seed-1",title:"The Brave Little Lion",author:"Alex J.",creatorName:"System",isApproved:!0,coverImage:"https://picsum.photos/seed/lion/800/450",language:"en",ageGroup:3,backgroundColor:"#fffbeb",createdAt:Date.now()-864e5,universalRating:4.8,personalRating:0,publishStatus:"universal",pages:[{id:"p1",imageUrl:"https://picsum.photos/seed/lion1/800/450",text:"Once upon a time, there was a little lion named Leo."},{id:"p2",imageUrl:"https://picsum.photos/seed/lion2/800/450",text:"Leo was very small, but he had a very big roar!"}]}];await ou(he[0]),d(he),h(he)}}catch(Z){console.error("Failed to load from IndexedDB",Z)}})()},[]);const oe=He.useCallback(async ee=>{try{F(!0),K(Q("syncing"));const Z=await hm.getUserBooks(ee);if(Z.length>0){const he=await sA(),pe=new Set(he.map(z=>z.id)),P=Z.filter(z=>!pe.has(z.id));if(P.length>0){for(const le of P)await ou(le);const z=[...he,...P];d(z),h(z)}}j(Date.now())}catch(Z){console.error("Failed to load books from Firebase",Z)}finally{F(!1)}},[]),de=async(ee,Z)=>{var P;const he=((P=mo.find(z=>z.code===ee))==null?void 0:P.name)||"English",pe=new eC({apiKey:"your_gemini_api_key_here"});F(!0),K("Magical forces are translating stories...");try{const z=await Promise.all(Z.map(async le=>{if(le.language===ee)return le;try{const ce=`Translate this children's book into ${he}. 
          Return ONLY a JSON object with keys "title" and "pages" (an array of strings).
          Original Language: ${le.language}
          Book Title: "${le.title}"
          Pages: ${JSON.stringify(le.pages.map(Re=>Re.text))}`,Te=await pe.models.generateContent({model:"gemini-3-flash-preview",contents:ce,config:{responseMimeType:"application/json"}}),Ae=JSON.parse(Te.text||"{}");return{...le,title:Ae.title||le.title,language:ee,pages:le.pages.map((Re,Ze)=>{var je;return{...Re,text:((je=Ae.pages)==null?void 0:je[Ze])||Re.text}})}}catch(ce){return console.warn(`Could not translate book ${le.id}, keeping original.`,ce),le}}));h(z)}catch(z){console.error("Session translation process failed",z),h(Z)}finally{F(!1),e(o?"library":"login")}},ue=ee=>{i(ee),de(ee,u)},x=async ee=>{ee!==t&&(i(ee),await R(ee))},R=async ee=>{var he;const Z=((he=mo.find(pe=>pe.code===ee))==null?void 0:he.name)||"English";F(!0),K(Q("translating"));try{const pe=await Promise.all(m.map(async P=>{if(P.language===ee)return P;try{const z=`Translate this children's book into ${Z}.
          Return ONLY a JSON object with keys "title" and "pages" (an array of strings).
          Original Language: ${P.language}
          Book Title: "${P.title}"
          Pages: ${JSON.stringify(P.pages.map(Te=>Te.text))}`,le=await ai.models.generateContent({model:"gemini-3-flash-preview",contents:z,config:{responseMimeType:"application/json"}}),ce=JSON.parse(le.text||"{}");return{...P,title:ce.title||P.title,language:ee,pages:P.pages.map((Te,Ae)=>{var Re;return{...Te,text:((Re=ce.pages)==null?void 0:Re[Ae])||Te.text}})}}catch(z){return console.warn(`Could not translate book ${P.id}, keeping original.`,z),P}}));h(pe)}catch(pe){console.error("Translation process failed",pe)}finally{F(!1)}},N=async ee=>{a(ee),ee.role==="admin"&&await oe(ee.uid),e("library")},D=async()=>{await rA.logout(),a(null),e("login")},k=async ee=>{F(!0),K(Q("saving"));try{const Z=u.find(z=>z.id===ee.id),he=!Z,pe={...ee,id:he?D6():ee.id,creatorName:he?(o==null?void 0:o.name)||"Explorer":ee.creatorName,isApproved:(o==null?void 0:o.role)==="admin"?!0:ee.isApproved,createdAt:he?Date.now():(Z==null?void 0:Z.createdAt)||Date.now()};await ou(pe);let P=!1;if(o&&o.uid!=="admin")try{await hm.saveBook(o.uid,pe),P=!0}catch(z){console.warn("Firebase sync failed, but book saved locally:",z),P=!1}he?(d(z=>[pe,...z]),h(z=>[pe,...z])):(d(z=>z.map(le=>le.id===pe.id?pe:le)),h(z=>z.map(le=>le.id===pe.id?pe:le))),j(Date.now()),F(!1),I(null),e("library")}catch(Z){console.error("Save failed:",Z),F(!1),alert("Storage error! Could not save your story.")}},q=async ee=>{const Z=u.map(pe=>pe.id===ee?{...pe,isApproved:!0}:pe);d(Z),h(m.map(pe=>pe.id===ee?{...pe,isApproved:!0}:pe));const he=Z.find(pe=>pe.id===ee);he&&(await ou(he),o&&o.uid!=="admin"&&await hm.publishBook(o.uid,he))},M=async(ee,Z,he)=>{const pe=z=>z.id===ee?{...z,[Z==="personal"?"personalRating":"universalRating"]:he}:z;d(z=>z.map(pe)),h(z=>z.map(pe));const P=u.find(z=>z.id===ee);P&&await ou({...P,[Z==="personal"?"personalRating":"universalRating"]:he})},ke=ee=>{T(ee),e("reader")},lt=ee=>{I(ee),e("creator")},Q=ee=>{var Z,he;return((Z=GT[ee])==null?void 0:Z[t])||((he=GT[ee])==null?void 0:he.en)||ee};return L?O.jsxs("div",{className:"min-h-screen w-full bg-gradient-to-br from-rose-400 to-pink-600 flex flex-col items-center justify-center text-white p-10 text-center relative overflow-hidden",children:[O.jsxs("div",{className:"relative mb-20 flex flex-col items-center",children:[O.jsxs("div",{className:"relative w-40 h-40",children:[O.jsx("div",{className:"absolute left-1/2 -bottom-2 w-2 bg-green-500 rounded-full origin-bottom animate-[grow-stem_2s_ease-in-out_infinite]",style:{height:"60px",marginLeft:"-4px"}}),O.jsxs("div",{className:"absolute left-1/2 top-4 w-16 h-16 origin-center animate-[bloom_2s_ease-in-out_infinite]",style:{marginLeft:"-32px"},children:[O.jsx("div",{className:"absolute inset-0 bg-yellow-400 rounded-full scale-50"}),[0,60,120,180,240,300].map(ee=>O.jsx("div",{className:"absolute inset-0 bg-pink-300 rounded-full opacity-80",style:{transform:`rotate(${ee}deg) translateY(-20px)`,width:"32px",height:"48px",left:"16px"}},ee))]})]}),O.jsx("p",{className:"text-3xl font-kids mt-8 animate-pulse drop-shadow-md",children:V})]}),O.jsx("style",{children:`
          @keyframes grow-stem { 0% { transform: scaleY(0.1); } 50% { transform: scaleY(1); } 100% { transform: scaleY(0.1); } }
          @keyframes bloom { 0% { transform: scale(0.2) rotate(0deg); opacity: 0; } 50% { transform: scale(1.2) rotate(180deg); opacity: 1; } 100% { transform: scale(0.2) rotate(360deg); opacity: 0; } }
        `})]}):O.jsxs("div",{className:"min-h-screen w-full overflow-hidden flex flex-col",children:[n==="language_select"&&O.jsx(Eb,{onSelect:ue}),n==="login"&&O.jsx(Ab,{onLogin:N,t:Q}),n==="library"&&o&&O.jsx(Cb,{books:m,currentLang:t,auth:o,t:Q,onOpenBook:ke,onEditBook:lt,onCreateClick:()=>{I(null),e("creator")},onResetLang:()=>e("language_select"),onRate:M,onApprove:q,lastSync:ne,onLogout:D,onChangeLanguage:x}),n==="reader"&&_&&O.jsx(Ib,{book:_,onClose:()=>e("library"),t:Q,onRate:M}),n==="creator"&&o&&O.jsx(Uk,{onSave:k,onCancel:()=>{I(null),e("library")},uiLang:t,t:Q,auth:o,initialBook:S||void 0})]})},Dw=document.getElementById("root");if(!Dw)throw new Error("Could not find root element to mount to");const k6=Tb.createRoot(Dw);k6.render(O.jsx(db.StrictMode,{children:O.jsx(P6,{})}));
